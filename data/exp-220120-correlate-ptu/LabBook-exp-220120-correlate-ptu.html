<!doctype html>
<html lang="en">
<head>
<title>Lab book Fluotracify</title>
<!-- 2022-04-05 Di 13:13 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Org-mode">
<meta name="author" content="Alexander Seltmann">

<link  href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
<style>
/* org mode styles on top of twbs */

html {
    position: relative;
    min-height: 100%;
}

body {
    font-size: 18px;
    margin-bottom: 105px;
}

footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 101px;
    background-color: #f5f5f5;
}

footer > div {
    padding: 10px;
}

footer p {
    margin: 0 0 5px;
    text-align: center;
    font-size: 16px;
}

#table-of-contents {
    margin-top: 20px;
    margin-bottom: 20px;
}

blockquote p {
    font-size: 18px;
}

pre {
    font-size: 16px;
}

.footpara {
    display: inline-block;
}

figcaption {
  font-size: 16px;
  color: #666;
  font-style: italic;
  padding-bottom: 15px;
}

/* from twbs docs */

.bs-docs-sidebar.affix {
    position: static;
}
@media (min-width: 768px) {
    .bs-docs-sidebar {
        padding-left: 20px;
    }
}

/* All levels of nav */
.bs-docs-sidebar .nav > li > a {
    display: block;
    padding: 4px 20px;
    font-size: 14px;
    font-weight: 500;
    color: #999;
}
.bs-docs-sidebar .nav > li > a:hover,
.bs-docs-sidebar .nav > li > a:focus {
    padding-left: 19px;
    color: #A1283B;
    text-decoration: none;
    background-color: transparent;
    border-left: 1px solid #A1283B;
}
.bs-docs-sidebar .nav > .active > a,
.bs-docs-sidebar .nav > .active:hover > a,
.bs-docs-sidebar .nav > .active:focus > a {
    padding-left: 18px;
    font-weight: bold;
    color: #A1283B;
    background-color: transparent;
    border-left: 2px solid #A1283B;
}

/* Nav: second level (shown on .active) */
.bs-docs-sidebar .nav .nav {
    display: none; /* Hide by default, but at >768px, show it */
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 30px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav > li > a:focus {
    padding-left: 29px;
}
.bs-docs-sidebar .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav > .active:focus > a {
    padding-left: 28px;
    font-weight: 500;
}

/* Nav: third level (shown on .active) */
.bs-docs-sidebar .nav .nav .nav {
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 40px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav .nav > li > a:focus {
    padding-left: 39px;
}
.bs-docs-sidebar .nav .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav .nav > .active:focus > a {
    padding-left: 38px;
    font-weight: 500;
}

/* Show and affix the side nav when space allows it */
@media (min-width: 992px) {
    .bs-docs-sidebar .nav > .active > ul {
        display: block;
    }
    /* Widen the fixed sidebar */
    .bs-docs-sidebar.affix,
    .bs-docs-sidebar.affix-bottom {
        width: 213px;
    }
    .bs-docs-sidebar.affix {
        position: fixed; /* Undo the static from mobile first approach */
        top: 20px;
    }
    .bs-docs-sidebar.affix-bottom {
        position: absolute; /* Undo the static from mobile first approach */
    }
    .bs-docs-sidebar.affix .bs-docs-sidenav,.bs-docs-sidebar.affix-bottom .bs-docs-sidenav {
        margin-top: 0;
        margin-bottom: 0
    }
}
@media (min-width: 1200px) {
    /* Widen the fixed sidebar again */
    .bs-docs-sidebar.affix-bottom,
    .bs-docs-sidebar.affix {
        width: 263px;
    }
}
</style>
<script>
$(function() {
    'use strict';

    $('.bs-docs-sidebar li').first().addClass('active');

    $(document.body).scrollspy({target: '.bs-docs-sidebar'});

    $('.bs-docs-sidebar').affix();
});
</script><style type="text/css">.example {background-color: #FBFBBF;}</style>
<style type="text/css">pre.src-emacs-lisp {background-color: #F7ECFB;}</style>
<style type="text/css">pre.src-sh {background-color: #F0FBE9;}</style>
<style type="text/css">pre.src-tmux {background-color: #E1EED8;}</style>
<style type="text/css">pre.src-python {background-color: #E6EDF4;}</style>
<style type="text/css">pre.src-jupyter-python {background-color: #FAEAE1;}</style>
<style type="text/css">details {padding: 1em; background-color: #f0f0f0; border-radius: 15px; color: hsl(157 75% 20%); font-size: 0.9em; box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;}</style>
<style type="text/css">details:hover {background:pink;}</style>
<style type="text/css">table {display: block; overflow-x: auto; white-space: nowrap;}</style>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "center",
  displayIndent: "2em",
  messageStyle: "none",
  "HTML-CSS": {
    scale: 100,
    styles: {
      ".MathJax_Display": {
        "font-size": "100%"
      }
    }
  },
  "SVG": {
    scale: 100,
    styles: {
      ".MathJax_SVG_Display": {
        "font-size": "100%",
        "margin-left": "-2.281em"
      }
    }
  }
});
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"></script>
</head>
<body>
<div id="content" class="container">
<div class="row"><div class="col-md-3 col-md-push-9"><nav id="table-of-contents">
<div id="text-table-of-contents" class="bs-docs-sidebar">
<ul class="nav">
<li><a href="#sec-1">1. Technical Notes</a>
<ul class="nav">
<li><a href="#sec-1-1">1.1. README</a>
<ul class="nav">
<li><a href="#sec-1-1-1">1.1.1. General:</a></li>
<li><a href="#sec-1-1-2">1.1.2. Code block languages used in this document</a></li>
<li><a href="#sec-1-1-3">1.1.3. Experiments workflow:</a></li>
<li><a href="#sec-1-1-4">1.1.4. Example for experimental setup procedure</a>
<ul class="nav">
<li><a href="#sec-jupyter-setup">1.1.4.1. Setting starting a jupyter kernel from a remote jupyter session using <code>emacs-jupyter</code> in <code>org babel</code></a></li>
</ul>
</li>
<li><a href="#sec-1-1-5">1.1.5. tools used (notes)</a>
<ul class="nav">
<li><a href="#sec-1-1-5-1">1.1.5.1. Emacs <code>magit</code></a></li>
<li><a href="#sec-1-1-5-2">1.1.5.2. jupyter</a></li>
<li><a href="#sec-1-1-5-3">1.1.5.3. mlflow</a></li>
<li><a href="#sec-1-1-5-4">1.1.5.4. tensorflow</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-2">1.2. Template for data entry and setup notes:</a>
<ul class="nav">
<li><a href="#sec-1-2-1">1.2.1. exp-#date-#title</a>
<ul class="nav">
<li><a href="#sec-1-2-1-1">1.2.1.1. git:</a></li>
<li><a href="#sec-1-2-1-2">1.2.1.2. System Metadata:</a></li>
<li><a href="#scripts-tmux">1.2.1.3. Tmux setup and scripts</a></li>
<li><a href="#ssh-tunneling">1.2.1.4. SSH tunneling</a></li>
<li><a href="#scripts-jp">1.2.1.5. jupyter scripts</a></li>
</ul>
</li>
<li><a href="#sec-1-2-2">1.2.2. Setup notes</a>
<ul class="nav">
<li><a href="#sec-tmux-setup">1.2.2.1. Setting up a tmux connection from using <code>ob-tmux</code> in <code>org-babel</code></a></li>
<li><a href="#sec-1-2-2-2">1.2.2.2. <code>emacs-jupyter</code> Setup</a></li>
</ul>
</li>
<li><a href="#sec-1-2-3">1.2.3. Notes on archiving</a>
<ul class="nav">
<li><a href="#sec-1-2-3-1">1.2.3.1. Exporting the LabBook.org to html in a twbs style</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-3">1.3. Organization of git</a>
<ul class="nav">
<li><a href="#sec-1-3-1">1.3.1. remote/origin/main branch:</a></li>
<li><a href="#sec-1-3-2">1.3.2. remote/origin/exp### branches:</a></li>
<li><a href="#sec-1-3-3">1.3.3. remote/origin/develop branch:</a></li>
<li><a href="#sec-1-3-4">1.3.4. remote/origin/data branch:</a></li>
<li><a href="#sec-1-3-5">1.3.5. Git TAGs</a>
<ul class="nav">
<li><a href="#sec-1-3-5-1">1.3.5.1. Stable versions:</a></li>
<li><a href="#sec-1-3-5-2">1.3.5.2. All tags from git:</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-4">1.4. Organization of code</a>
<ul class="nav">
<li><a href="#sec-1-4-1">1.4.1. scripts:</a></li>
<li><a href="#sec-1-4-2">1.4.2. src/</a>
<ul class="nav">
<li><a href="#sec-1-4-2-1">1.4.2.1. fluotracify/</a></li>
<li><a href="#sec-1-4-2-2">1.4.2.2. nanosimpy/</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-5">1.5. Changes in this repository (without "* Data" in this file)</a>
<ul class="nav">
<li><a href="#sec-1-5-1">1.5.1. Changes in LabBook.org (without "* Data")</a>
<ul class="nav">
<li><a href="#sec-1-5-1-1">1.5.1.1. 2022-02-19</a></li>
<li><a href="#sec-1-5-1-2">1.5.1.2. 2021-12-16</a></li>
<li><a href="#sec-1-5-1-3">1.5.1.3. 2021-08-05</a></li>
<li><a href="#sec-1-5-1-4">1.5.1.4. 2021-04-04</a></li>
<li><a href="#sec-1-5-1-5">1.5.1.5. 2020-11-04</a></li>
<li><a href="#sec-1-5-1-6">1.5.1.6. 2020-05-31</a></li>
<li><a href="#sec-1-5-1-7">1.5.1.7. 2020-05-07</a></li>
<li><a href="#sec-1-5-1-8">1.5.1.8. 2020-04-22</a></li>
<li><a href="#sec-1-5-1-9">1.5.1.9. 2020-03-30</a></li>
</ul>
</li>
<li><a href="#sec-1-5-2">1.5.2. Changes in src/fluotracify</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-2">2. Data</a>
<ul class="nav">
<li><a href="#sec-2-1">2.1. exp-220120-correlate-ptu</a>
<ul class="nav">
<li><a href="#sec-2-1-1">2.1.1. Setup: Jupyter 1 on HPC compute node 1</a></li>
<li><a href="#sec-2-1-2">2.1.2. Setup: Jupyter 2 on HPC compute node 2</a></li>
<li><a href="#sec-2-1-3">2.1.3. Setup: Jupyter 3 on local computer</a></li>
<li><a href="#sec-2-1-4">2.1.4. Experiment 1a: Correlate <code>all_clean_ptu</code> on Jupyter 1</a></li>
<li><a href="#sec-2-1-5">2.1.5. Experiment 1b: Correlate <code>all_dirty_ptu</code> on Jupyter 2</a></li>
<li><a href="#sec-2-1-6">2.1.6. Analysis 1 of no-correction vs weight=0 vs shift</a></li>
<li><a href="#sec-2-1-7">2.1.7. Analysis 2 of weight=0.2&#x2026;0.8</a></li>
<li><a href="#sec-2-1-8">2.1.8. Experiment 2a: Update packages and Correlate <code>all_clean_ptu</code> on Jupyter 1</a></li>
<li><a href="#sec-2-1-9">2.1.9. Experiment 2b: Correlate <code>all_dirty_ptu</code> on Jupyter 2</a></li>
<li><a href="#sec-2-1-10">2.1.10. Analysis 3 of multipletau vs tttr2xfcs, fixed <code>delete_and_shift</code>, <code>weight-random</code> and <code>weight-1-pred</code></a></li>
<li><a href="#sec-2-1-11">2.1.11. Analysis 4: show examples of all experimental traces</a></li>
<li><a href="#sec-2-1-12">2.1.12. learnings from exp-220120-correlate-ptu</a></li>
<li><a href="#sec-2-1-13">2.1.13. Analysis 5: fitting with Focuspoint instead of focus-fit-js</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</nav>
</div><div class="col-md-9 col-md-pull-3"><h1 class="title">Lab book Fluotracify</h1>


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Technical Notes</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> README</h3>
<div class="outline-text-3" id="text-1-1">
</div><div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1"><span class="section-number-4">1.1.1</span> General:</h4>
<div class="outline-text-4" id="text-1-1-1">
<ul class="org-ul">
<li>This file corresponds to my lab book for my doctoral thesis tackling
artifact correction in Fluorescence Correlation Spectroscopy (FCS)
measurements using Deep Neural Networks. It also contains notes taken
during the process of setting up this workflow for reproducible research.
</li>
<li>This file contains explanations of how things are organized, of the
workflow for doing experiments, changes made to the code, and the observed
behavior in the "* Data" section.
</li>
<li>The branching model used is described in <a href="http://starpu-simgrid.gforge.inria.fr/misc/SIGOPS_paper.pdf">this paper</a>. Therefore: if you
are interested in the "* Data" section, you have to <code>git clone</code> the <i>data</i>
branch of the repository. The <i>main</i> branch is clean from any results, it
contains only source code and the analysis.
</li>
<li>This project is my take on <a href="https://en.wikipedia.org/wiki/Open-notebook_science">Open-notebook science</a>. The idea was postulated in
a blog post in 2006:
<blockquote>
<p>
&#x2026; there is a URL to a laboratory notebook that is freely available and
indexed on common search engines. It does not necessarily have to look like
a paper notebook but it is essential that all of the information available
to the researchers to make their conclusions is equally available to the
rest of the world &#x2014;Jean-Claude Bradley
</p>
</blockquote>
</li>
<li>Proposal on how to deal with truly private data (e.g. notes from a
confidential meeting with a colleague), which might otherwise be noted in a
normal Lab notebook: do not include them here. Only notes relevant to the
current project should be taken
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-1-2" class="outline-4">
<h4 id="sec-1-1-2"><span class="section-number-4">1.1.2</span> Code block languages used in this document</h4>
<div class="outline-text-4" id="text-1-1-2">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">This is a sh block for shell / bash scripting. In the context of this file,</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">these blocks are mainly used for operations on my local computer.</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">In the LabBook.html rendering of this document, these blocks will have a</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">light green colour (#F0FBE9)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-tmux"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">This block can open and access tmux sessions, used for shell scripting on</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">remote computing clusters.</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">In the LabBook.html rendering of this document, these blocks will have a</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">distinct light green colour (#E1EED8)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">This is a python block. In the context of this file, it is seldomly used</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">(only for examplary scripts.)</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">In the LabBook.html rendering of this document, these blocks will have a</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">light blue colour (#E6EDF4)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">This is a jupyter-python block. The code is sent to a jupyter kernel running</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">on a remote high performance computing cluster. Most of my jupyter code is</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">executed this way.</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">In the LabBook.html rendering of this document, these blocks will have a</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">light orange colour (#FAEAE1)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #93a1a1;">;; </span><span style="color: #93a1a1;">This is a emacs-lisp block, the language used to customize Emacs, which is</span>
<span style="color: #93a1a1;">;; </span><span style="color: #93a1a1;">sometimes necessary, since the reproducible workflow of this LabBook is</span>
<span style="color: #93a1a1;">;; </span><span style="color: #93a1a1;">tightly integrated with Emacs and org-mode.</span>
<span style="color: #93a1a1;">;; </span><span style="color: #93a1a1;">In the LabBook.html rendering of this document, these blocks will have a</span>
<span style="color: #93a1a1;">;; </span><span style="color: #93a1a1;">light violet colour (#F7ECFB)</span>
</pre>
</div>

<pre class="example">
This is a literal example block. It can be used very flexibly - in the context
of this document the output of most code blocks is displayed this way.
In the LabBook.html rendering of this document, these blocks will have a light
yellow colour (#FBFBBF)
</pre>

<details>
<pre class="example">
This is a literal example block enclosed in a details block. This is useful to
make the page more readable by collapsing large amounts of output.
In the Labbook.html rendering of this document, the details block will have a
light grey colour (#f0f0f0) and a pink color when hovering above it.
</pre>
</details>
</div>
</div>

<div id="outline-container-sec-1-1-3" class="outline-4">
<h4 id="sec-1-1-3"><span class="section-number-4">1.1.3</span> Experiments workflow:</h4>
<div class="outline-text-4" id="text-1-1-3">
<ol class="org-ol">
<li>Create a new branch from <code>main</code>
</li>
<li>Print out the git log from the latest commit and the metadata
</li>
<li>Call the analysis scripts, follow the principles outlined in
<a href="#sec-1-4">Organization of code</a>
</li>
<li>All machine learning runs are saved in <code>data/mlruns</code>, all other data in
<code>data/#experiment-name</code>
</li>
<li>Add a <code>** exp-&lt;date&gt;-&lt;name&gt;</code>" section to this file under <a href="#sec-2">Data</a>
</li>
<li>Commit/push the results of this separate branch
</li>
<li>Merge this new branch with the remote <code>data</code> branch
</li>
</ol>
</div>
</div>
<div id="outline-container-sec-1-1-4" class="outline-4">
<h4 id="sec-1-1-4"><span class="section-number-4">1.1.4</span> Example for experimental setup procedure</h4>
<div class="outline-text-4" id="text-1-1-4">
</div><div id="outline-container-sec-jupyter-setup" class="outline-5">
<h5 id="sec-jupyter-setup"><a id="sec-1-1-4-1" name="sec-1-1-4-1"></a><span class="section-number-5">1.1.4.1</span> Setting starting a jupyter kernel from a remote jupyter session using <code>emacs-jupyter</code> in <code>org babel</code></h5>
<div class="outline-text-5" id="text-sec-jupyter-setup">
</div>
</div>
</div>

<div id="outline-container-sec-1-1-5" class="outline-4">
<h4 id="sec-1-1-5"><span class="section-number-4">1.1.5</span> tools used (notes)</h4>
<div class="outline-text-4" id="text-1-1-5">
</div><div id="outline-container-sec-1-1-5-1" class="outline-5">
<h5 id="sec-1-1-5-1"><span class="section-number-5">1.1.5.1</span> Emacs <code>magit</code></h5>
<div class="outline-text-5" id="text-1-1-5-1">
<ul class="org-ul">
<li><code>gitflow-avh</code> (<code>magit-flow</code>) to follow the flow
</li>
<li>possibly <a href="https://github.com/magit/magit-annex">https://github.com/magit/magit-annex</a> for large files. Follow this:
<a href="https://git-annex.branchable.com/walkthrough/">https://git-annex.branchable.com/walkthrough/</a>
</li>
<li>maybe check out git-toolbelt at some point
<a href="https://github.com/nvie/git-toolbelt#readme">https://github.com/nvie/git-toolbelt#readme</a> with
<a href="https://nvie.com/posts/git-power-tools/">https://nvie.com/posts/git-power-tools/</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-1-5-2" class="outline-5">
<h5 id="sec-1-1-5-2"><span class="section-number-5">1.1.5.2</span> jupyter</h5>
<div class="outline-text-5" id="text-1-1-5-2">
<ul class="org-ul">
<li>emacs jupyter for running and connecting to kernel on server:
<a href="https://github.com/dzop/emacs-jupyter">https://github.com/dzop/emacs-jupyter</a>
</li>
<li>if I actually still would use .ipynb files, these might come handy:
<ul class="org-ul">
<li>jupytext: <a href="https://github.com/mwouts/jupytext">https://github.com/mwouts/jupytext</a>
</li>
<li>nbstripout: <a href="https://github.com/kynan/nbstripout">https://github.com/kynan/nbstripout</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-1-5-3" class="outline-5">
<h5 id="sec-1-1-5-3"><span class="section-number-5">1.1.5.3</span> mlflow</h5>
<div class="outline-text-5" id="text-1-1-5-3">
<ul class="org-ul">
<li><a href="https://docs.faculty.ai/user-guide/experiments/index.html">https://docs.faculty.ai/user-guide/experiments/index.html</a> and
<a href="https://docs.microsoft.com/en-us/azure/databricks/_static/notebooks/hls-image-processing/02-image-segmentation-dl.html">https://docs.microsoft.com/en-us/azure/databricks/_static/notebooks/hls-image-processing/02-image-segmentation-dl.html</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-1-5-4" class="outline-5">
<h5 id="sec-1-1-5-4"><span class="section-number-5">1.1.5.4</span> tensorflow</h5>
<div class="outline-text-5" id="text-1-1-5-4">
<ul class="org-ul">
<li><a href="https://www.tensorflow.org/tensorboard/image_summaries">https://www.tensorflow.org/tensorboard/image_summaries</a>
</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Template for data entry and setup notes:</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> exp-#date-#title</h4>
<div class="outline-text-4" id="text-1-2-1">
</div><div id="outline-container-sec-1-2-1-1" class="outline-5">
<h5 id="sec-1-2-1-1"><span class="section-number-5">1.2.1.1</span> git:</h5>
<div class="outline-text-5" id="text-1-2-1-1">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #784437;">git</span> <span style="color: #78683f;">log</span> <span style="color: #3f7178;">-1</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-1-2" class="outline-5">
<h5 id="sec-1-2-1-2"><span class="section-number-5">1.2.1.2</span> System Metadata:</h5>
<div class="outline-text-5" id="text-1-2-1-2">
<div class="org-src-container">

<pre class="src src-jupyter-python" id="jp-metadata"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #7e544f;">os</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f7e67;">pprint</span>

<span style="color: #268bd2;">ramlist</span> = <span style="color: #7e544f;">os</span>.<span style="color: #37785e;">popen</span>(<span style="color: #2aa198;">'free -th'</span>).<span style="color: #7e544f;">readlines</span>()[-1].<span style="color: #7a4f7e;">split</span>()[1:]

<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'No of CPUs in system:'</span>, <span style="color: #7e544f;">os</span>.<span style="color: #37785e;">cpu_count</span>())
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'No of CPUs the current process can use:'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #657b83; font-weight: bold;">len</span>(<span style="color: #7e544f;">os</span>.<span style="color: #707e4f;">sched_getaffinity</span>(0)))
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'load average:'</span>, <span style="color: #7e544f;">os</span>.<span style="color: #783778;">getloadavg</span>())
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'os.uname(): '</span>, <span style="color: #7e544f;">os</span>.<span style="color: #3f7178;">uname</span>())
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'PID of process:'</span>, <span style="color: #7e544f;">os</span>.<span style="color: #4f7e67;">getpid</span>())
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'RAM total: {}, RAM used: {}, RAM free: {}'</span>.<span style="color: #78683f;">format</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">ramlist</span>[0], <span style="color: #4f5c7e;">ramlist</span>[1], <span style="color: #4f5c7e;">ramlist</span>[2]))

!<span style="color: #37785e;">echo</span> <span style="color: #783f5a;">the</span> <span style="color: #43783f;">current</span> <span style="color: #268bd2;">directory</span>: $<span style="color: #4f7e67;">PWD</span>
!<span style="color: #37785e;">echo</span> <span style="color: #707e4f;">My</span> <span style="color: #784437;">disk</span> <span style="color: #268bd2;">usage</span>:
!<span style="color: #4f7e67;">df</span> -<span style="color: #7e544f;">h</span>
<span style="color: #859900; font-weight: bold;">if</span> <span style="color: #268bd2;">_long</span>:
<span style="background-color: #eee8d5;"> </span>   %<span style="color: #4f5c7e;">conda</span> <span style="color: #657b83; font-weight: bold;">list</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">pprint</span>.<span style="color: #4f7e67;">pprint</span>(<span style="color: #657b83; font-weight: bold;">dict</span>(<span style="color: #7e544f;">os</span>.<span style="color: #707e4f;">environ</span>), <span style="color: #707e4f;">sort_dicts</span>=<span style="color: #859900; font-weight: bold;">False</span>)

</pre>
</div>
</div>
</div>

<div id="outline-container-scripts-tmux" class="outline-5">
<h5 id="scripts-tmux"><a id="sec-1-2-1-3" name="sec-1-2-1-3"></a><span class="section-number-5">1.2.1.3</span> Tmux setup and scripts</h5>
<div class="outline-text-5" id="text-scripts-tmux">
<div class="org-src-container">

<pre class="src src-sh" id="setup-tmux"><span style="color: #513f78;">rm</span> <span style="color: #7e544f;">~/.tmux-local-socket-remote-machine</span>
<span style="color: #268bd2;">REMOTE_SOCKET</span>=$(<span style="color: #6c71c4; font-weight: bold;">ssh</span> <span style="color: #783778;">ara</span> <span style="color: #2aa198;">'tmux ls -F "#{socket_path}"'</span> | <span style="color: #4f5c7e;">head</span> <span style="color: #3f7178;">-1</span>)
<span style="color: #657b83; font-weight: bold;">echo</span> $<span style="color: #268bd2;">REMOTE_SOCKET</span>
<span style="color: #7a4f7e;">ssh</span> <span style="color: #783778;">ara</span> <span style="color: #7a4f7e;">-tfN</span> <span style="color: #b58900; font-weight: bold;">\</span>
    <span style="color: #784437;">-L</span> <span style="color: #513f78;">~/.tmux-local-socket-remote-machine:</span>$<span style="color: #268bd2;">REMOTE_SOCKET</span>
</pre>
</div>

<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">
</colgroup>
<tbody>
<tr>
<td class="text-left">rm:</td>
<td class="text-left">cannot</td>
<td class="text-left">remove</td>
<td class="text-left">'<i>home/lex</i>.tmux-local-socket-remote-machine':</td>
<td class="text-left">No</td>
<td class="text-left">such</td>
<td class="text-left">file</td>
<td class="text-left">or</td>
<td class="text-left">directory</td>
</tr>

<tr>
<td class="text-left">ye53nis@ara-login01.rz.uni-jena.de's</td>
<td class="text-left">password:</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">/tmp/tmux-67339/default</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">&gt;</td>
<td class="text-left">ye53nis@ara-login01.rz.uni-jena.de's</td>
<td class="text-left">password:</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-ssh-tunneling" class="outline-5">
<h5 id="ssh-tunneling"><a id="sec-1-2-1-4" name="sec-1-2-1-4"></a><span class="section-number-5">1.2.1.4</span> SSH tunneling</h5>
<div class="outline-text-5" id="text-ssh-tunneling">
<p>
Different applications can be run on the remote compute node. If I want to
access them at the local machine, and open them with the browser, I use this
tunneling script.
</p>

<div class="org-src-container">

<pre class="src src-sh" id="ssh-tunnel"><span style="color: #7a4f7e;">ssh</span> <span style="color: #7e544f;">-t</span> <span style="color: #7e544f;">-t</span> <span style="color: #783778;">ara</span> <span style="color: #784437;">-L</span> $<span style="color: #268bd2;">port</span>:localhost:$<span style="color: #268bd2;">port</span> <span style="color: #7a4f7e;">ssh</span> $<span style="color: #268bd2;">node</span> <span style="color: #784437;">-L</span> $<span style="color: #268bd2;">port</span>:Localhost:$<span style="color: #268bd2;">port</span>
</pre>
</div>

<p>
Apps I use that way:
</p>
<ul class="org-ul">
<li>Jupyter lab for running Python 3-Kernels
</li>
<li>TensorBoard
</li>
<li>Mlflow ui
</li>
</ul>
</div>
</div>

<div id="outline-container-scripts-jp" class="outline-5">
<h5 id="scripts-jp"><a id="sec-1-2-1-5" name="sec-1-2-1-5"></a><span class="section-number-5">1.2.1.5</span> jupyter scripts</h5>
<div class="outline-text-5" id="text-scripts-jp">
<p>
Starting a jupyter instance on a server where the necessary libraries are
installed is easy using this script:
</p>

<div class="org-src-container">

<pre class="src src-tmux" id="jpt-tmux"><span style="color: #4f5c7e;">conda</span> <span style="color: #4f7e67;">activate</span> <span style="color: #37785e;">tf</span>
<span style="color: #657b83; font-weight: bold;">export</span> <span style="color: #268bd2;">PORT</span>=<span style="color: #3f7178;">9999</span>
<span style="color: #657b83; font-weight: bold;">export</span> <span style="color: #268bd2;">XDG_RUNTIME_DIR</span>=<span style="color: #2aa198;">''</span>
<span style="color: #657b83; font-weight: bold;">export</span> <span style="color: #268bd2;">XDG_RUNTIME_DIR</span>=<span style="color: #2aa198;">""</span>
<span style="color: #37785e;">jupyter</span> <span style="color: #4f5c7e;">lab</span> <span style="color: #783778;">--no-browser</span> <span style="color: #5e7837;">--port</span>=$<span style="color: #268bd2;">PORT</span>
</pre>
</div>

<p>
On the compute node of the HPC, the users' environment is managed through
module files using the system <a href="https://lmod.readthedocs.io">Lmod</a>. The <code>export XDG_RUNTIME_DIR</code> statements
are needed because of a jupyter bug which did not let it start. Right now,
<code>ob-tmux</code> does not support a <code>:var</code> header like normal <code>org-babel</code> does. So
the <code>$port</code> variable has to be set here in the template.
</p>

<p>
Now this port has to be tunnelled on our local computer (See
<a href="#ssh-tunneling">SSH tunneling</a>). While the tmux session above keeps running, no matter if
Emacs is running or not, this following ssh tunnel needs to be active
locally to connect to the notebook. If you close Emacs, it would need to be
reestablished
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2"><span class="section-number-4">1.2.2</span> Setup notes</h4>
<div class="outline-text-4" id="text-1-2-2">
</div><div id="outline-container-sec-tmux-setup" class="outline-5">
<h5 id="sec-tmux-setup"><a id="sec-1-2-2-1" name="sec-1-2-2-1"></a><span class="section-number-5">1.2.2.1</span> Setting up a tmux connection from using <code>ob-tmux</code> in <code>org-babel</code></h5>
<div class="outline-text-5" id="text-sec-tmux-setup">
<ul class="org-ul">
<li>prerequisite: tmux versions need to be the same locally and on the server.
Let's verify that now.
<ul class="org-ul">
<li>the local tmux version:

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #4f5c7e;">tmux</span> <span style="color: #3f7178;">-V</span>
</pre>
</div>

<pre class="example">
tmux 3.0a
</pre>
</li>

<li>the remote tmux version:

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #7a4f7e;">ssh</span> <span style="color: #783778;">ara</span> <span style="color: #4f5c7e;">tmux</span> <span style="color: #3f7178;">-V</span>
</pre>
</div>

<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="left">

<col  class="left">
</colgroup>
<tbody>
<tr>
<td class="text-left">ye53nis@ara-login01.rz.uni-jena.de's</td>
<td class="text-left">password:</td>
</tr>

<tr>
<td class="text-left">tmux</td>
<td class="text-left">3.0a</td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>

<li>as is described in <a href="https://github.com/ahendriksen/ob-tmux">the ob-tmux readme</a>, the following code snippet creates
a socket on the remote machine and forwards this socket to the local
machine (note that <code>socket_path</code> was introduced in tmux version 2.2)

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #268bd2;">REMOTE_SOCKET</span>=$(<span style="color: #6c71c4; font-weight: bold;">ssh</span> <span style="color: #783778;">ara</span> <span style="color: #2aa198;">'tmux ls -F "#{socket_path}"'</span> | <span style="color: #4f5c7e;">head</span> <span style="color: #3f7178;">-1</span>)
<span style="color: #657b83; font-weight: bold;">echo</span> $<span style="color: #268bd2;">REMOTE_SOCKET</span>
<span style="color: #7a4f7e;">ssh</span> <span style="color: #783778;">ara</span> <span style="color: #7a4f7e;">-tfN</span> <span style="color: #b58900; font-weight: bold;">\</span>
    <span style="color: #784437;">-L</span> <span style="color: #513f78;">~/.tmux-local-socket-remote-machine:</span>$<span style="color: #268bd2;">REMOTE_SOCKET</span>
</pre>
</div>

<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="left">

<col  class="left">

<col  class="left">
</colgroup>
<tbody>
<tr>
<td class="text-left">ye53nis@ara-login01.rz.uni-jena.de's</td>
<td class="text-left">password:</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">/tmp/tmux-67339/default</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">&gt;</td>
<td class="text-left">ye53nis@ara-login01.rz.uni-jena.de's</td>
<td class="text-left">password:</td>
</tr>
</tbody>
</table>
</li>

<li>now a new tmux session with name <code>ob-NAME</code> is created when using a code
block which looks like this: <code>#+BEGIN_SRC tmux :socket
      ~/.tmux-local-socket-remote-machine :session NAME</code>
</li>
<li>Commands can be sent now to the remote tmux session, BUT note that the
output is not printed yet
</li>
<li>there is a workaround for getting output back to our LabBook.org: A <a href="#scripts-tmux">script</a>
which allows to print the output from the tmux session in an
<code>#+begin_example</code>-Block below the tmux block by pressing <code>C-c C-o</code> or <code>C-c
      C-v C-o</code> when the pointer is inside the tmux block.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-2-2" class="outline-5">
<h5 id="sec-1-2-2-2"><span class="section-number-5">1.2.2.2</span> <code>emacs-jupyter</code> Setup</h5>
<div class="outline-text-5" id="text-1-2-2-2">
<p>
<code>Emacs-jupyter</code> aims to be an API for a lot of functionalities of the
<code>jupyter</code> project. The documentation can be found on <a href="https://github.com/dzop/emacs-jupyter">GitHub</a>.
</p>

<ol class="org-ol">
<li>For the <b>whole document</b>: connect to a running jupyter instance
<ol class="org-ol">
<li><code>M-x jupyter-server-list-kernels</code>
<ol class="org-ol">
<li>set server URL, e.g. <code>http://localhost:8889</code>
</li>
<li>set websocket URL, e.g. <code>http://localhost:8889</code>
</li>
</ol>
</li>
<li>two possibilities
<ol class="org-ol">
<li>kernel already exists \(\to\) list of kernels and <code>kernel-ID</code> is displayed
</li>
<li>kernel does not exist \(\to\) prompt asks if you want to start one \(\to\)
<b>yes</b> \(\to\) type kernel you want to start, e.g. <code>Python 3</code>
</li>
</ol>
</li>
</ol>
</li>
<li>In the <b>subtree</b> where you want to use <code>jupyter-python</code> blocks with <code>org
       babel</code>
<ol class="org-ol">
<li>set the <code>:header-args:jupyter-python :session
          /jpy:localhost#kernel:8889-ID</code>
</li>
<li>customize the output folder using the following org-mode variable:
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #859900; font-weight: bold;">setq</span> <span style="color: #783f5a;">org-babel-jupyter-resource-directory</span> <span style="color: #2aa198;">"./data/exp-test/plots"</span>)
</pre>
</div>

<pre class="example">
./data/exp-test/plots
</pre>
</li>
</ol>
</li>
<li>For each <b>individual block</b>, the following customizations might be useful
<ol class="org-ol">
<li>jupyter kernels can return multiple kinds of rich output (images,
html, &#x2026;) or scalar data (plain text, numbers, lists, &#x2026;). To force
a plain output, use <code>:results scalar</code>. To show the output in the
minibuffer only, use <code>:results silent</code>
</li>
<li>to change the priority of different rich outputs, use <code>:display</code>
header argument, e.g. <code>:display text/plain text/html</code> prioritizes
plain text over html. All supported mimetypes in default order:
<ol class="org-ol">
<li>text/org
</li>
<li>image/svg+xml, image/jpeg, image/png
</li>
<li>text/html
</li>
<li>text/markdown
</li>
<li>text/latex
</li>
<li>text/plain
</li>
</ol>
</li>
<li>We can set jupyter to output pandas DataFrames as org tables
automatically using the source block header argument <code>:pandoc t</code>
</li>
<li>useful keybindings
<ul class="org-ul">
<li><code>M-i</code> to open the documentation for wherever your pointer is (like
pressing <code>Shift-TAB</code> in Jupyter notebooks)
</li>
<li><code>C-c C-i</code> to interrupt the kernel, <code>C-c C-r</code> to restart the kernel
</li>
</ul>
</li>
</ol>
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-3" class="outline-4">
<h4 id="sec-1-2-3"><span class="section-number-4">1.2.3</span> Notes on archiving</h4>
<div class="outline-text-4" id="text-1-2-3">
</div><div id="outline-container-sec-1-2-3-1" class="outline-5">
<h5 id="sec-1-2-3-1"><span class="section-number-5">1.2.3.1</span> Exporting the LabBook.org to html in a twbs style</h5>
<div class="outline-text-5" id="text-1-2-3-1">
<ul class="org-ul">
<li>I am partial to the twitter bootstrap theme of html, since I like it's
simple design, but clear structure with a nice table of contents at the
side → the following org mode extension supports a seemless export to
twitter bootstrap html: <a href="https://github.com/marsmining/ox-twbs">https://github.com/marsmining/ox-twbs</a>
</li>
<li>when installed, the export can be triggered via the command
<code>(org-twbs-export-as-html)</code> or via the keyboard shortcut for export <code>C-c
       C-e</code> followed by <code>w</code> for Twitter bootstrap and <code>h</code> for saving the .html
</li>
<li><span class="underline">Things to configure:</span>
<ul class="org-ul">
<li>in general, there are multiple export options:
<a href="https://orgmode.org/manual/Export-Settings.html">https://orgmode.org/manual/Export-Settings.html</a>
</li>
<li>E.g. I set 2 <code>#+OPTIONS</code> keywords at the begin of the file: <code>toc:4</code> and
<code>H:4</code> which make sure that in my export my sidebar table of contents
will show numbered headings till a depth of 4.
</li>
<li>I configured my code blocks so that they will not be evaluated when
exporting (I would recommend this especially if you only export for
archiving) and that both the code block and the output will be exported
with the keyword: <code>#+PROPERTY: header-args :eval never-export :exports
         both</code>
</li>
<li>To discriminate between code blocks for different languages I gave each
of them a distinct colour using <code>#+HTML_HEAD_EXTRA: &lt;style...</code> (see
above)
</li>
<li>I had to configure a style for <code>table</code>, so that the
<ul class="org-ul">
<li><code>display: block; overflow-x: auto;</code> gets the table to be restricted
to the width of the text and if it is larger, activates scrolling
</li>
<li><code>white-space: nowrap;</code> makes it that there is no wrap in a column, so
it might be broader, but better readable if you have scrolling anyway
</li>
</ul>
</li>
</ul>
</li>
<li><span class="underline">Things to do before exporting / Troubleshooting while exporting:</span>
<ul class="org-ul">
<li>when using a dark theme for you emacs, the export of the code blocks
might show some ugly dark backgrounds from the theme. If this becomes
an issue, change to a light theme for the export with <code>M-x
         (load-theme)</code> and choose <code>solarized-light</code>
</li>
<li>only in the <code>data</code> branch you set the git tags after merging. If you
want to show them here, execute the corresponding function in <a href="#sec-1-3-5">Git TAGs</a>
</li>
<li>make sure your file links work properly! I recommend referencing your
files relatively (e.g. [ [ f ile:./data/exp-XXXXXX-test/test.png]]
without spaces). Otherwise there will be errors in your <i><b>Messages</b></i>
buffer
</li>
<li>There might be errors with your code blocks
<ul class="org-ul">
<li>e.g. the export function expects you to assign a default variable to
your functions
</li>
<li>if you call a function via the <code>#+CALL</code> mechanism, it wants you to
include two parentheses for the function, e.g. <code>#+CALL: test()</code>
</li>
</ul>
</li>
<li>check indentation of code blocks inside lists
</li>
<li>add a <code>details</code> block around large output cells. This makes them
expandable. I added some <code>#+HTML_HEAD_EXTRA: &lt;style...</code> inspired by
<a href="https://alhassy.github.io/org-special-block-extras/#Folded-Details">alhassy</a>. That's how the <code>details</code> block looks like:
<pre class="example">
#+begin_details

#+end_details
</pre>
</li>
<li>If you reference a parameter with an underscore in the name, use the
org markdown tricks to style them like code (<code>==</code> or <code>~~</code>), otherwise
the part after the underscore will be rendered like a subscript:
<code>under_score</code> vs under<sub>score</sub>
</li>
</ul>
</li>
<li><span class="underline">Things to do after exporting:</span>
<ul class="org-ul">
<li>In my workflow, the exported <code>LabBook.html</code> with the overview of all
experiments is in the <code>data</code> folder. If you move the file, you will
have to fix the file links for the new location, e.g. via "Find and
replace" <code>M-%</code>:
<ul class="org-ul">
<li>if you move the org file → in the org file find <code>[[file:./data/</code> and
replace with <code>[[file:./</code> → then export with <code>C-c C-e w h</code>
</li>
<li>if you export first with <code>C-c C-e w h</code> and move the html file to
<code>data</code> → in the html file find <code>./data</code> and replace with <code>.</code>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Organization of git</h3>
<div class="outline-text-3" id="text-1-3">
</div><div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> remote/origin/main branch:</h4>
<div class="outline-text-4" id="text-1-3-1">
<ul class="org-ul">
<li>contains all the source code in folder <b><b>src/</b></b> which is used for experiments.
</li>
<li>contains the <b><b>LabBook.org</b></b> template
</li>
<li>contains setup- and metadata files such as <b><b>MLproject</b></b> or <b><b>conda.yaml</b></b>
</li>
<li>the log contains only lasting alterations on the folders and files mentioned
above, which are e.g. used for conducting experiments or which introduce new
features. Day-to-day changes in code
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3-2" class="outline-4">
<h4 id="sec-1-3-2"><span class="section-number-4">1.3.2</span> remote/origin/exp### branches:</h4>
<div class="outline-text-4" id="text-1-3-2">
<ul class="org-ul">
<li>if an experiment is done, the code and templates will be branched out from
<b>main</b> in an <b>#experiment-name</b> branch, ### meaning some meaningful
descriptor.
</li>
<li>all data generated during the experiment (e.g. .csv files, plots, images,
etc), is stored in a folder with the name <b><b>data/#experiment-name</b></b>, except
machine learning-specific data and metadata from `mlflow` runs, which are
saved under <b><b>data/mlruns</b></b> (this allows easily comparing machine learning
runs with different experimental settings)
</li>
<li>The <b><b>LabBook.org</b></b> file is essential
<ul class="org-ul">
<li>If possible, all code is executed from inside this file (meaning analysis
scripts or calling the code from the <b><b>scr/</b></b> directory).
</li>
<li>All other steps taken during an experiment are noted down, as well as
conclusions or my thought process while conducting the experiment
</li>
<li>Provenance data, such as metadata about the environment the code was
executed in, the command line output of the code, and some plots
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3-3" class="outline-4">
<h4 id="sec-1-3-3"><span class="section-number-4">1.3.3</span> remote/origin/develop branch:</h4>
<div class="outline-text-4" id="text-1-3-3">
<ul class="org-ul">
<li>this is the branch I use for day to day work on features and exploration.
All of my current activity can be followed here.
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3-4" class="outline-4">
<h4 id="sec-1-3-4"><span class="section-number-4">1.3.4</span> remote/origin/data branch:</h4>
<div class="outline-text-4" id="text-1-3-4">
<ul class="org-ul">
<li>contains a full cronicle of the whole research process
</li>
<li>all <b>#experiment-name</b> branches are merged here. Afterwards the original
branch is deleted and on the data branch there is a <b>Git tag</b> which shows
the merge commit to make accessing single experiments easy.
</li>
<li>the <b>develop</b> branch is merged here as well.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-3-5" class="outline-4">
<h4 id="sec-1-3-5"><span class="section-number-4">1.3.5</span> Git TAGs</h4>
<div class="outline-text-4" id="text-1-3-5">
</div><div id="outline-container-sec-1-3-5-1" class="outline-5">
<h5 id="sec-1-3-5-1"><span class="section-number-5">1.3.5.1</span> Stable versions:</h5>
</div>
<div id="outline-container-sec-1-3-5-2" class="outline-5">
<h5 id="sec-1-3-5-2"><span class="section-number-5">1.3.5.2</span> All tags from git:</h5>
<div class="outline-text-5" id="text-1-3-5-2">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #784437;">git</span> <span style="color: #78683f;">push</span> <span style="color: #783f5a;">origin</span> <span style="color: #7a4f7e;">--tags</span>
<span style="color: #784437;">git</span> <span style="color: #374478;">tag</span> <span style="color: #707e4f;">-n1</span>
</pre>
</div>

<pre class="example">
exp-200402-test Merge branch 'exp-200402-test' into data
exp-200520-unet Merge branch 'exp-310520-unet' into data
exp-200531-unet Merge branch 'heads/exp-310520-unet' into data
exp-201231-clustsim exp-201231-clustsim
exp-210204-unet Add exp-210204-unet LabBook part 3
exp-310520-unet move exp-310520-unet to data branch manually
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Organization of code</h3>
<div class="outline-text-3" id="text-1-4">
</div><div id="outline-container-sec-1-4-1" class="outline-4">
<h4 id="sec-1-4-1"><span class="section-number-4">1.4.1</span> scripts:</h4>
</div>
<div id="outline-container-sec-1-4-2" class="outline-4">
<h4 id="sec-1-4-2"><span class="section-number-4">1.4.2</span> src/</h4>
<div class="outline-text-4" id="text-1-4-2">
</div><div id="outline-container-sec-1-4-2-1" class="outline-5">
<h5 id="sec-1-4-2-1"><span class="section-number-5">1.4.2.1</span> fluotracify/</h5>
<div class="outline-text-5" id="text-1-4-2-1">
</div><ol class="org-ol"><li><a id="sec-1-4-2-1-1" name="sec-1-4-2-1-1"></a>imports/<br ></li>
<li><a id="sec-1-4-2-1-2" name="sec-1-4-2-1-2"></a>simulations/<br ></li>
<li><a id="sec-1-4-2-1-3" name="sec-1-4-2-1-3"></a>training/<br ></li>
<li><a id="sec-1-4-2-1-4" name="sec-1-4-2-1-4"></a>applications/<br ></li>
<li><a id="sec-1-4-2-1-5" name="sec-1-4-2-1-5"></a>doc/<br ><div class="outline-text-6" id="text-1-4-2-1-5">
<ul class="org-ul">
<li>use Sphinx
<ul class="org-ul">
<li>follow this: <a href="https://daler.github.io/sphinxdoc-test/includeme.html">https://daler.github.io/sphinxdoc-test/includeme.html</a>
</li>
<li>evtl export org-mode Readme to rst via <a href="https://github.com/msnoigrs/ox-rst">https://github.com/msnoigrs/ox-rst</a>
</li>
<li>possibly heavily use
<a href="http://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html">http://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html</a>
</li>
</ul>
</li>
<li>for examples sphinx-galleries could be useful
<a href="https://sphinx-gallery.github.io/stable/getting_started.html">https://sphinx-gallery.github.io/stable/getting_started.html</a>
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-1-4-2-2" class="outline-5">
<h5 id="sec-1-4-2-2"><span class="section-number-5">1.4.2.2</span> nanosimpy/</h5>
<div class="outline-text-5" id="text-1-4-2-2">
<ul class="org-ul">
<li>cloned from dwaithe with refactoring for Python 3-compatibility
</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Changes in this repository (without "* Data" in this file)</h3>
<div class="outline-text-3" id="text-1-5">
</div><div id="outline-container-sec-1-5-1" class="outline-4">
<h4 id="sec-1-5-1"><span class="section-number-4">1.5.1</span> Changes in LabBook.org (without "* Data")</h4>
<div class="outline-text-4" id="text-1-5-1">
</div><div id="outline-container-sec-1-5-1-1" class="outline-5">
<h5 id="sec-1-5-1-1"><span class="section-number-5">1.5.1.1</span> 2022-02-19</h5>
<div class="outline-text-5" id="text-1-5-1-1">
<ul class="org-ul">
<li>Add <code>#+HTML_HEAD_EXTRA: &lt;style...</code> for <code>table</code> to enable scrolling if the
table overflows
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-2" class="outline-5">
<h5 id="sec-1-5-1-2"><span class="section-number-5">1.5.1.2</span> 2021-12-16</h5>
<div class="outline-text-5" id="text-1-5-1-2">
<ul class="org-ul">
<li>Add <code>details</code> blocks, corresponding <code>#+HTML_HEAD_EXTRA: &lt;style...</code> and
documentation in  <a href="#sec-1-2-3">Notes on archiving</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-3" class="outline-5">
<h5 id="sec-1-5-1-3"><span class="section-number-5">1.5.1.3</span> 2021-08-05</h5>
<div class="outline-text-5" id="text-1-5-1-3">
<ul class="org-ul">
<li>Rename <code>master</code> branch to <code>main</code> branch
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-4" class="outline-5">
<h5 id="sec-1-5-1-4"><span class="section-number-5">1.5.1.4</span> 2021-04-04</h5>
<div class="outline-text-5" id="text-1-5-1-4">
<ul class="org-ul">
<li>Add <code>#+OPTIONS: H:4</code> and <code>#+OPTIONS: toc:4</code> to show up to 4 levels of
depth in the html (twbs) export of this LabBook in the table of contents
at the side
</li>
<li>I added <a href="#sec-1-2-3">Notes on archiving</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-5" class="outline-5">
<h5 id="sec-1-5-1-5"><span class="section-number-5">1.5.1.5</span> 2020-11-04</h5>
<div class="outline-text-5" id="text-1-5-1-5">
<ul class="org-ul">
<li>update "jupyter scripts" in <a href="#sec-1-2">Template for data entry and setup notes:</a>
for new conda environment on server (now <code>conda activate tf-nightly</code>)
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-6" class="outline-5">
<h5 id="sec-1-5-1-6"><span class="section-number-5">1.5.1.6</span> 2020-05-31</h5>
<div class="outline-text-5" id="text-1-5-1-6">
<ul class="org-ul">
<li>extend general documentation in README
</li>
<li>Add code block examples
</li>
<li>extend documentation on experiment workflow
</li>
<li>move setup notes from README to "Template for data entry and setup notes"
</li>
<li>remove emacs-lisp code for custom tmux block functions (not relevant
enough)
</li>
<li>change named "jpt-tmux" from starting a jupyter notebook to starting
jupyter lab. Load a conda environment instead of using Lmod's <code>module
      load</code>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-7" class="outline-5">
<h5 id="sec-1-5-1-7"><span class="section-number-5">1.5.1.7</span> 2020-05-07</h5>
<div class="outline-text-5" id="text-1-5-1-7">
<ul class="org-ul">
<li>extend documentation on git model
</li>
<li>extend documentation on jupyter setup
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-8" class="outline-5">
<h5 id="sec-1-5-1-8"><span class="section-number-5">1.5.1.8</span> 2020-04-22</h5>
<div class="outline-text-5" id="text-1-5-1-8">
<ul class="org-ul">
<li>added parts of README which describe the experimental process
</li>
<li>added templates for system metadata, tmux, jupyter setup
</li>
<li>added organization of code
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-9" class="outline-5">
<h5 id="sec-1-5-1-9"><span class="section-number-5">1.5.1.9</span> 2020-03-30</h5>
<div class="outline-text-5" id="text-1-5-1-9">
<ul class="org-ul">
<li>set up lab book and form git repo accoring to setup by Luka Stanisic et al
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-5-2" class="outline-4">
<h4 id="sec-1-5-2"><span class="section-number-4">1.5.2</span> Changes in src/fluotracify</h4>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Data</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> exp-220120-correlate-ptu</h3>
<div class="outline-text-3" id="text-2-1">
</div><div id="outline-container-sec-2-1-1" class="outline-4">
<h4 id="sec-2-1-1"><span class="section-number-4">2.1.1</span> Setup: Jupyter 1 on HPC compute node 1</h4>
<div class="outline-text-4" id="text-2-1-1">
<ol class="org-ol">
<li>Setup tmux (<code>#+CALL: setup-tmux[:session remote]</code>)
<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="left">

<col  class="left">

<col  class="left">
</colgroup>
<tbody>
<tr>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">sh-5.1$</td>
<td class="text-left">ye53nis@ara-login01.rz.uni-jena.de's</td>
<td class="text-left">password:</td>
</tr>

<tr>
<td class="text-left">&gt;</td>
<td class="text-left">ye53nis@ara-login01.rz.uni-jena.de's</td>
<td class="text-left">password:</td>
</tr>
</tbody>
</table>
</li>

<li>Request compute node via tmux
<div class="org-src-container">

<pre class="src src-tmux"><span style="color: #657b83; font-weight: bold;">cd</span> <span style="color: #513f78;">/</span>
<span style="color: #78683f;">srun</span> <span style="color: #707e4f;">-p</span> <span style="color: #78683f;">s_standard</span> <span style="color: #374478;">--time</span>=<span style="color: #3f7178;">7-10:00:00</span> <span style="color: #4f5c7e;">--nodes</span>=<span style="color: #5e7837;">1</span> <span style="color: #7e544f;">--ntasks-per-node</span>=<span style="color: #783f5a;">24</span> <span style="color: #37785e;">--mem</span>=<span style="color: #43783f;">150000</span> <span style="color: #7e544f;">--pty</span> <span style="color: #374478;">bash</span>
</pre>
</div>

<pre class="example">
(base) [ye53nis@node305 /]$
</pre>
</li>

<li>Branch out git branch <code>exp-220120-correlate-ptu</code> from <code>main</code> (done via
magit) and make sure ou are on the correct branch
<div class="org-src-container">

<pre class="src src-tmux"><span style="color: #657b83; font-weight: bold;">cd</span> <span style="color: #783778;">/beegfs/ye53nis/drmed-git</span>
<span style="color: #784437;">git</span> <span style="color: #783778;">checkout</span> <span style="color: #43783f;">exp-220120-correlate-ptu</span>
</pre>
</div>

<pre class="example">
(base) [ye53nis@node165 drmed-git]$ git checkout exp-220120-correlate-ptu
Checking out files: 100% (147/147), done.
M       src/nanosimpy
Branch exp-220120-correlate-ptu set up to track remote branch exp-220120-correlate-ptu from origin.
Switched to a new branch 'exp-220120-correlate-ptu'
(base) [ye53nis@node165 drmed-git]$
</pre>
</li>

<li>Make directory for experiment
<div class="org-src-container">

<pre class="src src-tmux"><span style="color: #7a4f7e;">mkdir</span> <span style="color: #4f5c7e;">data/exp-220120-correlate-ptu/jupyter</span>
</pre>
</div>
</li>

<li>Customize the output folder using the following org-mode variable
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #859900; font-weight: bold;">setq</span> <span style="color: #783f5a;">org-babel-jupyter-resource-directory</span> <span style="color: #2aa198;">"./data/exp-220120-correlate-ptu/jupyter"</span>)
</pre>
</div>

<pre class="example">
./data/exp-220120-correlate-ptu/jupyter
</pre>
</li>

<li>Load conda environment, and start jupyter (<code>#+CALL: jpt-tmux[:session
      jpmux]</code>)
<pre class="example">
(tf) [ye53nis@node205 /]$ jupyter lab --no-browser --port=$PORT
[I 2022-02-17 18:56:48.700 ServerApp] jupyterlab | extension was successfully linked.
[I 2022-02-17 18:57:23.918 ServerApp] nbclassic | extension was successfully linked.
[I 2022-02-17 18:57:27.274 LabApp] JupyterLab extension loaded from /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/jupyterlab
[I 2022-02-17 18:57:27.275 LabApp] JupyterLab application directory is /home/ye53nis/.conda/envs/tf/share/jupyter/lab
[I 2022-02-17 18:57:27.405 ServerApp] jupyterlab | extension was successfully loaded.
[I 2022-02-17 18:57:28.130 ServerApp] nbclassic | extension was successfully loaded.
[I 2022-02-17 18:57:28.130 ServerApp] Serving notebooks from local directory: /
[I 2022-02-17 18:57:28.131 ServerApp] Jupyter Server 1.4.1 is running at:
[I 2022-02-17 18:57:28.131 ServerApp] http://localhost:8889/lab?token=6f26a99296b37cdb05f3969fb347c51d49b9552c75ee7eb4
[I 2022-02-17 18:57:28.131 ServerApp]  or http://127.0.0.1:8889/lab?token=6f26a99296b37cdb05f3969fb347c51d49b9552c75ee7eb4
[I 2022-02-17 18:57:28.131 ServerApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
[C 2022-02-17 18:57:28.499 ServerApp]

    To access the server, open this file in a browser:
        file:///home/ye53nis/.local/share/jupyter/runtime/jpserver-308527-open.html
    Or copy and paste one of these URLs:
        http://localhost:8889/lab?token=6f26a99296b37cdb05f3969fb347c51d49b9552c75ee7eb4
     or http://127.0.0.1:8889/lab?token=6f26a99296b37cdb05f3969fb347c51d49b9552c75ee7eb4
</pre>
</li>

<li>Create ssh tunnel (<code>#+CALL: ssh-tunnel(port="8889", node="node165")</code>)
<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">
</colgroup>
<tbody>
<tr>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">sh-5.1$</td>
<td class="text-left">sh-5.1$</td>
<td class="text-left">ye53nis@ara-login01.rz.uni-jena.de's</td>
<td class="text-left">password:</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">Warning:</td>
<td class="text-left">Permanently</td>
<td class="text-left">added</td>
<td class="text-left">'node305,192.168.194.50'</td>
<td class="text-left">(ECDSA)</td>
<td class="text-left">to</td>
<td class="text-left">the</td>
<td class="text-left">list</td>
<td class="text-left">of</td>
<td class="text-left">known</td>
<td class="text-left">hosts.</td>
</tr>

<tr>
<td class="text-left">ye53nis@node305's</td>
<td class="text-left">password:</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>
</tbody>
</table>
</li>

<li>I started a Python3 kernel using <code>jupyter-server-list-kernels</code>. Then I
added the kernel ID to the <code>:PROPERTIES:</code> drawer of this (and following)
subtrees.

<pre class="example">
python3           03038b73-b2b5-49ce-a1dc-21afb6247d0f   a few seconds ago    starting   0
</pre>
</li>

<li>Test and save metadata (including the python packages before the update in
Experiment 2a):

<details>
<pre class="example">
No of CPUs in system: 72
No of CPUs the current process can use: 24
load average: (6.14, 6.09, 6.06)
os.uname():  posix.uname_result(sysname='Linux', nodename='node154', release='3.10.0-957.1.3.el7.x86_64', version='#1 SMP Thu Nov 29 14:49:43 UTC 2018', machine='x86_64')
PID of process: 59210
RAM total: 199G, RAM used: 27G, RAM free: 85G
the current directory: /
My disk usage:
Filesystem           Size  Used Avail Use% Mounted on
/dev/sda1             50G  3.8G   47G   8% /
devtmpfs              94G     0   94G   0% /dev
tmpfs                 94G  3.1M   94G   1% /dev/shm
tmpfs                 94G  107M   94G   1% /run
tmpfs                 94G     0   94G   0% /sys/fs/cgroup
nfs01-ib:/home        80T   67T   14T  84% /home
nfs01-ib:/cluster    2.0T  468G  1.6T  23% /cluster
nfs03-ib:/pool/work  100T   79T   22T  79% /nfsdata
nfs02-ib:/data01      88T   72T   16T  82% /data01
/dev/sda3            6.0G  407M  5.6G   7% /var
/dev/sda6            169G   11G  158G   7% /local
/dev/sda5            2.0G   34M  2.0G   2% /tmp
beegfs_nodev         524T  476T   49T  91% /beegfs
tmpfs                 19G     0   19G   0% /run/user/67339# packages in environment at /home/ye53nis/.conda/envs/tf:
#
# Name                    Version                   Build  Channel
_libgcc_mutex             0.1                        main
_openmp_mutex             4.5                       1_gnu
absl-py                   0.13.0                   pypi_0    pypi
alembic                   1.4.1                    pypi_0    pypi
anyio                     2.2.0            py39h06a4308_1
argon2-cffi               20.1.0           py39h27cfd23_1
asteval                   0.9.25                   pypi_0    pypi
astunparse                1.6.3                    pypi_0    pypi
async_generator           1.10               pyhd3eb1b0_0
attrs                     21.2.0             pyhd3eb1b0_0
babel                     2.9.1              pyhd3eb1b0_0
backcall                  0.2.0              pyhd3eb1b0_0
bleach                    3.3.1              pyhd3eb1b0_0
brotlipy                  0.7.0           py39h27cfd23_1003
ca-certificates           2021.7.5             h06a4308_1
cachetools                4.2.2                    pypi_0    pypi
certifi                   2021.5.30        py39h06a4308_0
cffi                      1.14.6           py39h400218f_0
chardet                   4.0.0           py39h06a4308_1003
click                     8.0.1                    pypi_0    pypi
cloudpickle               1.6.0                    pypi_0    pypi
cryptography              3.4.7            py39hd23ed53_0
cycler                    0.10.0                   pypi_0    pypi
databricks-cli            0.14.3                   pypi_0    pypi
decorator                 5.0.9              pyhd3eb1b0_0
defusedxml                0.7.1              pyhd3eb1b0_0
docker                    5.0.0                    pypi_0    pypi
entrypoints               0.3              py39h06a4308_0
fcsfiles                  2021.6.6                 pypi_0    pypi
flask                     2.0.1                    pypi_0    pypi
flatbuffers               1.12                     pypi_0    pypi
future                    0.18.2                   pypi_0    pypi
gast                      0.4.0                    pypi_0    pypi
gitdb                     4.0.7                    pypi_0    pypi
gitpython                 3.1.18                   pypi_0    pypi
google-auth               1.34.0                   pypi_0    pypi
google-auth-oauthlib      0.4.5                    pypi_0    pypi
google-pasta              0.2.0                    pypi_0    pypi
greenlet                  1.1.0                    pypi_0    pypi
grpcio                    1.34.1                   pypi_0    pypi
gunicorn                  20.1.0                   pypi_0    pypi
h5py                      3.1.0                    pypi_0    pypi
idna                      2.10               pyhd3eb1b0_0
importlib-metadata        3.10.0           py39h06a4308_0
importlib_metadata        3.10.0               hd3eb1b0_0
ipykernel                 5.3.4            py39hb070fc8_0
ipython                   7.22.0           py39hb070fc8_0
ipython_genutils          0.2.0              pyhd3eb1b0_1
itsdangerous              2.0.1                    pypi_0    pypi
jedi                      0.17.2           py39h06a4308_1
jinja2                    3.0.1              pyhd3eb1b0_0
joblib                    1.0.1                    pypi_0    pypi
json5                     0.9.6              pyhd3eb1b0_0
jsonschema                3.2.0                      py_2
jupyter-packaging         0.7.12             pyhd3eb1b0_0
jupyter_client            6.1.12             pyhd3eb1b0_0
jupyter_core              4.7.1            py39h06a4308_0
jupyter_server            1.4.1            py39h06a4308_0
jupyterlab                3.0.14             pyhd3eb1b0_1
jupyterlab_pygments       0.1.2                      py_0
jupyterlab_server         2.6.1              pyhd3eb1b0_0
keras-nightly             2.5.0.dev2021032900          pypi_0    pypi
keras-preprocessing       1.1.2                    pypi_0    pypi
kiwisolver                1.3.1                    pypi_0    pypi
ld_impl_linux-64          2.35.1               h7274673_9
libffi                    3.3                  he6710b0_2
libgcc-ng                 9.3.0               h5101ec6_17
libgomp                   9.3.0               h5101ec6_17
libsodium                 1.0.18               h7b6447c_0
libstdcxx-ng              9.3.0               hd4cf53a_17
lmfit                     1.0.2                    pypi_0    pypi
mako                      1.1.4                    pypi_0    pypi
markdown                  3.3.4                    pypi_0    pypi
markupsafe                2.0.1            py39h27cfd23_0
matplotlib                3.4.2                    pypi_0    pypi
mistune                   0.8.4           py39h27cfd23_1000
mlflow                    1.19.0                   pypi_0    pypi
multipletau               0.3.3                    pypi_0    pypi
nbclassic                 0.2.6              pyhd3eb1b0_0
nbclient                  0.5.3              pyhd3eb1b0_0
nbconvert                 6.1.0            py39h06a4308_0
nbformat                  5.1.3              pyhd3eb1b0_0
ncurses                   6.2                  he6710b0_1
nest-asyncio              1.5.1              pyhd3eb1b0_0
notebook                  6.4.0            py39h06a4308_0
numpy                     1.19.5                   pypi_0    pypi
oauthlib                  3.1.1                    pypi_0    pypi
openssl                   1.1.1k               h27cfd23_0
opt-einsum                3.3.0                    pypi_0    pypi
packaging                 21.0               pyhd3eb1b0_0
pandas                    1.3.1                    pypi_0    pypi
pandocfilters             1.4.3            py39h06a4308_1
parso                     0.7.0                      py_0
pexpect                   4.8.0              pyhd3eb1b0_3
pickleshare               0.7.5           pyhd3eb1b0_1003
pillow                    8.3.1                    pypi_0    pypi
pip                       21.1.3           py39h06a4308_0
prometheus-flask-exporter 0.18.2                   pypi_0    pypi
prometheus_client         0.11.0             pyhd3eb1b0_0
prompt-toolkit            3.0.17             pyh06a4308_0
protobuf                  3.17.3                   pypi_0    pypi
ptyprocess                0.7.0              pyhd3eb1b0_2
pyasn1                    0.4.8                    pypi_0    pypi
pyasn1-modules            0.2.8                    pypi_0    pypi
pycparser                 2.20                       py_2
pygments                  2.9.0              pyhd3eb1b0_0
pyopenssl                 20.0.1             pyhd3eb1b0_1
pyparsing                 2.4.7              pyhd3eb1b0_0
pyrsistent                0.18.0           py39h7f8727e_0
pysocks                   1.7.1            py39h06a4308_0
python                    3.9.5                h12debd9_4
python-dateutil           2.8.2              pyhd3eb1b0_0
python-editor             1.0.4                    pypi_0    pypi
pytz                      2021.1             pyhd3eb1b0_0
pyyaml                    5.4.1                    pypi_0    pypi
pyzmq                     20.0.0           py39h2531618_1
querystring-parser        1.2.4                    pypi_0    pypi
readline                  8.1                  h27cfd23_0
requests                  2.25.1             pyhd3eb1b0_0
requests-oauthlib         1.3.0                    pypi_0    pypi
rsa                       4.7.2                    pypi_0    pypi
scikit-learn              0.24.2                   pypi_0    pypi
scipy                     1.7.0                    pypi_0    pypi
seaborn                   0.11.1                   pypi_0    pypi
send2trash                1.5.0              pyhd3eb1b0_1
setuptools                52.0.0           py39h06a4308_0
six                       1.15.0                   pypi_0    pypi
smmap                     4.0.0                    pypi_0    pypi
sniffio                   1.2.0            py39h06a4308_1
sqlalchemy                1.4.22                   pypi_0    pypi
sqlite                    3.36.0               hc218d9a_0
sqlparse                  0.4.1                    pypi_0    pypi
tabulate                  0.8.9                    pypi_0    pypi
tensorboard               2.5.0                    pypi_0    pypi
tensorboard-data-server   0.6.1                    pypi_0    pypi
tensorboard-plugin-wit    1.8.0                    pypi_0    pypi
tensorflow                2.5.0                    pypi_0    pypi
tensorflow-estimator      2.5.0                    pypi_0    pypi
termcolor                 1.1.0                    pypi_0    pypi
terminado                 0.9.4            py39h06a4308_0
testpath                  0.5.0              pyhd3eb1b0_0
threadpoolctl             2.2.0                    pypi_0    pypi
tifffile                  2021.7.30                pypi_0    pypi
tk                        8.6.10               hbc83047_0
tornado                   6.1              py39h27cfd23_0
traitlets                 5.0.5              pyhd3eb1b0_0
typing-extensions         3.7.4.3                  pypi_0    pypi
tzdata                    2021a                h52ac0ba_0
uncertainties             3.1.6                    pypi_0    pypi
urllib3                   1.26.6             pyhd3eb1b0_1
wcwidth                   0.2.5                      py_0
webencodings              0.5.1            py39h06a4308_1
websocket-client          1.1.0                    pypi_0    pypi
werkzeug                  2.0.1                    pypi_0    pypi
wheel                     0.36.2             pyhd3eb1b0_0
wrapt                     1.12.1                   pypi_0    pypi
xz                        5.2.5                h7b6447c_0
zeromq                    4.3.4                h2531618_0
zipp                      3.5.0              pyhd3eb1b0_0
zlib                      1.2.11               h7b6447c_3

Note: you may need to restart the kernel to use updated packages.
{'SLURM_CHECKPOINT_IMAGE_DIR': '/var/slurm/checkpoint',
 'SLURM_NODELIST': 'node154',
 'SLURM_JOB_NAME': 'bash',
 'XDG_SESSION_ID': '44301',
 'SLURMD_NODENAME': 'node154',
 'SLURM_TOPOLOGY_ADDR': 'node154',
 'SLURM_NTASKS_PER_NODE': '24',
 'HOSTNAME': 'login01',
 'SLURM_PRIO_PROCESS': '0',
 'SLURM_SRUN_COMM_PORT': '41523',
 'SHELL': '/bin/bash',
 'TERM': 'xterm-color',
 'SLURM_JOB_QOS': 'qstand',
 'SLURM_PTY_WIN_ROW': '34',
 'HISTSIZE': '1000',
 'TMPDIR': '/tmp',
 'SLURM_TOPOLOGY_ADDR_PATTERN': 'node',
 'SSH_CLIENT': '10.231.181.128 49370 22',
 'CONDA_SHLVL': '2',
 'CONDA_PROMPT_MODIFIER': '(tf) ',
 'QTDIR': '/usr/lib64/qt-3.3',
 'QTINC': '/usr/lib64/qt-3.3/include',
 'SSH_TTY': '/dev/pts/79',
 'NO_PROXY': 'localhost,127.0.0.0/8,.uni-jena.de,141.35.0.0/16,10.0.0.0/8,192.168.0.0/16,172.0.0.0/8,fe80::/7,2001:638:1558::/24,vmaster,node001',
 'QT_GRAPHICSSYSTEM_CHECKED': '1',
 'SLURM_NNODES': '1',
 'USER': 'ye53nis',
 'http_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'LS_COLORS': 'rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.axa=01;36:*.oga=01;36:*.spx=01;36:*.xspf=01;36:',
 'CONDA_EXE': '/cluster/miniconda3/bin/conda',
 'SLURM_STEP_NUM_NODES': '1',
 'SLURM_JOBID': '1608805',
 'SRUN_DEBUG': '3',
 'FTP_PROXY': 'http://internet4nzm.rz.uni-jena.de:3128',
 'ftp_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_NTASKS': '24',
 'SLURM_LAUNCH_NODE_IPADDR': '192.168.192.5',
 'SLURM_STEP_ID': '0',
 'TMUX': '/tmp/tmux-67339/default,20557,4',
 '_CE_CONDA': '',
 'CONDA_PREFIX_1': '/cluster/miniconda3',
 'SLURM_STEP_LAUNCHER_PORT': '41523',
 'SLURM_TASKS_PER_NODE': '24',
 'MAIL': '/var/spool/mail/ye53nis',
 'PATH': '/home/ye53nis/.conda/envs/tf/bin:/home/lex/Programme/miniconda3/envs/tf-nightly-lab/bin:/home/lex/Programme/miniconda3/condabin:/home/lex/.local/bin:/bin:/usr/bin:/usr/local/bin:/usr/local/sbin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/var/lib/snapd/snap/bin:/usr/sbin:/home/ye53nis/.local/bin:/home/ye53nis/bin',
 'SLURM_WORKING_CLUSTER': 'hpc:192.168.192.1:6817:8448',
 'SLURM_JOB_ID': '1608805',
 'CONDA_PREFIX': '/home/ye53nis/.conda/envs/tf',
 'SLURM_JOB_USER': 'ye53nis',
 'SLURM_STEPID': '0',
 'PWD': '/',
 'SLURM_SRUN_COMM_HOST': '192.168.192.5',
 'LANG': 'en_US.UTF-8',
 'SLURM_PTY_WIN_COL': '236',
 'SLURM_UMASK': '0022',
 'MODULEPATH': '/usr/share/Modules/modulefiles:/etc/modulefiles:/cluster/modulefiles',
 'SLURM_JOB_UID': '67339',
 'LOADEDMODULES': '',
 'SLURM_NODEID': '0',
 'TMUX_PANE': '%4',
 'SLURM_SUBMIT_DIR': '/',
 'SLURM_TASK_PID': '57304',
 'SLURM_NPROCS': '24',
 'SLURM_CPUS_ON_NODE': '24',
 'SLURM_DISTRIBUTION': 'block',
 'HTTPS_PROXY': 'http://internet4nzm.rz.uni-jena.de:3128',
 'https_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_PROCID': '0',
 'HISTCONTROL': 'ignoredups',
 '_CE_M': '',
 'SLURM_JOB_NODELIST': 'node154',
 'SLURM_PTY_PORT': '38987',
 'HOME': '/home/ye53nis',
 'SHLVL': '3',
 'SLURM_LOCALID': '0',
 'SLURM_JOB_GID': '13280',
 'SLURM_JOB_CPUS_PER_NODE': '24',
 'SLURM_CLUSTER_NAME': 'hpc',
 'no_proxy': 'localhost,127.0.0.0/8,.uni-jena.de,141.35.0.0/16,10.0.0.0/8,192.168.0.0/16,172.0.0.0/8,fe80::/7,2001:638:1558::/24,vmaster,node001',
 'SLURM_GTIDS': '0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23',
 'SLURM_SUBMIT_HOST': 'login01',
 'HTTP_PROXY': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_JOB_PARTITION': 's_standard',
 'MATHEMATICA_HOME': '/cluster/apps/mathematica/11.3',
 'CONDA_PYTHON_EXE': '/cluster/miniconda3/bin/python',
 'LOGNAME': 'ye53nis',
 'SLURM_STEP_NUM_TASKS': '24',
 'QTLIB': '/usr/lib64/qt-3.3/lib',
 'SLURM_JOB_ACCOUNT': 'iaob',
 'SLURM_JOB_NUM_NODES': '1',
 'MODULESHOME': '/usr/share/Modules',
 'CONDA_DEFAULT_ENV': 'tf',
 'LESSOPEN': '||/usr/bin/lesspipe.sh %s',
 'SLURM_STEP_TASKS_PER_NODE': '24',
 'PORT': '8889',
 'SLURM_STEP_NODELIST': 'node154',
 'DISPLAY': ':0',
 'XDG_RUNTIME_DIR': '',
 'XAUTHORITY': '/home/lex/.Xauthority',
 'BASH_FUNC_module()': '() {  eval `/usr/bin/modulecmd bash $*`\n}',
 '_': '/home/ye53nis/.conda/envs/tf/bin/jupyter',
 'JPY_PARENT_PID': '58148',
 'CLICOLOR': '1',
 'PAGER': 'cat',
 'GIT_PAGER': 'cat',
 'MPLBACKEND': 'module://ipykernel.pylab.backend_inline'}
</pre>
</details>
</li>
<li>Test and save metadata after update in Experiment 2a

<details>
<pre class="example">
No of CPUs in system: 72
No of CPUs the current process can use: 24
load average: (8.76, 8.8, 8.92)
os.uname():  posix.uname_result(sysname='Linux', nodename='node154', release='3.10.0-957.1.3.el7.x86_64', version='#1 SMP Thu Nov 29 14:49:43 UTC 2018', machine='x86_64')
PID of process: 151057
RAM total: 199G, RAM used: 45G, RAM free: 66G
the current directory: /beegfs/ye53nis/drmed-git
My disk usage:
Filesystem           Size  Used Avail Use% Mounted on
/dev/sda1             50G  3.8G   47G   8% /
devtmpfs              94G     0   94G   0% /dev
tmpfs                 94G  3.1M   94G   1% /dev/shm
tmpfs                 94G  107M   94G   1% /run
tmpfs                 94G     0   94G   0% /sys/fs/cgroup
nfs01-ib:/home        80T   67T   14T  84% /home
nfs01-ib:/cluster    2.0T  468G  1.6T  23% /cluster
nfs03-ib:/pool/work  100T   79T   22T  79% /nfsdata
nfs02-ib:/data01      88T   72T   16T  82% /data01
/dev/sda3            6.0G  406M  5.6G   7% /var
/dev/sda6            169G   11G  158G   7% /local
/dev/sda5            2.0G   34M  2.0G   2% /tmp
beegfs_nodev         524T  476T   49T  91% /beegfs
tmpfs                 19G     0   19G   0% /run/user/67339# packages in environment at /home/ye53nis/.conda/envs/tf:
#
# Name                    Version                   Build  Channel
_libgcc_mutex             0.1                        main
_openmp_mutex             4.5                       1_gnu
absl-py                   1.0.0                    pypi_0    pypi
alembic                   1.7.6                    pypi_0    pypi
anyio                     2.2.0            py39h06a4308_1
argon2-cffi               20.1.0           py39h27cfd23_1
asteval                   0.9.26                   pypi_0    pypi
astunparse                1.6.3                    pypi_0    pypi
async_generator           1.10               pyhd3eb1b0_0
attrs                     21.4.0             pyhd3eb1b0_0
babel                     2.9.1              pyhd3eb1b0_0
backcall                  0.2.0              pyhd3eb1b0_0
bleach                    4.1.0              pyhd3eb1b0_0
brotlipy                  0.7.0           py39h27cfd23_1003
ca-certificates           2021.10.26           h06a4308_2
cachetools                5.0.0                    pypi_0    pypi
certifi                   2021.10.8        py39h06a4308_2
cffi                      1.15.0           py39hd667e15_1
charset-normalizer        2.0.4              pyhd3eb1b0_0
click                     8.0.3                    pypi_0    pypi
cloudpickle               2.0.0                    pypi_0    pypi
cryptography              36.0.0           py39h9ce1e76_0
cycler                    0.11.0                   pypi_0    pypi
cython                    0.29.27                  pypi_0    pypi
databricks-cli            0.16.4                   pypi_0    pypi
debugpy                   1.5.1            py39h295c915_0
decorator                 5.1.1              pyhd3eb1b0_0
defusedxml                0.7.1              pyhd3eb1b0_0
docker                    5.0.3                    pypi_0    pypi
entrypoints               0.3              py39h06a4308_0
fcsfiles                  2022.2.2                 pypi_0    pypi
flask                     2.0.2                    pypi_0    pypi
flatbuffers               2.0                      pypi_0    pypi
fonttools                 4.29.1                   pypi_0    pypi
future                    0.18.2                   pypi_0    pypi
gast                      0.5.3                    pypi_0    pypi
gitdb                     4.0.9                    pypi_0    pypi
gitpython                 3.1.26                   pypi_0    pypi
google-auth               2.6.0                    pypi_0    pypi
google-auth-oauthlib      0.4.6                    pypi_0    pypi
google-pasta              0.2.0                    pypi_0    pypi
greenlet                  1.1.2                    pypi_0    pypi
grpcio                    1.43.0                   pypi_0    pypi
gunicorn                  20.1.0                   pypi_0    pypi
h5py                      3.6.0                    pypi_0    pypi
idna                      3.3                pyhd3eb1b0_0
importlib-metadata        4.8.2            py39h06a4308_0
importlib_metadata        4.8.2                hd3eb1b0_0
ipykernel                 6.4.1            py39h06a4308_1
ipython                   7.31.1           py39h06a4308_0
ipython_genutils          0.2.0              pyhd3eb1b0_1
itsdangerous              2.0.1                    pypi_0    pypi
jedi                      0.18.1           py39h06a4308_1
jinja2                    3.0.2              pyhd3eb1b0_0
joblib                    1.1.0                    pypi_0    pypi
json5                     0.9.6              pyhd3eb1b0_0
jsonschema                3.2.0              pyhd3eb1b0_2
jupyter_client            7.1.2              pyhd3eb1b0_0
jupyter_core              4.9.1            py39h06a4308_0
jupyter_server            1.4.1            py39h06a4308_0
jupyterlab                3.2.1              pyhd3eb1b0_1
jupyterlab_pygments       0.1.2                      py_0
jupyterlab_server         2.10.2             pyhd3eb1b0_1
keras                     2.8.0                    pypi_0    pypi
keras-preprocessing       1.1.2                    pypi_0    pypi
kiwisolver                1.3.2                    pypi_0    pypi
ld_impl_linux-64          2.35.1               h7274673_9
libclang                  13.0.0                   pypi_0    pypi
libffi                    3.3                  he6710b0_2
libgcc-ng                 9.3.0               h5101ec6_17
libgomp                   9.3.0               h5101ec6_17
libsodium                 1.0.18               h7b6447c_0
libstdcxx-ng              9.3.0               hd4cf53a_17
lmfit                     1.0.3                    pypi_0    pypi
mako                      1.1.6                    pypi_0    pypi
markdown                  3.3.6                    pypi_0    pypi
markupsafe                2.0.1            py39h27cfd23_0
matplotlib                3.5.1                    pypi_0    pypi
matplotlib-inline         0.1.2              pyhd3eb1b0_2
mistune                   0.8.4           py39h27cfd23_1000
mlflow                    1.23.1                   pypi_0    pypi
multipletau               0.3.3                    pypi_0    pypi
nbclassic                 0.2.6              pyhd3eb1b0_0
nbclient                  0.5.3              pyhd3eb1b0_0
nbconvert                 6.3.0            py39h06a4308_0
nbformat                  5.1.3              pyhd3eb1b0_0
ncurses                   6.3                  h7f8727e_2
nest-asyncio              1.5.1              pyhd3eb1b0_0
notebook                  6.4.6            py39h06a4308_0
numpy                     1.22.2                   pypi_0    pypi
oauthlib                  3.2.0                    pypi_0    pypi
openssl                   1.1.1m               h7f8727e_0
opt-einsum                3.3.0                    pypi_0    pypi
packaging                 21.3               pyhd3eb1b0_0
pandas                    1.4.0                    pypi_0    pypi
pandocfilters             1.5.0              pyhd3eb1b0_0
parso                     0.8.3              pyhd3eb1b0_0
pexpect                   4.8.0              pyhd3eb1b0_3
pickleshare               0.7.5           pyhd3eb1b0_1003
pillow                    9.0.1                    pypi_0    pypi
pip                       21.2.4           py39h06a4308_0
prometheus-flask-exporter 0.18.7                   pypi_0    pypi
prometheus_client         0.13.1             pyhd3eb1b0_0
prompt-toolkit            3.0.20             pyhd3eb1b0_0
protobuf                  3.19.4                   pypi_0    pypi
ptyprocess                0.7.0              pyhd3eb1b0_2
pyasn1                    0.4.8                    pypi_0    pypi
pyasn1-modules            0.2.8                    pypi_0    pypi
pycparser                 2.21               pyhd3eb1b0_0
pygments                  2.11.2             pyhd3eb1b0_0
pyopenssl                 22.0.0             pyhd3eb1b0_0
pyparsing                 3.0.4              pyhd3eb1b0_0
pyrsistent                0.18.0           py39heee7806_0
pysocks                   1.7.1            py39h06a4308_0
python                    3.9.7                h12debd9_1
python-dateutil           2.8.2              pyhd3eb1b0_0
pytz                      2021.3             pyhd3eb1b0_0
pyyaml                    6.0                      pypi_0    pypi
pyzmq                     22.3.0           py39h295c915_2
querystring-parser        1.2.4                    pypi_0    pypi
readline                  8.1.2                h7f8727e_1
requests                  2.27.1             pyhd3eb1b0_0
requests-oauthlib         1.3.1                    pypi_0    pypi
rsa                       4.8                      pypi_0    pypi
scikit-learn              1.0.2                    pypi_0    pypi
scipy                     1.8.0                    pypi_0    pypi
seaborn                   0.11.2                   pypi_0    pypi
send2trash                1.8.0              pyhd3eb1b0_1
setuptools                58.0.4           py39h06a4308_0
six                       1.16.0             pyhd3eb1b0_0
smmap                     5.0.0                    pypi_0    pypi
sniffio                   1.2.0            py39h06a4308_1
sqlalchemy                1.4.31                   pypi_0    pypi
sqlite                    3.37.2               hc218d9a_0
sqlparse                  0.4.2                    pypi_0    pypi
tabulate                  0.8.9                    pypi_0    pypi
tensorboard               2.8.0                    pypi_0    pypi
tensorboard-data-server   0.6.1                    pypi_0    pypi
tensorboard-plugin-wit    1.8.1                    pypi_0    pypi
tensorflow                2.8.0                    pypi_0    pypi
tensorflow-io-gcs-filesystem 0.24.0                   pypi_0    pypi
termcolor                 1.1.0                    pypi_0    pypi
terminado                 0.9.4            py39h06a4308_0
testpath                  0.5.0              pyhd3eb1b0_0
tf-estimator-nightly      2.8.0.dev2021122109          pypi_0    pypi
threadpoolctl             3.1.0                    pypi_0    pypi
tk                        8.6.11               h1ccaba5_0
tornado                   6.1              py39h27cfd23_0
traitlets                 5.1.1              pyhd3eb1b0_0
typing-extensions         4.0.1                    pypi_0    pypi
tzdata                    2021e                hda174b7_0
uncertainties             3.1.6                    pypi_0    pypi
urllib3                   1.26.8             pyhd3eb1b0_0
wcwidth                   0.2.5              pyhd3eb1b0_0
webencodings              0.5.1            py39h06a4308_1
websocket-client          1.2.3                    pypi_0    pypi
werkzeug                  2.0.3                    pypi_0    pypi
wheel                     0.37.1             pyhd3eb1b0_0
wrapt                     1.13.3                   pypi_0    pypi
xz                        5.2.5                h7b6447c_0
zeromq                    4.3.4                h2531618_0
zipp                      3.7.0              pyhd3eb1b0_0
zlib                      1.2.11               h7f8727e_4

Note: you may need to restart the kernel to use updated packages.
{'SLURM_CHECKPOINT_IMAGE_DIR': '/var/slurm/checkpoint',
 'SLURM_NODELIST': 'node154',
 'SLURM_JOB_NAME': 'bash',
 'XDG_SESSION_ID': '44301',
 'SLURMD_NODENAME': 'node154',
 'SLURM_TOPOLOGY_ADDR': 'node154',
 'SLURM_NTASKS_PER_NODE': '24',
 'HOSTNAME': 'login01',
 'SLURM_PRIO_PROCESS': '0',
 'SLURM_SRUN_COMM_PORT': '41523',
 'SHELL': '/bin/bash',
 'TERM': 'xterm-color',
 'SLURM_JOB_QOS': 'qstand',
 'SLURM_PTY_WIN_ROW': '34',
 'HISTSIZE': '1000',
 'TMPDIR': '/tmp',
 'SLURM_TOPOLOGY_ADDR_PATTERN': 'node',
 'SSH_CLIENT': '10.231.181.128 49370 22',
 'CONDA_SHLVL': '2',
 'CONDA_PROMPT_MODIFIER': '(tf) ',
 'QTDIR': '/usr/lib64/qt-3.3',
 'QTINC': '/usr/lib64/qt-3.3/include',
 'SSH_TTY': '/dev/pts/79',
 'NO_PROXY': 'localhost,127.0.0.0/8,.uni-jena.de,141.35.0.0/16,10.0.0.0/8,192.168.0.0/16,172.0.0.0/8,fe80::/7,2001:638:1558::/24,vmaster,node001',
 'QT_GRAPHICSSYSTEM_CHECKED': '1',
 'SLURM_NNODES': '1',
 'USER': 'ye53nis',
 'http_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'LS_COLORS': 'rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.axa=01;36:*.oga=01;36:*.spx=01;36:*.xspf=01;36:',
 'CONDA_EXE': '/cluster/miniconda3/bin/conda',
 'SLURM_STEP_NUM_NODES': '1',
 'SLURM_JOBID': '1608805',
 'SRUN_DEBUG': '3',
 'FTP_PROXY': 'http://internet4nzm.rz.uni-jena.de:3128',
 'ftp_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_NTASKS': '24',
 'SLURM_LAUNCH_NODE_IPADDR': '192.168.192.5',
 'SLURM_STEP_ID': '0',
 'TMUX': '/tmp/tmux-67339/default,20557,4',
 '_CE_CONDA': '',
 'CONDA_PREFIX_1': '/cluster/miniconda3',
 'SLURM_STEP_LAUNCHER_PORT': '41523',
 'SLURM_TASKS_PER_NODE': '24',
 'MAIL': '/var/spool/mail/ye53nis',
 'PATH': '/home/ye53nis/.conda/envs/tf/bin:/home/lex/Programme/miniconda3/envs/tf-nightly-lab/bin:/home/lex/Programme/miniconda3/condabin:/home/lex/.local/bin:/bin:/usr/bin:/usr/local/bin:/usr/local/sbin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/var/lib/snapd/snap/bin:/usr/sbin:/home/ye53nis/.local/bin:/home/ye53nis/bin',
 'SLURM_WORKING_CLUSTER': 'hpc:192.168.192.1:6817:8448',
 'SLURM_JOB_ID': '1608805',
 'CONDA_PREFIX': '/home/ye53nis/.conda/envs/tf',
 'SLURM_JOB_USER': 'ye53nis',
 'SLURM_STEPID': '0',
 'PWD': '/',
 'SLURM_SRUN_COMM_HOST': '192.168.192.5',
 'LANG': 'en_US.UTF-8',
 'SLURM_PTY_WIN_COL': '236',
 'SLURM_UMASK': '0022',
 'MODULEPATH': '/usr/share/Modules/modulefiles:/etc/modulefiles:/cluster/modulefiles',
 'SLURM_JOB_UID': '67339',
 'LOADEDMODULES': '',
 'SLURM_NODEID': '0',
 'TMUX_PANE': '%4',
 'SLURM_SUBMIT_DIR': '/',
 'SLURM_TASK_PID': '57304',
 'SLURM_NPROCS': '24',
 'SLURM_CPUS_ON_NODE': '24',
 'SLURM_DISTRIBUTION': 'block',
 'HTTPS_PROXY': 'http://internet4nzm.rz.uni-jena.de:3128',
 'https_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_PROCID': '0',
 'HISTCONTROL': 'ignoredups',
 '_CE_M': '',
 'SLURM_JOB_NODELIST': 'node154',
 'SLURM_PTY_PORT': '38987',
 'HOME': '/home/ye53nis',
 'SHLVL': '3',
 'SLURM_LOCALID': '0',
 'SLURM_JOB_GID': '13280',
 'SLURM_JOB_CPUS_PER_NODE': '24',
 'SLURM_CLUSTER_NAME': 'hpc',
 'no_proxy': 'localhost,127.0.0.0/8,.uni-jena.de,141.35.0.0/16,10.0.0.0/8,192.168.0.0/16,172.0.0.0/8,fe80::/7,2001:638:1558::/24,vmaster,node001',
 'SLURM_GTIDS': '0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23',
 'SLURM_SUBMIT_HOST': 'login01',
 'HTTP_PROXY': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_JOB_PARTITION': 's_standard',
 'MATHEMATICA_HOME': '/cluster/apps/mathematica/11.3',
 'CONDA_PYTHON_EXE': '/cluster/miniconda3/bin/python',
 'LOGNAME': 'ye53nis',
 'SLURM_STEP_NUM_TASKS': '24',
 'QTLIB': '/usr/lib64/qt-3.3/lib',
 'SLURM_JOB_ACCOUNT': 'iaob',
 'SLURM_JOB_NUM_NODES': '1',
 'MODULESHOME': '/usr/share/Modules',
 'CONDA_DEFAULT_ENV': 'tf',
 'LESSOPEN': '||/usr/bin/lesspipe.sh %s',
 'SLURM_STEP_TASKS_PER_NODE': '24',
 'PORT': '8889',
 'SLURM_STEP_NODELIST': 'node154',
 'DISPLAY': ':0',
 'XDG_RUNTIME_DIR': '',
 'XAUTHORITY': '/home/lex/.Xauthority',
 'BASH_FUNC_module()': '() {  eval `/usr/bin/modulecmd bash $*`\n}',
 '_': '/home/ye53nis/.conda/envs/tf/bin/jupyter',
 'JPY_PARENT_PID': '58148',
 'PYDEVD_USE_FRAME_EVAL': 'NO',
 'CLICOLOR': '1',
 'PAGER': 'cat',
 'GIT_PAGER': 'cat',
 'MPLBACKEND': 'module://matplotlib_inline.backend_inline',
 'TF2_BEHAVIOR': '1',
 'KMP_DUPLICATE_LIB_OK': 'True',
 'KMP_INIT_AT_FORK': 'FALSE'}
</pre>
</details>
</li>
<li>Test and save metadata for Analysis 4 (<code>190327_detectordropout</code> needs a
lot of RAM)

<details>
<pre class="example">
No of CPUs in system: 72
No of CPUs the current process can use: 24
load average: (0.0, 0.01, 0.05)
os.uname():  posix.uname_result(sysname='Linux', nodename='node305', release='3.10.0-957.1.3.el7.x86_64', version='#1 SMP Thu Nov 29 14:49:43 UTC 2018', machine='x86_64')
PID of process: 215732
RAM total: 199G, RAM used: 4.9G, RAM free: 110G
the current directory: /
My disk usage:
Filesystem           Size  Used Avail Use% Mounted on
/dev/sda1             50G  3.8G   47G   8% /
devtmpfs              94G     0   94G   0% /dev
tmpfs                 94G  5.6G   89G   6% /dev/shm
tmpfs                 94G  155M   94G   1% /run
tmpfs                 94G     0   94G   0% /sys/fs/cgroup
nfs01-ib:/home        80T   68T   13T  85% /home
nfs03-ib:/pool/work  100T   71T   29T  71% /nfsdata
nfs01-ib:/cluster    2.0T  468G  1.6T  23% /cluster
nfs02-ib:/data01      88T   72T   16T  82% /data01
/dev/sda6            169G  2.6G  166G   2% /local
/dev/sda5            2.0G   34M  2.0G   2% /tmp
/dev/sda3            6.0G  419M  5.6G   7% /var
beegfs_nodev         524T  491T   34T  94% /beegfs
tmpfs                 19G     0   19G   0% /run/user/67339# packages in environment at /home/ye53nis/.conda/envs/tf:
#
# Name                    Version                   Build  Channel
_libgcc_mutex             0.1                        main
_openmp_mutex             4.5                       1_gnu
absl-py                   1.0.0                    pypi_0    pypi
alembic                   1.7.6                    pypi_0    pypi
anyio                     2.2.0            py39h06a4308_1
argon2-cffi               20.1.0           py39h27cfd23_1
asteval                   0.9.26                   pypi_0    pypi
astunparse                1.6.3                    pypi_0    pypi
async_generator           1.10               pyhd3eb1b0_0
attrs                     21.4.0             pyhd3eb1b0_0
babel                     2.9.1              pyhd3eb1b0_0
backcall                  0.2.0              pyhd3eb1b0_0
bleach                    4.1.0              pyhd3eb1b0_0
brotlipy                  0.7.0           py39h27cfd23_1003
ca-certificates           2021.10.26           h06a4308_2
cachetools                5.0.0                    pypi_0    pypi
certifi                   2021.10.8        py39h06a4308_2
cffi                      1.15.0           py39hd667e15_1
charset-normalizer        2.0.4              pyhd3eb1b0_0
click                     8.0.3                    pypi_0    pypi
cloudpickle               2.0.0                    pypi_0    pypi
cryptography              36.0.0           py39h9ce1e76_0
cycler                    0.11.0                   pypi_0    pypi
cython                    0.29.27                  pypi_0    pypi
databricks-cli            0.16.4                   pypi_0    pypi
debugpy                   1.5.1            py39h295c915_0
decorator                 5.1.1              pyhd3eb1b0_0
defusedxml                0.7.1              pyhd3eb1b0_0
docker                    5.0.3                    pypi_0    pypi
entrypoints               0.3              py39h06a4308_0
fcsfiles                  2022.2.2                 pypi_0    pypi
flask                     2.0.2                    pypi_0    pypi
flatbuffers               2.0                      pypi_0    pypi
fonttools                 4.29.1                   pypi_0    pypi
future                    0.18.2                   pypi_0    pypi
gast                      0.5.3                    pypi_0    pypi
gitdb                     4.0.9                    pypi_0    pypi
gitpython                 3.1.26                   pypi_0    pypi
google-auth               2.6.0                    pypi_0    pypi
google-auth-oauthlib      0.4.6                    pypi_0    pypi
google-pasta              0.2.0                    pypi_0    pypi
greenlet                  1.1.2                    pypi_0    pypi
grpcio                    1.43.0                   pypi_0    pypi
gunicorn                  20.1.0                   pypi_0    pypi
h5py                      3.6.0                    pypi_0    pypi
idna                      3.3                pyhd3eb1b0_0
importlib-metadata        4.8.2            py39h06a4308_0
importlib_metadata        4.8.2                hd3eb1b0_0
ipykernel                 6.4.1            py39h06a4308_1
ipython                   7.31.1           py39h06a4308_0
ipython_genutils          0.2.0              pyhd3eb1b0_1
itsdangerous              2.0.1                    pypi_0    pypi
jedi                      0.18.1           py39h06a4308_1
jinja2                    3.0.2              pyhd3eb1b0_0
joblib                    1.1.0                    pypi_0    pypi
json5                     0.9.6              pyhd3eb1b0_0
jsonschema                3.2.0              pyhd3eb1b0_2
jupyter_client            7.1.2              pyhd3eb1b0_0
jupyter_core              4.9.1            py39h06a4308_0
jupyter_server            1.4.1            py39h06a4308_0
jupyterlab                3.2.1              pyhd3eb1b0_1
jupyterlab_pygments       0.1.2                      py_0
jupyterlab_server         2.10.2             pyhd3eb1b0_1
keras                     2.8.0                    pypi_0    pypi
keras-preprocessing       1.1.2                    pypi_0    pypi
kiwisolver                1.3.2                    pypi_0    pypi
ld_impl_linux-64          2.35.1               h7274673_9
libclang                  13.0.0                   pypi_0    pypi
libffi                    3.3                  he6710b0_2
libgcc-ng                 9.3.0               h5101ec6_17
libgomp                   9.3.0               h5101ec6_17
libsodium                 1.0.18               h7b6447c_0
libstdcxx-ng              9.3.0               hd4cf53a_17
lmfit                     1.0.3                    pypi_0    pypi
mako                      1.1.6                    pypi_0    pypi
markdown                  3.3.6                    pypi_0    pypi
markupsafe                2.0.1            py39h27cfd23_0
matplotlib                3.5.1                    pypi_0    pypi
matplotlib-inline         0.1.2              pyhd3eb1b0_2
mistune                   0.8.4           py39h27cfd23_1000
mlflow                    1.23.1                   pypi_0    pypi
multipletau               0.3.3                    pypi_0    pypi
nbclassic                 0.2.6              pyhd3eb1b0_0
nbclient                  0.5.3              pyhd3eb1b0_0
nbconvert                 6.3.0            py39h06a4308_0
nbformat                  5.1.3              pyhd3eb1b0_0
ncurses                   6.3                  h7f8727e_2
nest-asyncio              1.5.1              pyhd3eb1b0_0
notebook                  6.4.6            py39h06a4308_0
numpy                     1.22.2                   pypi_0    pypi
oauthlib                  3.2.0                    pypi_0    pypi
openssl                   1.1.1m               h7f8727e_0
opt-einsum                3.3.0                    pypi_0    pypi
packaging                 21.3               pyhd3eb1b0_0
pandas                    1.4.0                    pypi_0    pypi
pandocfilters             1.5.0              pyhd3eb1b0_0
parso                     0.8.3              pyhd3eb1b0_0
pexpect                   4.8.0              pyhd3eb1b0_3
pickleshare               0.7.5           pyhd3eb1b0_1003
pillow                    9.0.1                    pypi_0    pypi
pip                       21.2.4           py39h06a4308_0
prometheus-flask-exporter 0.18.7                   pypi_0    pypi
prometheus_client         0.13.1             pyhd3eb1b0_0
prompt-toolkit            3.0.20             pyhd3eb1b0_0
protobuf                  3.19.4                   pypi_0    pypi
ptyprocess                0.7.0              pyhd3eb1b0_2
pyasn1                    0.4.8                    pypi_0    pypi
pyasn1-modules            0.2.8                    pypi_0    pypi
pycparser                 2.21               pyhd3eb1b0_0
pygments                  2.11.2             pyhd3eb1b0_0
pyopenssl                 22.0.0             pyhd3eb1b0_0
pyparsing                 3.0.4              pyhd3eb1b0_0
pyrsistent                0.18.0           py39heee7806_0
pysocks                   1.7.1            py39h06a4308_0
python                    3.9.7                h12debd9_1
python-dateutil           2.8.2              pyhd3eb1b0_0
pytz                      2021.3             pyhd3eb1b0_0
pyyaml                    6.0                      pypi_0    pypi
pyzmq                     22.3.0           py39h295c915_2
querystring-parser        1.2.4                    pypi_0    pypi
readline                  8.1.2                h7f8727e_1
requests                  2.27.1             pyhd3eb1b0_0
requests-oauthlib         1.3.1                    pypi_0    pypi
rsa                       4.8                      pypi_0    pypi
scikit-learn              1.0.2                    pypi_0    pypi
scipy                     1.8.0                    pypi_0    pypi
seaborn                   0.11.2                   pypi_0    pypi
send2trash                1.8.0              pyhd3eb1b0_1
setuptools                58.0.4           py39h06a4308_0
six                       1.16.0             pyhd3eb1b0_0
smmap                     5.0.0                    pypi_0    pypi
sniffio                   1.2.0            py39h06a4308_1
sqlalchemy                1.4.31                   pypi_0    pypi
sqlite                    3.37.2               hc218d9a_0
sqlparse                  0.4.2                    pypi_0    pypi
tabulate                  0.8.9                    pypi_0    pypi
tensorboard               2.8.0                    pypi_0    pypi
tensorboard-data-server   0.6.1                    pypi_0    pypi
tensorboard-plugin-wit    1.8.1                    pypi_0    pypi
tensorflow                2.8.0                    pypi_0    pypi
tensorflow-io-gcs-filesystem 0.24.0                   pypi_0    pypi
termcolor                 1.1.0                    pypi_0    pypi
terminado                 0.9.4            py39h06a4308_0
testpath                  0.5.0              pyhd3eb1b0_0
tf-estimator-nightly      2.8.0.dev2021122109          pypi_0    pypi
threadpoolctl             3.1.0                    pypi_0    pypi
tk                        8.6.11               h1ccaba5_0
tornado                   6.1              py39h27cfd23_0
traitlets                 5.1.1              pyhd3eb1b0_0
typing-extensions         4.0.1                    pypi_0    pypi
tzdata                    2021e                hda174b7_0
uncertainties             3.1.6                    pypi_0    pypi
urllib3                   1.26.8             pyhd3eb1b0_0
wcwidth                   0.2.5              pyhd3eb1b0_0
webencodings              0.5.1            py39h06a4308_1
websocket-client          1.2.3                    pypi_0    pypi
werkzeug                  2.0.3                    pypi_0    pypi
wheel                     0.37.1             pyhd3eb1b0_0
wrapt                     1.13.3                   pypi_0    pypi
xz                        5.2.5                h7b6447c_0
zeromq                    4.3.4                h2531618_0
zipp                      3.7.0              pyhd3eb1b0_0
zlib                      1.2.11               h7f8727e_4

Note: you may need to restart the kernel to use updated packages.
{'SLURM_CHECKPOINT_IMAGE_DIR': '/var/slurm/checkpoint',
 'SLURM_NODELIST': 'node305',
 'SLURM_JOB_NAME': 'bash',
 'XDG_SESSION_ID': '44301',
 'SLURMD_NODENAME': 'node305',
 'SLURM_TOPOLOGY_ADDR': 'node305',
 'SLURM_NTASKS_PER_NODE': '24',
 'HOSTNAME': 'login01',
 'SLURM_PRIO_PROCESS': '0',
 'SLURM_SRUN_COMM_PORT': '44912',
 'SHELL': '/bin/bash',
 'TERM': 'xterm-color',
 'SLURM_JOB_QOS': 'qstand',
 'SLURM_PTY_WIN_ROW': '34',
 'HISTSIZE': '1000',
 'TMPDIR': '/tmp',
 'SLURM_TOPOLOGY_ADDR_PATTERN': 'node',
 'SSH_CLIENT': '10.231.181.128 49370 22',
 'CONDA_SHLVL': '2',
 'CONDA_PROMPT_MODIFIER': '(tf) ',
 'QTDIR': '/usr/lib64/qt-3.3',
 'QTINC': '/usr/lib64/qt-3.3/include',
 'SSH_TTY': '/dev/pts/79',
 'NO_PROXY': 'localhost,127.0.0.0/8,.uni-jena.de,141.35.0.0/16,10.0.0.0/8,192.168.0.0/16,172.0.0.0/8,fe80::/7,2001:638:1558::/24,vmaster,node001',
 'QT_GRAPHICSSYSTEM_CHECKED': '1',
 'SLURM_NNODES': '1',
 'USER': 'ye53nis',
 'http_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'LS_COLORS': 'rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.axa=01;36:*.oga=01;36:*.spx=01;36:*.xspf=01;36:',
 'CONDA_EXE': '/cluster/miniconda3/bin/conda',
 'SLURM_STEP_NUM_NODES': '1',
 'SLURM_JOBID': '1612149',
 'SRUN_DEBUG': '3',
 'FTP_PROXY': 'http://internet4nzm.rz.uni-jena.de:3128',
 'ftp_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_NTASKS': '24',
 'SLURM_LAUNCH_NODE_IPADDR': '192.168.192.5',
 'SLURM_STEP_ID': '0',
 'TMUX': '/tmp/tmux-67339/default,20557,4',
 '_CE_CONDA': '',
 'CONDA_PREFIX_1': '/cluster/miniconda3',
 'SLURM_STEP_LAUNCHER_PORT': '44912',
 'SLURM_TASKS_PER_NODE': '24',
 'MAIL': '/var/spool/mail/ye53nis',
 'PATH': '/home/ye53nis/.conda/envs/tf/bin:/home/lex/Programme/miniconda3/envs/tf-nightly-lab/bin:/home/lex/Programme/miniconda3/condabin:/home/lex/.local/bin:/bin:/usr/bin:/usr/local/bin:/usr/local/sbin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/var/lib/snapd/snap/bin:/usr/sbin:/home/ye53nis/.local/bin:/home/ye53nis/bin',
 'SLURM_WORKING_CLUSTER': 'hpc:192.168.192.1:6817:8448',
 'SLURM_JOB_ID': '1612149',
 'CONDA_PREFIX': '/home/ye53nis/.conda/envs/tf',
 'SLURM_JOB_USER': 'ye53nis',
 'SLURM_STEPID': '0',
 'PWD': '/',
 'SLURM_SRUN_COMM_HOST': '192.168.192.5',
 'LANG': 'en_US.UTF-8',
 'SLURM_PTY_WIN_COL': '236',
 'SLURM_UMASK': '0022',
 'MODULEPATH': '/usr/share/Modules/modulefiles:/etc/modulefiles:/cluster/modulefiles',
 'SLURM_JOB_UID': '67339',
 'LOADEDMODULES': '',
 'SLURM_NODEID': '0',
 'TMUX_PANE': '%4',
 'SLURM_SUBMIT_DIR': '/',
 'SLURM_TASK_PID': '214733',
 'SLURM_NPROCS': '24',
 'SLURM_CPUS_ON_NODE': '24',
 'SLURM_DISTRIBUTION': 'block',
 'HTTPS_PROXY': 'http://internet4nzm.rz.uni-jena.de:3128',
 'https_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_PROCID': '0',
 'HISTCONTROL': 'ignoredups',
 '_CE_M': '',
 'SLURM_JOB_NODELIST': 'node305',
 'SLURM_PTY_PORT': '44825',
 'HOME': '/home/ye53nis',
 'SHLVL': '3',
 'SLURM_LOCALID': '0',
 'SLURM_JOB_GID': '13280',
 'SLURM_JOB_CPUS_PER_NODE': '24',
 'SLURM_CLUSTER_NAME': 'hpc',
 'no_proxy': 'localhost,127.0.0.0/8,.uni-jena.de,141.35.0.0/16,10.0.0.0/8,192.168.0.0/16,172.0.0.0/8,fe80::/7,2001:638:1558::/24,vmaster,node001',
 'SLURM_GTIDS': '0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23',
 'SLURM_SUBMIT_HOST': 'login01',
 'HTTP_PROXY': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_JOB_PARTITION': 's_standard',
 'MATHEMATICA_HOME': '/cluster/apps/mathematica/11.3',
 'CONDA_PYTHON_EXE': '/cluster/miniconda3/bin/python',
 'LOGNAME': 'ye53nis',
 'SLURM_STEP_NUM_TASKS': '24',
 'QTLIB': '/usr/lib64/qt-3.3/lib',
 'SLURM_JOB_ACCOUNT': 'iaob',
 'SLURM_JOB_NUM_NODES': '1',
 'MODULESHOME': '/usr/share/Modules',
 'CONDA_DEFAULT_ENV': 'tf',
 'LESSOPEN': '||/usr/bin/lesspipe.sh %s',
 'SLURM_STEP_TASKS_PER_NODE': '24',
 'PORT': '8889',
 'SLURM_STEP_NODELIST': 'node305',
 'DISPLAY': ':0',
 'XDG_RUNTIME_DIR': '',
 'XAUTHORITY': '/home/lex/.Xauthority',
 'BASH_FUNC_module()': '() {  eval `/usr/bin/modulecmd bash $*`\n}',
 '_': '/home/ye53nis/.conda/envs/tf/bin/jupyter',
 'PYDEVD_USE_FRAME_EVAL': 'NO',
 'JPY_PARENT_PID': '214856',
 'CLICOLOR': '1',
 'PAGER': 'cat',
 'GIT_PAGER': 'cat',
 'MPLBACKEND': 'module://matplotlib_inline.backend_inline'}
</pre>
</details>
</li>
</ol>
</div>
</div>
<div id="outline-container-sec-2-1-2" class="outline-4">
<h4 id="sec-2-1-2"><span class="section-number-4">2.1.2</span> Setup: Jupyter 2 on HPC compute node 2</h4>
<div class="outline-text-4" id="text-2-1-2">
<ol class="org-ol">
<li>Setup tmux (<code>#+CALL: setup-tmux[:session remote]</code>) - done already above
</li>
<li>Request compute node via tmux
<div class="org-src-container">

<pre class="src src-tmux"><span style="color: #657b83; font-weight: bold;">cd</span> <span style="color: #513f78;">/</span>
<span style="color: #78683f;">srun</span> <span style="color: #707e4f;">-p</span> <span style="color: #78683f;">s_standard</span> <span style="color: #374478;">--time</span>=<span style="color: #3f7178;">7-10:00:00</span> <span style="color: #7e544f;">--ntasks-per-node</span>=<span style="color: #783f5a;">24</span> <span style="color: #783f5a;">--mem-per-cpu</span>=<span style="color: #3f7178;">2000</span> <span style="color: #7e544f;">--pty</span> <span style="color: #374478;">bash</span>
</pre>
</div>

<pre class="example">
(base) [ye53nis@login01 /]$ srun -p s_standard --time=7-10:00:00 --ntasks-per-node=24 --mem-per-cpu=2
000 --pty bash
(base) [ye53nis@node169 /]$
</pre>
</li>

<li>Branch out git branch <code>exp-220120-correlate-ptu</code> from <code>main</code> (done via
magit) and make sure ou are on the correct branch
<div class="org-src-container">

<pre class="src src-tmux"><span style="color: #657b83; font-weight: bold;">cd</span> <span style="color: #783778;">/beegfs/ye53nis/drmed-git</span>
<span style="color: #784437;">git</span> <span style="color: #783778;">checkout</span> <span style="color: #43783f;">exp-220120-correlate-ptu</span>
</pre>
</div>

<pre class="example">
(base) [ye53nis@node145 drmed-git]$ git checkout exp-220120-correlate-ptu
M       src/nanosimpy
Already on 'exp-220120-correlate-ptu'
(base) [ye53nis@node145 drmed-git]$
</pre>
</li>

<li>Make directory for experiment - already done above
<div class="org-src-container">

<pre class="src src-tmux"><span style="color: #4f5c7e;">ls</span> <span style="color: #43783f;">data/exp-220120-correlate-ptu</span>
</pre>
</div>

<pre class="example">
(base) [ye53nis@node145 drmed-git]$ ls data/exp-220120-correlate-ptu
jupyter
</pre>
</li>

<li>Set output folder using the following org-mode variable - already done
above
</li>

<li>Load conda environment, and start jupyter
<div class="org-src-container">

<pre class="src src-tmux"><span style="color: #4f5c7e;">conda</span> <span style="color: #4f7e67;">activate</span> <span style="color: #37785e;">tf</span>
<span style="color: #657b83; font-weight: bold;">export</span> <span style="color: #268bd2;">PORT</span>=<span style="color: #78683f;">9997</span>
<span style="color: #657b83; font-weight: bold;">export</span> <span style="color: #268bd2;">XDG_RUNTIME_DIR</span>=<span style="color: #2aa198;">''</span>
<span style="color: #657b83; font-weight: bold;">export</span> <span style="color: #268bd2;">XDG_RUNTIME_DIR</span>=<span style="color: #2aa198;">""</span>
<span style="color: #37785e;">jupyter</span> <span style="color: #4f5c7e;">lab</span> <span style="color: #783778;">--no-browser</span> <span style="color: #5e7837;">--port</span>=$<span style="color: #268bd2;">PORT</span>
</pre>
</div>

<pre class="example">
(tf) [ye53nis@node169 /]$ jupyter lab --no-browser --port=$PORT
[I 2022-02-08 15:21:03.957 ServerApp] jupyterlab | extension was successfully linked.
[I 2022-02-08 15:21:04.593 ServerApp] nbclassic | extension was successfully linked.
[I 2022-02-08 15:21:04.659 LabApp] JupyterLab extension loaded from /home/ye53nis/.conda/envs/tf/lib/
python3.9/site-packages/jupyterlab
[I 2022-02-08 15:21:04.659 LabApp] JupyterLab application directory is /home/ye53nis/.conda/envs/tf/s
hare/jupyter/lab
[I 2022-02-08 15:21:04.670 ServerApp] jupyterlab | extension was successfully loaded.
[I 2022-02-08 15:21:04.684 ServerApp] nbclassic | extension was successfully loaded.
[I 2022-02-08 15:21:04.685 ServerApp] Serving notebooks from local directory: /
[I 2022-02-08 15:21:04.685 ServerApp] Jupyter Server 1.4.1 is running at:
[I 2022-02-08 15:21:04.685 ServerApp] http://localhost:9997/lab?token=9ac76fb054cea3bc3b076004eac0489
60ff38213a8a87ed2
[I 2022-02-08 15:21:04.685 ServerApp]  or http://127.0.0.1:9997/lab?token=9ac76fb054cea3bc3b076004eac
048960ff38213a8a87ed2
[I 2022-02-08 15:21:04.685 ServerApp] Use Control-C to stop this server and shut down all kernels (tw
ice to skip confirmation).
[C 2022-02-08 15:21:04.697 ServerApp]

    To access the server, open this file in a browser:
        file:///home/ye53nis/.local/share/jupyter/runtime/jpserver-319063-open.html
    Or copy and paste one of these URLs:
        http://localhost:9997/lab?token=9ac76fb054cea3bc3b076004eac048960ff38213a8a87ed2
     or http://127.0.0.1:9997/lab?token=9ac76fb054cea3bc3b076004eac048960ff38213a8a87ed2
</pre>
</li>

<li>Create ssh tunnel (<code>#+CALL: ssh-tunnel[:session org-tunnel2](port="9997",
      node="node169")</code>)
<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">
</colgroup>
<tbody>
<tr>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">sh-5.1$</td>
<td class="text-left">sh-5.1$</td>
<td class="text-left">ye53nis@ara-login01.rz.uni-jena.de's</td>
<td class="text-left">password:</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">ye53nis@node169's</td>
<td class="text-left">password:</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">Last</td>
<td class="text-left">login:</td>
<td class="text-left">Wed</td>
<td class="text-left">Feb</td>
<td class="text-left">9</td>
<td class="text-left">13:54:20</td>
<td class="text-left">2022</td>
<td class="text-left">from</td>
<td class="text-left">login01.ara</td>
</tr>
</tbody>
</table>
</li>

<li>I started a Python3 kernel using <code>jupyter-server-list-kernels</code>. Then I
added the kernel ID to the <code>:PROPERTIES:</code> drawer of this (and following)
subtrees.

<pre class="example">
python3           03038b73-b2b5-49ce-a1dc-21afb6247d0f   a few seconds ago    starting   0
</pre>
</li>

<li>Test: (<code>#+CALL: jp-metadata(_long='True)</code>) before update in Experiment 2a
<details>
<pre class="example">
No of CPUs in system: 72
No of CPUs the current process can use: 24
load average: (35.8, 34.75, 28.33)
os.uname():  posix.uname_result(sysname='Linux', nodename='node169', release='3.10.0-957.1.3.el7.x86_64', version='#1 SMP Thu Nov 29 14:49:43 UTC 2018', machine='x86_64')
PID of process: 320784
RAM total: 199G, RAM used: 75G, RAM free: 75G
the current directory: /
My disk usage:
Filesystem           Size  Used Avail Use% Mounted on
/dev/sda1             50G  3.8G   47G   8% /
devtmpfs              94G     0   94G   0% /dev
tmpfs                 94G  7.5M   94G   1% /dev/shm
tmpfs                 94G  403M   94G   1% /run
tmpfs                 94G     0   94G   0% /sys/fs/cgroup
nfs03-ib:/pool/work  100T   79T   22T  79% /nfsdata
nfs02-ib:/data01      88T   72T   16T  82% /data01
nfs01-ib:/home        80T   67T   14T  84% /home
nfs01-ib:/cluster    2.0T  468G  1.6T  23% /cluster
/dev/sda6            169G  750M  168G   1% /local
/dev/sda3            6.0G  414M  5.6G   7% /var
/dev/sda5            2.0G   34M  2.0G   2% /tmp
beegfs_nodev         524T  476T   49T  91% /beegfs
tmpfs                 19G     0   19G   0% /run/user/67339# packages in environment at /home/ye53nis/.conda/envs/tf:
#
# Name                    Version                   Build  Channel
_libgcc_mutex             0.1                        main
_openmp_mutex             4.5                       1_gnu
absl-py                   0.13.0                   pypi_0    pypi
alembic                   1.4.1                    pypi_0    pypi
anyio                     2.2.0            py39h06a4308_1
argon2-cffi               20.1.0           py39h27cfd23_1
asteval                   0.9.25                   pypi_0    pypi
astunparse                1.6.3                    pypi_0    pypi
async_generator           1.10               pyhd3eb1b0_0
attrs                     21.2.0             pyhd3eb1b0_0
babel                     2.9.1              pyhd3eb1b0_0
backcall                  0.2.0              pyhd3eb1b0_0
bleach                    3.3.1              pyhd3eb1b0_0
brotlipy                  0.7.0           py39h27cfd23_1003
ca-certificates           2021.7.5             h06a4308_1
cachetools                4.2.2                    pypi_0    pypi
certifi                   2021.5.30        py39h06a4308_0
cffi                      1.14.6           py39h400218f_0
chardet                   4.0.0           py39h06a4308_1003
click                     8.0.1                    pypi_0    pypi
cloudpickle               1.6.0                    pypi_0    pypi
cryptography              3.4.7            py39hd23ed53_0
cycler                    0.10.0                   pypi_0    pypi
databricks-cli            0.14.3                   pypi_0    pypi
decorator                 5.0.9              pyhd3eb1b0_0
defusedxml                0.7.1              pyhd3eb1b0_0
docker                    5.0.0                    pypi_0    pypi
entrypoints               0.3              py39h06a4308_0
fcsfiles                  2021.6.6                 pypi_0    pypi
flask                     2.0.1                    pypi_0    pypi
flatbuffers               1.12                     pypi_0    pypi
future                    0.18.2                   pypi_0    pypi
gast                      0.4.0                    pypi_0    pypi
gitdb                     4.0.7                    pypi_0    pypi
gitpython                 3.1.18                   pypi_0    pypi
google-auth               1.34.0                   pypi_0    pypi
google-auth-oauthlib      0.4.5                    pypi_0    pypi
google-pasta              0.2.0                    pypi_0    pypi
greenlet                  1.1.0                    pypi_0    pypi
grpcio                    1.34.1                   pypi_0    pypi
gunicorn                  20.1.0                   pypi_0    pypi
h5py                      3.1.0                    pypi_0    pypi
idna                      2.10               pyhd3eb1b0_0
importlib-metadata        3.10.0           py39h06a4308_0
importlib_metadata        3.10.0               hd3eb1b0_0
ipykernel                 5.3.4            py39hb070fc8_0
ipython                   7.22.0           py39hb070fc8_0
ipython_genutils          0.2.0              pyhd3eb1b0_1
itsdangerous              2.0.1                    pypi_0    pypi
jedi                      0.17.2           py39h06a4308_1
jinja2                    3.0.1              pyhd3eb1b0_0
joblib                    1.0.1                    pypi_0    pypi
json5                     0.9.6              pyhd3eb1b0_0
jsonschema                3.2.0                      py_2
jupyter-packaging         0.7.12             pyhd3eb1b0_0
jupyter_client            6.1.12             pyhd3eb1b0_0
jupyter_core              4.7.1            py39h06a4308_0
jupyter_server            1.4.1            py39h06a4308_0
jupyterlab                3.0.14             pyhd3eb1b0_1
jupyterlab_pygments       0.1.2                      py_0
jupyterlab_server         2.6.1              pyhd3eb1b0_0
keras-nightly             2.5.0.dev2021032900          pypi_0    pypi
keras-preprocessing       1.1.2                    pypi_0    pypi
kiwisolver                1.3.1                    pypi_0    pypi
ld_impl_linux-64          2.35.1               h7274673_9
libffi                    3.3                  he6710b0_2
libgcc-ng                 9.3.0               h5101ec6_17
libgomp                   9.3.0               h5101ec6_17
libsodium                 1.0.18               h7b6447c_0
libstdcxx-ng              9.3.0               hd4cf53a_17
lmfit                     1.0.2                    pypi_0    pypi
mako                      1.1.4                    pypi_0    pypi
markdown                  3.3.4                    pypi_0    pypi
markupsafe                2.0.1            py39h27cfd23_0
matplotlib                3.4.2                    pypi_0    pypi
mistune                   0.8.4           py39h27cfd23_1000
mlflow                    1.19.0                   pypi_0    pypi
multipletau               0.3.3                    pypi_0    pypi
nbclassic                 0.2.6              pyhd3eb1b0_0
nbclient                  0.5.3              pyhd3eb1b0_0
nbconvert                 6.1.0            py39h06a4308_0
nbformat                  5.1.3              pyhd3eb1b0_0
ncurses                   6.2                  he6710b0_1
nest-asyncio              1.5.1              pyhd3eb1b0_0
notebook                  6.4.0            py39h06a4308_0
numpy                     1.19.5                   pypi_0    pypi
oauthlib                  3.1.1                    pypi_0    pypi
openssl                   1.1.1k               h27cfd23_0
opt-einsum                3.3.0                    pypi_0    pypi
packaging                 21.0               pyhd3eb1b0_0
pandas                    1.3.1                    pypi_0    pypi
pandocfilters             1.4.3            py39h06a4308_1
parso                     0.7.0                      py_0
pexpect                   4.8.0              pyhd3eb1b0_3
pickleshare               0.7.5           pyhd3eb1b0_1003
pillow                    8.3.1                    pypi_0    pypi
pip                       21.1.3           py39h06a4308_0
prometheus-flask-exporter 0.18.2                   pypi_0    pypi
prometheus_client         0.11.0             pyhd3eb1b0_0
prompt-toolkit            3.0.17             pyh06a4308_0
protobuf                  3.17.3                   pypi_0    pypi
ptyprocess                0.7.0              pyhd3eb1b0_2
pyasn1                    0.4.8                    pypi_0    pypi
pyasn1-modules            0.2.8                    pypi_0    pypi
pycparser                 2.20                       py_2
pygments                  2.9.0              pyhd3eb1b0_0
pyopenssl                 20.0.1             pyhd3eb1b0_1
pyparsing                 2.4.7              pyhd3eb1b0_0
pyrsistent                0.18.0           py39h7f8727e_0
pysocks                   1.7.1            py39h06a4308_0
python                    3.9.5                h12debd9_4
python-dateutil           2.8.2              pyhd3eb1b0_0
python-editor             1.0.4                    pypi_0    pypi
pytz                      2021.1             pyhd3eb1b0_0
pyyaml                    5.4.1                    pypi_0    pypi
pyzmq                     20.0.0           py39h2531618_1
querystring-parser        1.2.4                    pypi_0    pypi
readline                  8.1                  h27cfd23_0
requests                  2.25.1             pyhd3eb1b0_0
requests-oauthlib         1.3.0                    pypi_0    pypi
rsa                       4.7.2                    pypi_0    pypi
scikit-learn              0.24.2                   pypi_0    pypi
scipy                     1.7.0                    pypi_0    pypi
seaborn                   0.11.1                   pypi_0    pypi
send2trash                1.5.0              pyhd3eb1b0_1
setuptools                52.0.0           py39h06a4308_0
six                       1.15.0                   pypi_0    pypi
smmap                     4.0.0                    pypi_0    pypi
sniffio                   1.2.0            py39h06a4308_1
sqlalchemy                1.4.22                   pypi_0    pypi
sqlite                    3.36.0               hc218d9a_0
sqlparse                  0.4.1                    pypi_0    pypi
tabulate                  0.8.9                    pypi_0    pypi
tensorboard               2.5.0                    pypi_0    pypi
tensorboard-data-server   0.6.1                    pypi_0    pypi
tensorboard-plugin-wit    1.8.0                    pypi_0    pypi
tensorflow                2.5.0                    pypi_0    pypi
tensorflow-estimator      2.5.0                    pypi_0    pypi
termcolor                 1.1.0                    pypi_0    pypi
terminado                 0.9.4            py39h06a4308_0
testpath                  0.5.0              pyhd3eb1b0_0
threadpoolctl             2.2.0                    pypi_0    pypi
tifffile                  2021.7.30                pypi_0    pypi
tk                        8.6.10               hbc83047_0
tornado                   6.1              py39h27cfd23_0
traitlets                 5.0.5              pyhd3eb1b0_0
typing-extensions         3.7.4.3                  pypi_0    pypi
tzdata                    2021a                h52ac0ba_0
uncertainties             3.1.6                    pypi_0    pypi
urllib3                   1.26.6             pyhd3eb1b0_1
wcwidth                   0.2.5                      py_0
webencodings              0.5.1            py39h06a4308_1
websocket-client          1.1.0                    pypi_0    pypi
werkzeug                  2.0.1                    pypi_0    pypi
wheel                     0.36.2             pyhd3eb1b0_0
wrapt                     1.12.1                   pypi_0    pypi
xz                        5.2.5                h7b6447c_0
zeromq                    4.3.4                h2531618_0
zipp                      3.5.0              pyhd3eb1b0_0
zlib                      1.2.11               h7b6447c_3

Note: you may need to restart the kernel to use updated packages.
{'SLURM_CHECKPOINT_IMAGE_DIR': '/var/slurm/checkpoint',
 'SLURM_NODELIST': 'node169',
 'SLURM_JOB_NAME': 'bash',
 'XDG_SESSION_ID': '44301',
 'SLURMD_NODENAME': 'node169',
 'SLURM_TOPOLOGY_ADDR': 'node169',
 'SLURM_NTASKS_PER_NODE': '24',
 'HOSTNAME': 'login01',
 'SLURM_PRIO_PROCESS': '0',
 'SLURM_SRUN_COMM_PORT': '41490',
 'SHELL': '/bin/bash',
 'TERM': 'xterm-color',
 'SLURM_JOB_QOS': 'qstand',
 'SLURM_PTY_WIN_ROW': '27',
 'HISTSIZE': '1000',
 'TMPDIR': '/tmp',
 'SLURM_TOPOLOGY_ADDR_PATTERN': 'node',
 'SSH_CLIENT': '10.231.181.128 49370 22',
 'CONDA_SHLVL': '2',
 'CONDA_PROMPT_MODIFIER': '(tf) ',
 'QTDIR': '/usr/lib64/qt-3.3',
 'QTINC': '/usr/lib64/qt-3.3/include',
 'SSH_TTY': '/dev/pts/79',
 'NO_PROXY': 'localhost,127.0.0.0/8,.uni-jena.de,141.35.0.0/16,10.0.0.0/8,192.168.0.0/16,172.0.0.0/8,fe80::/7,2001:638:1558::/24,vmaster,node001',
 'QT_GRAPHICSSYSTEM_CHECKED': '1',
 'SLURM_NNODES': '1',
 'USER': 'ye53nis',
 'http_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'LS_COLORS': 'rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.axa=01;36:*.oga=01;36:*.spx=01;36:*.xspf=01;36:',
 'CONDA_EXE': '/cluster/miniconda3/bin/conda',
 'SLURM_STEP_NUM_NODES': '1',
 'SLURM_JOBID': '1608816',
 'SRUN_DEBUG': '3',
 'FTP_PROXY': 'http://internet4nzm.rz.uni-jena.de:3128',
 'ftp_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_NTASKS': '24',
 'SLURM_LAUNCH_NODE_IPADDR': '192.168.192.5',
 'SLURM_STEP_ID': '0',
 'TMUX': '/tmp/tmux-67339/default,20557,9',
 '_CE_CONDA': '',
 'CONDA_PREFIX_1': '/cluster/miniconda3',
 'SLURM_STEP_LAUNCHER_PORT': '41490',
 'SLURM_TASKS_PER_NODE': '24',
 'MAIL': '/var/spool/mail/ye53nis',
 'PATH': '/home/ye53nis/.conda/envs/tf/bin:/home/lex/Programme/miniconda3/envs/tf/bin:/home/lex/Programme/miniconda3/condabin:/home/lex/.local/bin:/bin:/usr/bin:/usr/local/bin:/usr/local/sbin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/var/lib/snapd/snap/bin:/usr/sbin:/home/ye53nis/.local/bin:/home/ye53nis/bin',
 'SLURM_WORKING_CLUSTER': 'hpc:192.168.192.1:6817:8448',
 'SLURM_JOB_ID': '1608816',
 'CONDA_PREFIX': '/home/ye53nis/.conda/envs/tf',
 'SLURM_JOB_USER': 'ye53nis',
 'SLURM_STEPID': '0',
 'PWD': '/',
 'SLURM_SRUN_COMM_HOST': '192.168.192.5',
 'LANG': 'en_US.UTF-8',
 'SLURM_PTY_WIN_COL': '101',
 'SLURM_UMASK': '0022',
 'MODULEPATH': '/usr/share/Modules/modulefiles:/etc/modulefiles:/cluster/modulefiles',
 'SLURM_JOB_UID': '67339',
 'LOADEDMODULES': '',
 'SLURM_NODEID': '0',
 'TMUX_PANE': '%9',
 'SLURM_SUBMIT_DIR': '/',
 'SLURM_TASK_PID': '318230',
 'SLURM_NPROCS': '24',
 'SLURM_CPUS_ON_NODE': '24',
 'SLURM_DISTRIBUTION': 'block',
 'HTTPS_PROXY': 'http://internet4nzm.rz.uni-jena.de:3128',
 'https_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_PROCID': '0',
 'HISTCONTROL': 'ignoredups',
 '_CE_M': '',
 'SLURM_JOB_NODELIST': 'node169',
 'SLURM_PTY_PORT': '38396',
 'HOME': '/home/ye53nis',
 'SHLVL': '3',
 'SLURM_LOCALID': '0',
 'SLURM_JOB_GID': '13280',
 'SLURM_JOB_CPUS_PER_NODE': '24',
 'SLURM_CLUSTER_NAME': 'hpc',
 'no_proxy': 'localhost,127.0.0.0/8,.uni-jena.de,141.35.0.0/16,10.0.0.0/8,192.168.0.0/16,172.0.0.0/8,fe80::/7,2001:638:1558::/24,vmaster,node001',
 'SLURM_GTIDS': '0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23',
 'SLURM_SUBMIT_HOST': 'login01',
 'HTTP_PROXY': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_JOB_PARTITION': 's_standard',
 'MATHEMATICA_HOME': '/cluster/apps/mathematica/12.3',
 'CONDA_PYTHON_EXE': '/cluster/miniconda3/bin/python',
 'LOGNAME': 'ye53nis',
 'SLURM_STEP_NUM_TASKS': '24',
 'QTLIB': '/usr/lib64/qt-3.3/lib',
 'SLURM_JOB_ACCOUNT': 'iaob',
 'SLURM_JOB_NUM_NODES': '1',
 'MODULESHOME': '/usr/share/Modules',
 'CONDA_DEFAULT_ENV': 'tf',
 'LESSOPEN': '||/usr/bin/lesspipe.sh %s',
 'SLURM_STEP_TASKS_PER_NODE': '24',
 'PORT': '9997',
 'SLURM_STEP_NODELIST': 'node169',
 'DISPLAY': ':0',
 'XDG_RUNTIME_DIR': '',
 'XAUTHORITY': '/home/lex/.Xauthority',
 'BASH_FUNC_module()': '() {  eval `/usr/bin/modulecmd bash $*`\n}',
 '_': '/home/ye53nis/.conda/envs/tf/bin/jupyter',
 'JPY_PARENT_PID': '319063',
 'CLICOLOR': '1',
 'PAGER': 'cat',
 'GIT_PAGER': 'cat',
 'MPLBACKEND': 'module://ipykernel.pylab.backend_inline'}
</pre>
</details>
</li>
<li>Test and save metadata after update in Experiment 2a

<details>
<pre class="example">
No of CPUs in system: 72
No of CPUs the current process can use: 24
load average: (35.7, 25.74, 18.03)
os.uname():  posix.uname_result(sysname='Linux', nodename='node169', release='3.10.0-957.1.3.el7.x86_64', version='#1 SMP Thu Nov 29 14:49:43 UTC 2018', machine='x86_64')
PID of process: 320784
RAM total: 199G, RAM used: 75G, RAM free: 74G
the current directory: /
My disk usage:
Filesystem           Size  Used Avail Use% Mounted on
/dev/sda1             50G  3.8G   47G   8% /
devtmpfs              94G     0   94G   0% /dev
tmpfs                 94G  7.5M   94G   1% /dev/shm
tmpfs                 94G  403M   94G   1% /run
tmpfs                 94G     0   94G   0% /sys/fs/cgroup
nfs03-ib:/pool/work  100T   79T   22T  79% /nfsdata
nfs02-ib:/data01      88T   72T   16T  82% /data01
nfs01-ib:/home        80T   67T   14T  84% /home
nfs01-ib:/cluster    2.0T  468G  1.6T  23% /cluster
/dev/sda6            169G  750M  168G   1% /local
/dev/sda3            6.0G  414M  5.6G   7% /var
/dev/sda5            2.0G   34M  2.0G   2% /tmp
beegfs_nodev         524T  476T   49T  91% /beegfs
tmpfs                 19G     0   19G   0% /run/user/67339# packages in environment at /home/ye53nis/.conda/envs/tf:
#
# Name                    Version                   Build  Channel
_libgcc_mutex             0.1                        main
_openmp_mutex             4.5                       1_gnu
absl-py                   1.0.0                    pypi_0    pypi
alembic                   1.7.6                    pypi_0    pypi
anyio                     2.2.0            py39h06a4308_1
argon2-cffi               20.1.0           py39h27cfd23_1
asteval                   0.9.26                   pypi_0    pypi
astunparse                1.6.3                    pypi_0    pypi
async_generator           1.10               pyhd3eb1b0_0
attrs                     21.4.0             pyhd3eb1b0_0
babel                     2.9.1              pyhd3eb1b0_0
backcall                  0.2.0              pyhd3eb1b0_0
bleach                    4.1.0              pyhd3eb1b0_0
brotlipy                  0.7.0           py39h27cfd23_1003
ca-certificates           2021.10.26           h06a4308_2
cachetools                5.0.0                    pypi_0    pypi
certifi                   2021.10.8        py39h06a4308_2
cffi                      1.15.0           py39hd667e15_1
charset-normalizer        2.0.4              pyhd3eb1b0_0
click                     8.0.3                    pypi_0    pypi
cloudpickle               2.0.0                    pypi_0    pypi
cryptography              36.0.0           py39h9ce1e76_0
cycler                    0.11.0                   pypi_0    pypi
cython                    0.29.27                  pypi_0    pypi
databricks-cli            0.16.4                   pypi_0    pypi
debugpy                   1.5.1            py39h295c915_0
decorator                 5.1.1              pyhd3eb1b0_0
defusedxml                0.7.1              pyhd3eb1b0_0
docker                    5.0.3                    pypi_0    pypi
entrypoints               0.3              py39h06a4308_0
fcsfiles                  2022.2.2                 pypi_0    pypi
flask                     2.0.2                    pypi_0    pypi
flatbuffers               2.0                      pypi_0    pypi
fonttools                 4.29.1                   pypi_0    pypi
future                    0.18.2                   pypi_0    pypi
gast                      0.5.3                    pypi_0    pypi
gitdb                     4.0.9                    pypi_0    pypi
gitpython                 3.1.26                   pypi_0    pypi
google-auth               2.6.0                    pypi_0    pypi
google-auth-oauthlib      0.4.6                    pypi_0    pypi
google-pasta              0.2.0                    pypi_0    pypi
greenlet                  1.1.2                    pypi_0    pypi
grpcio                    1.43.0                   pypi_0    pypi
gunicorn                  20.1.0                   pypi_0    pypi
h5py                      3.6.0                    pypi_0    pypi
idna                      3.3                pyhd3eb1b0_0
importlib-metadata        4.8.2            py39h06a4308_0
importlib_metadata        4.8.2                hd3eb1b0_0
ipykernel                 6.4.1            py39h06a4308_1
ipython                   7.31.1           py39h06a4308_0
ipython_genutils          0.2.0              pyhd3eb1b0_1
itsdangerous              2.0.1                    pypi_0    pypi
jedi                      0.18.1           py39h06a4308_1
jinja2                    3.0.2              pyhd3eb1b0_0
joblib                    1.1.0                    pypi_0    pypi
json5                     0.9.6              pyhd3eb1b0_0
jsonschema                3.2.0              pyhd3eb1b0_2
jupyter_client            7.1.2              pyhd3eb1b0_0
jupyter_core              4.9.1            py39h06a4308_0
jupyter_server            1.4.1            py39h06a4308_0
jupyterlab                3.2.1              pyhd3eb1b0_1
jupyterlab_pygments       0.1.2                      py_0
jupyterlab_server         2.10.2             pyhd3eb1b0_1
keras                     2.8.0                    pypi_0    pypi
keras-preprocessing       1.1.2                    pypi_0    pypi
kiwisolver                1.3.2                    pypi_0    pypi
ld_impl_linux-64          2.35.1               h7274673_9
libclang                  13.0.0                   pypi_0    pypi
libffi                    3.3                  he6710b0_2
libgcc-ng                 9.3.0               h5101ec6_17
libgomp                   9.3.0               h5101ec6_17
libsodium                 1.0.18               h7b6447c_0
libstdcxx-ng              9.3.0               hd4cf53a_17
lmfit                     1.0.3                    pypi_0    pypi
mako                      1.1.6                    pypi_0    pypi
markdown                  3.3.6                    pypi_0    pypi
markupsafe                2.0.1            py39h27cfd23_0
matplotlib                3.5.1                    pypi_0    pypi
matplotlib-inline         0.1.2              pyhd3eb1b0_2
mistune                   0.8.4           py39h27cfd23_1000
mlflow                    1.23.1                   pypi_0    pypi
multipletau               0.3.3                    pypi_0    pypi
nbclassic                 0.2.6              pyhd3eb1b0_0
nbclient                  0.5.3              pyhd3eb1b0_0
nbconvert                 6.3.0            py39h06a4308_0
nbformat                  5.1.3              pyhd3eb1b0_0
ncurses                   6.3                  h7f8727e_2
nest-asyncio              1.5.1              pyhd3eb1b0_0
notebook                  6.4.6            py39h06a4308_0
numpy                     1.22.2                   pypi_0    pypi
oauthlib                  3.2.0                    pypi_0    pypi
openssl                   1.1.1m               h7f8727e_0
opt-einsum                3.3.0                    pypi_0    pypi
packaging                 21.3               pyhd3eb1b0_0
pandas                    1.4.0                    pypi_0    pypi
pandocfilters             1.5.0              pyhd3eb1b0_0
parso                     0.8.3              pyhd3eb1b0_0
pexpect                   4.8.0              pyhd3eb1b0_3
pickleshare               0.7.5           pyhd3eb1b0_1003
pillow                    9.0.1                    pypi_0    pypi
pip                       21.2.4           py39h06a4308_0
prometheus-flask-exporter 0.18.7                   pypi_0    pypi
prometheus_client         0.13.1             pyhd3eb1b0_0
prompt-toolkit            3.0.20             pyhd3eb1b0_0
protobuf                  3.19.4                   pypi_0    pypi
ptyprocess                0.7.0              pyhd3eb1b0_2
pyasn1                    0.4.8                    pypi_0    pypi
pyasn1-modules            0.2.8                    pypi_0    pypi
pycparser                 2.21               pyhd3eb1b0_0
pygments                  2.11.2             pyhd3eb1b0_0
pyopenssl                 22.0.0             pyhd3eb1b0_0
pyparsing                 3.0.4              pyhd3eb1b0_0
pyrsistent                0.18.0           py39heee7806_0
pysocks                   1.7.1            py39h06a4308_0
python                    3.9.7                h12debd9_1
python-dateutil           2.8.2              pyhd3eb1b0_0
pytz                      2021.3             pyhd3eb1b0_0
pyyaml                    6.0                      pypi_0    pypi
pyzmq                     22.3.0           py39h295c915_2
querystring-parser        1.2.4                    pypi_0    pypi
readline                  8.1.2                h7f8727e_1
requests                  2.27.1             pyhd3eb1b0_0
requests-oauthlib         1.3.1                    pypi_0    pypi
rsa                       4.8                      pypi_0    pypi
scikit-learn              1.0.2                    pypi_0    pypi
scipy                     1.8.0                    pypi_0    pypi
seaborn                   0.11.2                   pypi_0    pypi
send2trash                1.8.0              pyhd3eb1b0_1
setuptools                58.0.4           py39h06a4308_0
six                       1.16.0             pyhd3eb1b0_0
smmap                     5.0.0                    pypi_0    pypi
sniffio                   1.2.0            py39h06a4308_1
sqlalchemy                1.4.31                   pypi_0    pypi
sqlite                    3.37.2               hc218d9a_0
sqlparse                  0.4.2                    pypi_0    pypi
tabulate                  0.8.9                    pypi_0    pypi
tensorboard               2.8.0                    pypi_0    pypi
tensorboard-data-server   0.6.1                    pypi_0    pypi
tensorboard-plugin-wit    1.8.1                    pypi_0    pypi
tensorflow                2.8.0                    pypi_0    pypi
tensorflow-io-gcs-filesystem 0.24.0                   pypi_0    pypi
termcolor                 1.1.0                    pypi_0    pypi
terminado                 0.9.4            py39h06a4308_0
testpath                  0.5.0              pyhd3eb1b0_0
tf-estimator-nightly      2.8.0.dev2021122109          pypi_0    pypi
threadpoolctl             3.1.0                    pypi_0    pypi
tk                        8.6.11               h1ccaba5_0
tornado                   6.1              py39h27cfd23_0
traitlets                 5.1.1              pyhd3eb1b0_0
typing-extensions         4.0.1                    pypi_0    pypi
tzdata                    2021e                hda174b7_0
uncertainties             3.1.6                    pypi_0    pypi
urllib3                   1.26.8             pyhd3eb1b0_0
wcwidth                   0.2.5              pyhd3eb1b0_0
webencodings              0.5.1            py39h06a4308_1
websocket-client          1.2.3                    pypi_0    pypi
werkzeug                  2.0.3                    pypi_0    pypi
wheel                     0.37.1             pyhd3eb1b0_0
wrapt                     1.13.3                   pypi_0    pypi
xz                        5.2.5                h7b6447c_0
zeromq                    4.3.4                h2531618_0
zipp                      3.7.0              pyhd3eb1b0_0
zlib                      1.2.11               h7f8727e_4

Note: you may need to restart the kernel to use updated packages.
{'SLURM_CHECKPOINT_IMAGE_DIR': '/var/slurm/checkpoint',
 'SLURM_NODELIST': 'node169',
 'SLURM_JOB_NAME': 'bash',
 'XDG_SESSION_ID': '44301',
 'SLURMD_NODENAME': 'node169',
 'SLURM_TOPOLOGY_ADDR': 'node169',
 'SLURM_NTASKS_PER_NODE': '24',
 'HOSTNAME': 'login01',
 'SLURM_PRIO_PROCESS': '0',
 'SLURM_SRUN_COMM_PORT': '41490',
 'SHELL': '/bin/bash',
 'TERM': 'xterm-color',
 'SLURM_JOB_QOS': 'qstand',
 'SLURM_PTY_WIN_ROW': '27',
 'HISTSIZE': '1000',
 'TMPDIR': '/tmp',
 'SLURM_TOPOLOGY_ADDR_PATTERN': 'node',
 'SSH_CLIENT': '10.231.181.128 49370 22',
 'CONDA_SHLVL': '2',
 'CONDA_PROMPT_MODIFIER': '(tf) ',
 'QTDIR': '/usr/lib64/qt-3.3',
 'QTINC': '/usr/lib64/qt-3.3/include',
 'SSH_TTY': '/dev/pts/79',
 'NO_PROXY': 'localhost,127.0.0.0/8,.uni-jena.de,141.35.0.0/16,10.0.0.0/8,192.168.0.0/16,172.0.0.0/8,fe80::/7,2001:638:1558::/24,vmaster,node001',
 'QT_GRAPHICSSYSTEM_CHECKED': '1',
 'SLURM_NNODES': '1',
 'USER': 'ye53nis',
 'http_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'LS_COLORS': 'rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.axa=01;36:*.oga=01;36:*.spx=01;36:*.xspf=01;36:',
 'CONDA_EXE': '/cluster/miniconda3/bin/conda',
 'SLURM_STEP_NUM_NODES': '1',
 'SLURM_JOBID': '1608816',
 'SRUN_DEBUG': '3',
 'FTP_PROXY': 'http://internet4nzm.rz.uni-jena.de:3128',
 'ftp_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_NTASKS': '24',
 'SLURM_LAUNCH_NODE_IPADDR': '192.168.192.5',
 'SLURM_STEP_ID': '0',
 'TMUX': '/tmp/tmux-67339/default,20557,9',
 '_CE_CONDA': '',
 'CONDA_PREFIX_1': '/cluster/miniconda3',
 'SLURM_STEP_LAUNCHER_PORT': '41490',
 'SLURM_TASKS_PER_NODE': '24',
 'MAIL': '/var/spool/mail/ye53nis',
 'PATH': '/home/ye53nis/.conda/envs/tf/bin:/home/lex/Programme/miniconda3/envs/tf/bin:/home/lex/Programme/miniconda3/condabin:/home/lex/.local/bin:/bin:/usr/bin:/usr/local/bin:/usr/local/sbin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/var/lib/snapd/snap/bin:/usr/sbin:/home/ye53nis/.local/bin:/home/ye53nis/bin',
 'SLURM_WORKING_CLUSTER': 'hpc:192.168.192.1:6817:8448',
 'SLURM_JOB_ID': '1608816',
 'CONDA_PREFIX': '/home/ye53nis/.conda/envs/tf',
 'SLURM_JOB_USER': 'ye53nis',
 'SLURM_STEPID': '0',
 'PWD': '/',
 'SLURM_SRUN_COMM_HOST': '192.168.192.5',
 'LANG': 'en_US.UTF-8',
 'SLURM_PTY_WIN_COL': '101',
 'SLURM_UMASK': '0022',
 'MODULEPATH': '/usr/share/Modules/modulefiles:/etc/modulefiles:/cluster/modulefiles',
 'SLURM_JOB_UID': '67339',
 'LOADEDMODULES': '',
 'SLURM_NODEID': '0',
 'TMUX_PANE': '%9',
 'SLURM_SUBMIT_DIR': '/',
 'SLURM_TASK_PID': '318230',
 'SLURM_NPROCS': '24',
 'SLURM_CPUS_ON_NODE': '24',
 'SLURM_DISTRIBUTION': 'block',
 'HTTPS_PROXY': 'http://internet4nzm.rz.uni-jena.de:3128',
 'https_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_PROCID': '0',
 'HISTCONTROL': 'ignoredups',
 '_CE_M': '',
 'SLURM_JOB_NODELIST': 'node169',
 'SLURM_PTY_PORT': '38396',
 'HOME': '/home/ye53nis',
 'SHLVL': '3',
 'SLURM_LOCALID': '0',
 'SLURM_JOB_GID': '13280',
 'SLURM_JOB_CPUS_PER_NODE': '24',
 'SLURM_CLUSTER_NAME': 'hpc',
 'no_proxy': 'localhost,127.0.0.0/8,.uni-jena.de,141.35.0.0/16,10.0.0.0/8,192.168.0.0/16,172.0.0.0/8,fe80::/7,2001:638:1558::/24,vmaster,node001',
 'SLURM_GTIDS': '0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23',
 'SLURM_SUBMIT_HOST': 'login01',
 'HTTP_PROXY': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_JOB_PARTITION': 's_standard',
 'MATHEMATICA_HOME': '/cluster/apps/mathematica/12.3',
 'CONDA_PYTHON_EXE': '/cluster/miniconda3/bin/python',
 'LOGNAME': 'ye53nis',
 'SLURM_STEP_NUM_TASKS': '24',
 'QTLIB': '/usr/lib64/qt-3.3/lib',
 'SLURM_JOB_ACCOUNT': 'iaob',
 'SLURM_JOB_NUM_NODES': '1',
 'MODULESHOME': '/usr/share/Modules',
 'CONDA_DEFAULT_ENV': 'tf',
 'LESSOPEN': '||/usr/bin/lesspipe.sh %s',
 'SLURM_STEP_TASKS_PER_NODE': '24',
 'PORT': '9997',
 'SLURM_STEP_NODELIST': 'node169',
 'DISPLAY': ':0',
 'XDG_RUNTIME_DIR': '',
 'XAUTHORITY': '/home/lex/.Xauthority',
 'BASH_FUNC_module()': '() {  eval `/usr/bin/modulecmd bash $*`\n}',
 '_': '/home/ye53nis/.conda/envs/tf/bin/jupyter',
 'JPY_PARENT_PID': '319063',
 'CLICOLOR': '1',
 'PAGER': 'cat',
 'GIT_PAGER': 'cat',
 'MPLBACKEND': 'module://ipykernel.pylab.backend_inline'}
</pre>
</details>
</li>
</ol>
</div>
</div>
<div id="outline-container-sec-2-1-3" class="outline-4">
<h4 id="sec-2-1-3"><span class="section-number-4">2.1.3</span> Setup: Jupyter 3 on local computer</h4>
<div class="outline-text-4" id="text-2-1-3">
<ol class="org-ol">
<li>on our local machine we don't need tmux. A simple sh command is enough. So
let's start the conda environment in the sh session <code>local</code> and start
jupterlab there.
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #4f5c7e;">conda</span> <span style="color: #4f7e67;">activate</span> <span style="color: #37785e;">tf</span>
<span style="color: #37785e;">jupyter</span> <span style="color: #4f5c7e;">lab</span> <span style="color: #783778;">--no-browser</span> <span style="color: #5e7837;">--port</span>=<span style="color: #783f5a;">8888</span>
</pre>
</div>

<pre class="example">
sh-5.1$ [I 2022-01-25 13:54:15.779 ServerApp] jupyterlab | extension was successfully linked.
[I 2022-01-25 13:54:16.426 ServerApp] nbclassic | extension was successfully linked.
[I 2022-01-25 13:54:16.509 LabApp] JupyterLab extension loaded from /home/lex/Programme/miniconda3/envs/tf/lib/python3.9/site-packages/jupyterlab
[I 2022-01-25 13:54:16.509 LabApp] JupyterLab application directory is /home/lex/Programme/miniconda3/envs/tf/share/jupyter/lab
[I 2022-01-25 13:54:16.517 ServerApp] jupyterlab | extension was successfully loaded.
[I 2022-01-25 13:54:16.529 ServerApp] nbclassic | extension was successfully loaded.
[I 2022-01-25 13:54:16.530 ServerApp] Serving notebooks from local directory: /home/lex/Programme/drmed-git
[I 2022-01-25 13:54:16.530 ServerApp] Jupyter Server 1.4.1 is running at:
[I 2022-01-25 13:54:16.530 ServerApp] http://localhost:8888/lab?token=a45ac98a52ac86cdccd87547a734345bdc338322def30d98
[I 2022-01-25 13:54:16.530 ServerApp]  or http://127.0.0.1:8888/lab?token=a45ac98a52ac86cdccd87547a734345bdc338322def30d98
[I 2022-01-25 13:54:16.530 ServerApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
[C 2022-01-25 13:54:16.540 ServerApp]

    To access the server, open this file in a browser:
        file:///home/lex/.local/share/jupyter/runtime/jpserver-62432-open.html
    Or copy and paste one of these URLs:
        http://localhost:8888/lab?token=a45ac98a52ac86cdccd87547a734345bdc338322def30d98
     or http://127.0.0.1:8888/lab?token=a45ac98a52ac86cdccd87547a734345bdc338322def30d98
</pre>
</li>

<li>I started a Python3 kernel using <code>jupyter-server-list-kernels</code>. Then I
added the kernel ID to the <code>:PROPERTIES:</code> drawer of this (and following)
subtrees.

<pre class="example">
python3           03038b73-b2b5-49ce-a1dc-21afb6247d0f   a few seconds ago    starting   0
</pre>
</li>

<li>Test: (<code>#+CALL: jp-metadata(_long='True)</code>)
<details>
<pre class="example">
No of CPUs in system: 4
No of CPUs the current process can use: 4
load average: (3.83, 4.72, 5.29)
os.uname():  posix.uname_result(sysname='Linux', nodename='Topialex', release='5.13.19-2-MANJARO', version='#1 SMP PREEMPT Sun Sep 19 21:31:53 UTC 2021', machine='x86_64')
PID of process: 321569
RAM total: 16Gi, RAM used: 3,2Gi, RAM free: 9,1Gi
the current directory: /home/lex/Programme/drmed-git
My disk usage:
Filesystem      Size  Used Avail Use% Mounted on
dev             3,9G     0  3,9G   0% /dev
run             3,9G  1,5M  3,9G   1% /run
/dev/sda2       167G  130G   29G  82% /
tmpfs           3,9G   96M  3,8G   3% /dev/shm
tmpfs           3,9G   18M  3,9G   1% /tmp
/dev/sda1       300M  264K  300M   1% /boot/efi
tmpfs           784M  100K  784M   1% /run/user/1000# packages in environment at /home/lex/Programme/miniconda3/envs/tf:
#
# Name                    Version                   Build  Channel
_libgcc_mutex             0.1                        main
_openmp_mutex             4.5                       1_gnu
absl-py                   1.0.0                    pypi_0    pypi
alembic                   1.4.1                    pypi_0    pypi
anyio                     2.2.0            py39h06a4308_1
argon2-cffi               20.1.0           py39h27cfd23_1
asteval                   0.9.25                   pypi_0    pypi
astroid                   2.9.2                    pypi_0    pypi
astunparse                1.6.3                    pypi_0    pypi
async_generator           1.10               pyhd3eb1b0_0
attrs                     21.2.0             pyhd3eb1b0_0
babel                     2.9.1              pyhd3eb1b0_0
backcall                  0.2.0              pyhd3eb1b0_0
bleach                    4.0.0              pyhd3eb1b0_0
brotlipy                  0.7.0           py39h27cfd23_1003
ca-certificates           2021.10.26           h06a4308_2
cachetools                4.2.4                    pypi_0    pypi
certifi                   2021.10.8        py39h06a4308_0
cffi                      1.14.6           py39h400218f_0
charset-normalizer        2.0.4              pyhd3eb1b0_0
click                     8.0.3                    pypi_0    pypi
cloudpickle               2.0.0                    pypi_0    pypi
cryptography              36.0.0           py39h9ce1e76_0
cycler                    0.11.0                   pypi_0    pypi
cython                    0.29.26                  pypi_0    pypi
databricks-cli            0.16.2                   pypi_0    pypi
debugpy                   1.5.1            py39h295c915_0
decorator                 5.1.0              pyhd3eb1b0_0
defusedxml                0.7.1              pyhd3eb1b0_0
docker                    5.0.3                    pypi_0    pypi
entrypoints               0.3              py39h06a4308_0
fcsfiles                  2021.6.6                 pypi_0    pypi
flake8                    4.0.1                    pypi_0    pypi
flask                     2.0.2                    pypi_0    pypi
flatbuffers               2.0                      pypi_0    pypi
focuspoint                0.1                      pypi_0    pypi
fonttools                 4.28.5                   pypi_0    pypi
future                    0.18.2                   pypi_0    pypi
gast                      0.4.0                    pypi_0    pypi
gitdb                     4.0.9                    pypi_0    pypi
gitpython                 3.1.24                   pypi_0    pypi
google-auth               2.3.3                    pypi_0    pypi
google-auth-oauthlib      0.4.6                    pypi_0    pypi
google-pasta              0.2.0                    pypi_0    pypi
greenlet                  1.1.2                    pypi_0    pypi
grpcio                    1.43.0                   pypi_0    pypi
gunicorn                  20.1.0                   pypi_0    pypi
h5py                      3.6.0                    pypi_0    pypi
idna                      3.3                pyhd3eb1b0_0
importlib-metadata        4.8.2            py39h06a4308_0
importlib_metadata        4.8.2                hd3eb1b0_0
ipykernel                 6.4.1            py39h06a4308_1
ipython                   7.29.0           py39hb070fc8_0
ipython_genutils          0.2.0              pyhd3eb1b0_1
isort                     5.10.1                   pypi_0    pypi
itsdangerous              2.0.1                    pypi_0    pypi
jedi                      0.18.0           py39h06a4308_1
jinja2                    3.0.2              pyhd3eb1b0_0
joblib                    1.1.0                    pypi_0    pypi
json5                     0.9.6              pyhd3eb1b0_0
jsonschema                3.2.0              pyhd3eb1b0_2
jupyter_client            7.1.0              pyhd3eb1b0_0
jupyter_core              4.9.1            py39h06a4308_0
jupyter_server            1.4.1            py39h06a4308_0
jupyterlab                3.2.1              pyhd3eb1b0_1
jupyterlab_pygments       0.1.2                      py_0
jupyterlab_server         2.8.2              pyhd3eb1b0_0
keras                     2.7.0                    pypi_0    pypi
keras-preprocessing       1.1.2                    pypi_0    pypi
kiwisolver                1.3.2                    pypi_0    pypi
lazy-object-proxy         1.7.1                    pypi_0    pypi
ld_impl_linux-64          2.35.1               h7274673_9
libclang                  12.0.0                   pypi_0    pypi
libffi                    3.3                  he6710b0_2
libgcc-ng                 9.3.0               h5101ec6_17
libgomp                   9.3.0               h5101ec6_17
libsodium                 1.0.18               h7b6447c_0
libstdcxx-ng              9.3.0               hd4cf53a_17
lmfit                     1.0.3                    pypi_0    pypi
mako                      1.1.6                    pypi_0    pypi
markdown                  3.3.6                    pypi_0    pypi
markupsafe                2.0.1            py39h27cfd23_0
matplotlib                3.5.1                    pypi_0    pypi
matplotlib-inline         0.1.2              pyhd3eb1b0_2
mccabe                    0.6.1                    pypi_0    pypi
mistune                   0.8.4           py39h27cfd23_1000
mlflow                    1.22.0                   pypi_0    pypi
multipletau               0.3.3                    pypi_0    pypi
mypy                      0.930                    pypi_0    pypi
mypy-extensions           0.4.3                    pypi_0    pypi
nbclassic                 0.2.6              pyhd3eb1b0_0
nbclient                  0.5.3              pyhd3eb1b0_0
nbconvert                 6.1.0            py39h06a4308_0
nbformat                  5.1.3              pyhd3eb1b0_0
ncurses                   6.3                  h7f8727e_2
nest-asyncio              1.5.1              pyhd3eb1b0_0
nodeenv                   1.6.0                    pypi_0    pypi
notebook                  6.4.6            py39h06a4308_0
numpy                     1.21.5                   pypi_0    pypi
oauthlib                  3.1.1                    pypi_0    pypi
openssl                   1.1.1l               h7f8727e_0
opt-einsum                3.3.0                    pypi_0    pypi
packaging                 21.3               pyhd3eb1b0_0
pandas                    1.3.5                    pypi_0    pypi
pandocfilters             1.4.3            py39h06a4308_1
parso                     0.8.2              pyhd3eb1b0_0
pexpect                   4.8.0              pyhd3eb1b0_3
pickleshare               0.7.5           pyhd3eb1b0_1003
pillow                    8.4.0                    pypi_0    pypi
pip                       21.2.4           py39h06a4308_0
platformdirs              2.4.1                    pypi_0    pypi
prometheus-flask-exporter 0.18.7                   pypi_0    pypi
prometheus_client         0.12.0             pyhd3eb1b0_0
prompt-toolkit            3.0.20             pyhd3eb1b0_0
protobuf                  3.19.1                   pypi_0    pypi
ptyprocess                0.7.0              pyhd3eb1b0_2
pyasn1                    0.4.8                    pypi_0    pypi
pyasn1-modules            0.2.8                    pypi_0    pypi
pycodestyle               2.8.0                    pypi_0    pypi
pycparser                 2.21               pyhd3eb1b0_0
pyflakes                  2.4.0                    pypi_0    pypi
pygments                  2.10.0             pyhd3eb1b0_0
pylint                    2.12.2                   pypi_0    pypi
pyopenssl                 21.0.0             pyhd3eb1b0_1
pyparsing                 3.0.4              pyhd3eb1b0_0
pyright                   0.0.13                   pypi_0    pypi
pyrsistent                0.18.0           py39heee7806_0
pysocks                   1.7.1            py39h06a4308_0
python                    3.9.7                h12debd9_1
python-dateutil           2.8.2              pyhd3eb1b0_0
python-editor             1.0.4                    pypi_0    pypi
pytz                      2021.3             pyhd3eb1b0_0
pyyaml                    6.0                      pypi_0    pypi
pyzmq                     22.3.0           py39h295c915_2
querystring-parser        1.2.4                    pypi_0    pypi
readline                  8.1                  h27cfd23_0
requests                  2.26.0             pyhd3eb1b0_0
requests-oauthlib         1.3.0                    pypi_0    pypi
rsa                       4.8                      pypi_0    pypi
scikit-learn              1.0.2                    pypi_0    pypi
scipy                     1.7.3                    pypi_0    pypi
seaborn                   0.11.2                   pypi_0    pypi
send2trash                1.8.0              pyhd3eb1b0_1
setuptools                58.0.4           py39h06a4308_0
six                       1.16.0             pyhd3eb1b0_0
smmap                     5.0.0                    pypi_0    pypi
sniffio                   1.2.0            py39h06a4308_1
sqlalchemy                1.4.29                   pypi_0    pypi
sqlite                    3.37.0               hc218d9a_0
sqlparse                  0.4.2                    pypi_0    pypi
tabulate                  0.8.9                    pypi_0    pypi
tensorboard               2.7.0                    pypi_0    pypi
tensorboard-data-server   0.6.1                    pypi_0    pypi
tensorboard-plugin-wit    1.8.0                    pypi_0    pypi
tensorflow                2.7.0                    pypi_0    pypi
tensorflow-estimator      2.7.0                    pypi_0    pypi
tensorflow-io-gcs-filesystem 0.23.1                   pypi_0    pypi
termcolor                 1.1.0                    pypi_0    pypi
terminado                 0.9.4            py39h06a4308_0
testpath                  0.5.0              pyhd3eb1b0_0
threadpoolctl             3.0.0                    pypi_0    pypi
tk                        8.6.11               h1ccaba5_0
toml                      0.10.2                   pypi_0    pypi
tomli                     2.0.0                    pypi_0    pypi
tornado                   6.1              py39h27cfd23_0
traitlets                 5.1.1              pyhd3eb1b0_0
typing-extensions         4.0.1                    pypi_0    pypi
tzdata                    2021e                hda174b7_0
uncertainties             3.1.6                    pypi_0    pypi
urllib3                   1.26.7             pyhd3eb1b0_0
wcwidth                   0.2.5              pyhd3eb1b0_0
webencodings              0.5.1            py39h06a4308_1
websocket-client          1.2.3                    pypi_0    pypi
werkzeug                  2.0.2                    pypi_0    pypi
wheel                     0.37.0             pyhd3eb1b0_1
wrapt                     1.13.3                   pypi_0    pypi
xz                        5.2.5                h7b6447c_0
zeromq                    4.3.4                h2531618_0
zipp                      3.6.0              pyhd3eb1b0_0
zlib                      1.2.11               h7f8727e_4

Note: you may need to restart the kernel to use updated packages.
{'SHELL': '/bin/bash',
 'SESSION_MANAGER': 'local/Topialex:@/tmp/.ICE-unix/938,unix/Topialex:/tmp/.ICE-unix/938',
 'XDG_CONFIG_DIRS': '/home/lex/.config/kdedefaults:/etc/xdg',
 'XDG_SESSION_PATH': '/org/freedesktop/DisplayManager/Session1',
 'CONDA_EXE': '/home/lex/Programme/miniconda3/bin/conda',
 '_CE_M': '',
 'LANGUAGE': 'en_GB',
 'TERMCAP': '',
 'LC_ADDRESS': 'de_DE.UTF-8',
 'LC_NAME': 'de_DE.UTF-8',
 'INSIDE_EMACS': '27.2,comint',
 'DESKTOP_SESSION': 'plasma',
 'LC_MONETARY': 'de_DE.UTF-8',
 'GTK_RC_FILES': '/etc/gtk/gtkrc:/home/lex/.gtkrc:/home/lex/.config/gtkrc',
 'XCURSOR_SIZE': '24',
 'GTK_MODULES': 'canberra-gtk-module',
 'XDG_SEAT': 'seat0',
 'PWD': '/home/lex/Programme/drmed-git',
 'LOGNAME': 'lex',
 'XDG_SESSION_DESKTOP': 'KDE',
 'XDG_SESSION_TYPE': 'x11',
 'CONDA_PREFIX': '/home/lex/Programme/miniconda3/envs/tf',
 'DSSI_PATH': '/home/lex/.dssi:/usr/lib/dssi:/usr/local/lib/dssi',
 'SYSTEMD_EXEC_PID': '819',
 'XAUTHORITY': '/home/lex/.Xauthority',
 'MOTD_SHOWN': 'pam',
 'GTK2_RC_FILES': '/etc/gtk-2.0/gtkrc:/home/lex/.gtkrc-2.0:/home/lex/.config/gtkrc-2.0',
 'HOME': '/home/lex',
 'LANG': 'de_DE.UTF-8',
 'LC_PAPER': 'de_DE.UTF-8',
 'VST_PATH': '/home/lex/.vst:/usr/lib/vst:/usr/local/lib/vst',
 'XDG_CURRENT_DESKTOP': 'KDE',
 'COLUMNS': '80',
 'CONDA_PROMPT_MODIFIER': '',
 'XDG_SEAT_PATH': '/org/freedesktop/DisplayManager/Seat0',
 'KDE_SESSION_UID': '1000',
 'XDG_SESSION_CLASS': 'user',
 'LC_IDENTIFICATION': 'de_DE.UTF-8',
 'TERM': 'xterm-color',
 '_CE_CONDA': '',
 'USER': 'lex',
 'CONDA_SHLVL': '1',
 'KDE_SESSION_VERSION': '5',
 'PAM_KWALLET5_LOGIN': '/run/user/1000/kwallet5.socket',
 'DISPLAY': ':0',
 'SHLVL': '2',
 'LC_TELEPHONE': 'de_DE.UTF-8',
 'LC_MEASUREMENT': 'de_DE.UTF-8',
 'XDG_VTNR': '1',
 'XDG_SESSION_ID': '2',
 'QT_LINUX_ACCESSIBILITY_ALWAYS_ON': '1',
 'CONDA_PYTHON_EXE': '/home/lex/Programme/miniconda3/bin/python',
 'MOZ_PLUGIN_PATH': '/usr/lib/mozilla/plugins',
 'XDG_RUNTIME_DIR': '/run/user/1000',
 'CONDA_DEFAULT_ENV': 'tf',
 'LC_TIME': 'de_DE.UTF-8',
 'QT_AUTO_SCREEN_SCALE_FACTOR': '0',
 'XCURSOR_THEME': 'breeze_cursors',
 'XDG_DATA_DIRS': '/home/lex/.local/share/flatpak/exports/share:/var/lib/flatpak/exports/share:/usr/local/share:/usr/share:/var/lib/snapd/desktop',
 'KDE_FULL_SESSION': 'true',
 'BROWSER': 'vivaldi-stable',
 'PATH': '/home/lex/Programme/miniconda3/envs/tf/bin:/home/lex/Programme/miniconda3/condabin:/home/lex/.local/bin:/bin:/usr/bin:/usr/local/bin:/usr/local/sbin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/var/lib/snapd/snap/bin',
 'DBUS_SESSION_BUS_ADDRESS': 'unix:path=/run/user/1000/bus',
 'LV2_PATH': '/home/lex/.lv2:/usr/lib/lv2:/usr/local/lib/lv2',
 'KDE_APPLICATIONS_AS_SCOPE': '1',
 'MAIL': '/var/spool/mail/lex',
 'LC_NUMERIC': 'de_DE.UTF-8',
 'LADSPA_PATH': '/home/lex/.ladspa:/usr/lib/ladspa:/usr/local/lib/ladspa',
 'CADENCE_AUTO_STARTED': 'true',
 '_': '/home/lex/Programme/miniconda3/envs/tf/bin/jupyter',
 'PYDEVD_USE_FRAME_EVAL': 'NO',
 'JPY_PARENT_PID': '320867',
 'CLICOLOR': '1',
 'PAGER': 'cat',
 'GIT_PAGER': 'cat',
 'MPLBACKEND': 'module://matplotlib_inline.backend_inline'}
</pre>
</details>
</li>
</ol>
</div>
</div>
<div id="outline-container-sec-2-1-4" class="outline-4">
<h4 id="sec-2-1-4"><span class="section-number-4">2.1.4</span> Experiment 1a: Correlate <code>all_clean_ptu</code> on Jupyter 1</h4>
<div class="outline-text-4" id="text-2-1-4">
<ol class="org-ol">
<li>Make sure we are in the correct directory, also do a git log -3 to
document latest git commits
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #707e4f;">cd</span> /<span style="color: #5e7837;">beegfs</span>/<span style="color: #7a4f7e;">ye53nis</span>/<span style="color: #784437;">drmed</span>-<span style="color: #784437;">git</span>

!<span style="color: #784437;">git</span> <span style="color: #78683f;">log</span> -3
</pre>
</div>

<pre class="example">
/beegfs/ye53nis/drmed-git
commit e2037847eadb43f0eaaeeb48cda3cc48141e24f2
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Wed Jan 19 20:10:28 2022 +0100

    Fix tt_key again

commit 7c750e0c8ed328033d1e55b7331f5d8d8dedb4b5
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Wed Jan 19 20:07:41 2022 +0100

    Fix tt_key

commit 6a23a927a62b1c05e3e6e438c9af4d6dc7791b48
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Wed Jan 19 20:01:15 2022 +0100

    Fix tttr2xfcs keyError when using standard name
</pre>
</li>

<li>Create directory where we want to save our correlations in
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #7a4f7e;">mkdir</span> /<span style="color: #5e7837;">beegfs</span>/<span style="color: #7a4f7e;">ye53nis</span>/<span style="color: #78683f;">saves</span>/2022-01-<span style="color: #783778;">20_correlate</span>-<span style="color: #657b83; font-weight: bold;">all</span>-<span style="color: #3f7178;">clean</span>-<span style="color: #78683f;">ptu</span>/
</pre>
</div>
</li>

<li>Load all needed modules
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #5e7837;">mlflow</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #7a4f7e;">logging</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #7e544f;">os</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #513f78;">sys</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #37785e;">matplotlib</span>.<span style="color: #4f7e67;">pyplot</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f7e67;">plt</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f5c7e;">numpy</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #707e4f;">np</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #513f78;">tensorflow</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #37785e;">tf</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #43783f;">pathlib</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #78683f;">Path</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #4f7e67;">pprint</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f7e67;">pprint</span>

<span style="color: #268bd2;">FLUOTRACIFY_PATH</span> = <span style="color: #2aa198;">'/beegfs/ye53nis/drmed-git/src/'</span>
<span style="color: #513f78;">sys</span>.<span style="color: #513f78;">path</span>.<span style="color: #5e7837;">append</span>(<span style="color: #784437;">FLUOTRACIFY_PATH</span>)
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #783778;">fluotracify</span>.<span style="color: #4f5c7e;">applications</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #3f7178;">corr_fit_object</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #78683f;">cfo</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #783778;">fluotracify</span>.<span style="color: #3f7178;">training</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #783778;">build_model</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #374478;">bm</span>

<span style="color: #7a4f7e;">logging</span>.<span style="color: #7e544f;">basicConfig</span>(<span style="color: #43783f;">filename</span>=<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-01-20_correlate-all-clean-ptu.log'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">filemode</span>=<span style="color: #2aa198;">'w'</span>, <span style="color: #657b83; font-weight: bold;">format</span>=<span style="color: #2aa198;">'%(asctime)s - %(message)s'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">force</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">level</span>=<span style="color: #7a4f7e;">logging</span>.<span style="color: #783778;">DEBUG</span>)

</pre>
</div>
</li>

<li>Define variables and prepare model
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">class</span> <span style="color: #b58900;">ParameterClass</span>():
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">"""Stores parameters for correlation """</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">__init__</span>(<span style="color: #859900; font-weight: bold;">self</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># Where the data is stored.</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #784437;">data</span> = []
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #7a4f7e;">objectRef</span> = []
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #78683f;">subObjectRef</span> = []
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #783778;">colors</span> = [<span style="color: #2aa198;">'blue'</span>, <span style="color: #2aa198;">'green'</span>, <span style="color: #2aa198;">'red'</span>, <span style="color: #2aa198;">'cyan'</span>, <span style="color: #2aa198;">'magenta'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #2aa198;">'yellow'</span>, <span style="color: #2aa198;">'black'</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #4f5c7e;">numOfLoaded</span> = 0
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># very fast from Ncasc ~ 14 onwards</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #3f7178;">NcascStart</span> = 0
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #4f7e67;">NcascEnd</span> = 30  <span style="color: #93a1a1;"># 25</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #3f7178;">Nsub</span> = 6  <span style="color: #93a1a1;"># 6</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #5e7837;">photonLifetimeBin</span> = 10  <span style="color: #93a1a1;"># used for photon decay</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #513f78;">photonCountBin</span> = 1  <span style="color: #93a1a1;"># used for time series</span>

<span style="color: #268bd2;">path</span> = <span style="color: #2aa198;">"../data/Pablo_structured_experiment/all_clean_ptu"</span>
<span style="color: #268bd2;">logged_model</span> = <span style="color: #2aa198;">'file:///beegfs/ye53nis/drmed-git/data/mlruns/8/00f2635d9fa2463c9a066722163405be/artifacts/model'</span>
<span style="color: #268bd2;">weight</span> = 0
<span style="color: #268bd2;">output_path</span> = <span style="color: #2aa198;">'/beegfs/ye53nis/saves/2022-01-20_correlate-all-clean-ptu/'</span>

<span style="color: #268bd2;">par_obj</span> = <span style="color: #4f7e67;">ParameterClass</span>()

<span style="color: #268bd2;">loaded_model</span> = <span style="color: #5e7837;">mlflow</span>.<span style="color: #784437;">keras</span>.<span style="color: #783f5a;">load_model</span>(<span style="color: #783f5a;">logged_model</span>, <span style="color: #657b83; font-weight: bold;">compile</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="color: #374478;">loaded_model</span>.<span style="color: #374478;">compile</span>(<span style="color: #783f5a;">loss</span>=<span style="color: #374478;">bm</span>.<span style="color: #783f5a;">binary_ce_dice_loss</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #7a4f7e;">optimizer</span>=<span style="color: #37785e;">tf</span>.<span style="color: #784437;">keras</span>.<span style="color: #43783f;">optimizers</span>.<span style="color: #783778;">Adam</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #43783f;">metrics</span> = <span style="color: #374478;">bm</span>.<span style="color: #374478;">unet_metrics</span>([0.1, 0.3, 0.5, 0.7, 0.9]))
<span style="color: #374478;">bm</span>.<span style="color: #374478;">prepare_model</span>(<span style="color: #374478;">loaded_model</span>)

</pre>
</div>

<pre class="example">
WARNING:tensorflow:Unable to restore custom metric. Please ensure that the layer implements `get_config` and `from_config` when saving. In addition, please use the `custom_objects` arg when calling `load_model()`.
</pre>
</li>

<li>Run experiment: Correlate <code>all_clean_ptu</code> on Jupyter 1

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">path</span> = <span style="color: #78683f;">Path</span>(<span style="color: #513f78;">path</span>)
<span style="color: #268bd2;">files</span> = [<span style="color: #513f78;">path</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #513f78;">path</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]

<span style="color: #859900; font-weight: bold;">if</span> <span style="color: #657b83; font-weight: bold;">len</span>(<span style="color: #3f7178;">files</span>) == <span style="color: #268bd2;">0</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">raise</span> <span style="color: #657b83; font-weight: bold;">FileNotFoundError</span>(<span style="color: #2aa198;">'The path provided does not include any'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">' .ptu files.'</span>)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #784437;">myfile</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">files</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ptufile</span> = <span style="color: #78683f;">cfo</span>.<span style="color: #5e7837;">PicoObject</span>(<span style="color: #784437;">myfile</span>, <span style="color: #37785e;">par_obj</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">predictTimeSeries</span>(<span style="color: #43783f;">model</span>=<span style="color: #374478;">loaded_model</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #4f5c7e;">scaler</span>=<span style="color: #2aa198;">'minmax'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">correctTCSPC</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'weights'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #7a4f7e;">weight</span>=<span style="color: #7a4f7e;">weight</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">shift_name</span> = <span style="color: #43783f;">f</span><span style="color: #2aa198;">'shift_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #707e4f;">timeseries_name</span>=<span style="color: #7a4f7e;">shift_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #7a4f7e;">shift_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">predictTimeSeries</span>(<span style="color: #43783f;">model</span>=<span style="color: #374478;">loaded_model</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #4f5c7e;">scaler</span>=<span style="color: #2aa198;">'minmax'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #374478;">name</span>=<span style="color: #7a4f7e;">shift_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">correctTCSPC</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'delete_and_shift'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">timeseries_name</span>=<span style="color: #7a4f7e;">shift_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">trueTimeArr</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"_FORWEIGHTS"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">key</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">else</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)

<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>[<span style="color: #5e7837;">m</span>].<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">save_autocorrelation</span>(<span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>, <span style="color: #783778;">method</span>=<span style="color: #5e7837;">m</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #37785e;">output_path</span>=<span style="color: #37785e;">output_path</span>)

</pre>
</div>

<pre class="example">
c4358abc-9c3b-458a-b64c-9d5e34fa28b0
</pre>
</li>

<li>According to log, the first run ended with an Error
<pre class="example">
[I 2022-01-22 21:32:42.402 ServerApp] AsyncIOLoopKernelRestarter: restarting kernel (1/5), keep random ports
</pre>
<p>
Only 229 traces were analyzed.
</p>
</li>

<li>Analyze using a different weight
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #707e4f;">cd</span> /<span style="color: #5e7837;">beegfs</span>/<span style="color: #7a4f7e;">ye53nis</span>/<span style="color: #784437;">drmed</span>-<span style="color: #784437;">git</span>

!<span style="color: #784437;">git</span> <span style="color: #78683f;">log</span> -3
</pre>
</div>

<pre class="example">
/beegfs/ye53nis/drmed-git
commit 9e735ecd10d0e5e5eae591f8cc40201ae6144b6a
Author: Alex Seltmann &lt;seltmann@posteo.de&gt;
Date:   Mon Jan 24 20:34:54 2022 +0100

    add correlations 2

commit c0b4bc8494409a6b83a623977f07d91a373dc085
Author: Alex Seltmann &lt;seltmann@posteo.de&gt;
Date:   Fri Jan 21 15:33:06 2022 +0100

    add correlations 100/400 clean

commit e2037847eadb43f0eaaeeb48cda3cc48141e24f2
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Wed Jan 19 20:10:28 2022 +0100

    Fix tt_key again
</pre>
</li>

<li>Change some parameters and execute as <code>2022-01-25_correlate-all-clean-ptu</code>:
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #7a4f7e;">logging</span>.<span style="color: #7e544f;">basicConfig</span>(<span style="color: #43783f;">filename</span>=<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-01-25_correlate-all-clean-ptu.log'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">filemode</span>=<span style="color: #2aa198;">'w'</span>, <span style="color: #657b83; font-weight: bold;">format</span>=<span style="color: #2aa198;">'%(asctime)s - %(message)s'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">force</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">level</span>=<span style="color: #7a4f7e;">logging</span>.<span style="color: #783778;">DEBUG</span>)
<span style="color: #268bd2;">weight_list</span> = [0.2, 0.4, 0.6, 0.8]
<span style="color: #268bd2;">output_path</span> = <span style="color: #2aa198;">'/beegfs/ye53nis/saves/2022-01-25_correlate-all-clean-ptu/'</span>
<span style="color: #268bd2;">path</span> = <span style="color: #78683f;">Path</span>(<span style="color: #513f78;">path</span>)
<span style="color: #268bd2;">files</span> = [<span style="color: #513f78;">path</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #513f78;">path</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]

<span style="color: #859900; font-weight: bold;">if</span> <span style="color: #657b83; font-weight: bold;">len</span>(<span style="color: #3f7178;">files</span>) == <span style="color: #268bd2;">0</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">raise</span> <span style="color: #657b83; font-weight: bold;">FileNotFoundError</span>(<span style="color: #2aa198;">'The path provided does not include any'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">' .ptu files.'</span>)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #784437;">myfile</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">files</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ptufile</span> = <span style="color: #78683f;">cfo</span>.<span style="color: #5e7837;">PicoObject</span>(<span style="color: #784437;">myfile</span>, <span style="color: #37785e;">par_obj</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">w</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">weight_list</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">weight_name</span> = <span style="color: #43783f;">f</span><span style="color: #2aa198;">'weight</span><span style="color: #268bd2;">{w}</span><span style="color: #2aa198;">_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #707e4f;">timeseries_name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">predictTimeSeries</span>(<span style="color: #43783f;">model</span>=<span style="color: #374478;">loaded_model</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #4f5c7e;">scaler</span>=<span style="color: #2aa198;">'minmax'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #374478;">name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">correctTCSPC</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'weights'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #7a4f7e;">weight</span>=<span style="color: #707e4f;">w</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">timeseries_name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">trueTimeArr</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"_FORWEIGHTS"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">key</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)

<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>[<span style="color: #5e7837;">m</span>].<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">save_autocorrelation</span>(<span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>, <span style="color: #783778;">method</span>=<span style="color: #5e7837;">m</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #37785e;">output_path</span>=<span style="color: #37785e;">output_path</span>)

</pre>
</div>

<pre class="example">
8e913e9c-fdcf-4a67-988c-dad76773f19c
</pre>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-2-1-5" class="outline-4">
<h4 id="sec-2-1-5"><span class="section-number-4">2.1.5</span> Experiment 1b: Correlate <code>all_dirty_ptu</code> on Jupyter 2</h4>
<div class="outline-text-4" id="text-2-1-5">
<ol class="org-ol">
<li>Make sure we are in the correct directory, also do a git log -3 to
document latest git commits
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #707e4f;">cd</span> /<span style="color: #5e7837;">beegfs</span>/<span style="color: #7a4f7e;">ye53nis</span>/<span style="color: #784437;">drmed</span>-<span style="color: #784437;">git</span>

!<span style="color: #784437;">git</span> <span style="color: #78683f;">log</span> -3
</pre>
</div>

<pre class="example">
/beegfs/ye53nis/drmed-git
commit e2037847eadb43f0eaaeeb48cda3cc48141e24f2
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Wed Jan 19 20:10:28 2022 +0100

    Fix tt_key again

commit 7c750e0c8ed328033d1e55b7331f5d8d8dedb4b5
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Wed Jan 19 20:07:41 2022 +0100

    Fix tt_key

commit 6a23a927a62b1c05e3e6e438c9af4d6dc7791b48
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Wed Jan 19 20:01:15 2022 +0100

    Fix tttr2xfcs keyError when using standard name
</pre>
</li>

<li>Create directory where we want to save our correlations in
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #7a4f7e;">mkdir</span> /<span style="color: #5e7837;">beegfs</span>/<span style="color: #7a4f7e;">ye53nis</span>/<span style="color: #78683f;">saves</span>/2022-01-<span style="color: #783778;">20_correlate</span>-<span style="color: #657b83; font-weight: bold;">all</span>-<span style="color: #374478;">dirty</span>-<span style="color: #78683f;">ptu</span>/
</pre>
</div>
</li>

<li>Load all needed modules
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #5e7837;">mlflow</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #7a4f7e;">logging</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #7e544f;">os</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #513f78;">sys</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #37785e;">matplotlib</span>.<span style="color: #4f7e67;">pyplot</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f7e67;">plt</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f5c7e;">numpy</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #707e4f;">np</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #513f78;">tensorflow</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #37785e;">tf</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #43783f;">pathlib</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #78683f;">Path</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #4f7e67;">pprint</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f7e67;">pprint</span>

<span style="color: #268bd2;">FLUOTRACIFY_PATH</span> = <span style="color: #2aa198;">'/beegfs/ye53nis/drmed-git/src/'</span>
<span style="color: #513f78;">sys</span>.<span style="color: #513f78;">path</span>.<span style="color: #5e7837;">append</span>(<span style="color: #784437;">FLUOTRACIFY_PATH</span>)
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #783778;">fluotracify</span>.<span style="color: #4f5c7e;">applications</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #3f7178;">corr_fit_object</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #78683f;">cfo</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #783778;">fluotracify</span>.<span style="color: #3f7178;">training</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #783778;">build_model</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #374478;">bm</span>

<span style="color: #7a4f7e;">logging</span>.<span style="color: #7e544f;">basicConfig</span>(<span style="color: #43783f;">filename</span>=<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-01-20_correlate-all-dirty-ptu.log'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">filemode</span>=<span style="color: #2aa198;">'w'</span>, <span style="color: #657b83; font-weight: bold;">format</span>=<span style="color: #2aa198;">'%(asctime)s - %(message)s'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">force</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">level</span>=<span style="color: #7a4f7e;">logging</span>.<span style="color: #783778;">DEBUG</span>)

</pre>
</div>
</li>

<li>Define variables and prepare model
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">class</span> <span style="color: #b58900;">ParameterClass</span>():
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">"""Stores parameters for correlation """</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">__init__</span>(<span style="color: #859900; font-weight: bold;">self</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># Where the data is stored.</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #784437;">data</span> = []
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #7a4f7e;">objectRef</span> = []
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #78683f;">subObjectRef</span> = []
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #783778;">colors</span> = [<span style="color: #2aa198;">'blue'</span>, <span style="color: #2aa198;">'green'</span>, <span style="color: #2aa198;">'red'</span>, <span style="color: #2aa198;">'cyan'</span>, <span style="color: #2aa198;">'magenta'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #2aa198;">'yellow'</span>, <span style="color: #2aa198;">'black'</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #4f5c7e;">numOfLoaded</span> = 0
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># very fast from Ncasc ~ 14 onwards</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #3f7178;">NcascStart</span> = 0
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #4f7e67;">NcascEnd</span> = 30  <span style="color: #93a1a1;"># 25</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #3f7178;">Nsub</span> = 6  <span style="color: #93a1a1;"># 6</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #5e7837;">photonLifetimeBin</span> = 10  <span style="color: #93a1a1;"># used for photon decay</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #513f78;">photonCountBin</span> = 1  <span style="color: #93a1a1;"># used for time series</span>

<span style="color: #268bd2;">path</span> = <span style="color: #2aa198;">"../data/Pablo_structured_experiment/all_dirty_ptu"</span>
<span style="color: #268bd2;">logged_model</span> = <span style="color: #2aa198;">'file:///beegfs/ye53nis/drmed-git/data/mlruns/8/00f2635d9fa2463c9a066722163405be/artifacts/model'</span>
<span style="color: #268bd2;">weight</span> = 0
<span style="color: #268bd2;">output_path</span> = <span style="color: #2aa198;">'/beegfs/ye53nis/saves/2022-01-20_correlate-all-dirty-ptu/'</span>

<span style="color: #268bd2;">par_obj</span> = <span style="color: #4f7e67;">ParameterClass</span>()

<span style="color: #268bd2;">loaded_model</span> = <span style="color: #5e7837;">mlflow</span>.<span style="color: #784437;">keras</span>.<span style="color: #783f5a;">load_model</span>(<span style="color: #783f5a;">logged_model</span>, <span style="color: #657b83; font-weight: bold;">compile</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="color: #374478;">loaded_model</span>.<span style="color: #374478;">compile</span>(<span style="color: #783f5a;">loss</span>=<span style="color: #374478;">bm</span>.<span style="color: #783f5a;">binary_ce_dice_loss</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #7a4f7e;">optimizer</span>=<span style="color: #37785e;">tf</span>.<span style="color: #784437;">keras</span>.<span style="color: #43783f;">optimizers</span>.<span style="color: #783778;">Adam</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #43783f;">metrics</span> = <span style="color: #374478;">bm</span>.<span style="color: #374478;">unet_metrics</span>([0.1, 0.3, 0.5, 0.7, 0.9]))
<span style="color: #374478;">bm</span>.<span style="color: #374478;">prepare_model</span>(<span style="color: #374478;">loaded_model</span>)

</pre>
</div>

<pre class="example">
WARNING:tensorflow:Unable to restore custom metric. Please ensure that the layer implements `get_config` and `from_config` when saving. In addition, please use the `custom_objects` arg when calling `load_model()`.
</pre>
</li>

<li>Run experiment: Correlate <code>all_dirty_ptu</code> on Jupyter 2

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">path</span> = <span style="color: #78683f;">Path</span>(<span style="color: #513f78;">path</span>)
<span style="color: #268bd2;">files</span> = [<span style="color: #513f78;">path</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #513f78;">path</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]
<span style="color: #859900; font-weight: bold;">if</span> <span style="color: #657b83; font-weight: bold;">len</span>(<span style="color: #3f7178;">files</span>) == <span style="color: #268bd2;">0</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">raise</span> <span style="color: #657b83; font-weight: bold;">FileNotFoundError</span>(<span style="color: #2aa198;">'The path provided does not include any'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">' .ptu files.'</span>)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #784437;">myfile</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">files</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ptufile</span> = <span style="color: #78683f;">cfo</span>.<span style="color: #5e7837;">PicoObject</span>(<span style="color: #784437;">myfile</span>, <span style="color: #37785e;">par_obj</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">predictTimeSeries</span>(<span style="color: #43783f;">model</span>=<span style="color: #374478;">loaded_model</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #4f5c7e;">scaler</span>=<span style="color: #2aa198;">'minmax'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">correctTCSPC</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'weights'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #7a4f7e;">weight</span>=<span style="color: #7a4f7e;">weight</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">shift_name</span> = <span style="color: #43783f;">f</span><span style="color: #2aa198;">'shift_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #707e4f;">timeseries_name</span>=<span style="color: #7a4f7e;">shift_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #7a4f7e;">shift_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">predictTimeSeries</span>(<span style="color: #43783f;">model</span>=<span style="color: #374478;">loaded_model</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #4f5c7e;">scaler</span>=<span style="color: #2aa198;">'minmax'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #374478;">name</span>=<span style="color: #7a4f7e;">shift_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">correctTCSPC</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'delete_and_shift'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">timeseries_name</span>=<span style="color: #7a4f7e;">shift_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">trueTimeArr</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"_FORWEIGHTS"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">key</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">else</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)

<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>[<span style="color: #5e7837;">m</span>].<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">save_autocorrelation</span>(<span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>, <span style="color: #783778;">method</span>=<span style="color: #5e7837;">m</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #37785e;">output_path</span>=<span style="color: #37785e;">output_path</span>)

</pre>
</div>

<pre class="example">
WARNING:tensorflow:6 out of the last 9 calls to &lt;function Model.make_predict_function.&lt;locals&gt;.predict_function at 0x2b217faeb9d0&gt; triggered tf.function retracing. Tracing is expensive and the excessive number of tracings could be due to (1) creating @tf.function repeatedly in a loop, (2) passing tensors with different shapes, (3) passing Python objects instead of tensors. For (1), please define your @tf.function outside of the loop. For (2), @tf.function has experimental_relax_shapes=True option that relaxes argument shapes that can avoid unnecessary retracing. For (3), please refer to https://www.tensorflow.org/guide/function#controlling_retracing and https://www.tensorflow.org/api_docs/python/tf/function for  more details.
</pre>
</li>

<li>According to log, the first run ended with an Error
<pre class="example">
[I 2022-01-23 00:26:40.512 ServerApp] AsyncIOLoopKernelRestarter: restarting kernel (1/5), keep random ports
</pre>
<p>
Only 229 traces were analyzed.
</p>
</li>

<li>Analyze using a different weight
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #707e4f;">cd</span> /<span style="color: #5e7837;">beegfs</span>/<span style="color: #7a4f7e;">ye53nis</span>/<span style="color: #784437;">drmed</span>-<span style="color: #784437;">git</span>

!<span style="color: #784437;">git</span> <span style="color: #78683f;">log</span> -3
</pre>
</div>

<pre class="example">
/beegfs/ye53nis/drmed-git
commit 9e735ecd10d0e5e5eae591f8cc40201ae6144b6a
Author: Alex Seltmann &lt;seltmann@posteo.de&gt;
Date:   Mon Jan 24 20:34:54 2022 +0100

    add correlations 2

commit c0b4bc8494409a6b83a623977f07d91a373dc085
Author: Alex Seltmann &lt;seltmann@posteo.de&gt;
Date:   Fri Jan 21 15:33:06 2022 +0100

    add correlations 100/400 clean

commit e2037847eadb43f0eaaeeb48cda3cc48141e24f2
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Wed Jan 19 20:10:28 2022 +0100

    Fix tt_key again
</pre>
</li>

<li>Change some parameters and execute as <code>2022-01-25_correlate-all-dirty-ptu</code>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #7a4f7e;">logging</span>.<span style="color: #7e544f;">basicConfig</span>(<span style="color: #43783f;">filename</span>=<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-01-25_correlate-all-dirty-ptu.log'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">filemode</span>=<span style="color: #2aa198;">'w'</span>, <span style="color: #657b83; font-weight: bold;">format</span>=<span style="color: #2aa198;">'%(asctime)s - %(message)s'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">force</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">level</span>=<span style="color: #7a4f7e;">logging</span>.<span style="color: #783778;">DEBUG</span>)
<span style="color: #268bd2;">weight_list</span> = [0.2, 0.4, 0.6, 0.8]
<span style="color: #268bd2;">output_path</span> = <span style="color: #2aa198;">'/beegfs/ye53nis/saves/2022-01-25_correlate-all-dirty-ptu/'</span>
<span style="color: #268bd2;">path</span> = <span style="color: #78683f;">Path</span>(<span style="color: #513f78;">path</span>)
<span style="color: #268bd2;">files</span> = [<span style="color: #513f78;">path</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #513f78;">path</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]

<span style="color: #859900; font-weight: bold;">if</span> <span style="color: #657b83; font-weight: bold;">len</span>(<span style="color: #3f7178;">files</span>) == <span style="color: #268bd2;">0</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">raise</span> <span style="color: #657b83; font-weight: bold;">FileNotFoundError</span>(<span style="color: #2aa198;">'The path provided does not include any'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">' .ptu files.'</span>)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #784437;">myfile</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">files</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ptufile</span> = <span style="color: #78683f;">cfo</span>.<span style="color: #5e7837;">PicoObject</span>(<span style="color: #784437;">myfile</span>, <span style="color: #37785e;">par_obj</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">w</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">weight_list</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">weight_name</span> = <span style="color: #43783f;">f</span><span style="color: #2aa198;">'weight</span><span style="color: #268bd2;">{w}</span><span style="color: #2aa198;">_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #707e4f;">timeseries_name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">predictTimeSeries</span>(<span style="color: #43783f;">model</span>=<span style="color: #374478;">loaded_model</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #4f5c7e;">scaler</span>=<span style="color: #2aa198;">'minmax'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #374478;">name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">correctTCSPC</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'weights'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #7a4f7e;">weight</span>=<span style="color: #707e4f;">w</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">timeseries_name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">trueTimeArr</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"_FORWEIGHTS"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">key</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)

<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>[<span style="color: #5e7837;">m</span>].<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">save_autocorrelation</span>(<span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>, <span style="color: #783778;">method</span>=<span style="color: #5e7837;">m</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #37785e;">output_path</span>=<span style="color: #37785e;">output_path</span>)

</pre>
</div>

<pre class="example">
fa1b6a82-0827-4730-a145-2ab9f4c967ef
</pre>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-2-1-6" class="outline-4">
<h4 id="sec-2-1-6"><span class="section-number-4">2.1.6</span> Analysis 1 of no-correction vs weight=0 vs shift</h4>
<div class="outline-text-4" id="text-2-1-6">
<ul class="org-ul">
<li>log files can be found here:
<div class="org-src-container">

<pre class="src src-tmux"><span style="color: #4f7e67;">tail</span> <span style="color: #78683f;">/beegfs/ye53nis/drmed-git/data/exp-220120-correlate-ptu/2022-01-20_correlate-all-clean-ptu.log</span>
<span style="color: #4f7e67;">tail</span> <span style="color: #5e7837;">/beegfs/ye53nis/drmed-git/data/exp-220120-correlate-ptu/2022-01-20_correlate-all-dirty-ptu.log</span>
</pre>
</div>

<pre class="example">
(tf) [ye53nis@login01 applications]$ tail /beegfs/ye53nis/drmed-git/data/exp-220120-correlate-ptu/2022-01-20_correla
te-all-clean-ptu.log
2022-01-22 21:32:10,206 - Finished predictTimeSeries() with name=shift_20 nM AF488110_T1310s_1
2022-01-22 21:32:10,249 - correctTCSPC: some samples: subChan 3486766, truetime 3486766,photonMask 3486766, channelM
ask 3486993
2022-01-22 21:32:10,261 - correctTCSPC: deleted 633925 photons of 3486993 photons.
2022-01-22 21:32:10,280 - correctTCSPC: shifted non-deleted photon arrival times by photonCountBin=1
2022-01-22 21:32:10,281 - Finished correctTCSPC() with name 20 nM AF488110_T1310s_1, timeseries_name shift_20 nM AF4
88110_T1310s_1
2022-01-22 21:32:10,281 - get_autocorrelation: Starting tttr2xfcs correlation.with name 20 nM AF488110_T1310s_1
2022-01-22 21:32:10,281 - Given key 20 nM AF488110_T1310s_1 of trueTimeArr does not include a hint on which channel
was used. Assume all channels shall be used and continue
2022-01-22 21:32:16,525 - crossAndAuto: sum(indeces)=3486993
2022-01-22 21:32:16,611 - crossAndAuto: finished preparation
2022-01-22 21:32:38,406 - tttr2xfcs: finished Ncasc 0
(tf) [ye53nis@login01 applications]$ tail /beegfs/ye53nis/drmed-git/data/exp-220120-correlate-ptu/2022-01-20_correla
te-all-dirty-ptu.log
2022-01-25 00:52:57,129 - Unable to restore custom metric. Please ensure that the layer implements `get_config` and
`from_config` when saving. In addition, please use the `custom_objects` arg when calling `load_model()`.
2022-01-25 00:53:05,683 - prepare_model: test shape (1, 16384, 1), e.g. [1.4064237e-01 1.3650321e-08 7.4799689e-10 1
.7243300e-10 1.3498201e-10]
2022-01-25 00:53:05,736 - prepare_model: test shape (1, 8192, 1). prediction failed as expected. Retry...
2022-01-25 00:53:06,390 - prepare_model: test shape (1, 4096, 1), e.g. [1.4064237e-01 1.3650321e-08 7.4799689e-10 1.
7243300e-10 1.3498201e-10]
2022-01-25 00:53:06,455 - prepare_model: test shape (1, 8192, 1), e.g. [1.4064237e-01 1.3650321e-08 7.4799689e-10 1.
7243300e-10 1.3498201e-10]
2022-01-25 00:53:06,455 - prepare_model: UNET ready for different trace lengths
(tf) [ye53nis@login01 applications]$
</pre>
</li>

<li>I committed the correlations to the git repository, since the file size is
rather small (~5kB / correlation, makes ~15kB per file)
</li>
<li>I sorted the correlations according to the 3 things I did with the .ptu
data and the correlation method
<ol class="org-ol">
<li><b>No correction</b>: I just read in the .ptu data and correlated the photon
arrival times using the <code>tttr2xfcs</code> algorithm
</li>
<li><b>Corrected with weights</b>: I read in the .ptu data, constructed a
timetrace from it, fed the time trace to my trained unet which predicts
bright burst artifacts, then mapped the time trace prediction on the
photon arrival times and <i>gave all photons inside a bin labelled as
artifactual a weight of 0</i> in the <code>tttr2xfcs</code> algorithm
</li>
<li><b>Corrected by photon deletion with shift</b>: I read in the .ptu data,
constructed a timetrace from it, fed the timetrace to my trained unet
which predicts bright burst artifacts, then mapped the time trace
prediction on the photon arrival times and <i>deleted all photons inside a
bin labelled as artifactual and the arrival times of all photons which
come after a deleted bin by the bin size</i>, then I correlated the
resulting new photon arrival times using the <code>tttr2xfcs</code> algorithm
</li>
</ol>
</li>
<li>Then I fitted the traces in each of the 3 folders using Dominic Waithe's
<a href="https://dwaithe.github.io/FCSfitJS/">https://dwaithe.github.io/FCSfitJS/</a>
</li>
<li>now let's look at the results:
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #707e4f;">cd</span> /<span style="color: #3f7178;">home</span>/<span style="color: #783f5a;">lex</span>/<span style="color: #784437;">Programme</span>/<span style="color: #784437;">drmed</span>-<span style="color: #784437;">git</span>
</pre>
</div>

<pre class="example">
/home/lex/Programme/drmed-git
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f5c7e;">numpy</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #707e4f;">np</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #37785e;">matplotlib</span>.<span style="color: #4f7e67;">pyplot</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f7e67;">plt</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #5e7837;">pandas</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #783778;">pd</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #78683f;">seaborn</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f5c7e;">sns</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #43783f;">pathlib</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #78683f;">Path</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #4f7e67;">pprint</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f7e67;">pprint</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">use seaborn style as default even if I just use matplotlib</span>
<span style="color: #4f5c7e;">sns</span>.<span style="color: #783778;">set</span>()
</pre>
</div>

<details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">folder_clean</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-01-20_correlate-all-clean-ptu'</span>)
<span style="color: #268bd2;">folder_dirty</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-01-20_correlate-all-dirty-ptu'</span>)
<span style="color: #268bd2;">clean_v1_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'2022-01-20_clean_no-correction_param_229of400.csv'</span>
<span style="color: #268bd2;">clean_v2_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'2022-01-20_clean_corrected-with-weights_param_229of400.csv'</span>
<span style="color: #268bd2;">clean_v3_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'2022-01-20_clean_corrected-by-photon-deletion-with-shift_param_229of400.csv'</span>
<span style="color: #268bd2;">clean_v1_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'2022-01-20_clean_no-correction_plot_229of400.csv'</span>
<span style="color: #268bd2;">clean_v2_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'2022-01-20_clean_corrected-with-weights_plot_229of400.csv'</span>
<span style="color: #268bd2;">clean_v3_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'2022-01-20_clean_corrected-by-photon-deletion-with-shift_plot_229of400.csv'</span>
<span style="color: #268bd2;">dirty_v1_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'2022-01-20_dirty_no-correction_param_173of400.csv'</span>
<span style="color: #268bd2;">dirty_v2_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'2022-01-20_dirty_corrected-with-weights_param_173of400.csv'</span>
<span style="color: #268bd2;">dirty_v3_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'2022-01-20_dirty_corrected-by-photon-deletion-with-shift_param_173of400.csv'</span>
<span style="color: #268bd2;">dirty_v1_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'2022-01-20_dirty_no-correction_plot_173of400.csv'</span>
<span style="color: #268bd2;">dirty_v2_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'2022-01-20_dirty_corrected-with-weights_plot_173of400.csv'</span>
<span style="color: #268bd2;">dirty_v3_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'2022-01-20_dirty_corrected-by-photon-deletion-with-shift_plot_173of400.csv'</span>

</pre>
</div>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">clean_v1_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783f5a;">clean_v1_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">clean_v2_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #784437;">clean_v2_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">clean_v3_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783778;">clean_v3_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">clean_v1_taudiff</span> = <span style="color: #5e7837;">clean_v1_param</span>[<span style="color: #2aa198;">'txy1'</span>]
<span style="color: #268bd2;">clean_v2_taudiff</span> = <span style="color: #4f5c7e;">clean_v2_param</span>[<span style="color: #2aa198;">'txy1'</span>]
<span style="color: #268bd2;">clean_v3_taudiff</span> = <span style="color: #4f7e67;">clean_v3_param</span>[<span style="color: #2aa198;">'txy1'</span>]
<span style="color: #268bd2;">dirty_v1_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #5e7837;">dirty_v1_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">dirty_v2_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #5e7837;">dirty_v2_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">dirty_v3_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7a4f7e;">dirty_v3_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">dirty_v1_taudiff</span> = <span style="color: #37785e;">dirty_v1_param</span>[<span style="color: #2aa198;">'txy1'</span>]
<span style="color: #268bd2;">dirty_v2_taudiff</span> = <span style="color: #43783f;">dirty_v2_param</span>[<span style="color: #2aa198;">'txy1'</span>]
<span style="color: #268bd2;">dirty_v3_taudiff</span> = <span style="color: #783778;">dirty_v3_param</span>[<span style="color: #2aa198;">'txy1'</span>]

<span style="color: #4f7e67;">display</span>(<span style="color: #5e7837;">clean_v1_param</span>.<span style="color: #4f5c7e;">head</span>(2).<span style="color: #37785e;">T</span>)
<span style="color: #4f7e67;">display</span>(<span style="color: #4f5c7e;">clean_v2_param</span>.<span style="color: #4f5c7e;">head</span>(2).<span style="color: #37785e;">T</span>)
<span style="color: #4f7e67;">display</span>(<span style="color: #4f7e67;">clean_v3_param</span>.<span style="color: #4f5c7e;">head</span>(2).<span style="color: #37785e;">T</span>)
<span style="color: #4f7e67;">display</span>(<span style="color: #37785e;">dirty_v1_param</span>.<span style="color: #4f5c7e;">head</span>(2).<span style="color: #37785e;">T</span>)
<span style="color: #4f7e67;">display</span>(<span style="color: #43783f;">dirty_v2_param</span>.<span style="color: #4f5c7e;">head</span>(2).<span style="color: #37785e;">T</span>)
<span style="color: #4f7e67;">display</span>(<span style="color: #783778;">dirty_v3_param</span>.<span style="color: #4f5c7e;">head</span>(2).<span style="color: #37785e;">T</span>)
</pre>
</div>

<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="left">

<col  class="right">

<col  class="right">
</colgroup>
<thead>
<tr>
<th scope="col" class="text-left">&#xa0;</th>
<th scope="col" class="text-right">0</th>
<th scope="col" class="text-right">1</th>
</tr>
</thead>
<tbody>
<tr>
<td class="text-left">name<sub>of</sub><sub>plot</sub></td>
<td class="text-right">2022-01-20<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1</sub><sub>20</sub> nM AF48816<sub>T1</sub>&#x2026;</td>
<td class="text-right">2022-01-20<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1</sub><sub>20</sub> nM AF48822<sub>T2</sub>&#x2026;</td>
</tr>

<tr>
<td class="text-left">master<sub>file</sub></td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
</tr>

<tr>
<td class="text-left">parent<sub>name</sub></td>
<td class="text-right">20 nM AF48816<sub>T182s</sub><sub>1</sub></td>
<td class="text-right">20 nM AF48822<sub>T254s</sub><sub>1</sub></td>
</tr>

<tr>
<td class="text-left">parent<sub>uqid</sub></td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">time of fit</td>
<td class="text-right">24 January 2022 22:35:35</td>
<td class="text-right">24 January 2022 22:35:35</td>
</tr>

<tr>
<td class="text-left">Diff<sub>eq</sub></td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
</tr>

<tr>
<td class="text-left">Diff<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>eq</sub></td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Dimen</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
</tr>

<tr>
<td class="text-left">xmin</td>
<td class="text-right">0.001018</td>
<td class="text-right">0.001018</td>
</tr>

<tr>
<td class="text-left">xmax</td>
<td class="text-right">117.440506</td>
<td class="text-right">117.440506</td>
</tr>

<tr>
<td class="text-left">offset</td>
<td class="text-right">-0.000577</td>
<td class="text-right">-0.000577</td>
</tr>

<tr>
<td class="text-left">stdev(offset)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">GN0</td>
<td class="text-right">0.074965</td>
<td class="text-right">0.074965</td>
</tr>

<tr>
<td class="text-left">stdev(GN0)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (FCS)</td>
<td class="text-right">13.339549</td>
<td class="text-right">13.339549</td>
</tr>

<tr>
<td class="text-left">cpm (kHz)</td>
<td class="text-right">25.896822</td>
<td class="text-right">25.862088</td>
</tr>

<tr>
<td class="text-left">A1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">stdev(A1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">txy1</td>
<td class="text-right">0.033317</td>
<td class="text-right">0.033317</td>
</tr>

<tr>
<td class="text-left">stdev(txy1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">alpha1</td>
<td class="text-right">0.8512</td>
<td class="text-right">0.8512</td>
</tr>

<tr>
<td class="text-left">stdev(alpha1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (mom)</td>
<td class="text-right">72.053415</td>
<td class="text-right">73.936945</td>
</tr>

<tr>
<td class="text-left">bri (kHz)</td>
<td class="text-right">4.794626</td>
<td class="text-right">4.666217</td>
</tr>

<tr>
<td class="text-left">&#xa0;</td>
<td class="text-right">0</td>
<td class="text-right">1</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="text-left">name<sub>of</sub><sub>plot</sub></td>
<td class="text-right">2022-01-20<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>20</sub> &#x2026;</td>
<td class="text-right">2022-01-20<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>20</sub> &#x2026;</td>
</tr>

<tr>
<td class="text-left">master<sub>file</sub></td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
</tr>

<tr>
<td class="text-left">parent<sub>name</sub></td>
<td class="text-right">20 nM AF48816<sub>T182s</sub><sub>1</sub></td>
<td class="text-right">20 nM AF48822<sub>T254s</sub><sub>1</sub></td>
</tr>

<tr>
<td class="text-left">parent<sub>uqid</sub></td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">time of fit</td>
<td class="text-right">24 January 2022 22:34:07</td>
<td class="text-right">24 January 2022 22:34:07</td>
</tr>

<tr>
<td class="text-left">Diff<sub>eq</sub></td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
</tr>

<tr>
<td class="text-left">Diff<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>eq</sub></td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Dimen</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
</tr>

<tr>
<td class="text-left">xmin</td>
<td class="text-right">0.001018</td>
<td class="text-right">0.001018</td>
</tr>

<tr>
<td class="text-left">xmax</td>
<td class="text-right">100.66329</td>
<td class="text-right">100.66329</td>
</tr>

<tr>
<td class="text-left">offset</td>
<td class="text-right">0.314375</td>
<td class="text-right">0.148697</td>
</tr>

<tr>
<td class="text-left">stdev(offset)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">GN0</td>
<td class="text-right">0.161316</td>
<td class="text-right">0.096106</td>
</tr>

<tr>
<td class="text-left">stdev(GN0)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (FCS)</td>
<td class="text-right">6.198997</td>
<td class="text-right">10.405181</td>
</tr>

<tr>
<td class="text-left">cpm (kHz)</td>
<td class="text-right">55.727064</td>
<td class="text-right">33.155463</td>
</tr>

<tr>
<td class="text-left">A1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">stdev(A1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">txy1</td>
<td class="text-right">0.066262</td>
<td class="text-right">0.038902</td>
</tr>

<tr>
<td class="text-left">stdev(txy1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">alpha1</td>
<td class="text-right">0.5</td>
<td class="text-right">0.737984</td>
</tr>

<tr>
<td class="text-left">stdev(alpha1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (mom)</td>
<td class="text-right">72.053415</td>
<td class="text-right">73.936945</td>
</tr>

<tr>
<td class="text-left">bri (kHz)</td>
<td class="text-right">4.794626</td>
<td class="text-right">4.666217</td>
</tr>

<tr>
<td class="text-left">&#xa0;</td>
<td class="text-right">0</td>
<td class="text-right">1</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="text-left">name<sub>of</sub><sub>plot</sub></td>
<td class="text-right">2022-01-20<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1</sub><sub>shift</sub><sub>20</sub> nM AF48&#x2026;</td>
<td class="text-right">2022-01-20<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1</sub><sub>shift</sub><sub>20</sub> nM AF48&#x2026;</td>
</tr>

<tr>
<td class="text-left">master<sub>file</sub></td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
</tr>

<tr>
<td class="text-left">parent<sub>name</sub></td>
<td class="text-right">shift<sub>20</sub> nM AF48816<sub>T182s</sub><sub>1</sub></td>
<td class="text-right">shift<sub>20</sub> nM AF48822<sub>T254s</sub><sub>1</sub></td>
</tr>

<tr>
<td class="text-left">parent<sub>uqid</sub></td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">time of fit</td>
<td class="text-right">24 January 2022 22:32:21</td>
<td class="text-right">24 January 2022 22:32:21</td>
</tr>

<tr>
<td class="text-left">Diff<sub>eq</sub></td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
</tr>

<tr>
<td class="text-left">Diff<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>eq</sub></td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Dimen</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
</tr>

<tr>
<td class="text-left">xmin</td>
<td class="text-right">0.001018</td>
<td class="text-right">0.001018</td>
</tr>

<tr>
<td class="text-left">xmax</td>
<td class="text-right">117.440506</td>
<td class="text-right">117.440506</td>
</tr>

<tr>
<td class="text-left">offset</td>
<td class="text-right">0.276905</td>
<td class="text-right">0.139014</td>
</tr>

<tr>
<td class="text-left">stdev(offset)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">GN0</td>
<td class="text-right">0.156775</td>
<td class="text-right">0.095677</td>
</tr>

<tr>
<td class="text-left">stdev(GN0)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (FCS)</td>
<td class="text-right">6.378581</td>
<td class="text-right">10.451884</td>
</tr>

<tr>
<td class="text-left">cpm (kHz)</td>
<td class="text-right">54.158119</td>
<td class="text-right">33.007311</td>
</tr>

<tr>
<td class="text-left">A1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">stdev(A1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">txy1</td>
<td class="text-right">0.067249</td>
<td class="text-right">0.038801</td>
</tr>

<tr>
<td class="text-left">stdev(txy1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">alpha1</td>
<td class="text-right">0.5</td>
<td class="text-right">0.733455</td>
</tr>

<tr>
<td class="text-left">stdev(alpha1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (mom)</td>
<td class="text-right">72.053415</td>
<td class="text-right">73.936945</td>
</tr>

<tr>
<td class="text-left">bri (kHz)</td>
<td class="text-right">4.794626</td>
<td class="text-right">4.666217</td>
</tr>

<tr>
<td class="text-left">&#xa0;</td>
<td class="text-right">0</td>
<td class="text-right">1</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="text-left">name<sub>of</sub><sub>plot</sub></td>
<td class="text-right">2022-01-20<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1</sub><sub>DiO</sub> LUV 10uM in &#x2026;</td>
<td class="text-right">2022-01-20<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1</sub><sub>DiO</sub> LUV 10uM in &#x2026;</td>
</tr>

<tr>
<td class="text-left">master<sub>file</sub></td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
</tr>

<tr>
<td class="text-left">parent<sub>name</sub></td>
<td class="text-right">DiO LUV 10uM in 20 nM AF48823<sub>T268s</sub><sub>1</sub></td>
<td class="text-right">DiO LUV 10uM in 20 nM AF48823<sub>T287s</sub><sub>1</sub></td>
</tr>

<tr>
<td class="text-left">parent<sub>uqid</sub></td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">time of fit</td>
<td class="text-right">24 January 2022 22:58:57</td>
<td class="text-right">24 January 2022 22:59:16</td>
</tr>

<tr>
<td class="text-left">Diff<sub>eq</sub></td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
</tr>

<tr>
<td class="text-left">Diff<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>eq</sub></td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Dimen</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
</tr>

<tr>
<td class="text-left">xmin</td>
<td class="text-right">0.00089</td>
<td class="text-right">0.00089</td>
</tr>

<tr>
<td class="text-left">xmax</td>
<td class="text-right">2147.483642</td>
<td class="text-right">2147.483642</td>
</tr>

<tr>
<td class="text-left">offset</td>
<td class="text-right">-0.002524</td>
<td class="text-right">-0.014455</td>
</tr>

<tr>
<td class="text-left">stdev(offset)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">GN0</td>
<td class="text-right">0.206576</td>
<td class="text-right">0.396267</td>
</tr>

<tr>
<td class="text-left">stdev(GN0)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (FCS)</td>
<td class="text-right">4.840844</td>
<td class="text-right">2.523549</td>
</tr>

<tr>
<td class="text-left">cpm (kHz)</td>
<td class="text-right">107.60087</td>
<td class="text-right">221.540583</td>
</tr>

<tr>
<td class="text-left">A1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">stdev(A1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">txy1</td>
<td class="text-right">6.459892</td>
<td class="text-right">4.992202</td>
</tr>

<tr>
<td class="text-left">stdev(txy1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">alpha1</td>
<td class="text-right">0.697556</td>
<td class="text-right">0.973971</td>
</tr>

<tr>
<td class="text-left">stdev(alpha1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (mom)</td>
<td class="text-right">5.62743</td>
<td class="text-right">2.845675</td>
</tr>

<tr>
<td class="text-left">bri (kHz)</td>
<td class="text-right">92.565361</td>
<td class="text-right">196.472342</td>
</tr>

<tr>
<td class="text-left">&#xa0;</td>
<td class="text-right">0</td>
<td class="text-right">1</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="text-left">name<sub>of</sub><sub>plot</sub></td>
<td class="text-right">2022-01-20<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>DiO</sub>&#x2026;</td>
<td class="text-right">2022-01-20<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>DiO</sub>&#x2026;</td>
</tr>

<tr>
<td class="text-left">master<sub>file</sub></td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
</tr>

<tr>
<td class="text-left">parent<sub>name</sub></td>
<td class="text-right">DiO LUV 10uM in 20 nM AF48823<sub>T268s</sub><sub>1</sub></td>
<td class="text-right">DiO LUV 10uM in 20 nM AF48823<sub>T287s</sub><sub>1</sub></td>
</tr>

<tr>
<td class="text-left">parent<sub>uqid</sub></td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">time of fit</td>
<td class="text-right">24 January 2022 22:51:01</td>
<td class="text-right">24 January 2022 22:51:01</td>
</tr>

<tr>
<td class="text-left">Diff<sub>eq</sub></td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
</tr>

<tr>
<td class="text-left">Diff<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>eq</sub></td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Dimen</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
</tr>

<tr>
<td class="text-left">xmin</td>
<td class="text-right">0.00089</td>
<td class="text-right">0.00089</td>
</tr>

<tr>
<td class="text-left">xmax</td>
<td class="text-right">2415.919098</td>
<td class="text-right">2415.919098</td>
</tr>

<tr>
<td class="text-left">offset</td>
<td class="text-right">-0.084572</td>
<td class="text-right">-0.044295</td>
</tr>

<tr>
<td class="text-left">stdev(offset)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">GN0</td>
<td class="text-right">0.338889</td>
<td class="text-right">0.247596</td>
</tr>

<tr>
<td class="text-left">stdev(GN0)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (FCS)</td>
<td class="text-right">2.950821</td>
<td class="text-right">4.038831</td>
</tr>

<tr>
<td class="text-left">cpm (kHz)</td>
<td class="text-right">176.520064</td>
<td class="text-right">138.423335</td>
</tr>

<tr>
<td class="text-left">A1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">stdev(A1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">txy1</td>
<td class="text-right">20.767381</td>
<td class="text-right">20.776597</td>
</tr>

<tr>
<td class="text-left">stdev(txy1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">alpha1</td>
<td class="text-right">0.5</td>
<td class="text-right">0.5</td>
</tr>

<tr>
<td class="text-left">stdev(alpha1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (mom)</td>
<td class="text-right">5.62743</td>
<td class="text-right">2.845675</td>
</tr>

<tr>
<td class="text-left">bri (kHz)</td>
<td class="text-right">92.565361</td>
<td class="text-right">196.472342</td>
</tr>

<tr>
<td class="text-left">&#xa0;</td>
<td class="text-right">0</td>
<td class="text-right">1</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="text-left">name<sub>of</sub><sub>plot</sub></td>
<td class="text-right">2022-01-20<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1</sub><sub>shift</sub><sub>DiO</sub> LUV 10&#x2026;</td>
<td class="text-right">2022-01-20<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1</sub><sub>shift</sub><sub>DiO</sub> LUV 10&#x2026;</td>
</tr>

<tr>
<td class="text-left">master<sub>file</sub></td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
</tr>

<tr>
<td class="text-left">parent<sub>name</sub></td>
<td class="text-right">shift<sub>DiO</sub> LUV 10uM in 20 nM AF48823<sub>T268s</sub><sub>1</sub></td>
<td class="text-right">shift<sub>DiO</sub> LUV 10uM in 20 nM AF48823<sub>T287s</sub><sub>1</sub></td>
</tr>

<tr>
<td class="text-left">parent<sub>uqid</sub></td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">time of fit</td>
<td class="text-right">24 January 2022 23:05:52</td>
<td class="text-right">24 January 2022 23:06:00</td>
</tr>

<tr>
<td class="text-left">Diff<sub>eq</sub></td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
</tr>

<tr>
<td class="text-left">Diff<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>eq</sub></td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Dimen</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
</tr>

<tr>
<td class="text-left">xmin</td>
<td class="text-right">0.00089</td>
<td class="text-right">0.00089</td>
</tr>

<tr>
<td class="text-left">xmax</td>
<td class="text-right">2415.919098</td>
<td class="text-right">2415.919098</td>
</tr>

<tr>
<td class="text-left">offset</td>
<td class="text-right">-0.023485</td>
<td class="text-right">0.011508</td>
</tr>

<tr>
<td class="text-left">stdev(offset)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">GN0</td>
<td class="text-right">0.304118</td>
<td class="text-right">0.211213</td>
</tr>

<tr>
<td class="text-left">stdev(GN0)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (FCS)</td>
<td class="text-right">3.288199</td>
<td class="text-right">4.734564</td>
</tr>

<tr>
<td class="text-left">cpm (kHz)</td>
<td class="text-right">158.408619</td>
<td class="text-right">118.082341</td>
</tr>

<tr>
<td class="text-left">A1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">stdev(A1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">txy1</td>
<td class="text-right">2.884429</td>
<td class="text-right">1.956253</td>
</tr>

<tr>
<td class="text-left">stdev(txy1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">alpha1</td>
<td class="text-right">0.5</td>
<td class="text-right">0.600835</td>
</tr>

<tr>
<td class="text-left">stdev(alpha1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (mom)</td>
<td class="text-right">5.62743</td>
<td class="text-right">2.845675</td>
</tr>

<tr>
<td class="text-left">bri (kHz)</td>
<td class="text-right">92.565361</td>
<td class="text-right">196.472342</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">clean_v1_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7a4f7e;">clean_v1_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 459'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_v2_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #3f7178;">clean_v2_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 459'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_v3_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #707e4f;">clean_v3_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 459'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_v1_tau</span> = <span style="color: #43783f;">clean_v1_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_v2_tau</span> = <span style="color: #784437;">clean_v2_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_v3_tau</span> = <span style="color: #78683f;">clean_v3_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_v1_corr</span> = <span style="color: #43783f;">clean_v1_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">clean_v2_corr</span> = <span style="color: #784437;">clean_v2_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">clean_v3_corr</span> = <span style="color: #78683f;">clean_v3_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">clean_v1_fit</span> = <span style="color: #43783f;">clean_v1_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">clean_v2_fit</span> = <span style="color: #784437;">clean_v2_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">clean_v3_fit</span> = <span style="color: #78683f;">clean_v3_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">dirty_v1_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783f5a;">dirty_v1_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 347'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_v2_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783778;">dirty_v2_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 347'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_v3_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #43783f;">dirty_v3_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 347'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_v1_tau</span> = <span style="color: #78683f;">dirty_v1_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_v2_tau</span> = <span style="color: #7a4f7e;">dirty_v2_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_v3_tau</span> = <span style="color: #43783f;">dirty_v3_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_v1_corr</span> = <span style="color: #78683f;">dirty_v1_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">dirty_v2_corr</span> = <span style="color: #7a4f7e;">dirty_v2_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">dirty_v3_corr</span> = <span style="color: #43783f;">dirty_v3_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">dirty_v1_fit</span> = <span style="color: #78683f;">dirty_v1_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">dirty_v2_fit</span> = <span style="color: #7a4f7e;">dirty_v2_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">dirty_v3_fit</span> = <span style="color: #43783f;">dirty_v3_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
</pre>
</div>
</details>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">taudiff</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>(<span style="color: #784437;">data</span>=[<span style="color: #3f7178;">clean_v1_taudiff</span>, <span style="color: #43783f;">clean_v2_taudiff</span>, <span style="color: #4f5c7e;">clean_v3_taudiff</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #4f7e67;">dirty_v1_taudiff</span>, <span style="color: #513f78;">dirty_v2_taudiff</span>, <span style="color: #7e544f;">dirty_v3_taudiff</span>],
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #43783f;">index</span>=[<span style="color: #2aa198;">'clean-no c.'</span>, <span style="color: #2aa198;">'clean-weights'</span>, <span style="color: #2aa198;">'clean-shift'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #2aa198;">'dirty-no c.'</span>, <span style="color: #2aa198;">'dirty-weights'</span>, <span style="color: #2aa198;">'dirty-shift'</span>]).<span style="color: #37785e;">T</span>
<span style="color: #268bd2;">fig</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #78683f;">figure</span>(<span style="color: #784437;">figsize</span>=(16,9))
<span style="color: #268bd2;">fig</span> = <span style="color: #4f5c7e;">sns</span>.<span style="color: #707e4f;">boxplot</span>(<span style="color: #784437;">data</span>=<span style="color: #3f7178;">taudiff</span>, <span style="color: #43783f;">showfliers</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="color: #268bd2;">ylims</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #783778;">get_ylim</span>()
<span style="color: #4f7e67;">fig</span>.<span style="color: #783778;">set</span>(<span style="color: #43783f;">ylim</span>=<span style="color: #3f7178;">ylims</span>)
<span style="color: #268bd2;">fig</span> = <span style="color: #4f5c7e;">sns</span>.<span style="color: #78683f;">stripplot</span>(<span style="color: #784437;">data</span>=<span style="color: #3f7178;">taudiff</span>, <span style="color: #783778;">jitter</span>=<span style="color: #859900; font-weight: bold;">True</span>, <span style="color: #78683f;">color</span>=<span style="color: #2aa198;">'.3'</span>)
<span style="color: #4f7e67;">plt</span>.<span style="color: #374478;">show</span>()
</pre>
</div>


<figure>
<p><img src="./jupyter/analysis1-nocorr+w0+shift.png" class="img-responsive" alt="analysis1-nocorr+w0+shift.png">
</p>
</figure>
</li>
<li>So from the first run we see:
<ol class="org-ol">
<li>we confirm the distortion of transit times in the dirty data
</li>
<li>we see that the correction methods <code>weight=0</code> and <code>delete_and_shift</code> as
they are implemented now don't work
</li>
</ol>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-1-7" class="outline-4">
<h4 id="sec-2-1-7"><span class="section-number-4">2.1.7</span> Analysis 2 of weight=0.2&#x2026;0.8</h4>
<div class="outline-text-4" id="text-2-1-7">
<ul class="org-ul">
<li>log files can be found here:
<div class="org-src-container">

<pre class="src src-tmux"><span style="color: #4f7e67;">tail</span> <span style="color: #783f5a;">/beegfs/ye53nis/drmed-git/data/exp-220120-correlate-ptu/2022-01-25_correlate-all-clean-ptu.log</span>
<span style="color: #4f7e67;">tail</span> <span style="color: #783778;">/beegfs/ye53nis/drmed-git/data/exp-220120-correlate-ptu/2022-01-25_correlate-all-dirty-ptu.log</span>
</pre>
</div>

<pre class="example">
(tf) [ye53nis@login01 applications]$ tail /beegfs/ye53nis/drmed-git/data/exp-220120-correlate-ptu/2022-01-25_correla te-all-clean-ptu.log
2022-01-26 15:58:00,327 - Finished predictTimeSeries() with name=weight0.6_20 nM AF48866_T782s_1
2022-01-26 15:58:00,367 - correctTCSPC: some samples: subChan 3437400, truetime 3437400,photonMask 3437400, channelM ask 3437580
2022-01-26 15:58:00,409 - Finished correctTCSPC() with name 20 nM AF48866_T782s_1, timeseries_name weight0.6_20 nM A F48866_T782s_1
2022-01-26 15:58:00,513 - Finished time2bin. last_time=9995.0, num_bins=9995.0
2022-01-26 15:58:00,514 - Finished getTimeSeries() with truetime_name 20 nM AF48866_T782s_1, timeseries_name weight0 .8_20 nM AF48866_T782s_1
2022-01-26 15:58:00,516 - Finished getPhotonCountingStats() with name: weight0.8_20 nM AF48866_T782s_1
2022-01-26 15:58:00,568 - Finished predictTimeSeries() with name=weight0.8_20 nM AF48866_T782s_1
2022-01-26 15:58:00,607 - correctTCSPC: some samples: subChan 3437400, truetime 3437400,photonMask 3437400, channelM ask 3437580
2022-01-26 15:58:00,668 - Finished correctTCSPC() with name 20 nM AF48866_T782s_1, timeseries_name weight0.8_20 nM A F48866_T782s_1
2022-01-26 15:58:00,668 - get_autocorrelation: Starting tttr2xfcs correlation.with name CH2_weight0.2_20 nM AF48866_ T782s_1_FORWEIGHTS
(tf) [ye53nis@login01 applications]$ tail /beegfs/ye53nis/drmed-git/data/exp-220120-correlate-ptu/2022-01-25_correla te-all-dirty-ptu.log
2022-01-26 15:43:14,278 - Finished predictTimeSeries() with name=weight0.6_DiO LUV 10uM in 20 nM AF48876_T910s_1
2022-01-26 15:43:14,406 - correctTCSPC: some samples: subChan 4672383, truetime 4672383,photonMask 4672383, channelM ask 4672675
2022-01-26 15:43:14,520 - Finished correctTCSPC() with name DiO LUV 10uM in 20 nM AF48876_T910s_1, timeseries_name w eight0.6_DiO LUV 10uM in 20 nM AF48876_T910s_1
2022-01-26 15:43:14,696 - Finished time2bin. last_time=9996.0, num_bins=9996.0
2022-01-26 15:43:14,705 - Finished getTimeSeries() with truetime_name DiO LUV 10uM in 20 nM AF48876_T910s_1, timeser ies_name weight0.8_DiO LUV 10uM in 20 nM AF48876_T910s_1
2022-01-26 15:43:14,707 - Finished getPhotonCountingStats() with name: weight0.8_DiO LUV 10uM in 20 nM AF48876_T910s _1
2022-01-26 15:43:14,762 - Finished predictTimeSeries() with name=weight0.8_DiO LUV 10uM in 20 nM AF48876_T910s_1
2022-01-26 15:43:14,889 - correctTCSPC: some samples: subChan 4672383, truetime 4672383,photonMask 4672383, channelM ask 4672675
2022-01-26 15:43:14,960 - Finished correctTCSPC() with name DiO LUV 10uM in 20 nM AF48876_T910s_1, timeseries_name w eight0.8_DiO LUV 10uM in 20 nM AF48876_T910s_1
2022-01-26 15:43:14,963 - get_autocorrelation: Starting tttr2xfcs correlation.with name CH2_weight0.2_DiO LUV 10uM i n 20 nM AF48876_T910s_1_FORWEIGHTS
(tf) [ye53nis@login01 applications]$
</pre>
</li>

<li>So the first analysis of "no correction" vs "weight=0" vs "delete and
shift" did show that the two correction methods did not work properly.
Another approach is photon weighting, so let's look at the following
correlations:
<ol class="org-ol">
<li><b>no correction</b>: I just read in the .ptu data and correlated the photon
arrival times using the <code>tttr2xfcs</code> algorithm → taken from first
experiment
</li>
<li><b>weight=0</b>: I read in the .ptu data, constructed a timetrace from it,
fed the time trace to my trained unet which predicts bright burst
artifacts, then mapped the time trace prediction on the photon arrival
times and <i>gave all photons inside a bin labelled as artifactual a
weight of 0.2</i> in the <code>tttr2xfcs</code> algorithm
</li>
<li><b>weight=0.2</b>: changed weight to 0.2, else see above
</li>
<li><b>weight=0.4</b>: changed weight to 0.4, else see above
</li>
<li><b>weight=0.6</b>: changed weight to 0.6, else see above
</li>
<li><b>weight=0.8</b>: changed weight to 0.8, else see above
</li>
</ol>
</li>
<li>Then I fitted the traces in each of the 3 folders using Dominic Waithe's
<a href="https://dwaithe.github.io/FCSfitJS/">https://dwaithe.github.io/FCSfitJS/</a>
</li>
<li>now let's look at the results:
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #707e4f;">cd</span> /<span style="color: #3f7178;">home</span>/<span style="color: #783f5a;">lex</span>/<span style="color: #784437;">Programme</span>/<span style="color: #784437;">drmed</span>-<span style="color: #784437;">git</span>
</pre>
</div>

<pre class="example">
/home/lex/Programme/drmed-git
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f5c7e;">numpy</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #707e4f;">np</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #37785e;">matplotlib</span>.<span style="color: #4f7e67;">pyplot</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f7e67;">plt</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #5e7837;">pandas</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #783778;">pd</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #78683f;">seaborn</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f5c7e;">sns</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #43783f;">pathlib</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #78683f;">Path</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #4f7e67;">pprint</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f7e67;">pprint</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">use seaborn style as default even if I just use matplotlib</span>
<span style="color: #4f5c7e;">sns</span>.<span style="color: #783778;">set</span>()
</pre>
</div>

<details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">folder_clean</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-01-20_correlate-all-clean-ptu'</span>)
<span style="color: #268bd2;">folder_clean_weights</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-01-25_correlate-all-clean-ptu'</span>)
<span style="color: #268bd2;">folder_dirty</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-01-20_correlate-all-dirty-ptu'</span>)
<span style="color: #268bd2;">folder_dirty_weights</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-01-25_correlate-all-dirty-ptu'</span>)
<span style="color: #268bd2;">clean_v1_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'2022-01-20_clean_no-correction_param_229of400.csv'</span>
<span style="color: #268bd2;">clean_00_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'2022-01-20_clean_corrected-with-weights_param_229of400.csv'</span>
<span style="color: #268bd2;">clean_02_param_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'2022-01-25_clean_corrected-with-weights-0.2_param_34of400.csv'</span>
<span style="color: #268bd2;">clean_04_param_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'2022-01-25_clean_corrected-with-weights-0.4_param_34of400.csv'</span>
<span style="color: #268bd2;">clean_06_param_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'2022-01-25_clean_corrected-with-weights-0.6_param_34of400.csv'</span>
<span style="color: #268bd2;">clean_08_param_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'2022-01-25_clean_corrected-with-weights-0.8_param_34of400.csv'</span>

<span style="color: #268bd2;">clean_v1_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'2022-01-20_clean_no-correction_plot_229of400.csv'</span>
<span style="color: #268bd2;">clean_00_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'2022-01-20_clean_corrected-with-weights_plot_229of400.csv'</span>
<span style="color: #268bd2;">clean_02_plot_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'2022-01-25_clean_corrected-with-weights-0.2_plot_34of400.csv'</span>
<span style="color: #268bd2;">clean_04_plot_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'2022-01-25_clean_corrected-with-weights-0.4_plot_34of400.csv'</span>
<span style="color: #268bd2;">clean_06_plot_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'2022-01-25_clean_corrected-with-weights-0.6_plot_34of400.csv'</span>
<span style="color: #268bd2;">clean_08_plot_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'2022-01-25_clean_corrected-with-weights-0.8_plot_34of400.csv'</span>

<span style="color: #268bd2;">dirty_v1_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'2022-01-20_dirty_no-correction_param_173of400.csv'</span>
<span style="color: #268bd2;">dirty_00_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'2022-01-20_dirty_corrected-with-weights_param_173of400.csv'</span>
<span style="color: #268bd2;">dirty_02_param_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'2022-01-25_dirty_corrected-with-weights-0.2_param_23of400.csv'</span>
<span style="color: #268bd2;">dirty_04_param_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'2022-01-25_dirty_corrected-with-weights-0.4_param_23of400.csv'</span>
<span style="color: #268bd2;">dirty_06_param_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'2022-01-25_dirty_corrected-with-weights-0.6_param_23of400.csv'</span>
<span style="color: #268bd2;">dirty_08_param_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'2022-01-25_dirty_corrected-with-weights-0.8_param_23of400.csv'</span>

<span style="color: #268bd2;">dirty_v1_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'2022-01-20_dirty_no-correction_plot_173of400.csv'</span>
<span style="color: #268bd2;">dirty_00_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'2022-01-20_dirty_corrected-with-weights_plot_173of400.csv'</span>
<span style="color: #268bd2;">dirty_02_plot_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'2022-01-25_dirty_corrected-with-weights-0.2_plot_23of400.csv'</span>
<span style="color: #268bd2;">dirty_04_plot_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'2022-01-25_dirty_corrected-with-weights-0.4_plot_23of400.csv'</span>
<span style="color: #268bd2;">dirty_06_plot_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'2022-01-25_dirty_corrected-with-weights-0.6_plot_23of400.csv'</span>
<span style="color: #268bd2;">dirty_08_plot_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'2022-01-25_dirty_corrected-with-weights-0.8_plot_23of400.csv'</span>

</pre>
</div>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">clean_v1_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783f5a;">clean_v1_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">clean_00_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #5e7837;">clean_02_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">clean_02_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #5e7837;">clean_02_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">clean_04_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #3f7178;">clean_04_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">clean_06_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #5e7837;">clean_06_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">clean_08_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">clean_08_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)

<span style="color: #268bd2;">clean_v1_taudiff</span> = <span style="color: #5e7837;">clean_v1_param</span>[<span style="color: #2aa198;">'txy1'</span>]
<span style="color: #268bd2;">clean_00_taudiff</span> = <span style="color: #513f78;">clean_02_param</span>[<span style="color: #2aa198;">'txy1'</span>]
<span style="color: #268bd2;">clean_02_taudiff</span> = <span style="color: #513f78;">clean_02_param</span>[<span style="color: #2aa198;">'txy1'</span>]
<span style="color: #268bd2;">clean_04_taudiff</span> = <span style="color: #707e4f;">clean_04_param</span>[<span style="color: #2aa198;">'txy1'</span>]
<span style="color: #268bd2;">clean_06_taudiff</span> = <span style="color: #784437;">clean_06_param</span>[<span style="color: #2aa198;">'txy1'</span>]
<span style="color: #268bd2;">clean_08_taudiff</span> = <span style="color: #783f5a;">clean_08_param</span>[<span style="color: #2aa198;">'txy1'</span>]

<span style="color: #268bd2;">dirty_v1_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #5e7837;">dirty_v1_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">dirty_00_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #37785e;">dirty_02_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">dirty_02_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #37785e;">dirty_02_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">dirty_04_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783f5a;">dirty_04_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">dirty_06_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783778;">dirty_06_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)
<span style="color: #268bd2;">dirty_08_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f5c7e;">dirty_08_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>)

<span style="color: #268bd2;">dirty_v1_taudiff</span> = <span style="color: #37785e;">dirty_v1_param</span>[<span style="color: #2aa198;">'txy1'</span>]
<span style="color: #268bd2;">dirty_00_taudiff</span> = <span style="color: #513f78;">dirty_02_param</span>[<span style="color: #2aa198;">'txy1'</span>]
<span style="color: #268bd2;">dirty_02_taudiff</span> = <span style="color: #513f78;">dirty_02_param</span>[<span style="color: #2aa198;">'txy1'</span>]
<span style="color: #268bd2;">dirty_04_taudiff</span> = <span style="color: #4f7e67;">dirty_04_param</span>[<span style="color: #2aa198;">'txy1'</span>]
<span style="color: #268bd2;">dirty_06_taudiff</span> = <span style="color: #37785e;">dirty_06_param</span>[<span style="color: #2aa198;">'txy1'</span>]
<span style="color: #268bd2;">dirty_08_taudiff</span> = <span style="color: #43783f;">dirty_08_param</span>[<span style="color: #2aa198;">'txy1'</span>]

<span style="color: #4f7e67;">display</span>(<span style="color: #783778;">pd</span>.<span style="color: #7e544f;">concat</span>([<span style="color: #5e7837;">clean_v1_param</span>.<span style="color: #4f5c7e;">head</span>(1).<span style="color: #37785e;">T</span>, <span style="color: #783f5a;">clean_00_param</span>.<span style="color: #4f5c7e;">head</span>(1).<span style="color: #37785e;">T</span>, <span style="color: #513f78;">clean_02_param</span>.<span style="color: #4f5c7e;">head</span>(1).<span style="color: #37785e;">T</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #707e4f;">clean_04_param</span>.<span style="color: #4f5c7e;">head</span>(1).<span style="color: #37785e;">T</span>, <span style="color: #784437;">clean_06_param</span>.<span style="color: #4f5c7e;">head</span>(1).<span style="color: #37785e;">T</span>, <span style="color: #783f5a;">clean_08_param</span>.<span style="color: #4f5c7e;">head</span>(1).<span style="color: #37785e;">T</span>], <span style="color: #784437;">axis</span>=1))
<span style="color: #4f7e67;">display</span>(<span style="color: #783778;">pd</span>.<span style="color: #7e544f;">concat</span>([<span style="color: #37785e;">dirty_v1_param</span>.<span style="color: #4f5c7e;">head</span>(1).<span style="color: #37785e;">T</span>, <span style="color: #783f5a;">dirty_00_param</span>.<span style="color: #4f5c7e;">head</span>(1).<span style="color: #37785e;">T</span>, <span style="color: #513f78;">dirty_02_param</span>.<span style="color: #4f5c7e;">head</span>(1).<span style="color: #37785e;">T</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #4f7e67;">dirty_04_param</span>.<span style="color: #4f5c7e;">head</span>(1).<span style="color: #37785e;">T</span>, <span style="color: #37785e;">dirty_06_param</span>.<span style="color: #4f5c7e;">head</span>(1).<span style="color: #37785e;">T</span>, <span style="color: #43783f;">dirty_08_param</span>.<span style="color: #4f5c7e;">head</span>(1).<span style="color: #37785e;">T</span>], <span style="color: #784437;">axis</span>=1))

</pre>
</div>

<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="left">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">
</colgroup>
<thead>
<tr>
<th scope="col" class="text-left">&#xa0;</th>
<th scope="col" class="text-right">0</th>
<th scope="col" class="text-right">0</th>
<th scope="col" class="text-right">0</th>
<th scope="col" class="text-right">0</th>
<th scope="col" class="text-right">0</th>
<th scope="col" class="text-right">0</th>
</tr>
</thead>
<tbody>
<tr>
<td class="text-left">name<sub>of</sub><sub>plot</sub></td>
<td class="text-right">2022-01-20<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1</sub><sub>20</sub> nM AF48816<sub>T1</sub>&#x2026;</td>
<td class="text-right">2022-01-25<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>wei</sub>&#x2026;</td>
<td class="text-right">2022-01-25<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>wei</sub>&#x2026;</td>
<td class="text-right">2022-01-25<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>wei</sub>&#x2026;</td>
<td class="text-right">2022-01-25<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>wei</sub>&#x2026;</td>
<td class="text-right">2022-01-25<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>wei</sub>&#x2026;</td>
</tr>

<tr>
<td class="text-left">master<sub>file</sub></td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
</tr>

<tr>
<td class="text-left">parent<sub>name</sub></td>
<td class="text-right">20 nM AF48816<sub>T182s</sub><sub>1</sub></td>
<td class="text-right">weight0.2<sub>20</sub> nM AF48816<sub>T182s</sub><sub>1</sub></td>
<td class="text-right">weight0.2<sub>20</sub> nM AF48816<sub>T182s</sub><sub>1</sub></td>
<td class="text-right">weight0.4<sub>20</sub> nM AF48816<sub>T182s</sub><sub>1</sub></td>
<td class="text-right">weight0.6<sub>20</sub> nM AF48816<sub>T182s</sub><sub>1</sub></td>
<td class="text-right">weight0.8<sub>20</sub> nM AF48816<sub>T182s</sub><sub>1</sub></td>
</tr>

<tr>
<td class="text-left">parent<sub>uqid</sub></td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">time of fit</td>
<td class="text-right">24 January 2022 22:35:35</td>
<td class="text-right">25 January 2022 14:14:37</td>
<td class="text-right">25 January 2022 14:14:37</td>
<td class="text-right">25 January 2022 14:17:36</td>
<td class="text-right">25 January 2022 14:18:57</td>
<td class="text-right">25 January 2022 14:20:30</td>
</tr>

<tr>
<td class="text-left">Diff<sub>eq</sub></td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
</tr>

<tr>
<td class="text-left">Diff<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>eq</sub></td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Dimen</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
</tr>

<tr>
<td class="text-left">xmin</td>
<td class="text-right">0.001018</td>
<td class="text-right">0.001018</td>
<td class="text-right">0.001018</td>
<td class="text-right">0.001018</td>
<td class="text-right">0.001146</td>
<td class="text-right">0.001146</td>
</tr>

<tr>
<td class="text-left">xmax</td>
<td class="text-right">117.440506</td>
<td class="text-right">1073.741818</td>
<td class="text-right">1073.741818</td>
<td class="text-right">469.762042</td>
<td class="text-right">369.098746</td>
<td class="text-right">603.97977</td>
</tr>

<tr>
<td class="text-left">offset</td>
<td class="text-right">-0.000577</td>
<td class="text-right">0.171278</td>
<td class="text-right">0.171278</td>
<td class="text-right">0.087402</td>
<td class="text-right">0.035123</td>
<td class="text-right">0.007769</td>
</tr>

<tr>
<td class="text-left">stdev(offset)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">GN0</td>
<td class="text-right">0.074965</td>
<td class="text-right">0.132934</td>
<td class="text-right">0.132934</td>
<td class="text-right">0.095521</td>
<td class="text-right">0.078695</td>
<td class="text-right">0.073745</td>
</tr>

<tr>
<td class="text-left">stdev(GN0)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (FCS)</td>
<td class="text-right">13.339549</td>
<td class="text-right">7.522504</td>
<td class="text-right">7.522504</td>
<td class="text-right">10.468952</td>
<td class="text-right">12.70734</td>
<td class="text-right">13.560257</td>
</tr>

<tr>
<td class="text-left">cpm (kHz)</td>
<td class="text-right">25.896822</td>
<td class="text-right">45.922465</td>
<td class="text-right">45.922465</td>
<td class="text-right">32.997757</td>
<td class="text-right">27.185228</td>
<td class="text-right">25.475323</td>
</tr>

<tr>
<td class="text-left">A1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">stdev(A1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">txy1</td>
<td class="text-right">0.033317</td>
<td class="text-right">0.042671</td>
<td class="text-right">0.042671</td>
<td class="text-right">0.03675</td>
<td class="text-right">0.034622</td>
<td class="text-right">0.033477</td>
</tr>

<tr>
<td class="text-left">stdev(txy1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">alpha1</td>
<td class="text-right">0.8512</td>
<td class="text-right">0.5</td>
<td class="text-right">0.5</td>
<td class="text-right">0.691478</td>
<td class="text-right">0.843979</td>
<td class="text-right">0.887953</td>
</tr>

<tr>
<td class="text-left">stdev(alpha1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (mom)</td>
<td class="text-right">72.053415</td>
<td class="text-right">72.053415</td>
<td class="text-right">72.053415</td>
<td class="text-right">72.053415</td>
<td class="text-right">72.053415</td>
<td class="text-right">72.053415</td>
</tr>

<tr>
<td class="text-left">bri (kHz)</td>
<td class="text-right">4.794626</td>
<td class="text-right">4.794626</td>
<td class="text-right">4.794626</td>
<td class="text-right">4.794626</td>
<td class="text-right">4.794626</td>
<td class="text-right">4.794626</td>
</tr>

<tr>
<td class="text-left">&#xa0;</td>
<td class="text-right">0</td>
<td class="text-right">0</td>
<td class="text-right">0</td>
<td class="text-right">0</td>
<td class="text-right">0</td>
<td class="text-right">0</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="text-left">name<sub>of</sub><sub>plot</sub></td>
<td class="text-right">2022-01-20<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1</sub><sub>DiO</sub> LUV 10uM in &#x2026;</td>
<td class="text-right">2022-01-25<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>wei</sub>&#x2026;</td>
<td class="text-right">2022-01-25<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>wei</sub>&#x2026;</td>
<td class="text-right">2022-01-25<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>wei</sub>&#x2026;</td>
<td class="text-right">2022-01-25<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>wei</sub>&#x2026;</td>
<td class="text-right">2022-01-25<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>wei</sub>&#x2026;</td>
</tr>

<tr>
<td class="text-left">master<sub>file</sub></td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
<td class="text-right">Not known</td>
</tr>

<tr>
<td class="text-left">parent<sub>name</sub></td>
<td class="text-right">DiO LUV 10uM in 20 nM AF48823<sub>T268s</sub><sub>1</sub></td>
<td class="text-right">weight0.2<sub>DiO</sub> LUV 10uM in 20 nM AF48823<sub>T268s</sub><sub>1</sub></td>
<td class="text-right">weight0.2<sub>DiO</sub> LUV 10uM in 20 nM AF48823<sub>T268s</sub><sub>1</sub></td>
<td class="text-right">weight0.4<sub>DiO</sub> LUV 10uM in 20 nM AF48823<sub>T268s</sub><sub>1</sub></td>
<td class="text-right">weight0.6<sub>DiO</sub> LUV 10uM in 20 nM AF48823<sub>T268s</sub><sub>1</sub></td>
<td class="text-right">weight0.8<sub>DiO</sub> LUV 10uM in 20 nM AF48823<sub>T268s</sub><sub>1</sub></td>
</tr>

<tr>
<td class="text-left">parent<sub>uqid</sub></td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">time of fit</td>
<td class="text-right">24 January 2022 22:58:57</td>
<td class="text-right">25 January 2022 13:58:13</td>
<td class="text-right">25 January 2022 13:58:13</td>
<td class="text-right">25 January 2022 14:03:08</td>
<td class="text-right">25 January 2022 14:04:21</td>
<td class="text-right">25 January 2022 14:07:40</td>
</tr>

<tr>
<td class="text-left">Diff<sub>eq</sub></td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
<td class="text-right">Equation 1A</td>
</tr>

<tr>
<td class="text-left">Diff<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>eq</sub></td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
<td class="text-right">Triplet Eq 2A</td>
</tr>

<tr>
<td class="text-left">Triplet<sub>species</sub></td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">Dimen</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
<td class="text-right">3D</td>
</tr>

<tr>
<td class="text-left">xmin</td>
<td class="text-right">0.00089</td>
<td class="text-right">0.00089</td>
<td class="text-right">0.00089</td>
<td class="text-right">0.001018</td>
<td class="text-right">0.001018</td>
<td class="text-right">0.001018</td>
</tr>

<tr>
<td class="text-left">xmax</td>
<td class="text-right">2147.483642</td>
<td class="text-right">1073.741818</td>
<td class="text-right">1073.741818</td>
<td class="text-right">1610.61273</td>
<td class="text-right">1610.61273</td>
<td class="text-right">1879.048186</td>
</tr>

<tr>
<td class="text-left">offset</td>
<td class="text-right">-0.002524</td>
<td class="text-right">-0.004259</td>
<td class="text-right">-0.004259</td>
<td class="text-right">0.001018</td>
<td class="text-right">0.000758</td>
<td class="text-right">-0.002585</td>
</tr>

<tr>
<td class="text-left">stdev(offset)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">GN0</td>
<td class="text-right">0.206576</td>
<td class="text-right">0.149601</td>
<td class="text-right">0.149601</td>
<td class="text-right">0.092027</td>
<td class="text-right">0.095303</td>
<td class="text-right">0.138446</td>
</tr>

<tr>
<td class="text-left">stdev(GN0)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (FCS)</td>
<td class="text-right">4.840844</td>
<td class="text-right">6.684437</td>
<td class="text-right">6.684437</td>
<td class="text-right">10.866429</td>
<td class="text-right">10.492811</td>
<td class="text-right">7.223025</td>
</tr>

<tr>
<td class="text-left">cpm (kHz)</td>
<td class="text-right">107.60087</td>
<td class="text-right">77.924146</td>
<td class="text-right">77.924146</td>
<td class="text-right">47.934705</td>
<td class="text-right">49.641517</td>
<td class="text-right">72.113704</td>
</tr>

<tr>
<td class="text-left">A1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
<td class="text-right">1</td>
</tr>

<tr>
<td class="text-left">stdev(A1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">txy1</td>
<td class="text-right">6.459892</td>
<td class="text-right">0.811509</td>
<td class="text-right">0.811509</td>
<td class="text-right">0.309739</td>
<td class="text-right">0.802572</td>
<td class="text-right">3.675292</td>
</tr>

<tr>
<td class="text-left">stdev(txy1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">alpha1</td>
<td class="text-right">0.697556</td>
<td class="text-right">0.5</td>
<td class="text-right">0.5</td>
<td class="text-right">0.5277</td>
<td class="text-right">0.5</td>
<td class="text-right">0.567203</td>
</tr>

<tr>
<td class="text-left">stdev(alpha1)</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
<td class="text-right">NaN</td>
</tr>

<tr>
<td class="text-left">N (mom)</td>
<td class="text-right">5.62743</td>
<td class="text-right">5.62743</td>
<td class="text-right">5.62743</td>
<td class="text-right">5.62743</td>
<td class="text-right">5.62743</td>
<td class="text-right">5.62743</td>
</tr>

<tr>
<td class="text-left">bri (kHz)</td>
<td class="text-right">92.565361</td>
<td class="text-right">92.565361</td>
<td class="text-right">92.565361</td>
<td class="text-right">92.565361</td>
<td class="text-right">92.565361</td>
<td class="text-right">92.565361</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">clean_v1_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7a4f7e;">clean_v1_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 459'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_00_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">clean_00_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 459'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_02_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f7e67;">clean_02_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 69'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_04_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7e544f;">clean_04_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 69'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_06_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f7e67;">clean_06_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 69'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_08_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #374478;">clean_08_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 69'</span>, <span style="color: #784437;">axis</span>=1)

<span style="color: #268bd2;">clean_v1_tau</span> = <span style="color: #43783f;">clean_v1_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_00_tau</span> = <span style="color: #513f78;">clean_00_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_02_tau</span> = <span style="color: #784437;">clean_02_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_04_tau</span> = <span style="color: #7e544f;">clean_04_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_06_tau</span> = <span style="color: #4f7e67;">clean_06_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_08_tau</span> = <span style="color: #783f5a;">clean_08_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_v1_corr</span> = <span style="color: #43783f;">clean_v1_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">clean_00_corr</span> = <span style="color: #513f78;">clean_00_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">clean_02_corr</span> = <span style="color: #784437;">clean_02_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">clean_04_corr</span> = <span style="color: #7e544f;">clean_04_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">clean_06_corr</span> = <span style="color: #4f7e67;">clean_06_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">clean_08_corr</span> = <span style="color: #783f5a;">clean_08_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">clean_v1_fit</span> = <span style="color: #43783f;">clean_v1_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">clean_00_fit</span> = <span style="color: #513f78;">clean_00_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">clean_02_fit</span> = <span style="color: #784437;">clean_02_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">clean_04_fit</span> = <span style="color: #7e544f;">clean_04_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">clean_06_fit</span> = <span style="color: #4f7e67;">clean_06_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">clean_08_fit</span> = <span style="color: #783f5a;">clean_08_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">dirty_v1_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783f5a;">dirty_v1_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 347'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_00_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #513f78;">dirty_00_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 347'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_02_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #784437;">dirty_02_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 47'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_04_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783f5a;">dirty_04_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 47'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_06_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #37785e;">dirty_06_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 47'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_08_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #374478;">dirty_08_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'Unnamed: 47'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_v1_tau</span> = <span style="color: #78683f;">dirty_v1_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_00_tau</span> = <span style="color: #513f78;">dirty_00_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_02_tau</span> = <span style="color: #78683f;">dirty_02_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_04_tau</span> = <span style="color: #3f7178;">dirty_04_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_06_tau</span> = <span style="color: #7e544f;">dirty_06_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_08_tau</span> = <span style="color: #784437;">dirty_08_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_v1_corr</span> = <span style="color: #78683f;">dirty_v1_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">dirty_00_corr</span> = <span style="color: #513f78;">dirty_00_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">dirty_02_corr</span> = <span style="color: #78683f;">dirty_02_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">dirty_04_corr</span> = <span style="color: #3f7178;">dirty_04_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">dirty_06_corr</span> = <span style="color: #7e544f;">dirty_06_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">dirty_08_corr</span> = <span style="color: #784437;">dirty_08_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1::2]
<span style="color: #268bd2;">dirty_v1_fit</span> = <span style="color: #78683f;">dirty_v1_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">dirty_00_fit</span> = <span style="color: #513f78;">dirty_00_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">dirty_02_fit</span> = <span style="color: #78683f;">dirty_02_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">dirty_04_fit</span> = <span style="color: #3f7178;">dirty_04_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">dirty_06_fit</span> = <span style="color: #7e544f;">dirty_06_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]
<span style="color: #268bd2;">dirty_08_fit</span> = <span style="color: #784437;">dirty_08_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2::2]

</pre>
</div>
</details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">taudiff</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>(<span style="color: #784437;">data</span>=[<span style="color: #3f7178;">clean_v1_taudiff</span>, <span style="color: #513f78;">clean_00_taudiff</span>, <span style="color: #3f7178;">clean_02_taudiff</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #783778;">clean_04_taudiff</span>, <span style="color: #783778;">clean_06_taudiff</span>, <span style="color: #707e4f;">clean_08_taudiff</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #4f7e67;">dirty_v1_taudiff</span>, <span style="color: #707e4f;">dirty_00_taudiff</span>, <span style="color: #3f7178;">dirty_02_taudiff</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #43783f;">dirty_04_taudiff</span>, <span style="color: #374478;">dirty_06_taudiff</span>, <span style="color: #78683f;">dirty_08_taudiff</span>],
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #43783f;">index</span>=[<span style="color: #2aa198;">'clean|no c.'</span>, <span style="color: #2aa198;">'clean|weight=0'</span>, <span style="color: #2aa198;">'clean|weight=0.2'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #2aa198;">'clean|weight=0.4'</span>, <span style="color: #2aa198;">'clean|weight=0.6'</span>, <span style="color: #2aa198;">'clean|weight=0.8'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #2aa198;">'dirty|no c.'</span>, <span style="color: #2aa198;">'dirty|weight=0'</span>, <span style="color: #2aa198;">'dirty|weight=0.2'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #2aa198;">'dirty|weight=0.4'</span>, <span style="color: #2aa198;">'dirty|weight=0.6'</span>, <span style="color: #2aa198;">'dirty|weight=0.8'</span>]).<span style="color: #37785e;">T</span>
<span style="color: #268bd2;">fig</span>, <span style="color: #268bd2;">ax</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #7e544f;">subplots</span>(<span style="color: #784437;">figsize</span>=(12,5))
<span style="color: #93a1a1;">#</span><span style="color: #93a1a1;">ax.set_yscale('log')</span>
<span style="color: #268bd2;">fig</span> = <span style="color: #4f5c7e;">sns</span>.<span style="color: #707e4f;">boxplot</span>(<span style="color: #784437;">data</span>=<span style="color: #3f7178;">taudiff</span>, <span style="color: #43783f;">showfliers</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="color: #268bd2;">ylims</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #783778;">get_ylim</span>()
<span style="color: #4f7e67;">fig</span>.<span style="color: #783778;">set</span>(<span style="color: #43783f;">ylim</span>=<span style="color: #3f7178;">ylims</span>)
<span style="color: #268bd2;">fig</span> = <span style="color: #4f5c7e;">sns</span>.<span style="color: #78683f;">stripplot</span>(<span style="color: #784437;">data</span>=<span style="color: #3f7178;">taudiff</span>, <span style="color: #783778;">jitter</span>=<span style="color: #859900; font-weight: bold;">True</span>, <span style="color: #78683f;">color</span>=<span style="color: #2aa198;">'.3'</span>)
<span style="color: #4f7e67;">plt</span>.<span style="color: #783778;">xticks</span>(<span style="color: #374478;">rotation</span>=45)
<span style="color: #4f7e67;">plt</span>.<span style="color: #513f78;">tight_layout</span>()
<span style="color: #4f7e67;">plt</span>.<span style="color: #374478;">show</span>()
</pre>
</div>
</li>

<li>Now on the first glance with a linear y-scale the correction by weights
seemed to work with <code>w=0.4</code>, but we have to look at the log plot and see
that this correction is not yet sufficient:
<ul class="org-ul">
<li><img src="./jupyter/analysis2-allclean-alldirty.png" class="img-responsive" alt="analysis2-allclean-alldirty.png">
</li>
<li><img src="./jupyter/analysis2-allclean-alldirty-log.png" class="img-responsive" alt="analysis2-allclean-alldirty-log.png">
</li>
</ul>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">taudiff</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>(<span style="color: #784437;">data</span>=[<span style="color: #3f7178;">clean_v1_taudiff</span>, <span style="color: #513f78;">clean_00_taudiff</span>, <span style="color: #3f7178;">clean_02_taudiff</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #783778;">clean_04_taudiff</span>, <span style="color: #783778;">clean_06_taudiff</span>, <span style="color: #707e4f;">clean_08_taudiff</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #43783f;">dirty_04_taudiff</span>, <span style="color: #4f7e67;">dirty_v1_taudiff</span>],
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #43783f;">index</span>=[<span style="color: #2aa198;">'clean|no c.'</span>, <span style="color: #2aa198;">'clean|weight=0'</span>, <span style="color: #2aa198;">'clean|weight=0.2'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #2aa198;">'clean|weight=0.4'</span>, <span style="color: #2aa198;">'clean|weight=0.6'</span>, <span style="color: #2aa198;">'clean|weight=0.8'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #2aa198;">'dirty|weight=0.4'</span>, <span style="color: #2aa198;">'dirty|no c.'</span>]).<span style="color: #37785e;">T</span>
<span style="color: #268bd2;">fig</span>, <span style="color: #268bd2;">ax</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #7e544f;">subplots</span>(<span style="color: #784437;">figsize</span>=(9,6))
<span style="color: #7e544f;">ax</span>.<span style="color: #3f7178;">set_yscale</span>(<span style="color: #2aa198;">'log'</span>)
<span style="color: #268bd2;">fig</span> = <span style="color: #4f5c7e;">sns</span>.<span style="color: #707e4f;">boxplot</span>(<span style="color: #784437;">data</span>=<span style="color: #3f7178;">taudiff</span>, <span style="color: #43783f;">showfliers</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="color: #268bd2;">ylims</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #783778;">get_ylim</span>()
<span style="color: #4f7e67;">fig</span>.<span style="color: #783778;">set</span>(<span style="color: #43783f;">ylim</span>=<span style="color: #3f7178;">ylims</span>)
<span style="color: #268bd2;">fig</span> = <span style="color: #4f5c7e;">sns</span>.<span style="color: #78683f;">stripplot</span>(<span style="color: #784437;">data</span>=<span style="color: #3f7178;">taudiff</span>, <span style="color: #783778;">jitter</span>=<span style="color: #859900; font-weight: bold;">True</span>, <span style="color: #78683f;">color</span>=<span style="color: #2aa198;">'.3'</span>)
<span style="color: #4f7e67;">plt</span>.<span style="color: #783778;">xticks</span>(<span style="color: #374478;">rotation</span>=45)
<span style="color: #4f7e67;">plt</span>.<span style="color: #513f78;">tight_layout</span>()
<span style="color: #4f7e67;">plt</span>.<span style="color: #374478;">show</span>()
</pre>
</div>
</li>

<li>While we are at it let's look at some subsamples of the data:
</li>
<li>Here are only the clean plots:
<ul class="org-ul">
<li><img src="./jupyter/analysis2-clean-log.png" class="img-responsive" alt="analysis2-clean-log.png">
</li>
</ul>
</li>
<li>Here are the clean controls and the dirty data with the best correction so
far (<code>w=0.4</code>) and the dirty data without correction
<ul class="org-ul">
<li><img src="./jupyter/analysis2-clean+dirty04+dirtync-log.png" class="img-responsive" alt="analysis2-clean+dirty04+dirtync-log.png">
</li>
</ul>
</li>

<li>What are learnings so far?
<ul class="org-ul">
<li>I need to optimize the correlation speed, e.g. by implementing the Cython
version of the tttr2xfcs correlation
</li>
<li>we have to investigate why the correction by weights doesn't work
</li>
</ul>
</li>

<li>Dominic actually had a look at the data and also looked at 2 component
fitting:
<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">
</colgroup>
<thead>
<tr>
<th scope="col" class="text-right">&#xa0;</th>
<th scope="col" class="text-right">Fast fraction</th>
<th scope="col" class="text-right">&#xa0;</th>
<th scope="col" class="text-right">Slow fraction</th>
<th scope="col" class="text-right">&#xa0;</th>
</tr>

<tr>
<th scope="col" class="text-right">Weights</th>
<th scope="col" class="text-right">txy1 (ms)</th>
<th scope="col" class="text-right">A1</th>
<th scope="col" class="text-right">txy2 (ms)</th>
<th scope="col" class="text-right">A2</th>
</tr>
</thead>
<tbody>
<tr>
<td class="text-right">0.0</td>
<td class="text-right">0.2611</td>
<td class="text-right">0.6973</td>
<td class="text-right">25.4920</td>
<td class="text-right">0.8459</td>
</tr>

<tr>
<td class="text-right">0.2000</td>
<td class="text-right">0.2222</td>
<td class="text-right">0.8455</td>
<td class="text-right">19.3756</td>
<td class="text-right">0.5863</td>
</tr>

<tr>
<td class="text-right">0.4000</td>
<td class="text-right">0.0446</td>
<td class="text-right">0.6774</td>
<td class="text-right">3.5694</td>
<td class="text-right">0.8409</td>
</tr>

<tr>
<td class="text-right">0.6000</td>
<td class="text-right">0.0492</td>
<td class="text-right">0.5210</td>
<td class="text-right">5.7868</td>
<td class="text-right">0.9703</td>
</tr>

<tr>
<td class="text-right">0.8000</td>
<td class="text-right">0.0504</td>
<td class="text-right">0.3787</td>
<td class="text-right">9.1164</td>
<td class="text-right">0.9561</td>
</tr>

<tr>
<td class="text-right">&#xa0;</td>
<td class="text-right">&#xa0;</td>
<td class="text-right">&#xa0;</td>
<td class="text-right">&#xa0;</td>
<td class="text-right">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="text-right">DIRTY</td>
<td class="text-right">0.0717</td>
<td class="text-right">0.2569</td>
<td class="text-right">12.0547</td>
<td class="text-right">0.9740</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="text-right">CLEAN</td>
<td class="text-right">0.0368</td>
<td class="text-right">0.9924</td>
<td class="text-right">283.0306</td>
<td class="text-right">0.0368</td>
</tr>
</tbody>
</table>
</li>

<li>he used a 2 component model, varied A1 and A2, but kept alpha1-2 fixed at
1.0.
</li>
<li>the data suggest that reducing the weight, it gets better till 0.4,
whereafter some funny things happen with the data.
<ul class="org-ul">
<li>we should analyze with random weights to see if there is an artefact with
setting the weight specifically to 0 or 0.2.
</li>
</ul>
</li>
<li>also it is surprising to see that 2 component fitting works so well.
</li>
<li>it is interesting to see that A1 gets larger for txy1 for smaller weights,
showing this component is becoming enriched which is good (until 0.0 which
is strange) and conversely for A2
</li>
<li><b>FROM HINDSIGHT: Dominic used a 2D fit here - but we have a 3D situation
here and this table is so far not reproducible in 3D with equation 1B</b>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-1-8" class="outline-4">
<h4 id="sec-2-1-8"><span class="section-number-4">2.1.8</span> Experiment 2a: Update packages and Correlate <code>all_clean_ptu</code> on Jupyter 1</h4>
<div class="outline-text-4" id="text-2-1-8">
<ol class="org-ol">
<li>Make sure we are in the correct directory, also do a git log -3 to
document latest git commits
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #707e4f;">cd</span> /<span style="color: #5e7837;">beegfs</span>/<span style="color: #7a4f7e;">ye53nis</span>/<span style="color: #784437;">drmed</span>-<span style="color: #784437;">git</span>

!<span style="color: #784437;">git</span> <span style="color: #78683f;">log</span> -3
</pre>
</div>

<pre class="example">
/beegfs/ye53nis/drmed-git
commit dffd95906e760976dfdfd635b50cf056c8813ca3
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Wed Feb 9 23:24:34 2022 +0100

    Fix memory leak by deleting variables 2

commit 298240ae97e683133071500ff83e0dbd2434883e
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Wed Feb 9 23:20:32 2022 +0100

    Fix memory leak by deleting variables
commit b2987fdc6615e71118ce28f47bc5174109c72ff1
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Tue Feb 8 17:24:12 2022 +0100

    Fix get_autocorrelation tttr2xfcs_with_weights
</pre>
</li>

<li>Create directory where we want to save our correlations in
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #7a4f7e;">mkdir</span> /<span style="color: #5e7837;">beegfs</span>/<span style="color: #7a4f7e;">ye53nis</span>/<span style="color: #78683f;">saves</span>/2022-02-<span style="color: #374478;">08_correlate</span>-<span style="color: #657b83; font-weight: bold;">all</span>-<span style="color: #3f7178;">clean</span>-<span style="color: #78683f;">ptu</span>/
</pre>
</div>
</li>

<li>Install dividAndConquer as a Cython implementation to make tttr2xfcs a lot
faster. First, update all packages, because of a deprecated NumPy API
<div class="org-src-container">

<pre class="src src-tmux"><span style="color: #657b83; font-weight: bold;">cd</span> <span style="color: #7a4f7e;">/beegfs/ye53nis/drmed-git/</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">executed interactively:</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">conda env remove -n tf</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">conda activate tf</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">pip install numpy mlflow lmfit scikit-learn tensorflow matplotlib pandas</span>
<span style="color: #93a1a1;">#     </span><span style="color: #93a1a1;">seaborn f csfiles multipletau cython</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">pip install cython --no-binary cython</span>
</pre>
</div>

<details>
<pre class="example">
(base) [ye53nis@login01 drmed-git]$ conda env remove -n tf

Remove all packages in environment /home/ye53nis/.conda/envs/tf:

(base) [ye53nis@login01 drmed-git]$ conda create -n tf jupyterlab pip
Collecting package metadata (current_repodata.json): done
Solving environment: done


==&gt; WARNING: A newer version of conda exists. &lt;==
  current version: 4.10.0
  latest version: 4.11.0

Please update conda by running

    $ conda update -n base -c defaults conda



## Package Plan ##

  environment location: /home/ye53nis/.conda/envs/tf

  added / updated specs:
    - jupyterlab
    - pip


The following packages will be downloaded:

    package                    |            build
    ---------------------------|-----------------
    attrs-21.4.0               |     pyhd3eb1b0_0          51 KB
    bleach-4.1.0               |     pyhd3eb1b0_0         123 KB
    ca-certificates-2021.10.26 |       h06a4308_2         115 KB
    certifi-2021.10.8          |   py39h06a4308_2         151 KB
    cffi-1.15.0                |   py39hd667e15_1         225 KB
    charset-normalizer-2.0.4   |     pyhd3eb1b0_0          35 KB
    cryptography-36.0.0        |   py39h9ce1e76_0         1.3 MB
    debugpy-1.5.1              |   py39h295c915_0         1.7 MB
    decorator-5.1.1            |     pyhd3eb1b0_0          12 KB
    idna-3.3                   |     pyhd3eb1b0_0          49 KB
    importlib-metadata-4.8.2   |   py39h06a4308_0          39 KB
    importlib_metadata-4.8.2   |       hd3eb1b0_0          12 KB
    ipykernel-6.4.1            |   py39h06a4308_1         194 KB
    ipython-7.31.1             |   py39h06a4308_0        1006 KB
    jedi-0.18.1                |   py39h06a4308_1         982 KB
    jinja2-3.0.2               |     pyhd3eb1b0_0         110 KB
    jsonschema-3.2.0           |     pyhd3eb1b0_2          47 KB
    jupyter_client-7.1.2       |     pyhd3eb1b0_0          93 KB
    jupyter_core-4.9.1         |   py39h06a4308_0          75 KB
    jupyterlab-3.2.1           |     pyhd3eb1b0_1         3.6 MB
    jupyterlab_server-2.10.2   |     pyhd3eb1b0_1          48 KB
    matplotlib-inline-0.1.2    |     pyhd3eb1b0_2          12 KB
    nbconvert-6.3.0            |   py39h06a4308_0         488 KB
    ncurses-6.3                |       h7f8727e_2         782 KB
    notebook-6.4.6             |   py39h06a4308_0         4.2 MB
    openssl-1.1.1m             |       h7f8727e_0         2.5 MB
    packaging-21.3             |     pyhd3eb1b0_0          36 KB
    pandocfilters-1.5.0        |     pyhd3eb1b0_0          11 KB
    parso-0.8.3                |     pyhd3eb1b0_0          70 KB
    pip-21.2.4                 |   py39h06a4308_0         1.8 MB
    prometheus_client-0.13.1   |     pyhd3eb1b0_0          47 KB
    prompt-toolkit-3.0.20      |     pyhd3eb1b0_0         259 KB
    pycparser-2.21             |     pyhd3eb1b0_0          94 KB
    pygments-2.11.2            |     pyhd3eb1b0_0         759 KB
    pyopenssl-22.0.0           |     pyhd3eb1b0_0          50 KB
    pyparsing-3.0.4            |     pyhd3eb1b0_0          81 KB
    pyrsistent-0.18.0          |   py39heee7806_0          94 KB
    python-3.9.7               |       h12debd9_1        18.6 MB
    pytz-2021.3                |     pyhd3eb1b0_0         171 KB
    pyzmq-22.3.0               |   py39h295c915_2         470 KB
    readline-8.1.2             |       h7f8727e_1         354 KB
    requests-2.27.1            |     pyhd3eb1b0_0          54 KB
    send2trash-1.8.0           |     pyhd3eb1b0_1          19 KB
    setuptools-58.0.4          |   py39h06a4308_0         790 KB
    sqlite-3.37.2              |       hc218d9a_0        1008 KB
    tk-8.6.11                  |       h1ccaba5_0         3.0 MB
    traitlets-5.1.1            |     pyhd3eb1b0_0          84 KB
    tzdata-2021e               |       hda174b7_0         112 KB
    urllib3-1.26.8             |     pyhd3eb1b0_0         106 KB
    wcwidth-0.2.5              |     pyhd3eb1b0_0          26 KB
    wheel-0.37.1               |     pyhd3eb1b0_0          33 KB
    zipp-3.7.0                 |     pyhd3eb1b0_0          12 KB
    zlib-1.2.11                |       h7f8727e_4         108 KB
    ------------------------------------------------------------
                                           Total:        46.0 MB

The following NEW packages will be INSTALLED:

  _libgcc_mutex      pkgs/main/linux-64::_libgcc_mutex-0.1-main
  _openmp_mutex      pkgs/main/linux-64::_openmp_mutex-4.5-1_gnu
  anyio              pkgs/main/linux-64::anyio-2.2.0-py39h06a4308_1
  argon2-cffi        pkgs/main/linux-64::argon2-cffi-20.1.0-py39h27cfd23_1
  async_generator    pkgs/main/noarch::async_generator-1.10-pyhd3eb1b0_0
  attrs              pkgs/main/noarch::attrs-21.4.0-pyhd3eb1b0_0
  babel              pkgs/main/noarch::babel-2.9.1-pyhd3eb1b0_0
  backcall           pkgs/main/noarch::backcall-0.2.0-pyhd3eb1b0_0
  bleach             pkgs/main/noarch::bleach-4.1.0-pyhd3eb1b0_0
  brotlipy           pkgs/main/linux-64::brotlipy-0.7.0-py39h27cfd23_1003
  ca-certificates    pkgs/main/linux-64::ca-certificates-2021.10.26-h06a4308_2
  certifi            pkgs/main/linux-64::certifi-2021.10.8-py39h06a4308_2
  cffi               pkgs/main/linux-64::cffi-1.15.0-py39hd667e15_1
  charset-normalizer pkgs/main/noarch::charset-normalizer-2.0.4-pyhd3eb1b0_0
  cryptography       pkgs/main/linux-64::cryptography-36.0.0-py39h9ce1e76_0
  debugpy            pkgs/main/linux-64::debugpy-1.5.1-py39h295c915_0
  decorator          pkgs/main/noarch::decorator-5.1.1-pyhd3eb1b0_0
  defusedxml         pkgs/main/noarch::defusedxml-0.7.1-pyhd3eb1b0_0
  entrypoints        pkgs/main/linux-64::entrypoints-0.3-py39h06a4308_0
  idna               pkgs/main/noarch::idna-3.3-pyhd3eb1b0_0
  importlib-metadata pkgs/main/linux-64::importlib-metadata-4.8.2-py39h06a4308_0
  importlib_metadata pkgs/main/noarch::importlib_metadata-4.8.2-hd3eb1b0_0
  ipykernel          pkgs/main/linux-64::ipykernel-6.4.1-py39h06a4308_1
  ipython            pkgs/main/linux-64::ipython-7.31.1-py39h06a4308_0
  ipython_genutils   pkgs/main/noarch::ipython_genutils-0.2.0-pyhd3eb1b0_1
  jedi               pkgs/main/linux-64::jedi-0.18.1-py39h06a4308_1
  jinja2             pkgs/main/noarch::jinja2-3.0.2-pyhd3eb1b0_0
  json5              pkgs/main/noarch::json5-0.9.6-pyhd3eb1b0_0
  jsonschema         pkgs/main/noarch::jsonschema-3.2.0-pyhd3eb1b0_2
  jupyter_client     pkgs/main/noarch::jupyter_client-7.1.2-pyhd3eb1b0_0
  jupyter_core       pkgs/main/linux-64::jupyter_core-4.9.1-py39h06a4308_0
  jupyter_server     pkgs/main/linux-64::jupyter_server-1.4.1-py39h06a4308_0
  jupyterlab         pkgs/main/noarch::jupyterlab-3.2.1-pyhd3eb1b0_1
  jupyterlab_pygmen~ pkgs/main/noarch::jupyterlab_pygments-0.1.2-py_0
  jupyterlab_server  pkgs/main/noarch::jupyterlab_server-2.10.2-pyhd3eb1b0_1
  ld_impl_linux-64   pkgs/main/linux-64::ld_impl_linux-64-2.35.1-h7274673_9
  libffi             pkgs/main/linux-64::libffi-3.3-he6710b0_2
  libgcc-ng          pkgs/main/linux-64::libgcc-ng-9.3.0-h5101ec6_17
  libgomp            pkgs/main/linux-64::libgomp-9.3.0-h5101ec6_17
  libsodium          pkgs/main/linux-64::libsodium-1.0.18-h7b6447c_0
  libstdcxx-ng       pkgs/main/linux-64::libstdcxx-ng-9.3.0-hd4cf53a_17
  markupsafe         pkgs/main/linux-64::markupsafe-2.0.1-py39h27cfd23_0
  matplotlib-inline  pkgs/main/noarch::matplotlib-inline-0.1.2-pyhd3eb1b0_2
  mistune            pkgs/main/linux-64::mistune-0.8.4-py39h27cfd23_1000
  nbclassic          pkgs/main/noarch::nbclassic-0.2.6-pyhd3eb1b0_0
  nbclient           pkgs/main/noarch::nbclient-0.5.3-pyhd3eb1b0_0
  nbconvert          pkgs/main/linux-64::nbconvert-6.3.0-py39h06a4308_0
  nbformat           pkgs/main/noarch::nbformat-5.1.3-pyhd3eb1b0_0
  ncurses            pkgs/main/linux-64::ncurses-6.3-h7f8727e_2
  nest-asyncio       pkgs/main/noarch::nest-asyncio-1.5.1-pyhd3eb1b0_0
  notebook           pkgs/main/linux-64::notebook-6.4.6-py39h06a4308_0
  openssl            pkgs/main/linux-64::openssl-1.1.1m-h7f8727e_0
  packaging          pkgs/main/noarch::packaging-21.3-pyhd3eb1b0_0
  pandocfilters      pkgs/main/noarch::pandocfilters-1.5.0-pyhd3eb1b0_0
  parso              pkgs/main/noarch::parso-0.8.3-pyhd3eb1b0_0
  pexpect            pkgs/main/noarch::pexpect-4.8.0-pyhd3eb1b0_3
  pickleshare        pkgs/main/noarch::pickleshare-0.7.5-pyhd3eb1b0_1003
  pip                pkgs/main/linux-64::pip-21.2.4-py39h06a4308_0
  prometheus_client  pkgs/main/noarch::prometheus_client-0.13.1-pyhd3eb1b0_0
  prompt-toolkit     pkgs/main/noarch::prompt-toolkit-3.0.20-pyhd3eb1b0_0
  ptyprocess         pkgs/main/noarch::ptyprocess-0.7.0-pyhd3eb1b0_2
  pycparser          pkgs/main/noarch::pycparser-2.21-pyhd3eb1b0_0
  pygments           pkgs/main/noarch::pygments-2.11.2-pyhd3eb1b0_0
  pyopenssl          pkgs/main/noarch::pyopenssl-22.0.0-pyhd3eb1b0_0
  pyparsing          pkgs/main/noarch::pyparsing-3.0.4-pyhd3eb1b0_0
  pyrsistent         pkgs/main/linux-64::pyrsistent-0.18.0-py39heee7806_0
  pysocks            pkgs/main/linux-64::pysocks-1.7.1-py39h06a4308_0
  python             pkgs/main/linux-64::python-3.9.7-h12debd9_1
  python-dateutil    pkgs/main/noarch::python-dateutil-2.8.2-pyhd3eb1b0_0
  pytz               pkgs/main/noarch::pytz-2021.3-pyhd3eb1b0_0
  pyzmq              pkgs/main/linux-64::pyzmq-22.3.0-py39h295c915_2
  readline           pkgs/main/linux-64::readline-8.1.2-h7f8727e_1
  requests           pkgs/main/noarch::requests-2.27.1-pyhd3eb1b0_0
  send2trash         pkgs/main/noarch::send2trash-1.8.0-pyhd3eb1b0_1
  setuptools         pkgs/main/linux-64::setuptools-58.0.4-py39h06a4308_0
  six                pkgs/main/noarch::six-1.16.0-pyhd3eb1b0_0
  sniffio            pkgs/main/linux-64::sniffio-1.2.0-py39h06a4308_1
  sqlite             pkgs/main/linux-64::sqlite-3.37.2-hc218d9a_0
  terminado          pkgs/main/linux-64::terminado-0.9.4-py39h06a4308_0
  testpath           pkgs/main/noarch::testpath-0.5.0-pyhd3eb1b0_0
  tk                 pkgs/main/linux-64::tk-8.6.11-h1ccaba5_0
  tornado            pkgs/main/linux-64::tornado-6.1-py39h27cfd23_0
  traitlets          pkgs/main/noarch::traitlets-5.1.1-pyhd3eb1b0_0
  tzdata             pkgs/main/noarch::tzdata-2021e-hda174b7_0
  urllib3            pkgs/main/noarch::urllib3-1.26.8-pyhd3eb1b0_0
  wcwidth            pkgs/main/noarch::wcwidth-0.2.5-pyhd3eb1b0_0
  webencodings       pkgs/main/linux-64::webencodings-0.5.1-py39h06a4308_1
  wheel              pkgs/main/noarch::wheel-0.37.1-pyhd3eb1b0_0
  xz                 pkgs/main/linux-64::xz-5.2.5-h7b6447c_0
  zeromq             pkgs/main/linux-64::zeromq-4.3.4-h2531618_0
  zipp               pkgs/main/noarch::zipp-3.7.0-pyhd3eb1b0_0
  zlib               pkgs/main/linux-64::zlib-1.2.11-h7f8727e_4


Proceed ([y]/n)? y


Downloading and Extracting Packages
send2trash-1.8.0     | 19 KB     | ######################################################################### | 100%
tk-8.6.11            | 3.0 MB    | ######################################################################### | 100%
pytz-2021.3          | 171 KB    | ######################################################################### | 100%
prompt-toolkit-3.0.2 | 259 KB    | ######################################################################### | 100%
python-3.9.7         | 18.6 MB   | ####################################################7                     |  72%
python-3.9.7         | 18.6 MB   | ######################################################################### | 100%
importlib-metadata-4 | 39 KB     | ######################################################################### | 100%
ipykernel-6.4.1      | 194 KB    | ######################################################################### | 100%
wcwidth-0.2.5        | 26 KB     | ######################################################################### | 100%
prometheus_client-0. | 47 KB     | ######################################################################### | 100%
jupyterlab-3.2.1     | 3.6 MB    | ######################################################################### | 100%
decorator-5.1.1      | 12 KB     | ######################################################################### | 100%
packaging-21.3       | 36 KB     | ######################################################################### | 100%
ca-certificates-2021 | 115 KB    | ######################################################################### | 100%
zlib-1.2.11          | 108 KB    | ######################################################################### | 100%
readline-8.1.2       | 354 KB    | ######################################################################### | 100%
wheel-0.37.1         | 33 KB     | ######################################################################### | 100%
openssl-1.1.1m       | 2.5 MB    | ######################################################################### | 100%
ipython-7.31.1       | 1006 KB   | ######################################################################### | 100%
idna-3.3             | 49 KB     | ######################################################################### | 100%
tzdata-2021e         | 112 KB    | ######################################################################### | 100%
urllib3-1.26.8       | 106 KB    | ######################################################################### | 100%
attrs-21.4.0         | 51 KB     | ######################################################################### | 100%
jupyter_client-7.1.2 | 93 KB     | ######################################################################### | 100%
jupyterlab_server-2. | 48 KB     | ######################################################################### | 100%
zipp-3.7.0           | 12 KB     | ######################################################################### | 100%
importlib_metadata-4 | 12 KB     | ######################################################################### | 100%
cffi-1.15.0          | 225 KB    | ######################################################################### | 100%
traitlets-5.1.1      | 84 KB     | ######################################################################### | 100%
pyzmq-22.3.0         | 470 KB    | ######################################################################### | 100%
parso-0.8.3          | 70 KB     | ######################################################################### | 100%
ncurses-6.3          | 782 KB    | ######################################################################### | 100%
notebook-6.4.6       | 4.2 MB    | ######################################################################### | 100%
jinja2-3.0.2         | 110 KB    | ######################################################################### | 100%
jsonschema-3.2.0     | 47 KB     | ######################################################################### | 100%
pandocfilters-1.5.0  | 11 KB     | ######################################################################### | 100%
sqlite-3.37.2        | 1008 KB   | ######################################################################### | 100%
charset-normalizer-2 | 35 KB     | ######################################################################### | 100%
pyparsing-3.0.4      | 81 KB     | ######################################################################### | 100%
pycparser-2.21       | 94 KB     | ######################################################################### | 100%
pyopenssl-22.0.0     | 50 KB     | ######################################################################### | 100%
jedi-0.18.1          | 982 KB    | ######################################################################### | 100%
pyrsistent-0.18.0    | 94 KB     | ######################################################################### | 100%
matplotlib-inline-0. | 12 KB     | ######################################################################### | 100%
pip-21.2.4           | 1.8 MB    | ######################################################################### | 100%
_libgcc_mutex-0.1    | 3 KB      | ######################################################################### | 100%
debugpy-1.5.1        | 1.7 MB    | ######################################################################### | 100%
setuptools-58.0.4    | 790 KB    | ######################################################################### | 100%
certifi-2021.10.8    | 151 KB    | ######################################################################### | 100%
requests-2.27.1      | 54 KB     | ######################################################################### | 100%
bleach-4.1.0         | 123 KB    | ######################################################################### | 100%
nbconvert-6.3.0      | 488 KB    | ######################################################################### | 100%
jupyter_core-4.9.1   | 75 KB     | ######################################################################### | 100%
pygments-2.11.2      | 759 KB    | ######################################################################### | 100%
cryptography-36.0.0  | 1.3 MB    | ######################################################################### | 100%
Preparing transaction: done
Verifying transaction: done
Executing transaction: done
#
# To activate this environment, use
#
#     $ conda activate tf
#
# To deactivate an active environment, use
#
#     $ conda deactivate

(base) [ye53nis@login01 drmed-git]$ conda activate tf
(tf) [ye53nis@login01 drmed-git]$ pip install numpy mlflow lmfit scikit-learn tensorflow matplotlib pandas seaborn f
csfiles multipletau
Collecting numpy
  Downloading numpy-1.22.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (16.8 MB)
     |████████████████████████████████| 16.8 MB 6.6 MB/s
Collecting mlflow
  Downloading mlflow-1.23.1-py3-none-any.whl (15.6 MB)
     |████████████████████████████████| 15.6 MB 36.5 MB/s
Collecting lmfit
  Downloading lmfit-1.0.3.tar.gz (292 kB)
     |████████████████████████████████| 292 kB 15.8 MB/s
Collecting scikit-learn
  Downloading scikit_learn-1.0.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (26.4 MB)
     |████████████████████████████████| 26.4 MB 35.6 MB/s
Collecting tensorflow
  Downloading tensorflow-2.8.0-cp39-cp39-manylinux2010_x86_64.whl (497.6 MB)
     |████████████████████████████████| 497.6 MB 15 kB/s
Collecting matplotlib
  Downloading matplotlib-3.5.1-cp39-cp39-manylinux_2_5_x86_64.manylinux1_x86_64.whl (11.2 MB)
     |████████████████████████████████| 11.2 MB 34.3 MB/s
Collecting pandas
  Downloading pandas-1.4.0-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (11.7 MB)
     |████████████████████████████████| 11.7 MB 35.3 MB/s
Collecting seaborn
  Downloading seaborn-0.11.2-py3-none-any.whl (292 kB)
     |████████████████████████████████| 292 kB 36.2 MB/s
Collecting fcsfiles
  Downloading fcsfiles-2022.2.2-py3-none-any.whl (9.6 kB)
Collecting multipletau
  Using cached multipletau-0.3.3-py2.py3-none-any.whl (12 kB)
Collecting sqlparse&gt;=0.3.1
  Downloading sqlparse-0.4.2-py3-none-any.whl (42 kB)
     |████████████████████████████████| 42 kB 1.3 MB/s
Collecting querystring-parser
  Using cached querystring_parser-1.2.4-py2.py3-none-any.whl (7.9 kB)
Collecting alembic
  Downloading alembic-1.7.6-py3-none-any.whl (210 kB)
     |████████████████████████████████| 210 kB 41.2 MB/s
Collecting databricks-cli&gt;=0.8.7
  Downloading databricks-cli-0.16.4.tar.gz (58 kB)
     |████████████████████████████████| 58 kB 7.0 MB/s
Requirement already satisfied: importlib-metadata!=4.7.0,&gt;=3.7.0 in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-
packages (from mlflow) (4.8.2)
Requirement already satisfied: pytz in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (from mlflow) (2021.
3)
Collecting sqlalchemy
  Downloading SQLAlchemy-1.4.31-cp39-cp39-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014
_x86_64.whl (1.6 MB)
     |████████████████████████████████| 1.6 MB 33.9 MB/s
Requirement already satisfied: entrypoints in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (from mlflow)
 (0.3)
Requirement already satisfied: requests&gt;=2.17.3 in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (from ml
flow) (2.27.1)
Collecting Flask
  Downloading Flask-2.0.2-py3-none-any.whl (95 kB)
     |████████████████████████████████| 95 kB 4.8 MB/s
Collecting gitpython&gt;=2.1.0
  Downloading GitPython-3.1.26-py3-none-any.whl (180 kB)
     |████████████████████████████████| 180 kB 43.3 MB/s
Collecting click&gt;=7.0
  Downloading click-8.0.3-py3-none-any.whl (97 kB)
     |████████████████████████████████| 97 kB 7.1 MB/s
Collecting protobuf&gt;=3.7.0
  Downloading protobuf-3.19.4-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.1 MB)
     |████████████████████████████████| 1.1 MB 35.5 MB/s
Collecting docker&gt;=4.0.0
  Downloading docker-5.0.3-py2.py3-none-any.whl (146 kB)
     |████████████████████████████████| 146 kB 43.2 MB/s
Collecting pyyaml&gt;=5.1
  Downloading PyYAML-6.0-cp39-cp39-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64
.whl (661 kB)
     |████████████████████████████████| 661 kB 36.9 MB/s
Collecting scipy
  Downloading scipy-1.8.0-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (42.1 MB)
     |████████████████████████████████| 42.1 MB 33.3 MB/s
Collecting cloudpickle
  Downloading cloudpickle-2.0.0-py3-none-any.whl (25 kB)
Requirement already satisfied: packaging in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (from mlflow) (
21.3)
Collecting gunicorn
  Using cached gunicorn-20.1.0-py3-none-any.whl (79 kB)
Collecting prometheus-flask-exporter
  Downloading prometheus_flask_exporter-0.18.7-py3-none-any.whl (17 kB)
Collecting asteval&gt;=0.9.22
  Downloading asteval-0.9.26.tar.gz (40 kB)
     |████████████████████████████████| 40 kB 4.2 MB/s
Collecting uncertainties&gt;=3.0.1
  Using cached uncertainties-3.1.6-py2.py3-none-any.whl (98 kB)
Collecting joblib&gt;=0.11
  Downloading joblib-1.1.0-py2.py3-none-any.whl (306 kB)
     |████████████████████████████████| 306 kB 37.4 MB/s
Collecting threadpoolctl&gt;=2.0.0
  Downloading threadpoolctl-3.1.0-py3-none-any.whl (14 kB)
Requirement already satisfied: setuptools in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (from tensorfl
ow) (58.0.4)
Collecting keras-preprocessing&gt;=1.1.1
  Using cached Keras_Preprocessing-1.1.2-py2.py3-none-any.whl (42 kB)
Collecting google-pasta&gt;=0.1.1
  Using cached google_pasta-0.2.0-py3-none-any.whl (57 kB)
Collecting termcolor&gt;=1.1.0
  Using cached termcolor-1.1.0-py3-none-any.whl
Collecting tensorflow-io-gcs-filesystem&gt;=0.23.1
  Downloading tensorflow_io_gcs_filesystem-0.24.0-cp39-cp39-manylinux_2_12_x86_64.manylinux2010_x86_64.whl (2.1 MB)
     |████████████████████████████████| 2.1 MB 35.6 MB/s
Collecting gast&gt;=0.2.1
  Downloading gast-0.5.3-py3-none-any.whl (19 kB)
Collecting wrapt&gt;=1.11.0
  Downloading wrapt-1.13.3-cp39-cp39-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_
64.whl (81 kB)
     |████████████████████████████████| 81 kB 11.3 MB/s
Collecting h5py&gt;=2.9.0
  Downloading h5py-3.6.0-cp39-cp39-manylinux_2_12_x86_64.manylinux2010_x86_64.whl (4.5 MB)
     |████████████████████████████████| 4.5 MB 41.8 MB/s
Requirement already satisfied: six&gt;=1.12.0 in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (from tensorf
low) (1.16.0)
Collecting opt-einsum&gt;=2.3.2
  Using cached opt_einsum-3.3.0-py3-none-any.whl (65 kB)
Collecting tf-estimator-nightly==2.8.0.dev2021122109
  Downloading tf_estimator_nightly-2.8.0.dev2021122109-py2.py3-none-any.whl (462 kB)
     |████████████████████████████████| 462 kB 37.0 MB/s
Collecting typing-extensions&gt;=3.6.6
  Downloading typing_extensions-4.0.1-py3-none-any.whl (22 kB)
Collecting tensorboard&lt;2.9,&gt;=2.8
  Downloading tensorboard-2.8.0-py3-none-any.whl (5.8 MB)
     |████████████████████████████████| 5.8 MB 35.0 MB/s
Collecting grpcio&lt;2.0,&gt;=1.24.3
  Downloading grpcio-1.43.0-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (4.1 MB)
     |████████████████████████████████| 4.1 MB 34.1 MB/s
Collecting astunparse&gt;=1.6.0
  Using cached astunparse-1.6.3-py2.py3-none-any.whl (12 kB)
Collecting flatbuffers&gt;=1.12
  Downloading flatbuffers-2.0-py2.py3-none-any.whl (26 kB)
Collecting libclang&gt;=9.0.1
  Downloading libclang-13.0.0-py2.py3-none-manylinux1_x86_64.whl (14.5 MB)
     |████████████████████████████████| 14.5 MB 31.0 MB/s
Collecting absl-py&gt;=0.4.0
  Downloading absl_py-1.0.0-py3-none-any.whl (126 kB)
     |████████████████████████████████| 126 kB 38.1 MB/s
Collecting keras&lt;2.9,&gt;=2.8.0rc0
  Downloading keras-2.8.0-py2.py3-none-any.whl (1.4 MB)
     |████████████████████████████████| 1.4 MB 37.0 MB/s
Collecting pillow&gt;=6.2.0
  Downloading Pillow-9.0.1-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (4.3 MB)
     |████████████████████████████████| 4.3 MB 38.4 MB/s
Requirement already satisfied: python-dateutil&gt;=2.7 in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (fro
m matplotlib) (2.8.2)
Collecting fonttools&gt;=4.22.0
  Downloading fonttools-4.29.1-py3-none-any.whl (895 kB)
     |████████████████████████████████| 895 kB 45.3 MB/s
Requirement already satisfied: pyparsing&gt;=2.2.1 in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (from ma
tplotlib) (3.0.4)
Collecting kiwisolver&gt;=1.0.1
  Downloading kiwisolver-1.3.2-cp39-cp39-manylinux_2_12_x86_64.manylinux2010_x86_64.whl (1.6 MB)
     |████████████████████████████████| 1.6 MB 33.7 MB/s
Collecting cycler&gt;=0.10
  Downloading cycler-0.11.0-py3-none-any.whl (6.4 kB)
Requirement already satisfied: wheel&lt;1.0,&gt;=0.23.0 in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (from
astunparse&gt;=1.6.0-&gt;tensorflow) (0.37.1)
Collecting tabulate&gt;=0.7.7
  Using cached tabulate-0.8.9-py3-none-any.whl (25 kB)
Collecting websocket-client&gt;=0.32.0
  Downloading websocket_client-1.2.3-py3-none-any.whl (53 kB)
     |████████████████████████████████| 53 kB 1.5 MB/s
Collecting gitdb&lt;5,&gt;=4.0.1
  Downloading gitdb-4.0.9-py3-none-any.whl (63 kB)
     |████████████████████████████████| 63 kB 1.4 MB/s
Collecting smmap&lt;6,&gt;=3.0.1
  Downloading smmap-5.0.0-py3-none-any.whl (24 kB)
Requirement already satisfied: zipp&gt;=0.5 in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (from importlib
-metadata!=4.7.0,&gt;=3.7.0-&gt;mlflow) (3.7.0)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (from reques
ts&gt;=2.17.3-&gt;mlflow) (3.3)
Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (fr
om requests&gt;=2.17.3-&gt;mlflow) (1.26.8)
Requirement already satisfied: certifi&gt;=2017.4.17 in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (from
requests&gt;=2.17.3-&gt;mlflow) (2021.10.8)
Requirement already satisfied: charset-normalizer~=2.0.0 in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages
 (from requests&gt;=2.17.3-&gt;mlflow) (2.0.4)
Collecting tensorboard-data-server&lt;0.7.0,&gt;=0.6.0
  Using cached tensorboard_data_server-0.6.1-py3-none-manylinux2010_x86_64.whl (4.9 MB)
Collecting werkzeug&gt;=0.11.15
  Downloading Werkzeug-2.0.3-py3-none-any.whl (289 kB)
     |████████████████████████████████| 289 kB 42.0 MB/s
Collecting google-auth&lt;3,&gt;=1.6.3
  Downloading google_auth-2.6.0-py2.py3-none-any.whl (156 kB)
     |████████████████████████████████| 156 kB 46.0 MB/s
Collecting tensorboard-plugin-wit&gt;=1.6.0
  Downloading tensorboard_plugin_wit-1.8.1-py3-none-any.whl (781 kB)
     |████████████████████████████████| 781 kB 34.7 MB/s
Collecting markdown&gt;=2.6.8
  Downloading Markdown-3.3.6-py3-none-any.whl (97 kB)
     |████████████████████████████████| 97 kB 6.1 MB/s
Collecting google-auth-oauthlib&lt;0.5,&gt;=0.4.1
  Downloading google_auth_oauthlib-0.4.6-py2.py3-none-any.whl (18 kB)
Collecting cachetools&lt;6.0,&gt;=2.0.0
  Downloading cachetools-5.0.0-py3-none-any.whl (9.1 kB)
Collecting rsa&lt;5,&gt;=3.1.4
  Downloading rsa-4.8-py3-none-any.whl (39 kB)
Collecting pyasn1-modules&gt;=0.2.1
  Using cached pyasn1_modules-0.2.8-py2.py3-none-any.whl (155 kB)
Collecting requests-oauthlib&gt;=0.7.0
  Downloading requests_oauthlib-1.3.1-py2.py3-none-any.whl (23 kB)
Collecting pyasn1&lt;0.5.0,&gt;=0.4.6
  Using cached pyasn1-0.4.8-py2.py3-none-any.whl (77 kB)
Collecting oauthlib&gt;=3.0.0
  Downloading oauthlib-3.2.0-py3-none-any.whl (151 kB)
     |████████████████████████████████| 151 kB 41.0 MB/s
Collecting future
  Using cached future-0.18.2-py3-none-any.whl
Collecting Mako
  Downloading Mako-1.1.6-py2.py3-none-any.whl (75 kB)
     |████████████████████████████████| 75 kB 3.8 MB/s
Collecting greenlet!=0.4.17
  Downloading greenlet-1.1.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (153 kB)
     |████████████████████████████████| 153 kB 44.8 MB/s
Requirement already satisfied: Jinja2&gt;=3.0 in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (from Flask-&gt;
mlflow) (3.0.2)
Collecting itsdangerous&gt;=2.0
  Using cached itsdangerous-2.0.1-py3-none-any.whl (18 kB)
Requirement already satisfied: MarkupSafe&gt;=2.0 in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (from Jin
ja2&gt;=3.0-&gt;Flask-&gt;mlflow) (2.0.1)
Requirement already satisfied: prometheus-client in /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages (from p
rometheus-flask-exporter-&gt;mlflow) (0.13.1)
Building wheels for collected packages: lmfit, asteval, databricks-cli
  Building wheel for lmfit (setup.py) ... done
  Created wheel for lmfit: filename=lmfit-1.0.3-py3-none-any.whl size=84402 sha256=eeec89959143b4c2a2cb11c2a3e94314e
fe83e19494f90b784e75ec988670aad
  Stored in directory: /home/ye53nis/.cache/pip/wheels/76/f4/32/c336957bfd694c7746f4df19b74e08d918ada688fe1349cca2
  Building wheel for asteval (setup.py) ... done
  Created wheel for asteval: filename=asteval-0.9.26-py3-none-any.whl size=17648 sha256=cf0f0e455c27d314babbe54d3e60
886323c9dc39f51f6e6f9024972a201ff9d1
  Stored in directory: /home/ye53nis/.cache/pip/wheels/2f/e1/8d/9c9d29d91b8e6e79c0de5d06a09b5e69b0e4e390fa9765a449
  Building wheel for databricks-cli (setup.py) ... done
  Created wheel for databricks-cli: filename=databricks_cli-0.16.4-py3-none-any.whl size=106877 sha256=71c0798975bca
4589dde21e027bf35118ae80567838d55515827123c6b3bb93a
  Stored in directory: /home/ye53nis/.cache/pip/wheels/e2/12/4a/3df4a44571c7f53c075a50e850162af541ea24b2a689d517ac
Successfully built lmfit asteval databricks-cli
Installing collected packages: pyasn1, rsa, pyasn1-modules, oauthlib, cachetools, werkzeug, smmap, requests-oauthlib
, itsdangerous, greenlet, google-auth, click, websocket-client, tensorboard-plugin-wit, tensorboard-data-server, tab
ulate, sqlalchemy, protobuf, pillow, numpy, markdown, Mako, kiwisolver, grpcio, google-auth-oauthlib, gitdb, future,
 fonttools, Flask, cycler, absl-py, wrapt, uncertainties, typing-extensions, threadpoolctl, tf-estimator-nightly, te
rmcolor, tensorflow-io-gcs-filesystem, tensorboard, sqlparse, scipy, querystring-parser, pyyaml, prometheus-flask-ex
porter, pandas, opt-einsum, matplotlib, libclang, keras-preprocessing, keras, joblib, h5py, gunicorn, google-pasta,
gitpython, gast, flatbuffers, docker, databricks-cli, cloudpickle, astunparse, asteval, alembic, tensorflow, seaborn
, scikit-learn, multipletau, mlflow, lmfit, fcsfiles
Successfully installed Flask-2.0.2 Mako-1.1.6 absl-py-1.0.0 alembic-1.7.6 asteval-0.9.26 astunparse-1.6.3 cachetools
-5.0.0 click-8.0.3 cloudpickle-2.0.0 cycler-0.11.0 databricks-cli-0.16.4 docker-5.0.3 fcsfiles-2022.2.2 flatbuffers-
2.0 fonttools-4.29.1 future-0.18.2 gast-0.5.3 gitdb-4.0.9 gitpython-3.1.26 google-auth-2.6.0 google-auth-oauthlib-0.
4.6 google-pasta-0.2.0 greenlet-1.1.2 grpcio-1.43.0 gunicorn-20.1.0 h5py-3.6.0 itsdangerous-2.0.1 joblib-1.1.0 keras
-2.8.0 keras-preprocessing-1.1.2 kiwisolver-1.3.2 libclang-13.0.0 lmfit-1.0.3 markdown-3.3.6 matplotlib-3.5.1 mlflow
-1.23.1 multipletau-0.3.3 numpy-1.22.2 oauthlib-3.2.0 opt-einsum-3.3.0 pandas-1.4.0 pillow-9.0.1 prometheus-flask-ex
porter-0.18.7 protobuf-3.19.4 pyasn1-0.4.8 pyasn1-modules-0.2.8 pyyaml-6.0 querystring-parser-1.2.4 requests-oauthli
b-1.3.1 rsa-4.8 scikit-learn-1.0.2 scipy-1.8.0 seaborn-0.11.2 smmap-5.0.0 sqlalchemy-1.4.31 sqlparse-0.4.2 tabulate-
0.8.9 tensorboard-2.8.0 tensorboard-data-server-0.6.1 tensorboard-plugin-wit-1.8.1 tensorflow-2.8.0 tensorflow-io-gc
s-filesystem-0.24.0 termcolor-1.1.0 tf-estimator-nightly-2.8.0.dev2021122109 threadpoolctl-3.1.0 typing-extensions-4
.0.1 uncertainties-3.1.6 websocket-client-1.2.3 werkzeug-2.0.3 wrapt-1.13.3
(tf) [ye53nis@login01 applications]$ pip install cython --no-binary cython
Collecting cython
  Downloading Cython-0.29.27.tar.gz (2.1 MB)
     |████████████████████████████████| 2.1 MB 6.7 MB/s
Skipping wheel build for cython, due to binaries being disabled for it.
Installing collected packages: cython
    Running setup.py install for cython ... done
Successfully installed cython-0.29.27
</pre>
</details>
</li>

<li>Now Install dividAndConquer as a Cython implementation
<div class="org-src-container">

<pre class="src src-tmux"><span style="color: #657b83; font-weight: bold;">cd</span> <span style="color: #3f7178;">/beegfs/ye53nis/drmed-git/src/fluotracify/applications</span>
<span style="color: #4f7e67;">cat</span> <span style="color: #707e4f;">_correlate_cython_setup.py</span>
<span style="color: #784437;">python</span> <span style="color: #707e4f;">_correlate_cython_setup.py</span> <span style="color: #707e4f;">build_ext</span> <span style="color: #37785e;">--inplace</span>
</pre>
</div>

<pre class="example">
(tf) [ye53nis@login01 applications]$ cd /beegfs/ye53nis/drmed-git/src/fluotracify/applications
(tf) [ye53nis@login01 applications]$ cat _correlate_cython_setup.py
import setuptools
from Cython.Build import cythonize
import numpy as np


setuptools.setup(
    ext_modules=cythonize("correlate_cython.pyx",
                          compiler_directives={'language_level': '3'}),
    include_dirs=[np.get_include()]
)
(tf) [ye53nis@login01 applications]$ python _correlate_cython_setup.py build_ext --inplace
running build_ext
copying build/lib.linux-x86_64-3.9/correlate_cython.cpython-39-x86_64-linux-gnu.so -&gt;
(tf) [ye53nis@login01 applications]$
</pre>
</li>

<li>Load all needed modules
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #7a4f7e;">logging</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #7e544f;">os</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #513f78;">sys</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #707e4f;">tracemalloc</span>

<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #43783f;">pathlib</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #78683f;">Path</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #4f7e67;">pprint</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f7e67;">pprint</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #513f78;">tensorflow</span>.<span style="color: #784437;">keras</span>.<span style="color: #43783f;">optimizers</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #783778;">Adam</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #5e7837;">mlflow</span>.<span style="color: #784437;">keras</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #783f5a;">load_model</span>

<span style="color: #268bd2;">FLUOTRACIFY_PATH</span> = <span style="color: #2aa198;">'/beegfs/ye53nis/drmed-git/src/'</span>
<span style="color: #513f78;">sys</span>.<span style="color: #513f78;">path</span>.<span style="color: #5e7837;">append</span>(<span style="color: #784437;">FLUOTRACIFY_PATH</span>)
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #783778;">fluotracify</span>.<span style="color: #4f5c7e;">applications</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #3f7178;">corr_fit_object</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #78683f;">cfo</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #783778;">fluotracify</span>.<span style="color: #3f7178;">training</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #783778;">build_model</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #374478;">bm</span>

<span style="color: #7a4f7e;">logging</span>.<span style="color: #7e544f;">basicConfig</span>(<span style="color: #43783f;">filename</span>=<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-02-08_correlate-all-clean-ptu.log'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">filemode</span>=<span style="color: #2aa198;">'w'</span>, <span style="color: #657b83; font-weight: bold;">format</span>=<span style="color: #2aa198;">'%(asctime)s - %(message)s'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">force</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">level</span>=<span style="color: #7a4f7e;">logging</span>.<span style="color: #783778;">DEBUG</span>)

</pre>
</div>

<pre class="example">
2022-02-10 01:15:43.026025: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libcudart.so.11.0'; dlerror: libcudart.so.11.0: cannot open shared object file: No such file or directory
2022-02-10 01:15:43.026059: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
</pre>
</li>

<li>Define variables and prepare model. Since the first run I changed the
folder names assigned to <code>path</code>, because I noticed that I mixed up the
experiments I wanted to analyse: the "
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">class</span> <span style="color: #b58900;">ParameterClass</span>():
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">"""Stores parameters for correlation """</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">__init__</span>(<span style="color: #859900; font-weight: bold;">self</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># Where the data is stored.</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #784437;">data</span> = []
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #7a4f7e;">objectRef</span> = []
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #78683f;">subObjectRef</span> = []
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #783778;">colors</span> = [<span style="color: #2aa198;">'blue'</span>, <span style="color: #2aa198;">'green'</span>, <span style="color: #2aa198;">'red'</span>, <span style="color: #2aa198;">'cyan'</span>, <span style="color: #2aa198;">'magenta'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #2aa198;">'yellow'</span>, <span style="color: #2aa198;">'black'</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #4f5c7e;">numOfLoaded</span> = 0
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># very fast from Ncasc ~ 14 onwards</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #3f7178;">NcascStart</span> = 0
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #4f7e67;">NcascEnd</span> = 30  <span style="color: #93a1a1;"># 25</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #3f7178;">Nsub</span> = 6  <span style="color: #93a1a1;"># 6</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #5e7837;">photonLifetimeBin</span> = 10  <span style="color: #93a1a1;"># used for photon decay</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #513f78;">photonCountBin</span> = 1  <span style="color: #93a1a1;"># used for time series</span>

<span style="color: #268bd2;">path</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">"../data/1911DD_atto+LUVs/all_clean_ptu"</span>)
<span style="color: #268bd2;">logged_model</span> = <span style="color: #2aa198;">'file:///beegfs/ye53nis/drmed-git/data/mlruns/8/00f2635d9fa2463c9a066722163405be/artifacts/model'</span>
<span style="color: #268bd2;">mt_bin</span> = 0.001
<span style="color: #268bd2;">output_path</span> = <span style="color: #2aa198;">'/beegfs/ye53nis/saves/2022-02-08_correlate-all-clean-ptu/'</span>

<span style="color: #268bd2;">par_obj</span> = <span style="color: #4f7e67;">ParameterClass</span>()

<span style="color: #268bd2;">loaded_model</span> = <span style="color: #783f5a;">load_model</span>(<span style="color: #783f5a;">logged_model</span>, <span style="color: #657b83; font-weight: bold;">compile</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="color: #374478;">loaded_model</span>.<span style="color: #374478;">compile</span>(<span style="color: #783f5a;">loss</span>=<span style="color: #374478;">bm</span>.<span style="color: #783f5a;">binary_ce_dice_loss</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #7a4f7e;">optimizer</span>=<span style="color: #783778;">Adam</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #43783f;">metrics</span> = <span style="color: #374478;">bm</span>.<span style="color: #374478;">unet_metrics</span>([0.1, 0.3, 0.5, 0.7, 0.9]))
<span style="color: #374478;">bm</span>.<span style="color: #374478;">prepare_model</span>(<span style="color: #374478;">loaded_model</span>, [2**14, 2**13, 2**12, 2**15, 2**13])

</pre>
</div>

<pre class="example">
2022-02-10 01:15:50.033533: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory
2022-02-10 01:15:50.033566: W tensorflow/stream_executor/cuda/cuda_driver.cc:269] failed call to cuInit: UNKNOWN ERROR (303)
2022-02-10 01:15:50.033596: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (node154): /proc/driver/nvidia/version does not exist
2022-02-10 01:15:50.033828: I tensorflow/core/platform/cpu_feature_guard.cc:151] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 AVX512F FMA
To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
WARNING:tensorflow:Unable to restore custom metric. Please ensure that the layer implements `get_config` and `from_config` when saving. In addition, please use the `custom_objects` arg when calling `load_model()`.
</pre>
</li>

<li>Run experiment: Correlate <code>all_clean_ptu</code> of the <b>AlexaFluor488</b>
experiment on Jupyter 1. We want the following correlations:
<ul class="org-ul">
<li>clean trace → correlation via tttr2xfcs, and multipletau (bin=0.001)
</li>
<li><code>correction=delete</code> → correlation via tttr2xfcs, and multipletau
(bin=0.001)
</li>
<li><code>correction=delete_and_shift</code> → correlation via tttr2xfcs, and multipletau
(bin=0.001)
</li>
<li><code>correction=weights-random</code> → correlation via tttr2xfcs
</li>
<li><code>correction=weights-1-pred</code> → correlation via tttr2xfcs

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">mt_bin</span> = 0.001
<span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">run_correlations</span>(<span style="color: #784437;">myfile</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ptufile</span> = <span style="color: #78683f;">cfo</span>.<span style="color: #5e7837;">PicoObject</span>(<span style="color: #784437;">myfile</span>, <span style="color: #37785e;">par_obj</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #513f78;">photonCountBin</span>=<span style="color: #37785e;">mt_bin</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #707e4f;">timeseries_name</span>=<span style="color: #43783f;">f</span><span style="color: #2aa198;">'us_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">_NOCORR'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #43783f;">f</span><span style="color: #2aa198;">'us_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">_NOCORR'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #783778;">method</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'delete'</span>, <span style="color: #2aa198;">'delete_and_shift'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">mt_name</span> = <span style="color: #43783f;">f</span><span style="color: #2aa198;">'us_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">_</span><span style="color: #268bd2;">{method}</span><span style="color: #2aa198;">'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #707e4f;">timeseries_name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">predictTimeSeries</span>(<span style="color: #43783f;">model</span>=<span style="color: #374478;">loaded_model</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #4f5c7e;">scaler</span>=<span style="color: #2aa198;">'minmax'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #374478;">name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">correctTCSPC</span>(<span style="color: #783778;">method</span>=<span style="color: #783778;">method</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #783f5a;">bin_after_correction</span>=<span style="color: #37785e;">mt_bin</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">timeseries_name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #7a4f7e;">weight</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'random'</span>, <span style="color: #2aa198;">'1-pred'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">weight_name</span> = <span style="color: #43783f;">f</span><span style="color: #2aa198;">'</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">_weights_</span><span style="color: #268bd2;">{weight}</span><span style="color: #2aa198;">'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #513f78;">photonCountBin</span>=1.0,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #707e4f;">timeseries_name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">predictTimeSeries</span>(<span style="color: #43783f;">model</span>=<span style="color: #374478;">loaded_model</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #4f5c7e;">scaler</span>=<span style="color: #2aa198;">'minmax'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #374478;">name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">correctTCSPC</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'weights'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #7a4f7e;">weight</span>=<span style="color: #7a4f7e;">weight</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">timeseries_name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">trueTimeArr</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"_FORWEIGHTS"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">key</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">else</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #374478;">k</span>, <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>[<span style="color: #3f7178;">key</span>].<span style="color: #374478;">items</span>():
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #3f7178;">key</span>.<span style="color: #783778;">endswith</span>((<span style="color: #2aa198;">'_DELBIN'</span>, <span style="color: #2aa198;">'_DELSHIFTBIN'</span>, <span style="color: #2aa198;">'_NOCORR'</span>)):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #374478;">name</span>=(<span style="color: #3f7178;">key</span>, <span style="color: #374478;">k</span>))

<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>[<span style="color: #5e7837;">m</span>].<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">save_autocorrelation</span>(<span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>, <span style="color: #783778;">method</span>=<span style="color: #5e7837;">m</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #37785e;">output_path</span>=<span style="color: #37785e;">output_path</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">del</span> <span style="color: #3f7178;">ptufile</span>

<span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">sizeof_fmt</span>(<span style="color: #78683f;">num</span>, <span style="color: #3f7178;">suffix</span>=<span style="color: #2aa198;">'B'</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">''' by Fred Cirera,  https://stackoverflow.com/a/1094933/1870254, modified'''</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #783778;">unit</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">''</span>,<span style="color: #2aa198;">'Ki'</span>,<span style="color: #2aa198;">'Mi'</span>,<span style="color: #2aa198;">'Gi'</span>,<span style="color: #2aa198;">'Ti'</span>,<span style="color: #2aa198;">'Pi'</span>,<span style="color: #2aa198;">'Ei'</span>,<span style="color: #2aa198;">'Zi'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #657b83; font-weight: bold;">abs</span>(<span style="color: #78683f;">num</span>) &lt; <span style="color: #268bd2;">1024.0</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">return</span> <span style="color: #2aa198;">"%3.1f %s%s"</span> % (<span style="color: #78683f;">num</span>, <span style="color: #783778;">unit</span>, <span style="color: #3f7178;">suffix</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">num</span> /= 1024.0
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">return</span> <span style="color: #2aa198;">"%.1f %s%s"</span> % (<span style="color: #78683f;">num</span>, <span style="color: #2aa198;">'Yi'</span>, <span style="color: #3f7178;">suffix</span>)

<span style="color: #268bd2;">files</span> = [<span style="color: #513f78;">path</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #513f78;">path</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]

<span style="color: #859900; font-weight: bold;">if</span> <span style="color: #657b83; font-weight: bold;">len</span>(<span style="color: #3f7178;">files</span>) == <span style="color: #268bd2;">0</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">raise</span> <span style="color: #657b83; font-weight: bold;">FileNotFoundError</span>(<span style="color: #2aa198;">'The path provided does not include any'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">' .ptu files.'</span>)
<span style="color: #707e4f;">tracemalloc</span>.<span style="color: #783f5a;">start</span>()
<span style="color: #268bd2;">tracemalloc_dict</span> = {}
<span style="color: #4f7e67;">tracemalloc_dict</span>[<span style="color: #2aa198;">'baseline'</span>] = <span style="color: #707e4f;">tracemalloc</span>.<span style="color: #374478;">take_snapshot</span>()
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span>, <span style="color: #784437;">myfile</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">enumerate</span>(<span style="color: #3f7178;">files</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #707e4f;">i</span> &lt; <span style="color: #268bd2;">2</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #707e4f;">i</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #707e4f;">run_correlations</span>(<span style="color: #784437;">myfile</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">tracemalloc_dict</span>[<span style="color: #43783f;">f</span><span style="color: #2aa198;">'</span><span style="color: #268bd2;">{i}</span><span style="color: #2aa198;">'</span>] = <span style="color: #707e4f;">tracemalloc</span>.<span style="color: #374478;">take_snapshot</span>()
</pre>
</div>

<pre class="example">
0
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
1
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
</pre>
</li>
</ul>
</li>

<li>According to log, the first run ended with an Error
<pre class="example">
[I 2022-01-22 21:32:42.402 ServerApp] AsyncIOLoopKernelRestarter: restarting kernel (1/5), keep random ports
</pre>
<p>
Only 229 traces were analyzed.
</p>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #4f7e67;">tracemalloc_dict</span>.<span style="color: #78683f;">keys</span>()
</pre>
</div>

<pre class="example">
dict_keys(['baseline', '0', '1'])
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">top_stats_base</span> = <span style="color: #4f7e67;">tracemalloc_dict</span>[<span style="color: #2aa198;">'baseline'</span>].<span style="color: #37785e;">statistics</span>(<span style="color: #2aa198;">"lineno"</span>)
<span style="color: #268bd2;">top_stats_0</span> = <span style="color: #4f7e67;">tracemalloc_dict</span>[<span style="color: #2aa198;">'0'</span>].<span style="color: #37785e;">statistics</span>(<span style="color: #2aa198;">"lineno"</span>)
<span style="color: #268bd2;">top_stats_1</span> = <span style="color: #4f7e67;">tracemalloc_dict</span>[<span style="color: #2aa198;">'1'</span>].<span style="color: #37785e;">statistics</span>(<span style="color: #2aa198;">"lineno"</span>)
<span style="color: #268bd2;">top_stats_comp</span> = <span style="color: #4f7e67;">tracemalloc_dict</span>[<span style="color: #2aa198;">'1'</span>].<span style="color: #784437;">compare_to</span>(<span style="color: #4f7e67;">tracemalloc_dict</span>[<span style="color: #2aa198;">'0'</span>], <span style="color: #2aa198;">"lineno"</span>)
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">"---------------------------------------------------------"</span>)
</pre>
</div>

<pre class="example">
---------------------------------------------------------
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python">[<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #7e544f;">stat</span>) <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #7e544f;">stat</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #784437;">top_stats_base</span>[:10]]
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">"---------------------------------------------------------"</span>)
[<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #7e544f;">stat</span>) <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #7e544f;">stat</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">top_stats_0</span>[:10]]
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">"---------------------------------------------------------"</span>)
[<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #7e544f;">stat</span>) <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #7e544f;">stat</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #513f78;">top_stats_comp</span>[:10]]
</pre>
</div>

<pre class="example">
/home/ye53nis/.conda/envs/tf/lib/python3.9/codeop.py:143: size=225 B, count=2, average=112 B
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/IPython/core/interactiveshell.py:3377: size=120 B, count=1, average=120 B
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/IPython/core/interactiveshell.py:3371: size=96 B, count=3, average=32 B
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/IPython/core/interactiveshell.py:3441: size=64 B, count=1, average=64 B
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/IPython/core/compilerop.py:178: size=28 B, count=1, average=28 B
---------------------------------------------------------
/beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:424: size=431 MiB, count=34, average=12.7 MiB
/beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:732: size=107 MiB, count=4, average=26.6 MiB
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/numpy/lib/function_base.py:5131: size=87.5 MiB, count=10, average=8962 KiB
/beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:662: size=53.3 MiB, count=8, average=6817 KiB
/beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:134: size=26.6 MiB, count=2, average=13.3 MiB
/beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:132: size=26.6 MiB, count=2, average=13.3 MiB
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/tensorflow/python/framework/ops.py:500: size=353 KiB, count=2037, average=177 B
/beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:550: size=257 KiB, count=9, average=28.6 KiB
/beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:556: size=257 KiB, count=12, average=21.4 KiB
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/tensorflow/python/framework/ops.py:2110: size=235 KiB, count=2072, average=116 B
---------------------------------------------------------
/beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:424: size=855 MiB (+424 MiB), count=68 (+34), average=12.6 MiB
/beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:732: size=213 MiB (+107 MiB), count=8 (+4), average=26.7 MiB
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/numpy/lib/function_base.py:5131: size=171 MiB (+83.1 MiB), count=20 (+10), average=8737 KiB
/beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:662: size=107 MiB (+53.4 MiB), count=16 (+8), average=6828 KiB
/beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:134: size=53.3 MiB (+26.7 MiB), count=4 (+2), average=13.3 MiB
/beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:132: size=53.3 MiB (+26.7 MiB), count=4 (+2), average=13.3 MiB
/beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:556: size=513 KiB (+257 KiB), count=24 (+12), average=21.4 KiB
/beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:550: size=514 KiB (+256 KiB), count=17 (+8), average=30.2 KiB
/home/ye53nis/.conda/envs/tf/lib/python3.9/tracemalloc.py:558: size=83.3 KiB (+83.2 KiB), count=1533 (+1532), average=56 B
/beegfs/ye53nis/drmed-git/src/fluotracify/imports/ptu_utils.py:324: size=105 KiB (+28.2 KiB), count=1923 (+516), average=56 B
</pre>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #784437;">linecache</span>

<span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">display_top</span>(<span style="color: #3f7178;">snapshot</span>, <span style="color: #7e544f;">key_type</span>=<span style="color: #2aa198;">'lineno'</span>, <span style="color: #707e4f;">limit</span>=10):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">snapshot</span> = <span style="color: #3f7178;">snapshot</span>.<span style="color: #513f78;">filter_traces</span>((
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #707e4f;">tracemalloc</span>.<span style="color: #3f7178;">Filter</span>(<span style="color: #859900; font-weight: bold;">False</span>, <span style="color: #2aa198;">"&lt;frozen importlib._bootstrap&gt;"</span>),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #707e4f;">tracemalloc</span>.<span style="color: #3f7178;">Filter</span>(<span style="color: #859900; font-weight: bold;">False</span>, <span style="color: #2aa198;">"&lt;unknown&gt;"</span>),
<span style="background-color: #eee8d5;"> </span>   ))
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">top_stats</span> = <span style="color: #3f7178;">snapshot</span>.<span style="color: #37785e;">statistics</span>(<span style="color: #7e544f;">key_type</span>)

<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">"Top %s lines"</span> % <span style="color: #707e4f;">limit</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">index</span>, <span style="color: #7e544f;">stat</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">enumerate</span>(<span style="color: #783f5a;">top_stats</span>[:<span style="color: #707e4f;">limit</span>], 1):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">frame</span> = <span style="color: #7e544f;">stat</span>.<span style="color: #783f5a;">traceback</span>[0]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">"#%s: %s:%s: %.1f KiB"</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> % (<span style="color: #43783f;">index</span>, <span style="color: #78683f;">frame</span>.<span style="color: #43783f;">filename</span>, <span style="color: #78683f;">frame</span>.<span style="color: #783778;">lineno</span>, <span style="color: #7e544f;">stat</span>.<span style="color: #43783f;">size</span> / 1024))
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">line</span> = <span style="color: #784437;">linecache</span>.<span style="color: #5e7837;">getline</span>(<span style="color: #78683f;">frame</span>.<span style="color: #43783f;">filename</span>, <span style="color: #78683f;">frame</span>.<span style="color: #783778;">lineno</span>).<span style="color: #3f7178;">strip</span>()
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #268bd2;">line</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'    %s'</span> % <span style="color: #783778;">line</span>)

<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">other</span> = <span style="color: #783f5a;">top_stats</span>[<span style="color: #707e4f;">limit</span>:]
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #268bd2;">other</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">size</span> = <span style="color: #657b83; font-weight: bold;">sum</span>(<span style="color: #7e544f;">stat</span>.<span style="color: #43783f;">size</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #7e544f;">stat</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #78683f;">other</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">"%s other: %.1f KiB"</span> % (<span style="color: #657b83; font-weight: bold;">len</span>(<span style="color: #78683f;">other</span>), <span style="color: #43783f;">size</span> / 1024))
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">total</span> = <span style="color: #657b83; font-weight: bold;">sum</span>(<span style="color: #7e544f;">stat</span>.<span style="color: #43783f;">size</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #7e544f;">stat</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #783f5a;">top_stats</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">"Total allocated size: %.1f KiB"</span> % (<span style="color: #7a4f7e;">total</span> / 1024))

<span style="color: #3f7178;">display_top</span>(<span style="color: #4f7e67;">tracemalloc_dict</span>[<span style="color: #2aa198;">'1'</span>])
</pre>
</div>

<pre class="example">
Top 10 lines
#1: /beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:732: 218468.5 KiB
    photon_weights = np.zeros((subChanCorrected.shape[0], 2))
#2: /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/numpy/lib/function_base.py:5131: 174748.2 KiB
    new = arr[tuple(slobj)]
#3: /beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:662: 109240.8 KiB
    trueTimeCorrected = trueTimeCorrected[channelMask]
#4: /beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:134: 54620.3 KiB
    trueTimeArr = np.array([i for i in trueTimeArrFull
#5: /beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:132: 54620.3 KiB
    subChanArr = np.array([i for i in subChanArrFull
#6: /beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:424: 2441.8 KiB
    return np.array(photons_in_bin), np.array(bins_scale)
#7: /beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:550: 513.7 KiB
    predictions = model.predict(trace, verbose=0).flatten()
#8: /beegfs/ye53nis/drmed-git/src/fluotracify/applications/corr_fit_object.py:556: 513.3 KiB
    self.timeSeries[name][f'{key}_PREPRO'] = trace.flatten().astype(
#9: /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/tensorflow/python/framework/ops.py:500: 352.8 KiB
    self._consumers = []
#10: /home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/tensorflow/python/framework/ops.py:2110: 234.7 KiB
    self._graph = g
606 other: 1929.5 KiB
Total allocated size: 617683.8 KiB
</pre>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">mt_bin</span> = 0.001
<span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">run_correlations</span>(<span style="color: #784437;">myfile</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ptufile</span> = <span style="color: #78683f;">cfo</span>.<span style="color: #5e7837;">PicoObject</span>(<span style="color: #784437;">myfile</span>, <span style="color: #37785e;">par_obj</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #513f78;">photonCountBin</span>=<span style="color: #37785e;">mt_bin</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #707e4f;">timeseries_name</span>=<span style="color: #43783f;">f</span><span style="color: #2aa198;">'us_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">_NOCORR'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #43783f;">f</span><span style="color: #2aa198;">'us_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">_NOCORR'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #783778;">method</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'delete'</span>, <span style="color: #2aa198;">'delete_and_shift'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">mt_name</span> = <span style="color: #43783f;">f</span><span style="color: #2aa198;">'us_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">_</span><span style="color: #268bd2;">{method}</span><span style="color: #2aa198;">'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #707e4f;">timeseries_name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">predictTimeSeries</span>(<span style="color: #43783f;">model</span>=<span style="color: #374478;">loaded_model</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #4f5c7e;">scaler</span>=<span style="color: #2aa198;">'minmax'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #374478;">name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">correctTCSPC</span>(<span style="color: #783778;">method</span>=<span style="color: #783778;">method</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #783f5a;">bin_after_correction</span>=<span style="color: #37785e;">mt_bin</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">timeseries_name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #7a4f7e;">weight</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'random'</span>, <span style="color: #2aa198;">'1-pred'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">weight_name</span> = <span style="color: #43783f;">f</span><span style="color: #2aa198;">'</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">_weights_</span><span style="color: #268bd2;">{weight}</span><span style="color: #2aa198;">'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #513f78;">photonCountBin</span>=1.0,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #707e4f;">timeseries_name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">predictTimeSeries</span>(<span style="color: #43783f;">model</span>=<span style="color: #374478;">loaded_model</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #4f5c7e;">scaler</span>=<span style="color: #2aa198;">'minmax'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #374478;">name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">correctTCSPC</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'weights'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #7a4f7e;">weight</span>=<span style="color: #7a4f7e;">weight</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">timeseries_name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">trueTimeArr</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"_FORWEIGHTS"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">key</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">else</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #374478;">k</span>, <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>[<span style="color: #3f7178;">key</span>].<span style="color: #374478;">items</span>():
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #3f7178;">key</span>.<span style="color: #783778;">endswith</span>((<span style="color: #2aa198;">'_DELBIN'</span>, <span style="color: #2aa198;">'_DELSHIFTBIN'</span>, <span style="color: #2aa198;">'_NOCORR'</span>)):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #374478;">name</span>=(<span style="color: #3f7178;">key</span>, <span style="color: #374478;">k</span>))

<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>[<span style="color: #5e7837;">m</span>].<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">save_autocorrelation</span>(<span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>, <span style="color: #783778;">method</span>=<span style="color: #5e7837;">m</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #37785e;">output_path</span>=<span style="color: #37785e;">output_path</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">del</span> <span style="color: #3f7178;">ptufile</span>

<span style="color: #268bd2;">files</span> = [<span style="color: #513f78;">path</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #513f78;">path</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]

<span style="color: #859900; font-weight: bold;">if</span> <span style="color: #657b83; font-weight: bold;">len</span>(<span style="color: #3f7178;">files</span>) == <span style="color: #268bd2;">0</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">raise</span> <span style="color: #657b83; font-weight: bold;">FileNotFoundError</span>(<span style="color: #2aa198;">'The path provided does not include any'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">' .ptu files.'</span>)

<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span>, <span style="color: #784437;">myfile</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">enumerate</span>(<span style="color: #3f7178;">files</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #707e4f;">run_correlations</span>(<span style="color: #784437;">myfile</span>)
</pre>
</div>

<pre class="example">
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
</pre>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-2-1-9" class="outline-4">
<h4 id="sec-2-1-9"><span class="section-number-4">2.1.9</span> Experiment 2b: Correlate <code>all_dirty_ptu</code> on Jupyter 2</h4>
<div class="outline-text-4" id="text-2-1-9">
<ol class="org-ol">
<li>Make sure we are in the correct directory, also do a git log -3 to
document latest git commits
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #707e4f;">cd</span> /<span style="color: #5e7837;">beegfs</span>/<span style="color: #7a4f7e;">ye53nis</span>/<span style="color: #784437;">drmed</span>-<span style="color: #784437;">git</span>

!<span style="color: #784437;">git</span> <span style="color: #78683f;">log</span> -3
</pre>
</div>

<pre class="example">
/beegfs/ye53nis/drmed-git
commit dffd95906e760976dfdfd635b50cf056c8813ca3
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Wed Feb 9 23:24:34 2022 +0100

    Fix memory leak by deleting variables 2

commit 298240ae97e683133071500ff83e0dbd2434883e
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Wed Feb 9 23:20:32 2022 +0100

    Fix memory leak by deleting variables

commit b2987fdc6615e71118ce28f47bc5174109c72ff1
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Tue Feb 8 17:24:12 2022 +0100

    Fix get_autocorrelation tttr2xfcs_with_weights
</pre>
</li>

<li>Create directory where we want to save our correlations in
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #7a4f7e;">mkdir</span> /<span style="color: #5e7837;">beegfs</span>/<span style="color: #7a4f7e;">ye53nis</span>/<span style="color: #78683f;">saves</span>/2022-02-<span style="color: #374478;">08_correlate</span>-<span style="color: #657b83; font-weight: bold;">all</span>-<span style="color: #374478;">dirty</span>-<span style="color: #78683f;">ptu</span>/
</pre>
</div>
</li>

<li>Installing dividAndConquer as a Cython implementation was already done in
<code>Experiment 2a</code>
</li>

<li>Load all needed modules
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #7a4f7e;">logging</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #7e544f;">os</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #513f78;">sys</span>

<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #43783f;">pathlib</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #78683f;">Path</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #4f7e67;">pprint</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f7e67;">pprint</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #513f78;">tensorflow</span>.<span style="color: #784437;">keras</span>.<span style="color: #43783f;">optimizers</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #783778;">Adam</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #5e7837;">mlflow</span>.<span style="color: #784437;">keras</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #783f5a;">load_model</span>

<span style="color: #268bd2;">FLUOTRACIFY_PATH</span> = <span style="color: #2aa198;">'/beegfs/ye53nis/drmed-git/src/'</span>
<span style="color: #513f78;">sys</span>.<span style="color: #513f78;">path</span>.<span style="color: #5e7837;">append</span>(<span style="color: #784437;">FLUOTRACIFY_PATH</span>)
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #783778;">fluotracify</span>.<span style="color: #4f5c7e;">applications</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #3f7178;">corr_fit_object</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #78683f;">cfo</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #783778;">fluotracify</span>.<span style="color: #3f7178;">training</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #783778;">build_model</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #374478;">bm</span>

<span style="color: #7a4f7e;">logging</span>.<span style="color: #7e544f;">basicConfig</span>(<span style="color: #43783f;">filename</span>=<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-02-08_correlate-all-dirty-ptu.log'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">filemode</span>=<span style="color: #2aa198;">'w'</span>, <span style="color: #657b83; font-weight: bold;">format</span>=<span style="color: #2aa198;">'%(asctime)s - %(message)s'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">force</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">level</span>=<span style="color: #7a4f7e;">logging</span>.<span style="color: #783778;">DEBUG</span>)

</pre>
</div>

<pre class="example">
2022-02-10 01:16:31.273603: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libcudart.so.11.0'; dlerror: libcudart.so.11.0: cannot open shared object file: No such file or directory
2022-02-10 01:16:31.273668: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
</pre>
</li>

<li>Define variables and prepare model
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">class</span> <span style="color: #b58900;">ParameterClass</span>():
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">"""Stores parameters for correlation """</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">__init__</span>(<span style="color: #859900; font-weight: bold;">self</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># Where the data is stored.</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #784437;">data</span> = []
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #7a4f7e;">objectRef</span> = []
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #78683f;">subObjectRef</span> = []
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #783778;">colors</span> = [<span style="color: #2aa198;">'blue'</span>, <span style="color: #2aa198;">'green'</span>, <span style="color: #2aa198;">'red'</span>, <span style="color: #2aa198;">'cyan'</span>, <span style="color: #2aa198;">'magenta'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #2aa198;">'yellow'</span>, <span style="color: #2aa198;">'black'</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #4f5c7e;">numOfLoaded</span> = 0
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># very fast from Ncasc ~ 14 onwards</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #3f7178;">NcascStart</span> = 0
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #4f7e67;">NcascEnd</span> = 30  <span style="color: #93a1a1;"># 25</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #3f7178;">Nsub</span> = 6  <span style="color: #93a1a1;"># 6</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #5e7837;">photonLifetimeBin</span> = 10  <span style="color: #93a1a1;"># used for photon decay</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #513f78;">photonCountBin</span> = 1  <span style="color: #93a1a1;"># used for time series</span>

<span style="color: #268bd2;">path</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">"../data/1911DD_atto+LUVs/all_dirty_ptu"</span>)
<span style="color: #268bd2;">logged_model</span> = <span style="color: #2aa198;">'file:///beegfs/ye53nis/drmed-git/data/mlruns/8/00f2635d9fa2463c9a066722163405be/artifacts/model'</span>
<span style="color: #268bd2;">mt_bin</span> = 0.001
<span style="color: #268bd2;">output_path</span> = <span style="color: #2aa198;">'/beegfs/ye53nis/saves/2022-02-08_correlate-all-dirty-ptu/'</span>

<span style="color: #268bd2;">par_obj</span> = <span style="color: #4f7e67;">ParameterClass</span>()

<span style="color: #268bd2;">loaded_model</span> = <span style="color: #783f5a;">load_model</span>(<span style="color: #783f5a;">logged_model</span>, <span style="color: #657b83; font-weight: bold;">compile</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="color: #374478;">loaded_model</span>.<span style="color: #374478;">compile</span>(<span style="color: #783f5a;">loss</span>=<span style="color: #374478;">bm</span>.<span style="color: #783f5a;">binary_ce_dice_loss</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #7a4f7e;">optimizer</span>=<span style="color: #783778;">Adam</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #43783f;">metrics</span> = <span style="color: #374478;">bm</span>.<span style="color: #374478;">unet_metrics</span>([0.1, 0.3, 0.5, 0.7, 0.9]))
<span style="color: #374478;">bm</span>.<span style="color: #374478;">prepare_model</span>(<span style="color: #374478;">loaded_model</span>, [2**14, 2**13, 2**12, 2**15, 2**13])

</pre>
</div>

<pre class="example">
2022-02-10 01:16:39.134361: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory
2022-02-10 01:16:39.134392: W tensorflow/stream_executor/cuda/cuda_driver.cc:269] failed call to cuInit: UNKNOWN ERROR (303)
2022-02-10 01:16:39.134429: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (node169): /proc/driver/nvidia/version does not exist
2022-02-10 01:16:39.134678: I tensorflow/core/platform/cpu_feature_guard.cc:151] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 AVX512F FMA
To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
WARNING:tensorflow:Unable to restore custom metric. Please ensure that the layer implements `get_config` and `from_config` when saving. In addition, please use the `custom_objects` arg when calling `load_model()`.
</pre>
</li>

<li>Run experiment: Correlate <code>all_dirty_ptu</code> of the <b>AlexaFluor488 + DiO LUVs</b>
experiment on Jupyter 2. We want the following correlations:
<ul class="org-ul">
<li>dirty trace → correlation via tttr2xfcs, and multipletau (bin=0.001)
</li>
<li><code>correction=delete</code> → correlation via tttr2xfcs, and multipletau
(bin=0.001)
</li>
<li><code>correction=delete_and_shift</code> → correlation via tttr2xfcs, and multipletau
(bin=0.001)
</li>
<li><code>correction=weights-random</code> → correlation via tttr2xfcs
</li>
<li><code>correction=weights-1-pred</code> → correlation via tttr2xfcs

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">files</span> = [<span style="color: #513f78;">path</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #513f78;">path</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]
<span style="color: #268bd2;">mt_bin</span> = 0.001

<span style="color: #859900; font-weight: bold;">if</span> <span style="color: #657b83; font-weight: bold;">len</span>(<span style="color: #3f7178;">files</span>) == <span style="color: #268bd2;">0</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">raise</span> <span style="color: #657b83; font-weight: bold;">FileNotFoundError</span>(<span style="color: #2aa198;">'The path provided does not include any'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">' .ptu files.'</span>)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #784437;">myfile</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">files</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ptufile</span> = <span style="color: #78683f;">cfo</span>.<span style="color: #5e7837;">PicoObject</span>(<span style="color: #784437;">myfile</span>, <span style="color: #37785e;">par_obj</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #513f78;">photonCountBin</span>=<span style="color: #37785e;">mt_bin</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #707e4f;">timeseries_name</span>=<span style="color: #43783f;">f</span><span style="color: #2aa198;">'us_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">_NOCORR'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #43783f;">f</span><span style="color: #2aa198;">'us_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">_NOCORR'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #783778;">method</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'delete'</span>, <span style="color: #2aa198;">'delete_and_shift'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">mt_name</span> = <span style="color: #43783f;">f</span><span style="color: #2aa198;">'us_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">_</span><span style="color: #268bd2;">{method}</span><span style="color: #2aa198;">'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #707e4f;">timeseries_name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">predictTimeSeries</span>(<span style="color: #43783f;">model</span>=<span style="color: #374478;">loaded_model</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #4f5c7e;">scaler</span>=<span style="color: #2aa198;">'minmax'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #374478;">name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">correctTCSPC</span>(<span style="color: #783778;">method</span>=<span style="color: #783778;">method</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #783f5a;">bin_after_correction</span>=<span style="color: #37785e;">mt_bin</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">timeseries_name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #7a4f7e;">weight</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'random'</span>, <span style="color: #2aa198;">'1-pred'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">weight_name</span> = <span style="color: #43783f;">f</span><span style="color: #2aa198;">'</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">_weights_</span><span style="color: #268bd2;">{weight}</span><span style="color: #2aa198;">'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #513f78;">photonCountBin</span>=1.0,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #707e4f;">timeseries_name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">predictTimeSeries</span>(<span style="color: #43783f;">model</span>=<span style="color: #374478;">loaded_model</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #4f5c7e;">scaler</span>=<span style="color: #2aa198;">'minmax'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #374478;">name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">correctTCSPC</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'weights'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #7a4f7e;">weight</span>=<span style="color: #7a4f7e;">weight</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">timeseries_name</span>=<span style="color: #7a4f7e;">weight_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">trueTimeArr</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"_FORWEIGHTS"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">key</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">else</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #374478;">k</span>, <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>[<span style="color: #3f7178;">key</span>].<span style="color: #374478;">items</span>():
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #3f7178;">key</span>.<span style="color: #783778;">endswith</span>((<span style="color: #2aa198;">'_DELBIN'</span>, <span style="color: #2aa198;">'_DELSHIFTBIN'</span>, <span style="color: #2aa198;">'_NOCORR'</span>)):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #374478;">name</span>=(<span style="color: #3f7178;">key</span>, <span style="color: #374478;">k</span>))

<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>[<span style="color: #5e7837;">m</span>].<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">save_autocorrelation</span>(<span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>, <span style="color: #783778;">method</span>=<span style="color: #5e7837;">m</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #37785e;">output_path</span>=<span style="color: #37785e;">output_path</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">del</span> <span style="color: #3f7178;">ptufile</span>

</pre>
</div>

<pre class="example">
5d0b929a-2855-446b-8b76-55075cd537e3
</pre>
</li>
</ul>
</li>

<li>According to log, this run ended with an Error again
<pre class="example">
[I 2022-01-23 00:26:40.512 ServerApp] AsyncIOLoopKernelRestarter: restarting kernel (1/5), keep random ports
</pre>
<p>
Only 229 traces were analyzed.
</p>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-2-1-10" class="outline-4">
<h4 id="sec-2-1-10"><span class="section-number-4">2.1.10</span> Analysis 3 of multipletau vs tttr2xfcs, fixed <code>delete_and_shift</code>, <code>weight-random</code> and <code>weight-1-pred</code></h4>
<div class="outline-text-4" id="text-2-1-10">
<ul class="org-ul">
<li>log files can be found here:
<div class="org-src-container">

<pre class="src src-tmux"><span style="color: #4f7e67;">tail</span> <span style="color: #43783f;">/beegfs/ye53nis/drmed-git/data/exp-220120-correlate-ptu/2022-02-08_correlate-all-clean-ptu.log</span>
<span style="color: #4f7e67;">tail</span> <span style="color: #5e7837;">/beegfs/ye53nis/drmed-git/data/exp-220120-correlate-ptu/2022-02-08_correlate-all-dirty-ptu.log</span>
</pre>
</div>

<pre class="example">

</pre>
</li>

<li>This time multiple changes were done in the code. There was an error in
<code>correctTCSPC(method='delete_and_shift')</code> which I corrected. I also
implemented multipletau fitting with smaller bins than the correction,
enabling that we actually get information about these very fast dynamics of
the molecules here. Thirdly, to investigate why correction with weights
behaved strangely for weights &lt;0.4, I implemented random weighting.
Fourthly, to have a correction method which is not dependent on setting a
weight manually, I implemented weighting automatically with: <code>weight = 1 -
     prediction</code> where prediction is the output of the UNET segmentation, a
float between 0 and 1.
<ol class="org-ol">
<li><b>no correction</b>: I just read in the .ptu data and correlated the photon
arrival times
<ul class="org-ul">
<li>1a using the <code>tttr2xfcs</code> algorithm
</li>
<li>1b using the <code>multipletau</code> algorithm
</li>
</ul>
</li>
<li><b>Corrected by photon deletion</b>: I read in the .ptu data, constructed a
timetrace from it, fed the time trace to my trained unet which predicts
bright burst artifacts, then mapped the time trace prediction on the
photon arrival times and <i>deleted all photons inside a bin labelled as
artifactual</i>
<ul class="org-ul">
<li>2a then correlated using the <code>tttr2xfcs</code> algorithm
</li>
<li>2b or using the <code>multipletau</code> algorithm
</li>
</ul>
</li>
<li><b>Corrected by photon deletion with shift</b>: I read in the .ptu data,
constructed a timetrace from it, fed the timetrace to my trained unet
which predicts bright burst artifacts, then mapped the time trace
prediction on the photon arrival times and <i>deleted all photons inside a
bin labelled as artifactual and shifted the arrival times of all photons
which come after a deleted bin by the bin size</i>, then I correlated the
resulting new photon arrival times using
<ul class="org-ul">
<li>3a the <code>tttr2xfcs</code> algorithm
</li>
<li>3b the <code>multipletaus</code> algorithm
</li>
</ul>
</li>
<li><b>weight='1-pred'</b>: I read in the .ptu data, constructed a timetrace from
it, fed the time trace to my trained unet which predicts bright burst
artifacts, then mapped the time trace prediction on the photon arrival
times and <i>gave all photons inside a bin labelled as artifactual a
weight of 1 - prediction</i> in the <code>tttr2xfcs</code> algorithm
</li>
<li><b>weight='random'</b>: I read in the .ptu data, constructed a timetrace from
it, fed the time trace to my trained unet which predicts bright burst
artifacts, then mapped the time trace prediction on the photon arrival
times and <i>gave all photons inside a bin labelled as artifactual a
random weight between 0 and 1</i> in the <code>tttr2xfcs</code> algorithm
</li>
<li><b>weight=0</b> (from 1st exp): I read in the .ptu data, constructed a
timetrace from it, fed the time trace to my trained unet which predicts
bright burst artifacts, then mapped the time trace prediction on the
photon arrival times and <i>gave all photons inside a bin labelled as
artifactual a weight of 0.2</i> in the <code>tttr2xfcs</code> algorithm
</li>
<li><b>weight=0.2</b> (from 2nd exp): changed weight to 0.2, else see above
</li>
<li><b>weight=0.4</b> (from 2nd exp): changed weight to 0.4, else see above
</li>
<li><b>weight=0.6</b> (from 2nd exp): changed weight to 0.6, else see above
</li>
<li><b>weight=0.8</b> (from 2nd exp): changed weight to 0.8, else see above
</li>
</ol>
</li>
<li>Then I fitted the traces in each of the 3 folders using Dominic Waithe's
<a href="https://dwaithe.github.io/FCSfitJS/">https://dwaithe.github.io/FCSfitJS/</a>
<ul class="org-ul">
<li>each correlation was fitted twice with the following options:
<ul class="org-ul">
<li>x: alpha = 1 (fixed) → if we assume no anomalous diffusion
</li>
<li>y: alpha = 0.5&#x2026;2 (floating) → values between 0.5&#x2026;1 fitted the
dirty data better
</li>
</ul>
</li>
<li>the <code>xmin</code> and <code>xmax</code> were:
<ul class="org-ul">
<li>0.001&#x2026;100 for clean data (because of shoulder between 100 and 1000 in
multipletau<sub>delete</sub>)
</li>
<li>0.001&#x2026;1000 for dirty data
</li>
</ul>
</li>
<li>other parameters:
<ul class="org-ul">
<li>3D, equation 1B → that means we don't consider txy and tz separately, but
have a aspect ratio <code>AR</code> as a conversion between them
</li>
<li>no of diffusing species: 1
</li>
<li>triplet states: 1
</li>
<li>offset: floating
</li>
<li>GN0: floating
</li>
<li>A: fixed to 1 (is the relative number of diffusing particles - has to
floating with more than 1 species)
</li>
<li>txy1: floating
</li>
<li>AR: 5 (values between 4.5 and 6 are okay)
</li>
</ul>
</li>
</ul>
</li>
<li>now let's look at the results:
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #707e4f;">cd</span> /<span style="color: #3f7178;">home</span>/<span style="color: #783f5a;">lex</span>/<span style="color: #784437;">Programme</span>/<span style="color: #784437;">drmed</span>-<span style="color: #784437;">git</span>
</pre>
</div>

<pre class="example">
/home/lex/Programme/drmed-git
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f5c7e;">numpy</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #707e4f;">np</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #37785e;">matplotlib</span>.<span style="color: #4f7e67;">pyplot</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f7e67;">plt</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #5e7837;">pandas</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #783778;">pd</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #78683f;">seaborn</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f5c7e;">sns</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #43783f;">pathlib</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #78683f;">Path</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #4f7e67;">pprint</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f7e67;">pprint</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">use seaborn style as default even if I just use matplotlib</span>
<span style="color: #4f5c7e;">sns</span>.<span style="color: #783778;">set</span>()
<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">set_palette</span>(<span style="color: #2aa198;">'colorblind'</span>)
</pre>
</div>
</li>
<li>load in all the data (see <code>Details</code> block)
<details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">folder_clean</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-02-08_correlate-all-clean-ptu'</span>)
<span style="color: #268bd2;">folder_clean_w0</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-01-20_correlate-all-clean-ptu'</span>)
<span style="color: #268bd2;">folder_clean_weights</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-01-25_correlate-all-clean-ptu'</span>)
<span style="color: #268bd2;">folder_dirty</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-02-08_correlate-all-dirty-ptu'</span>)
<span style="color: #268bd2;">folder_dirty_w0</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-01-20_correlate-all-dirty-ptu'</span>)
<span style="color: #268bd2;">folder_dirty_weights</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-01-25_correlate-all-dirty-ptu'</span>)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean params, alphafix</span>
<span style="color: #268bd2;">clean_1ax_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_no-correction_1comp-alphafix_to100_54of400_param.csv'</span>
<span style="color: #268bd2;">clean_1bx_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_multipletau_no-correction_1comp-alphafix_to100_54of400_param.csv'</span>
<span style="color: #268bd2;">clean_2ax_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_delete_1comp-alphafix_to100_54of400_param.csv'</span>
<span style="color: #268bd2;">clean_2bx_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_multipletau_delete_1comp-alphafix_to100_54of400_param.csv'</span>
<span style="color: #268bd2;">clean_3ax_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_delete-and-shift_1comp-alphafix_to100_54of400_param.csv'</span>
<span style="color: #268bd2;">clean_3bx_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_multipletau_delete-and-shift_1comp-alphafix_to100_54of400_param.csv'</span>
<span style="color: #268bd2;">clean_4x_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-1-pred_1comp-alphafix_to100_54of400_param.csv'</span>
<span style="color: #268bd2;">clean_5x_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-random_1comp-alphafix_to100_54of400_param.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean params, alphafloat</span>
<span style="color: #268bd2;">clean_1ay_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_no-correction_1comp-alphafloat_to100_54of400_param.csv'</span>
<span style="color: #268bd2;">clean_1by_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_multipletau_no-correction_1comp-alphafloat_to100_54of400_param.csv'</span>
<span style="color: #268bd2;">clean_2ay_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_delete_1comp-alphafloat_to100_54of400_param.csv'</span>
<span style="color: #268bd2;">clean_2by_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_multipletau_delete_1comp-alphafloat_to100_54of400_param.csv'</span>
<span style="color: #268bd2;">clean_3ay_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_delete-and-shift_1comp-alphafloat_to100_54of400_param.csv'</span>
<span style="color: #268bd2;">clean_3by_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_multipletau_delete-and-shift_1comp-alphafloat_to100_54of400_param.csv'</span>
<span style="color: #268bd2;">clean_4y_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-1-pred_1comp-alphafloat_to100_54of400_param.csv'</span>
<span style="color: #268bd2;">clean_5y_param_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-random_1comp-alphafloat_to100_54of400_param.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean params, from other experiments, alphafix</span>
<span style="color: #268bd2;">clean_6x_param_path</span> = <span style="color: #784437;">folder_clean_w0</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0_1comp-alphafix_to100_229of400_param.csv'</span>
<span style="color: #268bd2;">clean_7x_param_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.2_1comp-alphafix_to100_119of400_param.csv'</span>
<span style="color: #268bd2;">clean_8x_param_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.4_1comp-alphafix_to100_119of400_param.csv'</span>
<span style="color: #268bd2;">clean_9x_param_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.6_1comp-alphafix_to100_119of400_param.csv'</span>
<span style="color: #268bd2;">clean_10x_param_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.8_1comp-alphafix_to100_119of400_param.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean params, from other experiments, alphafloat</span>
<span style="color: #268bd2;">clean_6y_param_path</span> = <span style="color: #784437;">folder_clean_w0</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0_1comp-alphafloat_to100_229of400_param.csv'</span>
<span style="color: #268bd2;">clean_7y_param_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.2_1comp-alphafloat_to100_119of400_param.csv'</span>
<span style="color: #268bd2;">clean_8y_param_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.4_1comp-alphafloat_to100_119of400_param.csv'</span>
<span style="color: #268bd2;">clean_9y_param_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.6_1comp-alphafloat_to100_119of400_param.csv'</span>
<span style="color: #268bd2;">clean_10y_param_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.8_1comp-alphafloat_to100_119of400_param.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean plots, alphafix</span>
<span style="color: #268bd2;">clean_1ax_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_no-correction_1comp-alphafix_to100_54of400_plot.csv'</span>
<span style="color: #268bd2;">clean_1bx_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_multipletau_no-correction_1comp-alphafix_to100_54of400_plot.csv'</span>
<span style="color: #268bd2;">clean_2ax_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_delete_1comp-alphafix_to100_54of400_plot.csv'</span>
<span style="color: #268bd2;">clean_2bx_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_multipletau_delete_1comp-alphafix_to100_54of400_plot.csv'</span>
<span style="color: #268bd2;">clean_3ax_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_delete-and-shift_1comp-alphafix_to100_54of400_plot.csv'</span>
<span style="color: #268bd2;">clean_3bx_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_multipletau_delete-and-shift_1comp-alphafix_to100_54of400_plot.csv'</span>
<span style="color: #268bd2;">clean_4x_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-1-pred_1comp-alphafix_to100_54of400_plot.csv'</span>
<span style="color: #268bd2;">clean_5x_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-random_1comp-alphafix_to100_54of400_plot.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean plots, alphafloat</span>
<span style="color: #268bd2;">clean_1ay_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_no-correction_1comp-alphafloat_to100_54of400_plot.csv'</span>
<span style="color: #268bd2;">clean_1by_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_multipletau_no-correction_1comp-alphafloat_to100_54of400_plot.csv'</span>
<span style="color: #268bd2;">clean_2ay_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_delete_1comp-alphafloat_to100_54of400_plot.csv'</span>
<span style="color: #268bd2;">clean_2by_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_multipletau_delete_1comp-alphafloat_to100_54of400_plot.csv'</span>
<span style="color: #268bd2;">clean_3ay_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_delete-and-shift_1comp-alphafloat_to100_54of400_plot.csv'</span>
<span style="color: #268bd2;">clean_3by_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_multipletau_delete-and-shift_1comp-alphafloat_to100_54of400_plot.csv'</span>
<span style="color: #268bd2;">clean_4y_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-1-pred_1comp-alphafloat_to100_54of400_plot.csv'</span>
<span style="color: #268bd2;">clean_5y_plot_path</span> = <span style="color: #513f78;">folder_clean</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-random_1comp-alphafloat_to100_54of400_plot.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean plots, from other experiments, alphafix</span>
<span style="color: #268bd2;">clean_6x_plot_path</span> = <span style="color: #784437;">folder_clean_w0</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0_1comp-alphafix_to100_229of400_plot.csv'</span>
<span style="color: #268bd2;">clean_7x_plot_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.2_1comp-alphafix_to100_119of400_plot.csv'</span>
<span style="color: #268bd2;">clean_8x_plot_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.4_1comp-alphafix_to100_119of400_plot.csv'</span>
<span style="color: #268bd2;">clean_9x_plot_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.6_1comp-alphafix_to100_119of400_plot.csv'</span>
<span style="color: #268bd2;">clean_10x_plot_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.8_1comp-alphafix_to100_119of400_plot.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean plots, from other experiments, alphafix</span>
<span style="color: #268bd2;">clean_6y_plot_path</span> = <span style="color: #784437;">folder_clean_w0</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0_1comp-alphafloat_to100_229of400_plot.csv'</span>
<span style="color: #268bd2;">clean_7y_plot_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.2_1comp-alphafloat_to100_119of400_plot.csv'</span>
<span style="color: #268bd2;">clean_8y_plot_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.4_1comp-alphafloat_to100_119of400_plot.csv'</span>
<span style="color: #268bd2;">clean_9y_plot_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.6_1comp-alphafloat_to100_119of400_plot.csv'</span>
<span style="color: #268bd2;">clean_10y_plot_path</span> = <span style="color: #4f7e67;">folder_clean_weights</span> / <span style="color: #2aa198;">'clean_tttr2xfcs_weight-0.8_1comp-alphafloat_to100_119of400_plot.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty params, alphafix</span>
<span style="color: #268bd2;">dirty_1ax_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_no-correction_1comp-alphafix_to1000_53of400_param.csv'</span>
<span style="color: #268bd2;">dirty_1bx_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_multipletau_no-correction_1comp-alphafix_to1000_53of400_param.csv'</span>
<span style="color: #268bd2;">dirty_2ax_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_delete_1comp-alphafix_to1000_53of400_param.csv'</span>
<span style="color: #268bd2;">dirty_2bx_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_multipletau_delete_1comp-alphafix_to1000_53of400_param.csv'</span>
<span style="color: #268bd2;">dirty_3ax_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_delete-and-shift_1comp-alphafix_to1000_53of400_param.csv'</span>
<span style="color: #268bd2;">dirty_3bx_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_multipletau_delete-and-shift_1comp-alphafix_to1000_53of400_param.csv'</span>
<span style="color: #268bd2;">dirty_4x_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-1-pred_1comp-alphafix_to1000_53of400_param.csv'</span>
<span style="color: #268bd2;">dirty_5x_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-random_1comp-alphafix_to1000_53of400_param.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty params, alphafloat</span>
<span style="color: #268bd2;">dirty_1ay_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_no-correction_1comp-alphafloat_to1000_53of400_param.csv'</span>
<span style="color: #268bd2;">dirty_1by_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_multipletau_no-correction_1comp-alphafloat_to1000_53of400_param.csv'</span>
<span style="color: #268bd2;">dirty_2ay_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_delete_1comp-alphafloat_to1000_53of400_param.csv'</span>
<span style="color: #268bd2;">dirty_2by_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_multipletau_delete_1comp-alphafloat_to1000_53of400_param.csv'</span>
<span style="color: #268bd2;">dirty_3ay_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_delete-and-shift_1comp-alphafloat_to1000_53of400_param.csv'</span>
<span style="color: #268bd2;">dirty_3by_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_multipletau_delete-and-shift_1comp-alphafloat_to1000_53of400_param.csv'</span>
<span style="color: #268bd2;">dirty_4y_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-1-pred_1comp-alphafloat_to1000_53of400_param.csv'</span>
<span style="color: #268bd2;">dirty_5y_param_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-random_1comp-alphafloat_to1000_53of400_param.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty params, from other experiments, alphafix</span>
<span style="color: #268bd2;">dirty_6x_param_path</span> = <span style="color: #43783f;">folder_dirty_w0</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0_1comp-alphafix_to1000_173of400_param.csv'</span>
<span style="color: #268bd2;">dirty_7x_param_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.2_1comp-alphafix_to1000_79of400_param.csv'</span>
<span style="color: #268bd2;">dirty_8x_param_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.4_1comp-alphafix_to1000_79of400_param.csv'</span>
<span style="color: #268bd2;">dirty_9x_param_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.6_1comp-alphafix_to1000_79of400_param.csv'</span>
<span style="color: #268bd2;">dirty_10x_param_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.8_1comp-alphafix_to1000_79of400_param.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty params, from other experiments, alphafloat</span>
<span style="color: #268bd2;">dirty_6y_param_path</span> = <span style="color: #43783f;">folder_dirty_w0</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0_1comp-alphafloat_to1000_173of400_param.csv'</span>
<span style="color: #268bd2;">dirty_7y_param_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.2_1comp-alphafloat_to1000_79of400_param.csv'</span>
<span style="color: #268bd2;">dirty_8y_param_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.4_1comp-alphafloat_to1000_79of400_param.csv'</span>
<span style="color: #268bd2;">dirty_9y_param_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.6_1comp-alphafloat_to1000_79of400_param.csv'</span>
<span style="color: #268bd2;">dirty_10y_param_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.8_1comp-alphafloat_to1000_79of400_param.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty plots, alphafix</span>
<span style="color: #268bd2;">dirty_1ax_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_no-correction_1comp-alphafix_to1000_53of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_1bx_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_multipletau_no-correction_1comp-alphafix_to1000_53of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_2ax_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_delete_1comp-alphafix_to1000_53of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_2bx_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_multipletau_delete_1comp-alphafix_to1000_53of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_3ax_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_delete-and-shift_1comp-alphafix_to1000_53of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_3bx_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_multipletau_delete-and-shift_1comp-alphafix_to1000_53of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_4x_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-1-pred_1comp-alphafix_to1000_53of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_5x_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-random_1comp-alphafix_to1000_53of400_plot.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty plots, alphafloat</span>
<span style="color: #268bd2;">dirty_1ay_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_no-correction_1comp-alphafloat_to1000_53of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_1by_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_multipletau_no-correction_1comp-alphafloat_to1000_53of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_2ay_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_delete_1comp-alphafloat_to1000_53of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_2by_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_multipletau_delete_1comp-alphafloat_to1000_53of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_3ay_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_delete-and-shift_1comp-alphafloat_to1000_53of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_3by_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_multipletau_delete-and-shift_1comp-alphafloat_to1000_53of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_4y_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-1-pred_1comp-alphafloat_to1000_53of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_5y_plot_path</span> = <span style="color: #7a4f7e;">folder_dirty</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-random_1comp-alphafloat_to1000_53of400_plot.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty plot, from other experiments, alphafix</span>
<span style="color: #268bd2;">dirty_6x_plot_path</span> = <span style="color: #43783f;">folder_dirty_w0</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0_1comp-alphafix_to1000_173of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_7x_plot_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.2_1comp-alphafix_to1000_79of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_8x_plot_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.4_1comp-alphafix_to1000_79of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_9x_plot_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.6_1comp-alphafix_to1000_79of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_10x_plot_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.8_1comp-alphafix_to1000_79of400_plot.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty plot, from other experiments, alphafloat</span>
<span style="color: #268bd2;">dirty_6y_plot_path</span> = <span style="color: #43783f;">folder_dirty_w0</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0_1comp-alphafloat_to1000_173of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_7y_plot_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.2_1comp-alphafloat_to1000_79of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_8y_plot_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.4_1comp-alphafloat_to1000_79of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_9y_plot_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.6_1comp-alphafloat_to1000_79of400_plot.csv'</span>
<span style="color: #268bd2;">dirty_10y_plot_path</span> = <span style="color: #513f78;">folder_dirty_weights</span> / <span style="color: #2aa198;">'dirty_tttr2xfcs_weight-0.8_1comp-alphafloat_to1000_79of400_plot.csv'</span>

</pre>
</div>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean params, alphafix</span>
<span style="color: #268bd2;">clean_1ax_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">clean_1ax_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'no correction'</span>,])
<span style="color: #268bd2;">clean_1bx_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7a4f7e;">clean_1bx_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'multipletau'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'no correction'</span>,])
<span style="color: #268bd2;">clean_2ax_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #784437;">clean_2ax_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'delete'</span>,])
<span style="color: #268bd2;">clean_2bx_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783778;">clean_2bx_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'multipletau'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'delete'</span>,])
<span style="color: #268bd2;">clean_3ax_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #37785e;">clean_3ax_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'delete and shift'</span>,])
<span style="color: #268bd2;">clean_3bx_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #37785e;">clean_3bx_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'multipletau'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'delete and shift'</span>,])
<span style="color: #268bd2;">clean_4x_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #707e4f;">clean_4x_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'weight=1-pred'</span>,])
<span style="color: #268bd2;">clean_5x_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #5e7837;">clean_5x_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'weight=random'</span>,])

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean params, alphafloat</span>
<span style="color: #268bd2;">clean_1ay_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7a4f7e;">clean_1ay_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'no correction'</span>,])
<span style="color: #268bd2;">clean_1by_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783f5a;">clean_1by_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'multipletau'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'no correction'</span>,])
<span style="color: #268bd2;">clean_2ay_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #3f7178;">clean_2ay_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'delete'</span>,])
<span style="color: #268bd2;">clean_2by_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #43783f;">clean_2by_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'multipletau'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'delete'</span>,])
<span style="color: #268bd2;">clean_3ay_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783f5a;">clean_3ay_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'delete and shift'</span>,])
<span style="color: #268bd2;">clean_3by_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #707e4f;">clean_3by_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'multipletau'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'delete and shift'</span>,])
<span style="color: #268bd2;">clean_4y_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #3f7178;">clean_4y_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'weight=1-pred'</span>,])
<span style="color: #268bd2;">clean_5y_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7e544f;">clean_5y_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=54*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=54*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=54*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=54*[<span style="color: #2aa198;">'weight=random'</span>,])

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean params, from other experiments, alphafix</span>
<span style="color: #268bd2;">clean_6x_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7a4f7e;">clean_6x_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=229*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=229*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=229*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=229*[<span style="color: #2aa198;">'weight=0'</span>,])
<span style="color: #268bd2;">clean_7x_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #37785e;">clean_7x_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=119*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=119*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=119*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=119*[<span style="color: #2aa198;">'weight=0.2'</span>,])
<span style="color: #268bd2;">clean_8x_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783778;">clean_8x_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=119*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=119*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=119*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=119*[<span style="color: #2aa198;">'weight=0.4'</span>,])
<span style="color: #268bd2;">clean_9x_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783f5a;">clean_9x_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=119*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=119*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=119*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=119*[<span style="color: #2aa198;">'weight=0.6'</span>,])
<span style="color: #268bd2;">clean_10x_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7a4f7e;">clean_10x_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=119*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=119*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=119*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=119*[<span style="color: #2aa198;">'weight=0.8'</span>,])

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean params, from other experiments, alphafloat</span>
<span style="color: #268bd2;">clean_6y_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #43783f;">clean_6y_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=229*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=229*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=229*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=229*[<span style="color: #2aa198;">'weight=0'</span>,])
<span style="color: #268bd2;">clean_7y_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #43783f;">clean_7y_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=119*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=119*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=119*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=119*[<span style="color: #2aa198;">'weight=0.2'</span>,])
<span style="color: #268bd2;">clean_8y_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #3f7178;">clean_8y_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=119*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=119*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=119*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=119*[<span style="color: #2aa198;">'weight=0.4'</span>,])
<span style="color: #268bd2;">clean_9y_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #37785e;">clean_9y_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=119*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=119*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=119*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=119*[<span style="color: #2aa198;">'weight=0.6'</span>,])
<span style="color: #268bd2;">clean_10y_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7e544f;">clean_10y_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=119*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=119*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=119*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=119*[<span style="color: #2aa198;">'weight=0.8'</span>,])

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty params, alphafix</span>
<span style="color: #268bd2;">dirty_1ax_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">dirty_1ax_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'no correction'</span>,])
<span style="color: #268bd2;">dirty_1bx_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #43783f;">dirty_1bx_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'multipletau'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'no correction'</span>,])
<span style="color: #268bd2;">dirty_2ax_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #374478;">dirty_2ax_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'delete'</span>,])
<span style="color: #268bd2;">dirty_2bx_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f7e67;">dirty_2bx_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'multipletau'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'delete'</span>,])
<span style="color: #268bd2;">dirty_3ax_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7e544f;">dirty_3ax_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'delete and shift'</span>,])
<span style="color: #268bd2;">dirty_3bx_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #5e7837;">dirty_3bx_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'multipletau'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'delete and shift'</span>,])
<span style="color: #268bd2;">dirty_4x_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">dirty_4x_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'weight=1-pred'</span>,])
<span style="color: #268bd2;">dirty_5x_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #5e7837;">dirty_5x_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'weight=random'</span>,])

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty params, alphafloat</span>
<span style="color: #268bd2;">dirty_1ay_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7a4f7e;">dirty_1ay_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'no correction'</span>,])
<span style="color: #268bd2;">dirty_1by_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">dirty_1by_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'multipletau'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'no correction'</span>,])
<span style="color: #268bd2;">dirty_2ay_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783778;">dirty_2ay_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'delete'</span>,])
<span style="color: #268bd2;">dirty_2by_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f7e67;">dirty_2by_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'multipletau'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'delete'</span>,])
<span style="color: #268bd2;">dirty_3ay_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #513f78;">dirty_3ay_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'delete and shift'</span>,])
<span style="color: #268bd2;">dirty_3by_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #784437;">dirty_3by_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'multipletau'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'delete and shift'</span>,])
<span style="color: #268bd2;">dirty_4y_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f5c7e;">dirty_4y_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'weight=1-pred'</span>,])
<span style="color: #268bd2;">dirty_5y_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f7e67;">dirty_5y_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=53*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'weight=random'</span>,])

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty params, from other experiments, alphafix</span>
<span style="color: #268bd2;">dirty_6x_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #3f7178;">dirty_6x_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=173*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=173*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=173*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=173*[<span style="color: #2aa198;">'weight=0'</span>,])
<span style="color: #268bd2;">dirty_7x_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7a4f7e;">dirty_7x_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=79*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=79*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=79*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=79*[<span style="color: #2aa198;">'weight=0.2'</span>,])
<span style="color: #268bd2;">dirty_8x_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #374478;">dirty_8x_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=79*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=79*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=79*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=79*[<span style="color: #2aa198;">'weight=0.4'</span>,])
<span style="color: #268bd2;">dirty_9x_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #374478;">dirty_9x_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=79*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=79*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=79*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=79*[<span style="color: #2aa198;">'weight=0.6'</span>,])
<span style="color: #268bd2;">dirty_10x_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #784437;">dirty_10x_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=79*[<span style="color: #2aa198;">'alpha=1'</span>,], <span style="color: #5e7837;">correlator</span>=79*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=79*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=79*[<span style="color: #2aa198;">'weight=0.8'</span>,])

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty params, from other experiments, alphafloat</span>
<span style="color: #268bd2;">dirty_6y_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #707e4f;">dirty_6y_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=173*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=173*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=173*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=173*[<span style="color: #2aa198;">'weight=0'</span>,])
<span style="color: #268bd2;">dirty_7y_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7a4f7e;">dirty_7y_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=79*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=79*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=79*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=79*[<span style="color: #2aa198;">'weight=0.2'</span>,])
<span style="color: #268bd2;">dirty_8y_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #3f7178;">dirty_8y_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=79*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=79*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=79*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=79*[<span style="color: #2aa198;">'weight=0.4'</span>,])
<span style="color: #268bd2;">dirty_9y_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #374478;">dirty_9y_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=79*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=79*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=79*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=79*[<span style="color: #2aa198;">'weight=0.6'</span>,])
<span style="color: #268bd2;">dirty_10y_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #707e4f;">dirty_10y_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">fit_with</span>=79*[<span style="color: #2aa198;">'alpha=float'</span>,], <span style="color: #5e7837;">correlator</span>=79*[<span style="color: #2aa198;">'tttr2xfcs'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=79*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=79*[<span style="color: #2aa198;">'weight=0.8'</span>,])

<span style="color: #268bd2;">all_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #7e544f;">concat</span>([<span style="color: #513f78;">clean_1ax_param</span>, <span style="color: #374478;">clean_1bx_param</span>, <span style="color: #374478;">clean_2ax_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #707e4f;">clean_2bx_param</span>, <span style="color: #374478;">clean_3ax_param</span>, <span style="color: #4f5c7e;">clean_3bx_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #4f5c7e;">clean_4x_param</span>, <span style="color: #784437;">clean_5x_param</span>, <span style="color: #4f5c7e;">clean_6x_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #783778;">clean_7x_param</span>, <span style="color: #783f5a;">clean_8x_param</span>, <span style="color: #374478;">clean_9x_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #37785e;">clean_10x_param</span>, <span style="color: #3f7178;">clean_1ay_param</span>, <span style="color: #4f5c7e;">clean_1by_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #78683f;">clean_2ay_param</span>, <span style="color: #3f7178;">clean_2by_param</span>, <span style="color: #37785e;">clean_3ay_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #707e4f;">clean_3by_param</span>, <span style="color: #7e544f;">clean_4y_param</span>, <span style="color: #4f5c7e;">clean_5y_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #37785e;">clean_6y_param</span>, <span style="color: #374478;">clean_7y_param</span>, <span style="color: #4f5c7e;">clean_8y_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #783778;">clean_9y_param</span>, <span style="color: #784437;">clean_10y_param</span>, <span style="color: #783f5a;">dirty_1ax_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #707e4f;">dirty_1bx_param</span>, <span style="color: #43783f;">dirty_2ax_param</span>, <span style="color: #4f5c7e;">dirty_2bx_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #5e7837;">dirty_3ax_param</span>, <span style="color: #707e4f;">dirty_3bx_param</span>, <span style="color: #3f7178;">dirty_4x_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #7e544f;">dirty_5x_param</span>, <span style="color: #43783f;">dirty_6x_param</span>, <span style="color: #707e4f;">dirty_7x_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #7a4f7e;">dirty_8x_param</span>, <span style="color: #707e4f;">dirty_9x_param</span>, <span style="color: #374478;">dirty_10x_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #3f7178;">dirty_1ay_param</span>, <span style="color: #7a4f7e;">dirty_1by_param</span>, <span style="color: #707e4f;">dirty_2ay_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #5e7837;">dirty_2by_param</span>, <span style="color: #37785e;">dirty_3ay_param</span>, <span style="color: #3f7178;">dirty_3by_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #707e4f;">dirty_4y_param</span>, <span style="color: #3f7178;">dirty_5y_param</span>, <span style="color: #513f78;">dirty_6y_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #7a4f7e;">dirty_7y_param</span>, <span style="color: #43783f;">dirty_8y_param</span>, <span style="color: #7a4f7e;">dirty_9y_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #37785e;">dirty_10y_param</span>], <span style="color: #78683f;">ignore_index</span>=<span style="color: #859900; font-weight: bold;">True</span>)

<span style="color: #37785e;">all_param</span>[<span style="color: #2aa198;">"correlator-fit_with"</span>] = <span style="color: #37785e;">all_param</span>[[<span style="color: #2aa198;">"correlator"</span>, <span style="color: #2aa198;">"fit_with"</span>]].<span style="color: #78683f;">agg</span>(<span style="color: #2aa198;">' - '</span>.<span style="color: #784437;">join</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #37785e;">all_param</span>
</pre>
</div>

<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="right">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="right">

<col  class="left">

<col  class="left">

<col  class="right">

<col  class="left">

<col  class="right">

<col  class="right">

<col  class="left">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="text-right">&#xa0;</th>
<th scope="col" class="text-left">name<sub>of</sub><sub>plot</sub></th>
<th scope="col" class="text-left">master<sub>file</sub></th>
<th scope="col" class="text-left">parent<sub>name</sub></th>
<th scope="col" class="text-right">parent<sub>uqid</sub></th>
<th scope="col" class="text-left">time of fit</th>
<th scope="col" class="text-left">Diff<sub>eq</sub></th>
<th scope="col" class="text-right">Diff<sub>species</sub></th>
<th scope="col" class="text-left">Triplet<sub>eq</sub></th>
<th scope="col" class="text-right">Triplet<sub>species</sub></th>
<th scope="col" class="text-right">Dimen</th>
<th scope="col" class="text-left">&#x2026;</th>
<th scope="col" class="text-right">stdev(AR1)</th>
<th scope="col" class="text-right">alpha1</th>
<th scope="col" class="text-right">stdev(alpha1)</th>
<th scope="col" class="text-right">N (mom)</th>
<th scope="col" class="text-right">bri (kHz)</th>
<th scope="col" class="text-left">fit<sub>with</sub></th>
<th scope="col" class="text-left">correlator</th>
<th scope="col" class="text-left">artifact</th>
<th scope="col" class="text-left">correction</th>
<th scope="col" class="text-left">correlator-fit<sub>with</sub></th>
</tr>
</thead>
<tbody>
<tr>
<td class="text-right">0</td>
<td class="text-left">2022-02-10<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1dot0</sub><sub>20</sub> nM AF4881&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-right">NaN</td>
<td class="text-left">11 February 2022 14:02:13</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">1.000000</td>
<td class="text-right">NaN</td>
<td class="text-right">72.053415</td>
<td class="text-right">4.794626</td>
<td class="text-left">alpha=1</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-left">clean</td>
<td class="text-left">no correction</td>
<td class="text-left">tttr2xfcs - alpha=1</td>
</tr>

<tr>
<td class="text-right">1</td>
<td class="text-left">2022-02-10<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1dot0</sub><sub>20</sub> nM AF4882&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-right">NaN</td>
<td class="text-left">11 February 2022 14:02:13</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">1.000000</td>
<td class="text-right">NaN</td>
<td class="text-right">73.936945</td>
<td class="text-right">4.666217</td>
<td class="text-left">alpha=1</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-left">clean</td>
<td class="text-left">no correction</td>
<td class="text-left">tttr2xfcs - alpha=1</td>
</tr>

<tr>
<td class="text-right">2</td>
<td class="text-left">2022-02-10<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1dot0</sub><sub>20</sub> nM AF4882&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-right">NaN</td>
<td class="text-left">11 February 2022 14:02:13</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">1.000000</td>
<td class="text-right">NaN</td>
<td class="text-right">70.721472</td>
<td class="text-right">4.901863</td>
<td class="text-left">alpha=1</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-left">clean</td>
<td class="text-left">no correction</td>
<td class="text-left">tttr2xfcs - alpha=1</td>
</tr>

<tr>
<td class="text-right">3</td>
<td class="text-left">2022-02-10<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1dot0</sub><sub>20</sub> nM AF4882&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-right">NaN</td>
<td class="text-left">11 February 2022 14:02:13</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">1.000000</td>
<td class="text-right">NaN</td>
<td class="text-right">72.151740</td>
<td class="text-right">4.797506</td>
<td class="text-left">alpha=1</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-left">clean</td>
<td class="text-left">no correction</td>
<td class="text-left">tttr2xfcs - alpha=1</td>
</tr>

<tr>
<td class="text-right">4</td>
<td class="text-left">2022-02-10<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1dot0</sub><sub>20</sub> nM AF4883&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-right">NaN</td>
<td class="text-left">11 February 2022 14:02:13</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">1.000000</td>
<td class="text-right">NaN</td>
<td class="text-right">72.730578</td>
<td class="text-right">4.762291</td>
<td class="text-left">alpha=1</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-left">clean</td>
<td class="text-left">no correction</td>
<td class="text-left">tttr2xfcs - alpha=1</td>
</tr>

<tr>
<td class="text-right">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-left">&#x2026;</td>
</tr>

<tr>
<td class="text-right">4095</td>
<td class="text-left">2022-01-26<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>wei</sub>&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">weight0.8<sub>DiO</sub> LUV 10uM in 20 nM AF488247<sub>T2974s</sub><sub>1</sub></td>
<td class="text-right">NaN</td>
<td class="text-left">13 February 2022 18:58:28</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">0.500000</td>
<td class="text-right">NaN</td>
<td class="text-right">8.066484</td>
<td class="text-right">61.800612</td>
<td class="text-left">alpha=float</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-left">dirty</td>
<td class="text-left">weight=0.8</td>
<td class="text-left">tttr2xfcs - alpha=float</td>
</tr>

<tr>
<td class="text-right">4096</td>
<td class="text-left">2022-01-26<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>wei</sub>&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">weight0.8<sub>DiO</sub> LUV 10uM in 20 nM AF488248<sub>T2986s</sub><sub>1</sub></td>
<td class="text-right">NaN</td>
<td class="text-left">13 February 2022 18:58:28</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">0.594970</td>
<td class="text-right">NaN</td>
<td class="text-right">4.674732</td>
<td class="text-right">113.075760</td>
<td class="text-left">alpha=float</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-left">dirty</td>
<td class="text-left">weight=0.8</td>
<td class="text-left">tttr2xfcs - alpha=float</td>
</tr>

<tr>
<td class="text-right">4097</td>
<td class="text-left">2022-01-26<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>wei</sub>&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">weight0.8<sub>DiO</sub> LUV 10uM in 20 nM AF488291<sub>T3505s</sub><sub>1</sub></td>
<td class="text-right">NaN</td>
<td class="text-left">13 February 2022 18:58:28</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">0.791023</td>
<td class="text-right">NaN</td>
<td class="text-right">3.326365</td>
<td class="text-right">172.746385</td>
<td class="text-left">alpha=float</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-left">dirty</td>
<td class="text-left">weight=0.8</td>
<td class="text-left">tttr2xfcs - alpha=float</td>
</tr>

<tr>
<td class="text-right">4098</td>
<td class="text-left">2022-01-26<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>wei</sub>&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">weight0.8<sub>DiO</sub> LUV 10uM in 20 nM AF488293<sub>T3529s</sub><sub>1</sub></td>
<td class="text-right">NaN</td>
<td class="text-left">13 February 2022 18:58:28</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">0.500000</td>
<td class="text-right">NaN</td>
<td class="text-right">9.386688</td>
<td class="text-right">53.060101</td>
<td class="text-left">alpha=float</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-left">dirty</td>
<td class="text-left">weight=0.8</td>
<td class="text-left">tttr2xfcs - alpha=float</td>
</tr>

<tr>
<td class="text-right">4099</td>
<td class="text-left">2022-01-26<sub>tttr2xfcs</sub><sub>with</sub><sub>weights</sub><sub>CH2</sub><sub>BIN1</sub><sub>wei</sub>&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">weight0.8<sub>DiO</sub> LUV 10uM in 20 nM AF488294<sub>T3541s</sub><sub>1</sub></td>
<td class="text-right">NaN</td>
<td class="text-left">13 February 2022 18:58:28</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">0.500000</td>
<td class="text-right">NaN</td>
<td class="text-right">6.441874</td>
<td class="text-right">83.167622</td>
<td class="text-left">alpha=float</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-left">dirty</td>
<td class="text-left">weight=0.8</td>
<td class="text-left">tttr2xfcs - alpha=float</td>
</tr>
</tbody>
</table>

<p>
4100 rows × 33 columns
</p>
</details>
</li>

<li>let's plot all transit times for each correction method and parameters
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">g</span> = <span style="color: #4f5c7e;">sns</span>.<span style="color: #374478;">FacetGrid</span>(<span style="color: #784437;">data</span>=<span style="color: #37785e;">all_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #707e4f;">row</span>=<span style="color: #2aa198;">'artifact'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #783778;">sharey</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #3f7178;">sharex</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">height</span>=5,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #7e544f;">aspect</span>=2,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #4f5c7e;">legend_out</span>=<span style="color: #859900; font-weight: bold;">True</span>)
<span style="color: #7a4f7e;">g</span>.<span style="color: #78683f;">map_dataframe</span>(<span style="color: #4f5c7e;">sns</span>.<span style="color: #707e4f;">boxplot</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">y</span>=<span style="color: #2aa198;">'txy1'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #3f7178;">x</span>=<span style="color: #2aa198;">'correction'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #78683f;">hue</span>=<span style="color: #2aa198;">"correlator-fit_with"</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #5e7837;">palette</span>=<span style="color: #2aa198;">'colorblind'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #43783f;">showfliers</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="color: #7a4f7e;">g</span>.<span style="color: #5e7837;">add_legend</span>(<span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'Correlator and\nfit parameter'</span>)
<span style="color: #7a4f7e;">g</span>.<span style="color: #78683f;">map_dataframe</span>(<span style="color: #4f5c7e;">sns</span>.<span style="color: #78683f;">stripplot</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">y</span>=<span style="color: #2aa198;">'txy1'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #3f7178;">x</span>=<span style="color: #2aa198;">'correction'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #78683f;">hue</span>=<span style="color: #2aa198;">"correlator-fit_with"</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">dodge</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #5e7837;">palette</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>([<span style="color: #2aa198;">'0.3'</span>]),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #43783f;">size</span>=4,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #783778;">jitter</span>=0.2)
<span style="color: #7a4f7e;">g</span>.<span style="color: #513f78;">tight_layout</span>()
<span style="color: #7a4f7e;">g</span>.<span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">suptitle</span>(<span style="color: #2aa198;">'AlexaFluor488 (top) vs AlexaFluor488 + Dio LUVs (bottom)'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">y</span>=1.03, <span style="color: #43783f;">size</span>=20)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">axes</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">g.axes.flat</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #657b83; font-weight: bold;">_</span> = <span style="color: #43783f;">axes</span>.<span style="color: #37785e;">set_xticklabels</span>(<span style="color: #43783f;">axes</span>.<span style="color: #5e7837;">get_xticklabels</span>(), <span style="color: #374478;">rotation</span>=45)
<span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #7a4f7e;">g</span>.<span style="color: #43783f;">axes</span>, <span style="color: #37785e;">yscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'correction method'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">ylabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'transit time $\tau_{D}$ (log)'</span>)
<span style="color: #4f7e67;">plt</span>.<span style="color: #374478;">show</span>()
</pre>
</div>
</li>

<li>we'll use the more concise <code>seaborn.catplot</code> for plotting:
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">g</span> = <span style="color: #4f5c7e;">sns</span>.<span style="color: #78683f;">catplot</span>(<span style="color: #784437;">data</span>=<span style="color: #37785e;">all_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">y</span>=<span style="color: #2aa198;">'txy1'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">x</span>=<span style="color: #2aa198;">'correction'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">hue</span>=<span style="color: #2aa198;">'correlator-fit_with'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #707e4f;">row</span>=<span style="color: #2aa198;">'artifact'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">sharey</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">height</span>=5,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">aspect</span>=2,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">legend_out</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">kind</span>=<span style="color: #2aa198;">'boxen'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #43783f;">showfliers</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="color: #7a4f7e;">g</span>.<span style="color: #78683f;">map_dataframe</span>(<span style="color: #4f5c7e;">sns</span>.<span style="color: #78683f;">stripplot</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">y</span>=<span style="color: #2aa198;">'txy1'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #3f7178;">x</span>=<span style="color: #2aa198;">'correction'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #78683f;">hue</span>=<span style="color: #2aa198;">"correlator-fit_with"</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">dodge</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #5e7837;">palette</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>([<span style="color: #2aa198;">'0.3'</span>]),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #43783f;">size</span>=4,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #783778;">jitter</span>=0.2)
<span style="color: #7a4f7e;">g</span>.<span style="color: #513f78;">tight_layout</span>()
<span style="color: #7a4f7e;">g</span>.<span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">suptitle</span>(<span style="color: #2aa198;">'AlexaFluor488 (top) vs AlexaFluor488 + Dio LUVs (bottom)'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #513f78;">y</span>=1.03, <span style="color: #43783f;">size</span>=20)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">axes</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">g.axes.flat</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #657b83; font-weight: bold;">_</span> = <span style="color: #43783f;">axes</span>.<span style="color: #37785e;">set_xticklabels</span>(<span style="color: #43783f;">axes</span>.<span style="color: #5e7837;">get_xticklabels</span>(), <span style="color: #374478;">rotation</span>=45)
<span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #7a4f7e;">g</span>.<span style="color: #43783f;">axes</span>, <span style="color: #37785e;">yscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'correction method'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">ylabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'transit time $\tau_{D}$ (log)'</span>)
<span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #7a4f7e;">g</span>.<span style="color: #707e4f;">legend</span>, <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'Correlator and\nfit parameter'</span>)
<span style="color: #4f7e67;">plt</span>.<span style="color: #374478;">show</span>()
</pre>
</div>


<figure>
<p><img src="./jupyter/analysis3-all-param.png" class="img-responsive" alt="analysis3-all-param.png">
</p>
</figure>
</li>

<li>for sake of simplicity, add a plot of only <b>no correction vs delete and shift</b>:
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">data</span> = <span style="color: #37785e;">all_param</span>.<span style="color: #783778;">loc</span>[<span style="color: #37785e;">all_param</span>[<span style="color: #2aa198;">'correction'</span>].<span style="color: #374478;">isin</span>([<span style="color: #2aa198;">'no correction'</span>, <span style="color: #2aa198;">'delete and shift'</span>])]
<span style="color: #4f7e67;">display</span>(<span style="color: #784437;">data</span>)
<span style="color: #268bd2;">g</span> = <span style="color: #4f5c7e;">sns</span>.<span style="color: #78683f;">catplot</span>(<span style="color: #784437;">data</span>=<span style="color: #784437;">data</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">y</span>=<span style="color: #2aa198;">'txy1'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">x</span>=<span style="color: #2aa198;">'correction'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">hue</span>=<span style="color: #2aa198;">'correlator-fit_with'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">col</span>=<span style="color: #2aa198;">'artifact'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">sharey</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">height</span>=5,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">aspect</span>=1,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">legend_out</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">kind</span>=<span style="color: #2aa198;">'boxen'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #43783f;">showfliers</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="color: #7a4f7e;">g</span>.<span style="color: #78683f;">map_dataframe</span>(<span style="color: #4f5c7e;">sns</span>.<span style="color: #78683f;">stripplot</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">y</span>=<span style="color: #2aa198;">'txy1'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #3f7178;">x</span>=<span style="color: #2aa198;">'correction'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #78683f;">hue</span>=<span style="color: #2aa198;">"correlator-fit_with"</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">dodge</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #5e7837;">palette</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>([<span style="color: #2aa198;">'0.3'</span>]),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #43783f;">size</span>=4,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #783778;">jitter</span>=0.2)
<span style="color: #7a4f7e;">g</span>.<span style="color: #513f78;">tight_layout</span>()
<span style="color: #7a4f7e;">g</span>.<span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">suptitle</span>(<span style="color: #2aa198;">'AlexaFluor488 (left) vs AlexaFluor488 + Dio LUVs (right)'</span>, <span style="color: #513f78;">y</span>=1.03, <span style="color: #43783f;">size</span>=20)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">axes</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">g.axes.flat</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #657b83; font-weight: bold;">_</span> = <span style="color: #43783f;">axes</span>.<span style="color: #37785e;">set_xticklabels</span>(<span style="color: #43783f;">axes</span>.<span style="color: #5e7837;">get_xticklabels</span>(), <span style="color: #374478;">rotation</span>=45)
<span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #7a4f7e;">g</span>.<span style="color: #43783f;">axes</span>, <span style="color: #37785e;">yscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'correction method'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">ylabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'transit time $\tau_{D}$ (log)'</span>)
<span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #7a4f7e;">g</span>.<span style="color: #707e4f;">legend</span>, <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'Correlator and\nfit parameter'</span>)
<span style="color: #4f7e67;">plt</span>.<span style="color: #374478;">show</span>()

</pre>
</div>

<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="right">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="right">

<col  class="left">

<col  class="left">

<col  class="right">

<col  class="left">

<col  class="right">

<col  class="right">

<col  class="left">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="text-right">&#xa0;</th>
<th scope="col" class="text-left">name<sub>of</sub><sub>plot</sub></th>
<th scope="col" class="text-left">master<sub>file</sub></th>
<th scope="col" class="text-left">parent<sub>name</sub></th>
<th scope="col" class="text-right">parent<sub>uqid</sub></th>
<th scope="col" class="text-left">time of fit</th>
<th scope="col" class="text-left">Diff<sub>eq</sub></th>
<th scope="col" class="text-right">Diff<sub>species</sub></th>
<th scope="col" class="text-left">Triplet<sub>eq</sub></th>
<th scope="col" class="text-right">Triplet<sub>species</sub></th>
<th scope="col" class="text-right">Dimen</th>
<th scope="col" class="text-left">&#x2026;</th>
<th scope="col" class="text-right">stdev(AR1)</th>
<th scope="col" class="text-right">alpha1</th>
<th scope="col" class="text-right">stdev(alpha1)</th>
<th scope="col" class="text-right">N (mom)</th>
<th scope="col" class="text-right">bri (kHz)</th>
<th scope="col" class="text-left">fit<sub>with</sub></th>
<th scope="col" class="text-left">correlator</th>
<th scope="col" class="text-left">artifact</th>
<th scope="col" class="text-left">correction</th>
<th scope="col" class="text-left">correlator-fit<sub>with</sub></th>
</tr>
</thead>
<tbody>
<tr>
<td class="text-right">0</td>
<td class="text-left">2022-02-10<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1dot0</sub><sub>20</sub> nM AF4881&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-right">NaN</td>
<td class="text-left">11 February 2022 14:02:13</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">1.000000</td>
<td class="text-right">NaN</td>
<td class="text-right">72.053415</td>
<td class="text-right">4.794626</td>
<td class="text-left">alpha=1</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-left">clean</td>
<td class="text-left">no correction</td>
<td class="text-left">tttr2xfcs - alpha=1</td>
</tr>

<tr>
<td class="text-right">1</td>
<td class="text-left">2022-02-10<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1dot0</sub><sub>20</sub> nM AF4882&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-right">NaN</td>
<td class="text-left">11 February 2022 14:02:13</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">1.000000</td>
<td class="text-right">NaN</td>
<td class="text-right">73.936945</td>
<td class="text-right">4.666217</td>
<td class="text-left">alpha=1</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-left">clean</td>
<td class="text-left">no correction</td>
<td class="text-left">tttr2xfcs - alpha=1</td>
</tr>

<tr>
<td class="text-right">2</td>
<td class="text-left">2022-02-10<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1dot0</sub><sub>20</sub> nM AF4882&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-right">NaN</td>
<td class="text-left">11 February 2022 14:02:13</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">1.000000</td>
<td class="text-right">NaN</td>
<td class="text-right">70.721472</td>
<td class="text-right">4.901863</td>
<td class="text-left">alpha=1</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-left">clean</td>
<td class="text-left">no correction</td>
<td class="text-left">tttr2xfcs - alpha=1</td>
</tr>

<tr>
<td class="text-right">3</td>
<td class="text-left">2022-02-10<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1dot0</sub><sub>20</sub> nM AF4882&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-right">NaN</td>
<td class="text-left">11 February 2022 14:02:13</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">1.000000</td>
<td class="text-right">NaN</td>
<td class="text-right">72.151740</td>
<td class="text-right">4.797506</td>
<td class="text-left">alpha=1</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-left">clean</td>
<td class="text-left">no correction</td>
<td class="text-left">tttr2xfcs - alpha=1</td>
</tr>

<tr>
<td class="text-right">4</td>
<td class="text-left">2022-02-10<sub>tttr2xfcs</sub><sub>CH2</sub><sub>BIN1dot0</sub><sub>20</sub> nM AF4883&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-right">NaN</td>
<td class="text-left">11 February 2022 14:02:13</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">1.000000</td>
<td class="text-right">NaN</td>
<td class="text-right">72.730578</td>
<td class="text-right">4.762291</td>
<td class="text-left">alpha=1</td>
<td class="text-left">tttr2xfcs</td>
<td class="text-left">clean</td>
<td class="text-left">no correction</td>
<td class="text-left">tttr2xfcs - alpha=1</td>
</tr>

<tr>
<td class="text-right">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-left">&#x2026;</td>
</tr>

<tr>
<td class="text-right">3500</td>
<td class="text-left">2022-02-10<sub>multipletau</sub><sub>CH2</sub><sub>BIN0dot001</sub><sub>us</sub><sub>DiO</sub> L&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">multipletau</td>
<td class="text-right">NaN</td>
<td class="text-left">12 February 2022 21:01:19</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">0.500000</td>
<td class="text-right">NaN</td>
<td class="text-right">-9.807292</td>
<td class="text-right">-45.831485</td>
<td class="text-left">alpha=float</td>
<td class="text-left">multipletau</td>
<td class="text-left">dirty</td>
<td class="text-left">delete and shift</td>
<td class="text-left">multipletau - alpha=float</td>
</tr>

<tr>
<td class="text-right">3501</td>
<td class="text-left">2022-02-10<sub>multipletau</sub><sub>CH2</sub><sub>BIN0dot001</sub><sub>us</sub><sub>DiO</sub> L&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">multipletau</td>
<td class="text-right">NaN</td>
<td class="text-left">12 February 2022 21:01:19</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">0.500000</td>
<td class="text-right">NaN</td>
<td class="text-right">-9.508777</td>
<td class="text-right">-50.024738</td>
<td class="text-left">alpha=float</td>
<td class="text-left">multipletau</td>
<td class="text-left">dirty</td>
<td class="text-left">delete and shift</td>
<td class="text-left">multipletau - alpha=float</td>
</tr>

<tr>
<td class="text-right">3502</td>
<td class="text-left">2022-02-10<sub>multipletau</sub><sub>CH2</sub><sub>BIN0dot001</sub><sub>us</sub><sub>DiO</sub> L&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">multipletau</td>
<td class="text-right">NaN</td>
<td class="text-left">12 February 2022 21:01:19</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">0.647205</td>
<td class="text-right">NaN</td>
<td class="text-right">-9.413903</td>
<td class="text-right">-47.210210</td>
<td class="text-left">alpha=float</td>
<td class="text-left">multipletau</td>
<td class="text-left">dirty</td>
<td class="text-left">delete and shift</td>
<td class="text-left">multipletau - alpha=float</td>
</tr>

<tr>
<td class="text-right">3503</td>
<td class="text-left">2022-02-10<sub>multipletau</sub><sub>CH2</sub><sub>BIN0dot001</sub><sub>us</sub><sub>DiO</sub> L&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">multipletau</td>
<td class="text-right">NaN</td>
<td class="text-left">12 February 2022 21:01:19</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">0.500000</td>
<td class="text-right">NaN</td>
<td class="text-right">-9.666384</td>
<td class="text-right">-50.652535</td>
<td class="text-left">alpha=float</td>
<td class="text-left">multipletau</td>
<td class="text-left">dirty</td>
<td class="text-left">delete and shift</td>
<td class="text-left">multipletau - alpha=float</td>
</tr>

<tr>
<td class="text-right">3504</td>
<td class="text-left">2022-02-10<sub>multipletau</sub><sub>CH2</sub><sub>BIN0dot001</sub><sub>us</sub><sub>DiO</sub> L&#x2026;</td>
<td class="text-left">Not known</td>
<td class="text-left">multipletau</td>
<td class="text-right">NaN</td>
<td class="text-left">12 February 2022 21:01:19</td>
<td class="text-left">Equation 1B</td>
<td class="text-right">1</td>
<td class="text-left">Triplet Eq 2A</td>
<td class="text-right">1</td>
<td class="text-right">NaN</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">NaN</td>
<td class="text-right">0.500000</td>
<td class="text-right">NaN</td>
<td class="text-right">-9.805858</td>
<td class="text-right">-48.478584</td>
<td class="text-left">alpha=float</td>
<td class="text-left">multipletau</td>
<td class="text-left">dirty</td>
<td class="text-left">delete and shift</td>
<td class="text-left">multipletau - alpha=float</td>
</tr>
</tbody>
</table>

<p>
856 rows × 33 columns
</p>


<figure>
<p><img src="./jupyter/analysis3-nocorr-vs-delete-and-shift.png" class="img-responsive" alt="analysis3-nocorr-vs-delete-and-shift.png">
</p>
</figure>
</li>

<li>let's save the DataFrame used for plotting so that re-using it is simpler:
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #37785e;">all_param</span>.<span style="color: #513f78;">to_csv</span>(<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-02-13_all-params.csv'</span>)
</pre>
</div>
</li>

<li>We saw above that the correction methods lead to quite different results
regarding the transit time outcomes. The computation of the transit times
depends on:
<ol class="org-ol">
<li>the artifact prediction on the time trace (and subsequent correction of
photons)
</li>
<li>the correlation of the photon arrival times (or the binned timetrace)
</li>
<li>the fitting of the correlation
</li>
</ol>
</li>
<li>let's have a deeper look in the correlations and fits, first load all the
correlation and fit plots which were done in
<a href="https://dwaithe.github.io/FCSfitJS/">https://dwaithe.github.io/FCSfitJS/</a>
<details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean plots, alphafix</span>
<span style="color: #268bd2;">clean_1ax_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #784437;">clean_1ax_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_1bx_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783778;">clean_1bx_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_2ax_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #5e7837;">clean_2ax_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_2bx_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #784437;">clean_2bx_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_3ax_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f5c7e;">clean_3ax_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_3bx_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #784437;">clean_3bx_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_4x_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783f5a;">clean_4x_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_5x_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f5c7e;">clean_5x_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean plots, alphafloat</span>
<span style="color: #268bd2;">clean_1ay_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7e544f;">clean_1ay_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_1by_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #37785e;">clean_1by_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_2ay_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f7e67;">clean_2ay_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_2by_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #707e4f;">clean_2by_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_3ay_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #784437;">clean_3ay_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_3by_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783f5a;">clean_3by_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_4y_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783778;">clean_4y_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_5y_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f5c7e;">clean_5y_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 109'</span>, <span style="color: #784437;">axis</span>=1)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean plots, from other experiments, alphafix</span>
<span style="color: #268bd2;">clean_6x_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #374478;">clean_6x_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 459'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_7x_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #3f7178;">clean_7x_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 239'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_8x_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">clean_8x_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 239'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_9x_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #707e4f;">clean_9x_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 239'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_10x_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783f5a;">clean_10x_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 239'</span>, <span style="color: #784437;">axis</span>=1)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean plots, from other experiments, alphafloat</span>
<span style="color: #268bd2;">clean_6y_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7a4f7e;">clean_6y_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 459'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_7y_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #43783f;">clean_7y_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 239'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_8y_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #513f78;">clean_8y_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 239'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_9y_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783f5a;">clean_9y_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 239'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">clean_10y_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #784437;">clean_10y_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 239'</span>, <span style="color: #784437;">axis</span>=1)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean transit times, alphafix</span>
<span style="color: #268bd2;">clean_1ax_tau</span> = <span style="color: #78683f;">clean_1ax_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_1bx_tau</span> = <span style="color: #783f5a;">clean_1bx_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_2ax_tau</span> = <span style="color: #783f5a;">clean_2ax_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_2bx_tau</span> = <span style="color: #784437;">clean_2bx_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_3ax_tau</span> = <span style="color: #37785e;">clean_3ax_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_3bx_tau</span> = <span style="color: #374478;">clean_3bx_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_4x_tau</span> =  <span style="color: #3f7178;">clean_4x_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_5x_tau</span> =  <span style="color: #783f5a;">clean_5x_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean transit times, alphafloat</span>
<span style="color: #268bd2;">clean_1ay_tau</span> = <span style="color: #3f7178;">clean_1ay_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_1by_tau</span> = <span style="color: #4f5c7e;">clean_1by_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_2ay_tau</span> = <span style="color: #5e7837;">clean_2ay_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_2by_tau</span> = <span style="color: #374478;">clean_2by_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_3ay_tau</span> = <span style="color: #7e544f;">clean_3ay_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_3by_tau</span> = <span style="color: #374478;">clean_3by_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_4y_tau</span> =  <span style="color: #5e7837;">clean_4y_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_5y_tau</span> =  <span style="color: #4f7e67;">clean_5y_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean transit times, from other experiments, alphafix</span>
<span style="color: #268bd2;">clean_6x_tau</span> =  <span style="color: #4f7e67;">clean_6x_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_7x_tau</span> =  <span style="color: #3f7178;">clean_7x_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_8x_tau</span> =  <span style="color: #783778;">clean_8x_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_9x_tau</span> =  <span style="color: #4f7e67;">clean_9x_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_10x_tau</span> = <span style="color: #784437;">clean_10x_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean transit times, from other experiments, alphafloat</span>
<span style="color: #268bd2;">clean_6y_tau</span> =  <span style="color: #783778;">clean_6y_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_7y_tau</span> =  <span style="color: #513f78;">clean_7y_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_8y_tau</span> =  <span style="color: #7e544f;">clean_8y_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_9y_tau</span> =  <span style="color: #7e544f;">clean_9y_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">clean_10y_tau</span> = <span style="color: #7a4f7e;">clean_10y_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean correlations, alphafix</span>
<span style="color: #268bd2;">clean_1ax_corr</span> = <span style="color: #78683f;">clean_1ax_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_1bx_corr</span> = <span style="color: #783f5a;">clean_1bx_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_2ax_corr</span> = <span style="color: #783f5a;">clean_2ax_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_2bx_corr</span> = <span style="color: #784437;">clean_2bx_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_3ax_corr</span> = <span style="color: #37785e;">clean_3ax_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_3bx_corr</span> = <span style="color: #374478;">clean_3bx_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_4x_corr</span> =  <span style="color: #3f7178;">clean_4x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_5x_corr</span> =  <span style="color: #783f5a;">clean_5x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean correlations, alphafloat</span>
<span style="color: #268bd2;">clean_1ay_corr</span> = <span style="color: #3f7178;">clean_1ay_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_1by_corr</span> = <span style="color: #4f5c7e;">clean_1by_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_2ay_corr</span> = <span style="color: #5e7837;">clean_2ay_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_2by_corr</span> = <span style="color: #374478;">clean_2by_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_3ay_corr</span> = <span style="color: #7e544f;">clean_3ay_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_3by_corr</span> = <span style="color: #374478;">clean_3by_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_4y_corr</span> =  <span style="color: #5e7837;">clean_4y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_5y_corr</span> =  <span style="color: #4f7e67;">clean_5y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean correlations, from other experiments, alphafix</span>
<span style="color: #268bd2;">clean_6x_corr</span> =  <span style="color: #4f7e67;">clean_6x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_7x_corr</span> =  <span style="color: #3f7178;">clean_7x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_8x_corr</span> =  <span style="color: #783778;">clean_8x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_9x_corr</span> =  <span style="color: #4f7e67;">clean_9x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_10x_corr</span> = <span style="color: #784437;">clean_10x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean correlations, from other experiments, alphafloat</span>
<span style="color: #268bd2;">clean_6y_corr</span> =  <span style="color: #783778;">clean_6y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_7y_corr</span> =  <span style="color: #513f78;">clean_7y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_8y_corr</span> =  <span style="color: #7e544f;">clean_8y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_9y_corr</span> =  <span style="color: #7e544f;">clean_9y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">clean_10y_corr</span> = <span style="color: #7a4f7e;">clean_10y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean fits, alphafix</span>
<span style="color: #268bd2;">clean_1ax_fit</span> = <span style="color: #78683f;">clean_1ax_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_1bx_fit</span> = <span style="color: #783f5a;">clean_1bx_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_2ax_fit</span> = <span style="color: #783f5a;">clean_2ax_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_2bx_fit</span> = <span style="color: #784437;">clean_2bx_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_3ax_fit</span> = <span style="color: #37785e;">clean_3ax_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_3bx_fit</span> = <span style="color: #374478;">clean_3bx_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_4x_fit</span> =  <span style="color: #3f7178;">clean_4x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_5x_fit</span> =  <span style="color: #783f5a;">clean_5x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean fits, alphafloat</span>
<span style="color: #268bd2;">clean_1ay_fit</span> = <span style="color: #3f7178;">clean_1ay_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_1by_fit</span> = <span style="color: #4f5c7e;">clean_1by_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_2ay_fit</span> = <span style="color: #5e7837;">clean_2ay_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_2by_fit</span> = <span style="color: #374478;">clean_2by_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_3ay_fit</span> = <span style="color: #7e544f;">clean_3ay_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_3by_fit</span> = <span style="color: #374478;">clean_3by_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_4y_fit</span> =  <span style="color: #5e7837;">clean_4y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_5y_fit</span> =  <span style="color: #4f7e67;">clean_5y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean fits, from other experiments, alphafix</span>
<span style="color: #268bd2;">clean_6x_fit</span> =  <span style="color: #4f7e67;">clean_6x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_7x_fit</span> =  <span style="color: #3f7178;">clean_7x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_8x_fit</span> =  <span style="color: #783778;">clean_8x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_9x_fit</span> =  <span style="color: #4f7e67;">clean_9x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_10x_fit</span> = <span style="color: #784437;">clean_10x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean fits, from other experiments, alphafloat</span>
<span style="color: #268bd2;">clean_6y_fit</span> =  <span style="color: #783778;">clean_6y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_7y_fit</span> =  <span style="color: #513f78;">clean_7y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_8y_fit</span> =  <span style="color: #7e544f;">clean_8y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_9y_fit</span> =  <span style="color: #7e544f;">clean_9y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">clean_10y_fit</span> = <span style="color: #7a4f7e;">clean_10y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty plots, alphafix</span>
<span style="color: #268bd2;">dirty_1ax_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">dirty_1ax_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_1bx_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #3f7178;">dirty_1bx_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_2ax_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #783f5a;">dirty_2ax_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_2bx_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #5e7837;">dirty_2bx_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_3ax_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f5c7e;">dirty_3ax_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_3bx_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #43783f;">dirty_3bx_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_4x_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #513f78;">dirty_4x_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_5x_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #5e7837;">dirty_5x_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty plots, alphafloat</span>
<span style="color: #268bd2;">dirty_1ay_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #707e4f;">dirty_1ay_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_1by_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #43783f;">dirty_1by_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_2ay_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #37785e;">dirty_2ay_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_2by_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #707e4f;">dirty_2by_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_3ay_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7a4f7e;">dirty_3ay_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_3by_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #3f7178;">dirty_3by_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_4y_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f5c7e;">dirty_4y_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_5y_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #513f78;">dirty_5y_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 107'</span>, <span style="color: #784437;">axis</span>=1)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty plots, from other experiments, alphafix</span>
<span style="color: #268bd2;">dirty_6x_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #7a4f7e;">dirty_6x_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 347'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_7x_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #5e7837;">dirty_7x_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 159'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_8x_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #5e7837;">dirty_8x_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 159'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_9x_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">dirty_9x_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 159'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_10x_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">dirty_10x_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 159'</span>, <span style="color: #784437;">axis</span>=1)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty plots, from other experiments, alphafloat</span>
<span style="color: #268bd2;">dirty_6y_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #707e4f;">dirty_6y_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 347'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_7y_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #43783f;">dirty_7y_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 159'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_8y_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #784437;">dirty_8y_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 159'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_9y_plot</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f5c7e;">dirty_9y_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 159'</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">dirty_10y_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f7e67;">dirty_10y_plot_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>, <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #5e7837;">drop</span>(<span style="color: #2aa198;">'Unnamed: 159'</span>, <span style="color: #784437;">axis</span>=1)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty transit times, alphafix</span>
<span style="color: #268bd2;">dirty_1ax_tau</span> = <span style="color: #7e544f;">dirty_1ax_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_1bx_tau</span> = <span style="color: #783f5a;">dirty_1bx_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_2ax_tau</span> = <span style="color: #3f7178;">dirty_2ax_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_2bx_tau</span> = <span style="color: #4f7e67;">dirty_2bx_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_3ax_tau</span> = <span style="color: #7a4f7e;">dirty_3ax_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_3bx_tau</span> = <span style="color: #43783f;">dirty_3bx_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_4x_tau</span> =  <span style="color: #784437;">dirty_4x_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_5x_tau</span> =  <span style="color: #707e4f;">dirty_5x_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty transit times, alphafloat</span>
<span style="color: #268bd2;">dirty_1ay_tau</span> = <span style="color: #4f7e67;">dirty_1ay_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_1by_tau</span> = <span style="color: #707e4f;">dirty_1by_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_2ay_tau</span> = <span style="color: #43783f;">dirty_2ay_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_2by_tau</span> = <span style="color: #43783f;">dirty_2by_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_3ay_tau</span> = <span style="color: #4f7e67;">dirty_3ay_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_3by_tau</span> = <span style="color: #374478;">dirty_3by_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_4y_tau</span> =  <span style="color: #784437;">dirty_4y_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_5y_tau</span> =  <span style="color: #37785e;">dirty_5y_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty transit times, from other experiments, alphafix</span>
<span style="color: #268bd2;">dirty_6x_tau</span> =  <span style="color: #7e544f;">dirty_6x_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_7x_tau</span> =  <span style="color: #78683f;">dirty_7x_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_8x_tau</span> =  <span style="color: #513f78;">dirty_8x_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_9x_tau</span> =  <span style="color: #783778;">dirty_9x_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_10x_tau</span> = <span style="color: #37785e;">dirty_10x_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty transit times, from other experiments, alphafloat</span>
<span style="color: #268bd2;">dirty_6y_tau</span> =  <span style="color: #4f7e67;">dirty_6y_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_7y_tau</span> =  <span style="color: #4f7e67;">dirty_7y_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_8y_tau</span> =  <span style="color: #78683f;">dirty_8y_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_9y_tau</span> =  <span style="color: #783778;">dirty_9y_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]
<span style="color: #268bd2;">dirty_10y_tau</span> = <span style="color: #4f5c7e;">dirty_10y_plot</span>[<span style="color: #2aa198;">'Time (ms)'</span>]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty correlations, alphafix</span>
<span style="color: #268bd2;">dirty_1ax_corr</span> = <span style="color: #7e544f;">dirty_1ax_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_1bx_corr</span> = <span style="color: #783f5a;">dirty_1bx_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_2ax_corr</span> = <span style="color: #3f7178;">dirty_2ax_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_2bx_corr</span> = <span style="color: #4f7e67;">dirty_2bx_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_3ax_corr</span> = <span style="color: #7a4f7e;">dirty_3ax_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_3bx_corr</span> = <span style="color: #43783f;">dirty_3bx_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_4x_corr</span> =  <span style="color: #784437;">dirty_4x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_5x_corr</span> =  <span style="color: #707e4f;">dirty_5x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty correlations, alphafloat</span>
<span style="color: #268bd2;">dirty_1ay_corr</span> = <span style="color: #4f7e67;">dirty_1ay_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_1by_corr</span> = <span style="color: #707e4f;">dirty_1by_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_2ay_corr</span> = <span style="color: #43783f;">dirty_2ay_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_2by_corr</span> = <span style="color: #43783f;">dirty_2by_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_3ay_corr</span> = <span style="color: #4f7e67;">dirty_3ay_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_3by_corr</span> = <span style="color: #374478;">dirty_3by_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_4y_corr</span> =  <span style="color: #784437;">dirty_4y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_5y_corr</span> =  <span style="color: #37785e;">dirty_5y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty correlations, from other experiments, alphafix</span>
<span style="color: #268bd2;">dirty_6x_corr</span> =  <span style="color: #7e544f;">dirty_6x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_7x_corr</span> =  <span style="color: #78683f;">dirty_7x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_8x_corr</span> =  <span style="color: #513f78;">dirty_8x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_9x_corr</span> =  <span style="color: #783778;">dirty_9x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_10x_corr</span> = <span style="color: #37785e;">dirty_10x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty correlations, from other experiments, alphafloat</span>
<span style="color: #268bd2;">dirty_6y_corr</span> =  <span style="color: #4f7e67;">dirty_6y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_7y_corr</span> =  <span style="color: #4f7e67;">dirty_7y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_8y_corr</span> =  <span style="color: #78683f;">dirty_8y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_9y_corr</span> =  <span style="color: #783778;">dirty_9y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]
<span style="color: #268bd2;">dirty_10y_corr</span> = <span style="color: #4f5c7e;">dirty_10y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 1:7:2]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty fits, alphafix</span>
<span style="color: #268bd2;">dirty_1ax_fit</span> = <span style="color: #7e544f;">dirty_1ax_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_1bx_fit</span> = <span style="color: #783f5a;">dirty_1bx_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_2ax_fit</span> = <span style="color: #3f7178;">dirty_2ax_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_2bx_fit</span> = <span style="color: #4f7e67;">dirty_2bx_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_3ax_fit</span> = <span style="color: #7a4f7e;">dirty_3ax_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_3bx_fit</span> = <span style="color: #43783f;">dirty_3bx_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_4x_fit</span> =  <span style="color: #784437;">dirty_4x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_5x_fit</span> =  <span style="color: #707e4f;">dirty_5x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty fits, alphafloat</span>
<span style="color: #268bd2;">dirty_1ay_fit</span> = <span style="color: #4f7e67;">dirty_1ay_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_1by_fit</span> = <span style="color: #707e4f;">dirty_1by_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_2ay_fit</span> = <span style="color: #43783f;">dirty_2ay_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_2by_fit</span> = <span style="color: #43783f;">dirty_2by_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_3ay_fit</span> = <span style="color: #4f7e67;">dirty_3ay_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_3by_fit</span> = <span style="color: #374478;">dirty_3by_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_4y_fit</span> =  <span style="color: #784437;">dirty_4y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_5y_fit</span> =  <span style="color: #37785e;">dirty_5y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty fits, from other experiments, alphafix</span>
<span style="color: #268bd2;">dirty_6x_fit</span> =  <span style="color: #7e544f;">dirty_6x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_7x_fit</span> =  <span style="color: #78683f;">dirty_7x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_8x_fit</span> =  <span style="color: #513f78;">dirty_8x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_9x_fit</span> =  <span style="color: #783778;">dirty_9x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_10x_fit</span> = <span style="color: #37785e;">dirty_10x_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty fits, from other experiments, alphafloat</span>
<span style="color: #268bd2;">dirty_6y_fit</span> =  <span style="color: #4f7e67;">dirty_6y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_7y_fit</span> =  <span style="color: #4f7e67;">dirty_7y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_8y_fit</span> =  <span style="color: #78683f;">dirty_8y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_9y_fit</span> =  <span style="color: #783778;">dirty_9y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]
<span style="color: #268bd2;">dirty_10y_fit</span> = <span style="color: #4f5c7e;">dirty_10y_plot</span>.<span style="color: #4f5c7e;">iloc</span>[:, 2:7:2]

<span style="color: #268bd2;">all_plot_clean</span> = [{<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #784437;">clean_1ax_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #4f5c7e;">clean_1ax_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #3f7178;">clean_1ax_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #43783f;">clean_1ay_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #7e544f;">clean_1ay_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #7e544f;">clean_1ay_fit</span>}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #2aa198;">'multipletau'</span>: {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #513f78;">clean_1bx_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #5e7837;">clean_1bx_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #3f7178;">clean_1bx_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #2aa198;">'alpha=float'</span>: {<span style="color: #2aa198;">'tau'</span>: <span style="color: #513f78;">clean_1by_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #4f7e67;">clean_1by_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #374478;">clean_1by_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #78683f;">clean_2ax_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #707e4f;">clean_2ax_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #784437;">clean_2ax_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #707e4f;">clean_2ay_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #3f7178;">clean_2ay_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #783778;">clean_2ay_fit</span>}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #2aa198;">'multipletau'</span>: {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #7e544f;">clean_2bx_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #783f5a;">clean_2bx_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #707e4f;">clean_2bx_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #2aa198;">'alpha=float'</span>: {<span style="color: #2aa198;">'tau'</span>: <span style="color: #3f7178;">clean_2by_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #7a4f7e;">clean_2by_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #7e544f;">clean_2by_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #3f7178;">clean_3ax_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #78683f;">clean_3ax_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #783f5a;">clean_3ax_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #374478;">clean_3ay_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #5e7837;">clean_3ay_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #783f5a;">clean_3ay_fit</span>}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #2aa198;">'multipletau'</span>: {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #3f7178;">clean_3bx_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #783778;">clean_3bx_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #783f5a;">clean_3bx_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #2aa198;">'alpha=float'</span>: {<span style="color: #2aa198;">'tau'</span>: <span style="color: #707e4f;">clean_3by_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #374478;">clean_3by_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #707e4f;">clean_3by_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #4f7e67;">clean_4x_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #374478;">clean_4x_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #37785e;">clean_4x_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #7e544f;">clean_4y_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #4f7e67;">clean_4y_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #3f7178;">clean_4y_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #7e544f;">clean_5x_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #78683f;">clean_5x_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #7e544f;">clean_5x_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #784437;">clean_5y_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #78683f;">clean_5y_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #37785e;">clean_5y_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #37785e;">clean_6x_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #784437;">clean_6x_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #78683f;">clean_6x_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #3f7178;">clean_6y_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #7a4f7e;">clean_6y_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #78683f;">clean_6y_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #707e4f;">clean_7x_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #5e7837;">clean_7x_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #4f7e67;">clean_7x_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #4f7e67;">clean_7y_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #783778;">clean_7y_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #783778;">clean_7y_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #7e544f;">clean_8x_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #78683f;">clean_8x_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #4f7e67;">clean_8x_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #707e4f;">clean_8y_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #784437;">clean_8y_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #783f5a;">clean_8y_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #7e544f;">clean_9x_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #783778;">clean_9x_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #3f7178;">clean_9x_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #78683f;">clean_9y_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #7e544f;">clean_9y_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #43783f;">clean_9y_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #707e4f;">clean_10x_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #43783f;">clean_10x_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #7a4f7e;">clean_10x_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #4f5c7e;">clean_10y_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #7e544f;">clean_10y_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #374478;">clean_10y_fit</span>}}}]
<span style="color: #268bd2;">all_plot_dirty</span> = [{<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #43783f;">dirty_1ax_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #7e544f;">dirty_1ax_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #374478;">dirty_1ax_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #37785e;">dirty_1ay_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #784437;">dirty_1ay_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #513f78;">dirty_1ay_fit</span>}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #2aa198;">'multipletau'</span>: {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #7a4f7e;">dirty_1bx_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #374478;">dirty_1bx_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #78683f;">dirty_1bx_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #2aa198;">'alpha=float'</span>: {<span style="color: #2aa198;">'tau'</span>: <span style="color: #5e7837;">dirty_1by_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #4f5c7e;">dirty_1by_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #513f78;">dirty_1by_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #78683f;">dirty_2ax_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #43783f;">dirty_2ax_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #4f7e67;">dirty_2ax_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #374478;">dirty_2ay_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #784437;">dirty_2ay_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #4f5c7e;">dirty_2ay_fit</span>}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #2aa198;">'multipletau'</span>: {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #5e7837;">dirty_2bx_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #374478;">dirty_2bx_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #783f5a;">dirty_2bx_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #2aa198;">'alpha=float'</span>: {<span style="color: #2aa198;">'tau'</span>: <span style="color: #707e4f;">dirty_2by_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #4f7e67;">dirty_2by_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #7a4f7e;">dirty_2by_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #3f7178;">dirty_3ax_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #783778;">dirty_3ax_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #783f5a;">dirty_3ax_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #783778;">dirty_3ay_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #7e544f;">dirty_3ay_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #783778;">dirty_3ay_fit</span>}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #2aa198;">'multipletau'</span>: {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #78683f;">dirty_3bx_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #783f5a;">dirty_3bx_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #7a4f7e;">dirty_3bx_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #2aa198;">'alpha=float'</span>: {<span style="color: #2aa198;">'tau'</span>: <span style="color: #707e4f;">dirty_3by_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #784437;">dirty_3by_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #783f5a;">dirty_3by_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #5e7837;">dirty_4x_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #7a4f7e;">dirty_4x_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #374478;">dirty_4x_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #78683f;">dirty_4y_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #707e4f;">dirty_4y_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #3f7178;">dirty_4y_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #7e544f;">dirty_5x_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #7a4f7e;">dirty_5x_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #5e7837;">dirty_5x_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #374478;">dirty_5y_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #3f7178;">dirty_5y_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #43783f;">dirty_5y_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #707e4f;">dirty_6x_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #78683f;">dirty_6x_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #783f5a;">dirty_6x_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #5e7837;">dirty_6y_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #4f5c7e;">dirty_6y_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #4f5c7e;">dirty_6y_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #7a4f7e;">dirty_7x_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #5e7837;">dirty_7x_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #784437;">dirty_7x_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #783778;">dirty_7y_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #707e4f;">dirty_7y_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #4f5c7e;">dirty_7y_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #4f5c7e;">dirty_8x_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #43783f;">dirty_8x_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #513f78;">dirty_8x_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #7e544f;">dirty_8y_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #4f7e67;">dirty_8y_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #783778;">dirty_8y_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #5e7837;">dirty_9x_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #783f5a;">dirty_9x_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #7a4f7e;">dirty_9x_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #5e7837;">dirty_9y_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #7e544f;">dirty_9y_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #783f5a;">dirty_9y_fit</span>}}},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   {<span style="color: #2aa198;">'tttr2xfcs'</span> : {<span style="color: #2aa198;">'alpha=1'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #707e4f;">dirty_10x_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #784437;">dirty_10x_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #5e7837;">dirty_10x_fit</span>},
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'alpha=float'</span> : {<span style="color: #2aa198;">'tau'</span>: <span style="color: #784437;">dirty_10y_tau</span>, <span style="color: #2aa198;">'corr'</span>: <span style="color: #3f7178;">dirty_10y_corr</span>, <span style="color: #2aa198;">'fit'</span>: <span style="color: #43783f;">dirty_10y_fit</span>}}}]
<span style="color: #268bd2;">index</span> = [<span style="color: #2aa198;">'no correction'</span>, <span style="color: #2aa198;">'delete'</span>, <span style="color: #2aa198;">'delete and shift'</span>, <span style="color: #2aa198;">'w=1-pred'</span>, <span style="color: #2aa198;">'w=random'</span>, <span style="color: #2aa198;">'w=0'</span>, <span style="color: #2aa198;">'w=0.2'</span>, <span style="color: #2aa198;">'w=0.4'</span>, <span style="color: #2aa198;">'w=0.6'</span>, <span style="color: #2aa198;">'w=0.8'</span>]

</pre>
</div>
</details>
</li>
<li>now, let's plot correlations and fits for all correction methods:

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">fig</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #78683f;">figure</span>(<span style="color: #784437;">figsize</span>=(12, 40))
<span style="color: #268bd2;">rows</span> = <span style="color: #657b83; font-weight: bold;">len</span>(<span style="color: #43783f;">index</span>) + 3
<span style="color: #268bd2;">counter</span> = 1
<span style="color: #268bd2;">palette_clean</span> = [<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[0], <span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[2]]
<span style="color: #268bd2;">palette_dirty</span> = [<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[3], <span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[4], <span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[5]]
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span>, <span style="color: #43783f;">correction_clean</span>, <span style="color: #7e544f;">correction_dirty</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">zip</span>(<span style="color: #43783f;">index</span>, <span style="color: #513f78;">all_plot_clean</span>, <span style="color: #513f78;">all_plot_dirty</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> (<span style="color: #4f7e67;">method_clean</span>, <span style="color: #783f5a;">fitplot_clean</span>), (<span style="color: #5e7837;">method_dirty</span>, <span style="color: #784437;">fitplot_dirty</span>) <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">zip</span>(<span style="color: #43783f;">correction_clean</span>.<span style="color: #374478;">items</span>(), <span style="color: #7e544f;">correction_dirty</span>.<span style="color: #374478;">items</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> (<span style="color: #374478;">fit_clean</span>, <span style="color: #7a4f7e;">plots_clean</span>), (<span style="color: #7e544f;">fit_dirty</span>, <span style="color: #4f7e67;">plots_dirty</span>) <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">zip</span>(<span style="color: #783f5a;">fitplot_clean</span>.<span style="color: #374478;">items</span>(), <span style="color: #784437;">fitplot_dirty</span>.<span style="color: #374478;">items</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># clean</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #268bd2;">fit_clean</span> == <span style="color: #2aa198;">'alpha=1'</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">fit_color</span> = <span style="color: #2aa198;">'r'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">else</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">fit_color</span>= <span style="color: #2aa198;">'b'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #7a4f7e;">subplot</span>(<span style="color: #43783f;">rows</span>, 4, <span style="color: #37785e;">counter</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">ax</span>.<span style="color: #784437;">set_prop_cycle</span>(<span style="color: #78683f;">color</span>=<span style="color: #3f7178;">palette_clean</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">lines1</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #4f5c7e;">semilogx</span>(<span style="color: #7a4f7e;">plots_clean</span>[<span style="color: #2aa198;">'tau'</span>], <span style="color: #7a4f7e;">plots_clean</span>[<span style="color: #2aa198;">'corr'</span>], <span style="color: #2aa198;">'.'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #4f5c7e;">semilogx</span>(<span style="color: #7a4f7e;">plots_clean</span>[<span style="color: #2aa198;">'tau'</span>], <span style="color: #7a4f7e;">plots_clean</span>[<span style="color: #2aa198;">'fit'</span>], <span style="color: #43783f;">f</span><span style="color: #2aa198;">'</span><span style="color: #268bd2;">{fit_color}</span><span style="color: #2aa198;">-'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">xmin</span> = <span style="color: #7a4f7e;">plots_clean</span>[<span style="color: #2aa198;">'fit'</span>].<span style="color: #513f78;">dropna</span>().<span style="color: #43783f;">index</span>[0]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">xmax</span> = <span style="color: #7a4f7e;">plots_clean</span>[<span style="color: #2aa198;">'fit'</span>].<span style="color: #513f78;">dropna</span>().<span style="color: #43783f;">index</span>[-1]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">xlims</span> = [<span style="color: #7a4f7e;">plots_clean</span>[<span style="color: #2aa198;">'tau'</span>][<span style="color: #7a4f7e;">xmin</span>] - 0.5*<span style="color: #7a4f7e;">plots_clean</span>[<span style="color: #2aa198;">'tau'</span>][<span style="color: #7a4f7e;">xmin</span>], <span style="color: #7a4f7e;">plots_clean</span>[<span style="color: #2aa198;">'tau'</span>][<span style="color: #783778;">xmax</span>]+0.5*<span style="color: #7a4f7e;">plots_clean</span>[<span style="color: #2aa198;">'tau'</span>][<span style="color: #783778;">xmax</span>]]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ylims</span> = [<span style="color: #707e4f;">np</span>.<span style="color: #5e7837;">min</span>(<span style="color: #707e4f;">np</span>.<span style="color: #5e7837;">min</span>(<span style="color: #7a4f7e;">plots_clean</span>[<span style="color: #2aa198;">'fit'</span>]))-0.01, <span style="color: #707e4f;">np</span>.<span style="color: #4f7e67;">max</span>(<span style="color: #707e4f;">np</span>.<span style="color: #4f7e67;">max</span>(<span style="color: #7a4f7e;">plots_clean</span>[<span style="color: #2aa198;">'fit'</span>]))+0.01]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #7e544f;">ax</span>, <span style="color: #4f5c7e;">xlim</span>=<span style="color: #513f78;">xlims</span>, <span style="color: #43783f;">ylim</span>=<span style="color: #3f7178;">ylims</span>, <span style="color: #783f5a;">title</span>=<span style="color: #43783f;">f</span><span style="color: #2aa198;">'clean | {i}\n{method_clean} | {fit_clean}'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #783f5a;">xlabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'$\tau$ (ms)'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'Correlation G($\tau$)'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">counter</span> += 1
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># dirty</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #7a4f7e;">subplot</span>(<span style="color: #43783f;">rows</span>, 4, <span style="color: #37785e;">counter</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">ax</span>.<span style="color: #784437;">set_prop_cycle</span>(<span style="color: #78683f;">color</span>=<span style="color: #3f7178;">palette_dirty</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">lines2</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #4f5c7e;">semilogx</span>(<span style="color: #4f7e67;">plots_dirty</span>[<span style="color: #2aa198;">'tau'</span>], <span style="color: #4f7e67;">plots_dirty</span>[<span style="color: #2aa198;">'corr'</span>], <span style="color: #2aa198;">'.'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #4f5c7e;">semilogx</span>(<span style="color: #4f7e67;">plots_dirty</span>[<span style="color: #2aa198;">'tau'</span>], <span style="color: #4f7e67;">plots_dirty</span>[<span style="color: #2aa198;">'fit'</span>], <span style="color: #43783f;">f</span><span style="color: #2aa198;">'</span><span style="color: #268bd2;">{fit_color}</span><span style="color: #2aa198;">-'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">xmin</span> = <span style="color: #4f7e67;">plots_dirty</span>[<span style="color: #2aa198;">'fit'</span>].<span style="color: #513f78;">dropna</span>().<span style="color: #43783f;">index</span>[0]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">xmax</span> = <span style="color: #4f7e67;">plots_dirty</span>[<span style="color: #2aa198;">'fit'</span>].<span style="color: #513f78;">dropna</span>().<span style="color: #43783f;">index</span>[-1]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">xlims</span> = [<span style="color: #4f7e67;">plots_dirty</span>[<span style="color: #2aa198;">'tau'</span>][<span style="color: #7a4f7e;">xmin</span>] - 0.5*<span style="color: #4f7e67;">plots_dirty</span>[<span style="color: #2aa198;">'tau'</span>][<span style="color: #7a4f7e;">xmin</span>], <span style="color: #4f7e67;">plots_dirty</span>[<span style="color: #2aa198;">'tau'</span>][<span style="color: #783778;">xmax</span>]+0.5*<span style="color: #4f7e67;">plots_dirty</span>[<span style="color: #2aa198;">'tau'</span>][<span style="color: #783778;">xmax</span>]]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ylims</span> = [<span style="color: #707e4f;">np</span>.<span style="color: #5e7837;">min</span>(<span style="color: #707e4f;">np</span>.<span style="color: #5e7837;">min</span>(<span style="color: #4f7e67;">plots_dirty</span>[<span style="color: #2aa198;">'fit'</span>]))-0.01, <span style="color: #707e4f;">np</span>.<span style="color: #4f7e67;">max</span>(<span style="color: #707e4f;">np</span>.<span style="color: #4f7e67;">max</span>(<span style="color: #4f7e67;">plots_dirty</span>[<span style="color: #2aa198;">'fit'</span>]))+0.01]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #7e544f;">ax</span>, <span style="color: #4f5c7e;">xlim</span>=<span style="color: #513f78;">xlims</span>, <span style="color: #43783f;">ylim</span>=<span style="color: #3f7178;">ylims</span>, <span style="color: #783f5a;">title</span>=<span style="color: #43783f;">f</span><span style="color: #2aa198;">'dirty | {i}\n{method_dirty} | {fit_dirty}'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #783f5a;">xlabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'$\tau$ (ms)'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'Correlation G($\tau$)'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #37785e;">counter</span> &lt; <span style="color: #268bd2;">3</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">handles</span> = <span style="color: #3f7178;">lines1</span> + <span style="color: #4f5c7e;">lines2</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">fig</span>.<span style="color: #707e4f;">legend</span>(<span style="color: #513f78;">handles</span>, [<span style="color: #2aa198;">'20 nM AF48816_T182s_1'</span>, <span style="color: #2aa198;">'20 nM AF48822_T254s_1'</span>, <span style="color: #2aa198;">'20 nM AF48826_T302s_1'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #2aa198;">'DiO LUV 10uM in 20 nM AF4884_T39s_1'</span>, <span style="color: #2aa198;">'DiO LUV 10uM in 20 nM AF4887_T75s_1'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #2aa198;">'DiO LUV 10uM in 20 nM AF4889_T106s_1'</span>],
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #783778;">loc</span>=9, <span style="color: #783f5a;">ncol</span>=2, <span style="color: #783778;">bbox_to_anchor</span>=(0.5, 0.98))
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">counter</span> += 1

<span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">suptitle</span>(<span style="color: #2aa198;">'AlexaFluor488 (clean) vs AlexaFluor488 + Dio LUVs (dirty)\n- all correlations and fits -'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #43783f;">size</span>=20, <span style="color: #513f78;">y</span>=1)
<span style="color: #4f7e67;">plt</span>.<span style="color: #513f78;">tight_layout</span>(<span style="color: #7a4f7e;">rect</span>=(0, 0, 1, 0.98))
</pre>
</div>
</li>
</ul>



<figure>
<p><img src="./jupyter/analysis3-all-plot.png" class="img-responsive" alt="analysis3-all-plot.png">
</p>
</figure>
</div>
</div>

<div id="outline-container-sec-2-1-11" class="outline-4">
<h4 id="sec-2-1-11"><span class="section-number-4">2.1.11</span> Analysis 4: show examples of all experimental traces</h4>
<div class="outline-text-4" id="text-2-1-11">
<ul class="org-ul">
<li>to interprete the correlations correctly, let's plot the underlying
experimental data.
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #707e4f;">cd</span> ~/<span style="color: #784437;">Programme</span>/<span style="color: #784437;">drmed</span>-<span style="color: #78683f;">collections</span>/<span style="color: #784437;">data</span>-<span style="color: #859900; font-weight: bold;">from</span>-<span style="color: #5e7837;">Eggeling</span>-<span style="color: #7a4f7e;">group</span>/<span style="color: #374478;">brightbursts</span>
</pre>
</div>

<pre class="example">
/home/lex/Programme/drmed-collections/data-from-Eggeling-group/brightbursts
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #707e4f;">cd</span> /<span style="color: #5e7837;">beegfs</span>/<span style="color: #7a4f7e;">ye53nis</span>/<span style="color: #784437;">drmed</span>-<span style="color: #784437;">git</span>
</pre>
</div>

<pre class="example">
/beegfs/ye53nis/drmed-git
</pre>
</li>

<li>load modules
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #7a4f7e;">logging</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #7e544f;">os</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #513f78;">sys</span>

<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #37785e;">matplotlib</span>.<span style="color: #4f7e67;">pyplot</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f7e67;">plt</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f5c7e;">numpy</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #707e4f;">np</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #5e7837;">pandas</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #783778;">pd</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #78683f;">seaborn</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f5c7e;">sns</span>

<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #43783f;">pathlib</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #78683f;">Path</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #4f7e67;">pprint</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f7e67;">pprint</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #513f78;">tensorflow</span>.<span style="color: #784437;">keras</span>.<span style="color: #43783f;">optimizers</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #783778;">Adam</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #5e7837;">mlflow</span>.<span style="color: #784437;">keras</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #783f5a;">load_model</span>

<span style="color: #268bd2;">FLUOTRACIFY_PATH</span> = <span style="color: #2aa198;">'/beegfs/ye53nis/drmed-git/src/'</span>
<span style="color: #513f78;">sys</span>.<span style="color: #513f78;">path</span>.<span style="color: #5e7837;">append</span>(<span style="color: #784437;">FLUOTRACIFY_PATH</span>)
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #783778;">fluotracify</span>.<span style="color: #4f5c7e;">applications</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #3f7178;">corr_fit_object</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #78683f;">cfo</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #783778;">fluotracify</span>.<span style="color: #3f7178;">training</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #783778;">build_model</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #374478;">bm</span>

<span style="color: #7a4f7e;">logging</span>.<span style="color: #7e544f;">basicConfig</span>(<span style="color: #43783f;">filename</span>=<span style="color: #2aa198;">"/beegfs/ye53nis/drmed-git/data/exp-220120-correlate-ptu/2022-02-15_experiment-overview/exps.log"</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">filemode</span>=<span style="color: #2aa198;">'w'</span>, <span style="color: #657b83; font-weight: bold;">format</span>=<span style="color: #2aa198;">'%(asctime)s - %(message)s'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">force</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">level</span>=<span style="color: #7a4f7e;">logging</span>.<span style="color: #783778;">DEBUG</span>)
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">sns.set_theme(style="whitegrid")</span>
<span style="color: #4f5c7e;">sns</span>.<span style="color: #783778;">set</span>()
</pre>
</div>

<pre class="example">
2022-02-17 19:45:03.282584: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libcudart.so.11.0'; dlerror: libcudart.so.11.0: cannot open shared object file: No such file or directory
2022-02-17 19:45:03.282645: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
</pre>
</li>

<li>first, we prepare our correction functions as we did before
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">class</span> <span style="color: #b58900;">ParameterClass</span>():
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">"""Stores parameters for correlation """</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">__init__</span>(<span style="color: #859900; font-weight: bold;">self</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># Where the data is stored.</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #784437;">data</span> = []
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #7a4f7e;">objectRef</span> = []
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #78683f;">subObjectRef</span> = []
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #783778;">colors</span> = [<span style="color: #2aa198;">'blue'</span>, <span style="color: #2aa198;">'green'</span>, <span style="color: #2aa198;">'red'</span>, <span style="color: #2aa198;">'cyan'</span>, <span style="color: #2aa198;">'magenta'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #2aa198;">'yellow'</span>, <span style="color: #2aa198;">'black'</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #4f5c7e;">numOfLoaded</span> = 0
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># very fast from Ncasc ~ 14 onwards</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #3f7178;">NcascStart</span> = 0
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #4f7e67;">NcascEnd</span> = 30  <span style="color: #93a1a1;"># 25</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #3f7178;">Nsub</span> = 6  <span style="color: #93a1a1;"># 6</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #5e7837;">photonLifetimeBin</span> = 10  <span style="color: #93a1a1;"># used for photon decay</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">self</span>.<span style="color: #513f78;">photonCountBin</span> = 1  <span style="color: #93a1a1;"># used for time series</span>

<span style="color: #268bd2;">data_path</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">"/beegfs/ye53nis/data"</span>)
<span style="color: #268bd2;">output_path</span> = <span style="color: #2aa198;">"/beegfs/ye53nis/drmed-git/data/exp-220120-correlate-ptu/2022-02-15_experiment-overview"</span>
<span style="color: #268bd2;">logged_model</span> = <span style="color: #2aa198;">'file:///beegfs/ye53nis/drmed-git/data/mlruns/8/00f2635d9fa2463c9a066722163405be/artifacts/model'</span>
<span style="color: #268bd2;">par_obj</span> = <span style="color: #4f7e67;">ParameterClass</span>()

<span style="color: #268bd2;">loaded_model</span> = <span style="color: #783f5a;">load_model</span>(<span style="color: #783f5a;">logged_model</span>, <span style="color: #657b83; font-weight: bold;">compile</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="color: #374478;">loaded_model</span>.<span style="color: #374478;">compile</span>(<span style="color: #783f5a;">loss</span>=<span style="color: #374478;">bm</span>.<span style="color: #783f5a;">binary_ce_dice_loss</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #7a4f7e;">optimizer</span>=<span style="color: #783778;">Adam</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #43783f;">metrics</span> = <span style="color: #374478;">bm</span>.<span style="color: #374478;">unet_metrics</span>([0.1, 0.3, 0.5, 0.7, 0.9]))
<span style="color: #374478;">bm</span>.<span style="color: #374478;">prepare_model</span>(<span style="color: #374478;">loaded_model</span>, [2**14, 2**13, 2**12, 2**15, 2**13])
</pre>
</div>

<pre class="example">
2022-02-17 19:45:12.370211: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory
2022-02-17 19:45:12.370284: W tensorflow/stream_executor/cuda/cuda_driver.cc:269] failed call to cuInit: UNKNOWN ERROR (303)
2022-02-17 19:45:12.370324: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (node305): /proc/driver/nvidia/version does not exist
2022-02-17 19:45:12.370974: I tensorflow/core/platform/cpu_feature_guard.cc:151] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 AVX512F FMA
To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
WARNING:tensorflow:Unable to restore custom metric. Please ensure that the layer implements `get_config` and `from_config` when saving. In addition, please use the `custom_objects` arg when calling `load_model()`.
</pre>
</li>

<li>look at first <b>bright cluster artifacts</b> folder: <code>1911DD_alexafluor+LUVs</code>
<ul class="org-ul">
<li><b>clean</b> = 20nM Alexa Fluor 488, a green-fluorescent dye, pH-insensitive,
relatively bright and photostable. <b>We expect a diffusion constant of
350-450 um2/s = 25-32us transit times</b>
</li>
<li><b>dirty</b> = 20nM Alexa Fluor 488 + 10uM DiO LUV → 10uM of lipids, labelled
with the dye DiO (also green) in the membrane. <b>we expect there to be the
fast fraction with 25-32us transit times as above and a slow fraction
with a diffusion constant of 5 um2/s = 2250us transit time</b>
<ul class="org-ul">
<li>LUV preparation method: extrusion (LUVET), detergent dialysis (DOV), reverse
evaporation (REV) or ethanol injection? → <b>extrusion through 100nm filter</b>
</li>
<li>large unilamellar vesicles prepared from large multilamellar vesicles
(LMVs). Here they are 100nm in diameter or larger. Are stable
on storage.
</li>
<li>where is the dye?? In the membrane or inside the vesicle or both?? → in
the membrane. We don't expect to see the diffusion of DiO in the
membrane, but rather the diffusion of the LUV itself, because the one
in the membrane can not go in and out of the excitation volume
</li>
<li>which fitting methods should we choose? → we should do 3D fitting with
equation 1B, fix the AR1 (propert of microscope setup which converts
between txy and tz) between 4.5 and 6, and alpha at 1 (no anomalous
diffusion).  We can also try 2 component fitting!
</li>
</ul>
</li>
<li>let's plot traces, predictions, and correlations:
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">path_clean</span> = <span style="color: #513f78;">data_path</span> / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/clean_subsample/'</span>
<span style="color: #268bd2;">path_dirty</span> = <span style="color: #513f78;">data_path</span> / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/dirty_subsample/'</span>
<span style="color: #268bd2;">files_clean</span> = [<span style="color: #5e7837;">path_clean</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #5e7837;">path_clean</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]
<span style="color: #268bd2;">files_dirty</span> = [<span style="color: #783778;">path_dirty</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #783778;">path_dirty</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]
<span style="color: #268bd2;">traces</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">predtraces</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">preds</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">corrs</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">mt_bin</span> = <span style="color: #3f7178;">1e</span>-3


<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #784437;">myfile</span> <span style="color: #859900; font-weight: bold;">in</span> (<span style="color: #37785e;">files_dirty</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ptufile</span> = <span style="color: #78683f;">cfo</span>.<span style="color: #5e7837;">PicoObject</span>(<span style="color: #784437;">myfile</span>, <span style="color: #37785e;">par_obj</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">predictTimeSeries</span>(<span style="color: #43783f;">model</span>=<span style="color: #374478;">loaded_model</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #4f5c7e;">scaler</span>=<span style="color: #2aa198;">'minmax'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">mt_name</span> = <span style="color: #43783f;">f</span><span style="color: #2aa198;">'us_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #707e4f;">timeseries_name</span>=<span style="color: #4f7e67;">mt_name</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">photonCountBin</span>=<span style="color: #37785e;">mt_bin</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #37785e;">predictTimeSeries</span>(<span style="color: #43783f;">model</span>=<span style="color: #374478;">loaded_model</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #4f5c7e;">scaler</span>=<span style="color: #2aa198;">'minmax'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #374478;">name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">trueTimeArr</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #374478;">k</span>, <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>[<span style="color: #3f7178;">key</span>].<span style="color: #374478;">items</span>():
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"PREPRO"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"1.0"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">predtraces</span> = <span style="color: #783778;">pd</span>.<span style="color: #7e544f;">concat</span>([<span style="color: #3f7178;">predtraces</span>, <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>(<span style="color: #707e4f;">i</span>, <span style="color: #784437;">columns</span>=[<span style="color: #43783f;">f</span><span style="color: #2aa198;">'</span><span style="color: #268bd2;">{key}</span><span style="color: #2aa198;">_</span><span style="color: #268bd2;">{k}</span><span style="color: #2aa198;">'</span>])],
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">axis</span>=1)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">elif</span> <span style="color: #2aa198;">"1.0"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">traces</span> = <span style="color: #783778;">pd</span>.<span style="color: #7e544f;">concat</span>([<span style="color: #513f78;">traces</span>, <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>(<span style="color: #707e4f;">i</span>, <span style="color: #784437;">columns</span>=[<span style="color: #43783f;">f</span><span style="color: #2aa198;">'</span><span style="color: #268bd2;">{key}</span><span style="color: #2aa198;">_</span><span style="color: #268bd2;">{k}</span><span style="color: #2aa198;">'</span>])],
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">axis</span>=1)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">preds</span> = <span style="color: #783778;">pd</span>.<span style="color: #7e544f;">concat</span>([<span style="color: #784437;">preds</span>, <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>(<span style="color: #784437;">data</span>=<span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">predictions</span>[<span style="color: #3f7178;">key</span>][<span style="color: #374478;">k</span>],
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">columns</span>=[<span style="color: #43783f;">f</span><span style="color: #2aa198;">'</span><span style="color: #268bd2;">{key}</span><span style="color: #2aa198;">_</span><span style="color: #268bd2;">{k}</span><span style="color: #2aa198;">'</span>])], <span style="color: #784437;">axis</span>=1)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">elif</span> <span style="color: #2aa198;">"0.001"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #374478;">name</span>=(<span style="color: #3f7178;">key</span>, <span style="color: #374478;">k</span>))

<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span>, <span style="color: #43783f;">item</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>[<span style="color: #5e7837;">m</span>].<span style="color: #374478;">items</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">save_autocorrelation</span>(<span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>, <span style="color: #783778;">method</span>=<span style="color: #5e7837;">m</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #37785e;">output_path</span>=<span style="color: #37785e;">output_path</span>)
<span style="color: #3f7178;">predtraces</span>.<span style="color: #513f78;">to_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'alexadirty_predtraces.csv'</span>)
<span style="color: #513f78;">traces</span>.<span style="color: #513f78;">to_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'alexadirty_traces.csv'</span>)
<span style="color: #784437;">preds</span>.<span style="color: #513f78;">to_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'alexadirty_preds.csv'</span>)
</pre>
</div>

<pre class="example">
/home/lex/Programme/miniconda3/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
/home/lex/Programme/miniconda3/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
/home/lex/Programme/miniconda3/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
</pre>
</li>

<li>now I fitted the example traces using <a href="https://dwaithe.github.io/FCSfitJS/">https://dwaithe.github.io/FCSfitJS/</a>.
Because of disk space issues, the .ptu files above are not available in
this git repository. Rather, I saved out the traces, prediction traces and
predictions and loaded them in, together with the correlations and fits:
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">fit_dirty_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/dirty/alexadirty_multipletau_plot.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">fit_dirty_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/dirty/alexadirty_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">fit_clean_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/clean/alexaclean_multipletau_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">fit_clean_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/clean/alexaclean_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_dirty_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/dirty/alexadirty_multipletau_plot.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_dirty_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/dirty/alexadirty_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_clean_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/clean/alexaclean_multipletau_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_clean_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/clean/alexaclean_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)

<span style="color: #268bd2;">preds_dirty</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/dirty/alexadirty_preds.csv'</span>, <span style="color: #784437;">index_col</span>=0)
<span style="color: #268bd2;">predtraces_dirty</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/dirty/alexadirty_predtraces.csv'</span>, <span style="color: #784437;">index_col</span>=0)
<span style="color: #268bd2;">traces_dirty</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/dirty/alexadirty_traces.csv'</span>, <span style="color: #784437;">index_col</span>=0)
<span style="color: #268bd2;">preds_clean</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/clean/alexaclean_preds.csv'</span>, <span style="color: #784437;">index_col</span>=0)
<span style="color: #268bd2;">predtraces_clean</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/clean/alexaclean_predtraces.csv'</span>, <span style="color: #784437;">index_col</span>=0)
<span style="color: #268bd2;">traces_clean</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'1911DD_alexafluor488+LUVs/clean/alexaclean_traces.csv'</span>, <span style="color: #784437;">index_col</span>=0)
<span style="color: #7a4f7e;">fit_clean_mt</span>.<span style="color: #784437;">columns</span>
</pre>
</div>

<pre class="example">
Index(['2022-02-02_multipletau_CH2_BIN0dot001_us_20 nM AF4887_T74s_1_correlation-CH2_2 fitted model: ',
       '2022-02-02_multipletau_CH2_BIN0dot001_us_20 nM AF48896_T1142s_1_correlation-CH2_2 fitted model: ',
       '2022-02-02_multipletau_CH2_BIN0dot001_us_20 nM AF48897_T1160s_1_correlation-CH2_2 fitted model: '],
      dtype='object')
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">plotdata</span> = <span style="color: #657b83; font-weight: bold;">zip</span>(<span style="color: #37785e;">traces_dirty</span>.<span style="color: #374478;">items</span>(), <span style="color: #374478;">traces_clean</span>.<span style="color: #374478;">items</span>(), <span style="color: #37785e;">predtraces_dirty</span>.<span style="color: #374478;">items</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #513f78;">predtraces_clean</span>.<span style="color: #374478;">items</span>(), <span style="color: #4f7e67;">preds_dirty</span>.<span style="color: #374478;">items</span>(), <span style="color: #707e4f;">preds_clean</span>.<span style="color: #374478;">items</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #4f5c7e;">corr_dirty_mt</span>.<span style="color: #374478;">items</span>(), <span style="color: #37785e;">corr_clean_mt</span>.<span style="color: #374478;">items</span>(), <span style="color: #7a4f7e;">corr_dirty_tt</span>.<span style="color: #374478;">items</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #707e4f;">corr_clean_tt</span>.<span style="color: #374478;">items</span>(), <span style="color: #43783f;">fit_dirty_mt</span>.<span style="color: #374478;">items</span>(), <span style="color: #7a4f7e;">fit_clean_mt</span>.<span style="color: #374478;">items</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #374478;">fit_dirty_tt</span>.<span style="color: #374478;">items</span>(), <span style="color: #37785e;">fit_clean_tt</span>.<span style="color: #374478;">items</span>())
<span style="color: #268bd2;">fig</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #78683f;">figure</span>(<span style="color: #784437;">figsize</span>=(16, 20))
<span style="color: #268bd2;">gs</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">add_gridspec</span>(12, 4)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span>, ((<span style="color: #784437;">td_n</span>, <span style="color: #7e544f;">td_v</span>), (<span style="color: #3f7178;">tc_n</span>, <span style="color: #5e7837;">tc_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #4f5c7e;">ptd_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #783f5a;">ptc_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #783778;">pd_v</span>),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #783f5a;">pc_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #5e7837;">cdm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #7e544f;">ccm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #4f5c7e;">cdt_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #4f7e67;">cct_v</span>),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #4f7e67;">fdm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #783778;">fcm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #37785e;">fdt_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #78683f;">fct_v</span>)) <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">enumerate</span>(<span style="color: #513f78;">plotdata</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #707e4f;">i</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax0</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4, 0:2])
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #7e544f;">ax0</span>, <span style="color: #784437;">data</span>=(<span style="color: #3f7178;">tc_n</span>, <span style="color: #5e7837;">tc_v</span>))
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax1</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4, 2:4])
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #43783f;">ax1</span>, <span style="color: #784437;">data</span>=(<span style="color: #784437;">td_n</span>, <span style="color: #7e544f;">td_v</span>))
<span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">ax0</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'time steps in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'photons'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #43783f;">ax1</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'time steps in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'photons'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax2</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4+1, 0:2], <span style="color: #3f7178;">sharex</span>=<span style="color: #7e544f;">ax0</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #37785e;">ax2</span>, <span style="color: #784437;">data</span>=<span style="color: #783f5a;">ptc_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[0], <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #37785e;">ax2</span>, <span style="color: #784437;">data</span>=<span style="color: #783f5a;">pc_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax3</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4+1, 2:4], <span style="color: #3f7178;">sharex</span>=<span style="color: #43783f;">ax1</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #7a4f7e;">ax3</span>, <span style="color: #784437;">data</span>=<span style="color: #4f5c7e;">ptd_v</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #7a4f7e;">ax3</span>, <span style="color: #784437;">data</span>=<span style="color: #783778;">pd_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #37785e;">ax2</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'time steps in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'probability of artifact'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #7a4f7e;">ax3</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'time steps in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'probability of artifact'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax4</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4+2:<span style="color: #707e4f;">i</span>*4+4, 0], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'multipletau w/ us bin'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #513f78;">ax4</span>, <span style="color: #784437;">data</span>=<span style="color: #7e544f;">ccm_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #513f78;">ax4</span>, <span style="color: #784437;">data</span>=<span style="color: #783778;">fcm_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax5</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4+2:<span style="color: #707e4f;">i</span>*4+4, 1], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'tttr2xfcs on arrival times'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #5e7837;">ax5</span>, <span style="color: #784437;">data</span>=<span style="color: #4f7e67;">cct_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #5e7837;">ax5</span>, <span style="color: #784437;">data</span>=<span style="color: #78683f;">fct_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">ax4</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'tau in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'Correlation G(tau)'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #5e7837;">ax5</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'tau in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'Correlation G(tau)'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax6</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4+2:<span style="color: #707e4f;">i</span>*4+4, 2], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'multipletau w/ us bin'</span>, <span style="color: #783778;">sharey</span>=<span style="color: #513f78;">ax4</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #374478;">ax6</span>, <span style="color: #784437;">data</span>=<span style="color: #5e7837;">cdm_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #374478;">ax6</span>, <span style="color: #784437;">data</span>=<span style="color: #4f7e67;">fdm_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax7</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4+2:<span style="color: #707e4f;">i</span>*4+4, 3], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'tttr2xfcs on arrival times'</span>, <span style="color: #783778;">sharey</span>=<span style="color: #5e7837;">ax5</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #783778;">ax7</span>, <span style="color: #784437;">data</span>=<span style="color: #4f5c7e;">cdt_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #783778;">ax7</span>, <span style="color: #784437;">data</span>=<span style="color: #37785e;">fdt_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">ax6</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'tau in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'Correlation G(tau)'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">ax7</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'tau in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'Correlation G(tau)'</span>)
<span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">suptitle</span>(<span style="color: #2aa198;">'AlexaFluor488 (left) vs AF488 + DiO-LUVs (right)'</span>, <span style="color: #43783f;">size</span>=20)
<span style="color: #43783f;">gs</span>.<span style="color: #513f78;">tight_layout</span>(<span style="color: #4f7e67;">fig</span>, <span style="color: #7a4f7e;">rect</span>=[0, 0, 1, 0.99])

</pre>
</div>
</li>

<li>the results:
<img src="./jupyter/analysis4-1911DD-alexa-luvs.png" class="img-responsive" alt="analysis4-1911DD-alexa-luvs.png">
</li>
</ul>
</li>

<li>look at second <b>bright cluster artifacts</b> folder: <code>191111_Pex5_1</code>
<ul class="org-ul">
<li><b>clean</b> = Homo sapiens PEX5, labelled with eGFP
</li>
<li><b>dirty</b> = Trypanosoma brucei PEX5, labelled with eGFP
</li>
<li>both measurements have 2 channels! → Pablo said that is because he didn't
know the microscope well → I can just use the channel with the higher
count rates.
</li>
<li>let's plot traces, predictions, and correlations (see <code>Details</code> blocks):
<details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">path_clean</span> = <span style="color: #513f78;">data_path</span> / <span style="color: #2aa198;">'191111_Pex5_1/clean_3of10'</span>
<span style="color: #268bd2;">path_dirty</span> = <span style="color: #513f78;">data_path</span> / <span style="color: #2aa198;">'191111_Pex5_1/Tb-PEX5-eGFP_5uW_0.5ugml3_3of177'</span>
<span style="color: #268bd2;">files_clean</span> = [<span style="color: #5e7837;">path_clean</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #5e7837;">path_clean</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]
<span style="color: #268bd2;">files_dirty</span> = [<span style="color: #783778;">path_dirty</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #783778;">path_dirty</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]
<span style="color: #268bd2;">traces</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">predtraces</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">preds</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">corrs</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">mt_bin</span> = <span style="color: #3f7178;">1e</span>-3


<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #784437;">myfile</span> <span style="color: #859900; font-weight: bold;">in</span> (<span style="color: #37785e;">files_dirty</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ptufile</span> = <span style="color: #78683f;">cfo</span>.<span style="color: #5e7837;">PicoObject</span>(<span style="color: #784437;">myfile</span>, <span style="color: #37785e;">par_obj</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ptufile.predictTimeSeries(model=loaded_model,</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                           scaler='minmax')</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">mt_name</span> = <span style="color: #43783f;">f</span><span style="color: #2aa198;">'us_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #707e4f;">timeseries_name</span>=<span style="color: #4f7e67;">mt_name</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">photonCountBin</span>=<span style="color: #37785e;">mt_bin</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ptufile.predictTimeSeries(model=loaded_model,</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                           scaler='minmax',</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                           name=mt_name)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">trueTimeArr</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #374478;">k</span>, <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>[<span style="color: #3f7178;">key</span>].<span style="color: #374478;">items</span>():
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"PREPRO"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"1.0"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># predtraces = pd.concat([predtraces, pd.DataFrame(i, columns=[f'</span><span style="color: #268bd2;">{key}</span><span style="color: #93a1a1;">_</span><span style="color: #268bd2;">{k}</span><span style="color: #93a1a1;">'])],</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                        axis=1)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">pass</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">elif</span> <span style="color: #2aa198;">"1.0"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">traces</span> = <span style="color: #783778;">pd</span>.<span style="color: #7e544f;">concat</span>([<span style="color: #513f78;">traces</span>, <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>(<span style="color: #707e4f;">i</span>, <span style="color: #784437;">columns</span>=[<span style="color: #43783f;">f</span><span style="color: #2aa198;">'</span><span style="color: #268bd2;">{key}</span><span style="color: #2aa198;">_</span><span style="color: #268bd2;">{k}</span><span style="color: #2aa198;">'</span>])],
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">axis</span>=1)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># preds = pd.concat([preds, pd.DataFrame(data=ptufile.predictions[key][k],</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                                        columns=[f'</span><span style="color: #268bd2;">{key}</span><span style="color: #93a1a1;">_</span><span style="color: #268bd2;">{k}</span><span style="color: #93a1a1;">'])], axis=1)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">elif</span> <span style="color: #2aa198;">"0.001"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #374478;">name</span>=(<span style="color: #3f7178;">key</span>, <span style="color: #374478;">k</span>))

<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span>, <span style="color: #43783f;">item</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>[<span style="color: #5e7837;">m</span>].<span style="color: #374478;">items</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">save_autocorrelation</span>(<span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>, <span style="color: #783778;">method</span>=<span style="color: #5e7837;">m</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #37785e;">output_path</span>=<span style="color: #37785e;">output_path</span>)
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">predtraces.to_csv(Path(output_path) / 'pex2dirty_predtraces.csv')</span>
<span style="color: #513f78;">traces</span>.<span style="color: #513f78;">to_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'pex1dirty_traces.csv'</span>)
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">preds.to_csv(Path(output_path) / 'pex2dirty_preds.csv')</span>
</pre>
</div>

<pre class="example">
/home/lex/Programme/miniconda3/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">fit_dirty_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191111_Pex5_1/dirty/pex1dirty_CH2_multipletau_plot.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">fit_dirty_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191111_Pex5_1/dirty/pex1dirty_CH2_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">fit_clean_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191111_Pex5_1/clean/pex1clean_CH2_multipletau_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">fit_clean_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191111_Pex5_1/clean/pex1clean_CH2_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_dirty_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191111_Pex5_1/dirty/pex1dirty_CH2_multipletau_plot.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_dirty_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191111_Pex5_1/dirty/pex1dirty_CH2_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_clean_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191111_Pex5_1/clean/pex1clean_CH2_multipletau_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_clean_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191111_Pex5_1/clean/pex1clean_CH2_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">preds_dirty = pd.read_csv(Path(output_path) / '191111_Pex5_1/dirty/pex1dirty_preds.csv', index_col=0)</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">predtraces_dirty = pd.read_csv(Path(output_path) / '191111_Pex5_1/dirty/pex1dirty_predtraces.csv', index_col=0)</span>
<span style="color: #268bd2;">traces_dirty</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191111_Pex5_1/dirty/pex1dirty_traces.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6])
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">preds_clean = pd.read_csv(Path(output_path) / '191111_Pex5_1/clean/pex1clean_preds.csv', index_col=0)</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">predtraces_clean = pd.read_csv(Path(output_path) / '191111_Pex5_1/clean/pex1clean_predtraces.csv', index_col=0)</span>
<span style="color: #268bd2;">traces_clean</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191111_Pex5_1/clean/pex1clean_traces.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6])
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #7a4f7e;">fit_clean_mt</span>.<span style="color: #784437;">columns</span>)
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #374478;">traces_clean</span>.<span style="color: #784437;">columns</span>)
</pre>
</div>

<pre class="example">
Index(['2022-02-03_multipletau_CH2_BIN0dot001_us_2Hs-PEX5-eGFP5_T91s_1_correlation-CH2_2 fitted model: ',
       '2022-02-03_multipletau_CH2_BIN0dot001_us_Hs-PEX5-eGFP1_T0s_1_correlation-CH2_2 fitted model: ',
       '2022-02-03_multipletau_CH2_BIN0dot001_us_Hs-PEX5-eGFP2_T26s_1_correlation-CH2_2 fitted model: '],
      dtype='object')
Index(['Hs-PEX5-eGFP1_T0s_1_CH2_BIN1.0', '2Hs-PEX5-eGFP5_T91s_1_CH2_BIN1.0',
       'Hs-PEX5-eGFP2_T26s_1_CH2_BIN1.0'],
      dtype='object')
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">plotdata</span> = <span style="color: #657b83; font-weight: bold;">zip</span>(<span style="color: #37785e;">traces_dirty</span>.<span style="color: #374478;">items</span>(), <span style="color: #374478;">traces_clean</span>.<span style="color: #374478;">items</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #4f5c7e;">corr_dirty_mt</span>.<span style="color: #374478;">items</span>(), <span style="color: #37785e;">corr_clean_mt</span>.<span style="color: #374478;">items</span>(), <span style="color: #7a4f7e;">corr_dirty_tt</span>.<span style="color: #374478;">items</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #707e4f;">corr_clean_tt</span>.<span style="color: #374478;">items</span>(), <span style="color: #43783f;">fit_dirty_mt</span>.<span style="color: #374478;">items</span>(), <span style="color: #7a4f7e;">fit_clean_mt</span>.<span style="color: #374478;">items</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #374478;">fit_dirty_tt</span>.<span style="color: #374478;">items</span>(), <span style="color: #37785e;">fit_clean_tt</span>.<span style="color: #374478;">items</span>())
<span style="color: #268bd2;">fig</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #78683f;">figure</span>(<span style="color: #784437;">figsize</span>=(16, 20))
<span style="color: #268bd2;">gs</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">add_gridspec</span>(12, 4)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span>, ((<span style="color: #784437;">td_n</span>, <span style="color: #7e544f;">td_v</span>), (<span style="color: #784437;">td_n</span>, <span style="color: #5e7837;">tc_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #5e7837;">cdm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #7e544f;">ccm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #4f5c7e;">cdt_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #4f7e67;">cct_v</span>),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #4f7e67;">fdm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #783778;">fcm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #37785e;">fdt_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #78683f;">fct_v</span>)) <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">enumerate</span>(<span style="color: #513f78;">plotdata</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #707e4f;">i</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax0</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4, 0:2])
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #7e544f;">ax0</span>, <span style="color: #784437;">data</span>=(<span style="color: #784437;">td_n</span>, <span style="color: #5e7837;">tc_v</span>), <span style="color: #707e4f;">legend</span>=<span style="color: #2aa198;">'auto'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax1</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4, 2:4])
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #43783f;">ax1</span>, <span style="color: #784437;">data</span>=(<span style="color: #784437;">td_n</span>, <span style="color: #7e544f;">td_v</span>), <span style="color: #707e4f;">legend</span>=<span style="color: #2aa198;">'auto'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">ax0</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'time steps in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'photons'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #43783f;">ax1</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'time steps in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'photons'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ax2 = fig.add_subplot(gs[i*4+1, 0:2], sharex=ax0)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># sns.lineplot(ax=ax2, data=ptc_v, color=sns.color_palette()[0], legend=False)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># sns.lineplot(ax=ax2, data=pc_v, color=sns.color_palette()[1], alpha=0.8, legend=False)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ax3 = fig.add_subplot(gs[i*4+1, 2:4], sharex=ax1)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># sns.lineplot(ax=ax3, data=ptd_v, legend=False)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># sns.lineplot(ax=ax3, data=pd_v, color=sns.color_palette()[1], alpha=0.8, legend=False)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ax2.set(xlabel='time steps in ms', ylabel='probability of artifact')</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ax3.set(xlabel='time steps in ms', ylabel='probability of artifact')</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax4</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4+2:<span style="color: #707e4f;">i</span>*4+4, 0], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'multipletau w/ us bin'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #513f78;">ax4</span>, <span style="color: #784437;">data</span>=<span style="color: #7e544f;">ccm_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #513f78;">ax4</span>, <span style="color: #784437;">data</span>=<span style="color: #783778;">fcm_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax5</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4+2:<span style="color: #707e4f;">i</span>*4+4, 1], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'tttr2xfcs on arrival times'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #5e7837;">ax5</span>, <span style="color: #784437;">data</span>=<span style="color: #4f7e67;">cct_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #5e7837;">ax5</span>, <span style="color: #784437;">data</span>=<span style="color: #78683f;">fct_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">ax4</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'tau in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'Correlation G(tau)'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #5e7837;">ax5</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'tau in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'Correlation G(tau)'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax6</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4+2:<span style="color: #707e4f;">i</span>*4+4, 2], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'multipletau w/ us bin'</span>, <span style="color: #783778;">sharey</span>=<span style="color: #513f78;">ax4</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #374478;">ax6</span>, <span style="color: #784437;">data</span>=<span style="color: #5e7837;">cdm_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #374478;">ax6</span>, <span style="color: #784437;">data</span>=<span style="color: #4f7e67;">fdm_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax7</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4+2:<span style="color: #707e4f;">i</span>*4+4, 3], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'tttr2xfcs on arrival times'</span>, <span style="color: #783778;">sharey</span>=<span style="color: #5e7837;">ax5</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #783778;">ax7</span>, <span style="color: #784437;">data</span>=<span style="color: #4f5c7e;">cdt_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #783778;">ax7</span>, <span style="color: #784437;">data</span>=<span style="color: #37785e;">fdt_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">ax6</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'tau in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'Correlation G(tau)'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">ax7</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'tau in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'Correlation G(tau)'</span>)
<span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">suptitle</span>(<span style="color: #2aa198;">'HsPEX5-eGFP (left) vs TbPEX5-eGFP (right) - 11.11.2019'</span>, <span style="color: #43783f;">size</span>=20)
<span style="color: #43783f;">gs</span>.<span style="color: #513f78;">tight_layout</span>(<span style="color: #4f7e67;">fig</span>, <span style="color: #7a4f7e;">rect</span>=[0, 0, 1, 0.99])

</pre>
</div>
</details>
</li>
<li>the results:
<img src="./jupyter/analysis4-191111-pex1.png" class="img-responsive" alt="analysis4-191111-pex1.png">
</li>
<li>cave 1: 2 channels - check for the right Channel when plotting (CH2)
</li>
<li>cave 2: in the plot, the traces and the correlations don't fit right now
inside their respecitve group (different order of names in e.g.
<code>traces_clean</code> vs <code>fit_clean_mt</code>) → at the moment I don't invest the time
to fix this, because the fits are quite similar looking, but for
publication I have to do this.
</li>
</ul>
</li>

<li>look at third <b>bright cluster artifacts</b> folder: <code>191113_Pex5_2_structured</code>
<ul class="org-ul">
<li><b>clean</b> = Homo sapiens PEX5, labelled with eGFP
</li>
<li><b>dirty</b> = Trypanosoma brucei PEX5, labelled with eGFP
</li>
<li>let's plot traces, predictions, and correlations (see <code>Details</code> block):
<details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">path_clean</span> = <span style="color: #513f78;">data_path</span> / <span style="color: #2aa198;">'191113_Pex5_2_structured/HsPEX5EGFP_1-100001_3of250'</span>
<span style="color: #268bd2;">path_dirty</span> = <span style="color: #513f78;">data_path</span> / <span style="color: #2aa198;">'191113_Pex5_2_structured/TbPEX5EGFP_1-10002_3of250'</span>
<span style="color: #268bd2;">files_clean</span> = [<span style="color: #5e7837;">path_clean</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #5e7837;">path_clean</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]
<span style="color: #268bd2;">files_dirty</span> = [<span style="color: #783778;">path_dirty</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #783778;">path_dirty</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]
<span style="color: #268bd2;">traces</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">predtraces</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">preds</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">corrs</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">mt_bin</span> = <span style="color: #3f7178;">1e</span>-3


<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #784437;">myfile</span> <span style="color: #859900; font-weight: bold;">in</span> (<span style="color: #5e7837;">files_clean</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ptufile</span> = <span style="color: #78683f;">cfo</span>.<span style="color: #5e7837;">PicoObject</span>(<span style="color: #784437;">myfile</span>, <span style="color: #37785e;">par_obj</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ptufile.predictTimeSeries(model=loaded_model,</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                           scaler='minmax')</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">mt_name</span> = <span style="color: #43783f;">f</span><span style="color: #2aa198;">'us_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #707e4f;">timeseries_name</span>=<span style="color: #4f7e67;">mt_name</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">photonCountBin</span>=<span style="color: #37785e;">mt_bin</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ptufile.predictTimeSeries(model=loaded_model,</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                           scaler='minmax',</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                           name=mt_name)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">trueTimeArr</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #374478;">k</span>, <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>[<span style="color: #3f7178;">key</span>].<span style="color: #374478;">items</span>():
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"PREPRO"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"1.0"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># predtraces = pd.concat([predtraces, pd.DataFrame(i, columns=[f'</span><span style="color: #268bd2;">{key}</span><span style="color: #93a1a1;">_</span><span style="color: #268bd2;">{k}</span><span style="color: #93a1a1;">'])],</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                        axis=1)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">pass</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">elif</span> <span style="color: #2aa198;">"1.0"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">traces</span> = <span style="color: #783778;">pd</span>.<span style="color: #7e544f;">concat</span>([<span style="color: #513f78;">traces</span>, <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>(<span style="color: #707e4f;">i</span>, <span style="color: #784437;">columns</span>=[<span style="color: #43783f;">f</span><span style="color: #2aa198;">'</span><span style="color: #268bd2;">{key}</span><span style="color: #2aa198;">_</span><span style="color: #268bd2;">{k}</span><span style="color: #2aa198;">'</span>])],
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">axis</span>=1)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># preds = pd.concat([preds, pd.DataFrame(data=ptufile.predictions[key][k],</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                                        columns=[f'</span><span style="color: #268bd2;">{key}</span><span style="color: #93a1a1;">_</span><span style="color: #268bd2;">{k}</span><span style="color: #93a1a1;">'])], axis=1)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">elif</span> <span style="color: #2aa198;">"0.001"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #374478;">name</span>=(<span style="color: #3f7178;">key</span>, <span style="color: #374478;">k</span>))

<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span>, <span style="color: #43783f;">item</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>[<span style="color: #5e7837;">m</span>].<span style="color: #374478;">items</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">save_autocorrelation</span>(<span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>, <span style="color: #783778;">method</span>=<span style="color: #5e7837;">m</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #37785e;">output_path</span>=<span style="color: #37785e;">output_path</span>)
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">predtraces.to_csv(Path(output_path) / 'pex2dirty_predtraces.csv')</span>
<span style="color: #513f78;">traces</span>.<span style="color: #513f78;">to_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'pex2clean_traces.csv'</span>)
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">preds.to_csv(Path(output_path) / 'pex2dirty_preds.csv')</span>
</pre>
</div>

<pre class="example">
/home/lex/Programme/miniconda3/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">fit_dirty_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191113_Pex5_2_structured/dirty/pex2dirty_multipletau_plot.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">fit_dirty_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191113_Pex5_2_structured/dirty/pex2dirty_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">fit_clean_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191113_Pex5_2_structured/clean/pex2clean_multipletau_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">fit_clean_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191113_Pex5_2_structured/clean/pex2clean_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_dirty_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191113_Pex5_2_structured/dirty/pex2dirty_multipletau_plot.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_dirty_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191113_Pex5_2_structured/dirty/pex2dirty_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_clean_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191113_Pex5_2_structured/clean/pex2clean_multipletau_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_clean_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191113_Pex5_2_structured/clean/pex2clean_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">preds_dirty = pd.read_csv(Path(output_path) / '191113_Pex5_2_structured/dirty/pex2dirty_preds.csv', index_col=0)</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">predtraces_dirty = pd.read_csv(Path(output_path) / '191113_Pex5_2_structured/dirty/pex2dirty_predtraces.csv', index_col=0)</span>
<span style="color: #268bd2;">traces_dirty</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191113_Pex5_2_structured/dirty/pex2dirty_traces.csv'</span>, <span style="color: #784437;">index_col</span>=0)
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">preds_clean = pd.read_csv(Path(output_path) / '191113_Pex5_2_structured/clean/pex2clean_preds.csv', index_col=0)</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">predtraces_clean = pd.read_csv(Path(output_path) / '191113_Pex5_2_structured/clean/pex2clean_predtraces.csv', index_col=0)</span>
<span style="color: #268bd2;">traces_clean</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191113_Pex5_2_structured/clean/pex2clean_traces.csv'</span>, <span style="color: #784437;">index_col</span>=0)
<span style="color: #7a4f7e;">fit_clean_mt</span>.<span style="color: #784437;">columns</span>
</pre>
</div>

<pre class="example">
Index(['2022-02-02_multipletau_CH2_BIN0dot001_us_HsPEX5EGFP 1-1000015_T309s_1_correlation-CH2_2 fitted model: ',
       '2022-02-02_multipletau_CH2_BIN0dot001_us_HsPEX5EGFP 1-1000016_T331s_1_correlation-CH2_2 fitted model: ',
       '2022-02-02_multipletau_CH2_BIN0dot001_us_HsPEX5EGFP 1-1000017_T353s_1_correlation-CH2_2 fitted model: '],
      dtype='object')
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">plotdata</span> = <span style="color: #657b83; font-weight: bold;">zip</span>(<span style="color: #37785e;">traces_dirty</span>.<span style="color: #374478;">items</span>(), <span style="color: #374478;">traces_clean</span>.<span style="color: #374478;">items</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #4f5c7e;">corr_dirty_mt</span>.<span style="color: #374478;">items</span>(), <span style="color: #37785e;">corr_clean_mt</span>.<span style="color: #374478;">items</span>(), <span style="color: #7a4f7e;">corr_dirty_tt</span>.<span style="color: #374478;">items</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #707e4f;">corr_clean_tt</span>.<span style="color: #374478;">items</span>(), <span style="color: #43783f;">fit_dirty_mt</span>.<span style="color: #374478;">items</span>(), <span style="color: #7a4f7e;">fit_clean_mt</span>.<span style="color: #374478;">items</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #374478;">fit_dirty_tt</span>.<span style="color: #374478;">items</span>(), <span style="color: #37785e;">fit_clean_tt</span>.<span style="color: #374478;">items</span>())
<span style="color: #268bd2;">fig</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #78683f;">figure</span>(<span style="color: #784437;">figsize</span>=(16, 20))
<span style="color: #268bd2;">gs</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">add_gridspec</span>(12, 4)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span>, ((<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #7e544f;">td_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #5e7837;">tc_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #5e7837;">cdm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #7e544f;">ccm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #4f5c7e;">cdt_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #4f7e67;">cct_v</span>),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #4f7e67;">fdm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #783778;">fcm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #37785e;">fdt_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #78683f;">fct_v</span>)) <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">enumerate</span>(<span style="color: #513f78;">plotdata</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #707e4f;">i</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax0</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4, 0:2])
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #7e544f;">ax0</span>, <span style="color: #784437;">data</span>=<span style="color: #5e7837;">tc_v</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax1</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4, 2:4])
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #43783f;">ax1</span>, <span style="color: #784437;">data</span>=<span style="color: #7e544f;">td_v</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">ax0</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'time steps in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'photons'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #43783f;">ax1</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'time steps in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'photons'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ax2 = fig.add_subplot(gs[i*4+1, 0:2], sharex=ax0)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># sns.lineplot(ax=ax2, data=ptc_v, color=sns.color_palette()[0], legend=False)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># sns.lineplot(ax=ax2, data=pc_v, color=sns.color_palette()[1], alpha=0.8, legend=False)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ax3 = fig.add_subplot(gs[i*4+1, 2:4], sharex=ax1)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># sns.lineplot(ax=ax3, data=ptd_v, legend=False)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># sns.lineplot(ax=ax3, data=pd_v, color=sns.color_palette()[1], alpha=0.8, legend=False)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ax2.set(xlabel='time steps in ms', ylabel='probability of artifact')</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ax3.set(xlabel='time steps in ms', ylabel='probability of artifact')</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax4</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4+2:<span style="color: #707e4f;">i</span>*4+4, 0], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'multipletau w/ us bin'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #513f78;">ax4</span>, <span style="color: #784437;">data</span>=<span style="color: #7e544f;">ccm_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #513f78;">ax4</span>, <span style="color: #784437;">data</span>=<span style="color: #783778;">fcm_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax5</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4+2:<span style="color: #707e4f;">i</span>*4+4, 1], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'tttr2xfcs on arrival times'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #5e7837;">ax5</span>, <span style="color: #784437;">data</span>=<span style="color: #4f7e67;">cct_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #5e7837;">ax5</span>, <span style="color: #784437;">data</span>=<span style="color: #78683f;">fct_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">ax4</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'tau in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'Correlation G(tau)'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #5e7837;">ax5</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'tau in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'Correlation G(tau)'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax6</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4+2:<span style="color: #707e4f;">i</span>*4+4, 2], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'multipletau w/ us bin'</span>, <span style="color: #783778;">sharey</span>=<span style="color: #513f78;">ax4</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #374478;">ax6</span>, <span style="color: #784437;">data</span>=<span style="color: #5e7837;">cdm_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #374478;">ax6</span>, <span style="color: #784437;">data</span>=<span style="color: #4f7e67;">fdm_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax7</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*4+2:<span style="color: #707e4f;">i</span>*4+4, 3], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'tttr2xfcs on arrival times'</span>, <span style="color: #783778;">sharey</span>=<span style="color: #5e7837;">ax5</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #783778;">ax7</span>, <span style="color: #784437;">data</span>=<span style="color: #4f5c7e;">cdt_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #783778;">ax7</span>, <span style="color: #784437;">data</span>=<span style="color: #37785e;">fdt_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">ax6</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'tau in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'Correlation G(tau)'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">ax7</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'tau in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'Correlation G(tau)'</span>)
<span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">suptitle</span>(<span style="color: #2aa198;">'HsPEX5-eGFP (left) vs TbPEX5-eGFP (right) - 13.11.2019'</span>, <span style="color: #43783f;">size</span>=20)
<span style="color: #43783f;">gs</span>.<span style="color: #513f78;">tight_layout</span>(<span style="color: #4f7e67;">fig</span>, <span style="color: #7a4f7e;">rect</span>=[0, 0, 1, 0.99])

</pre>
</div>
</details>
</li>
<li>the results:
<img src="./jupyter/analysis4-191113_pex2.png" class="img-responsive" alt="analysis4-191113_pex2.png">
</li>
</ul>
</li>

<li>look at <b>detector dropout</b> files
<ul class="org-ul">
<li>from the file Name we have e24 ? HeLa cells with GFP-SNAP
</li>
<li>let's see if we can load them (see <code>Details</code> block)
<details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">path_dirty</span> = <span style="color: #513f78;">data_path</span> / <span style="color: #2aa198;">"190327_detectordropout/"</span>
<span style="color: #268bd2;">files_dirty</span> = [<span style="color: #783778;">path_dirty</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #783778;">path_dirty</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]
<span style="color: #268bd2;">traces</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">predtraces</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">preds</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">corrs</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">mt_bin</span> = <span style="color: #3f7178;">1e</span>-3

<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #784437;">myfile</span> <span style="color: #859900; font-weight: bold;">in</span> (<span style="color: #37785e;">files_dirty</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ptufile</span> = <span style="color: #78683f;">cfo</span>.<span style="color: #5e7837;">PicoObject</span>(<span style="color: #784437;">myfile</span>, <span style="color: #37785e;">par_obj</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ptufile.predictTimeSeries(model=loaded_model,</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                           scaler='minmax')</span>
<span style="background-color: #eee8d5;"> </span>  <span style="color: #93a1a1;">#  mt_name = f'us_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #93a1a1;">'</span>
<span style="background-color: #eee8d5;"> </span>  <span style="color: #93a1a1;">#  ptufile.getTimeSeries(timeseries_name=mt_name,</span>
<span style="background-color: #eee8d5;"> </span>  <span style="color: #93a1a1;">#                        photonCountBin=mt_bin)</span>
<span style="background-color: #eee8d5;"> </span>  <span style="color: #93a1a1;">#  ptufile.getPhotonCountingStats(name=mt_name)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ptufile.predictTimeSeries(model=loaded_model,</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                           scaler='minmax',</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                           name=mt_name)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">trueTimeArr</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #374478;">k</span>, <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>[<span style="color: #3f7178;">key</span>].<span style="color: #374478;">items</span>():
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"PREPRO"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"1.0"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># predtraces = pd.concat([predtraces, pd.DataFrame(i, columns=[f'</span><span style="color: #268bd2;">{key}</span><span style="color: #93a1a1;">_</span><span style="color: #268bd2;">{k}</span><span style="color: #93a1a1;">'])],</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                        axis=1)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">pass</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">elif</span> <span style="color: #2aa198;">"1.0"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">traces</span> = <span style="color: #783778;">pd</span>.<span style="color: #7e544f;">concat</span>([<span style="color: #513f78;">traces</span>, <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>(<span style="color: #707e4f;">i</span>, <span style="color: #784437;">columns</span>=[<span style="color: #43783f;">f</span><span style="color: #2aa198;">'</span><span style="color: #268bd2;">{key}</span><span style="color: #2aa198;">_</span><span style="color: #268bd2;">{k}</span><span style="color: #2aa198;">'</span>])],
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">axis</span>=1)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #374478;">name</span>=(<span style="color: #3f7178;">key</span>, <span style="color: #374478;">k</span>))
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># preds = pd.concat([preds, pd.DataFrame(data=ptufile.predictions[key][k],</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                                        columns=[f'</span><span style="color: #268bd2;">{key}</span><span style="color: #93a1a1;">_</span><span style="color: #268bd2;">{k}</span><span style="color: #93a1a1;">'])], axis=1)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">elif</span> <span style="color: #2aa198;">"0.001"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #374478;">name</span>=(<span style="color: #3f7178;">key</span>, <span style="color: #374478;">k</span>))

<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span>, <span style="color: #43783f;">item</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>[<span style="color: #5e7837;">m</span>].<span style="color: #374478;">items</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">save_autocorrelation</span>(<span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>, <span style="color: #783778;">method</span>=<span style="color: #5e7837;">m</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #37785e;">output_path</span>=<span style="color: #37785e;">output_path</span>)
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">predtraces.to_csv(Path(output_path) / 'detectordropout_predtraces.csv')</span>
<span style="color: #513f78;">traces</span>.<span style="color: #513f78;">to_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'detectordropout_traces.csv'</span>)
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">preds.to_csv(Path(output_path) / 'detectordropout_preds.csv')</span>
</pre>
</div>

<pre class="example">
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
</pre>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">fit_dirty</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'190327_detectordropout_onlydirty/detectordropout_tttr2xfcs_plot.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6, 8, 10], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_dirty</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'190327_detectordropout_onlydirty/detectordropout_tttr2xfcs_plot.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5, 7, 9], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">preds_dirty = pd.read_csv(Path(output_path) / '191113_Pex5_2_structured/dirty/pex2dirty_preds.csv', index_col=0)</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">predtraces_dirty = pd.read_csv(Path(output_path) / '191113_Pex5_2_structured/dirty/pex2dirty_predtraces.csv', index_col=0)</span>
<span style="color: #268bd2;">traces_dirty</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'190327_detectordropout_onlydirty/detectordropout_traces.csv'</span>, <span style="color: #784437;">index_col</span>=0)
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">preds_clean = pd.read_csv(Path(output_path) / '191113_Pex5_2_structured/clean/pex2clean_preds.csv', index_col=0)</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">predtraces_clean = pd.read_csv(Path(output_path) / '191113_Pex5_2_structured/clean/pex2clean_predtraces.csv', index_col=0)</span>

</pre>
</div>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">plotdata</span> = <span style="color: #657b83; font-weight: bold;">zip</span>(<span style="color: #37785e;">traces_dirty</span>.<span style="color: #374478;">items</span>(), <span style="color: #783f5a;">corr_dirty</span>.<span style="color: #374478;">items</span>(), <span style="color: #7e544f;">fit_dirty</span>.<span style="color: #374478;">items</span>())
<span style="color: #268bd2;">fig</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #78683f;">figure</span>(<span style="color: #784437;">figsize</span>=(16, 20))
<span style="color: #268bd2;">gs</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">add_gridspec</span>(9, 4)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span>, ((<span style="color: #784437;">td_n</span>, <span style="color: #7e544f;">td_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #4f5c7e;">cdt</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #784437;">fdt</span>)) <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">enumerate</span>(<span style="color: #513f78;">plotdata</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #707e4f;">i</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> [0, 2, 4]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">i</span> = <span style="color: #657b83; font-weight: bold;">int</span>(<span style="color: #707e4f;">i</span>*1.5)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax0</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>, 0:2], <span style="color: #783f5a;">title</span>=<span style="color: #784437;">td_n</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax1</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>+1:<span style="color: #707e4f;">i</span>+3, 0], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'tttr2xfcs on arrival times'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">elif</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> [1, 3]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">i</span> -= 1
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">i</span> = <span style="color: #657b83; font-weight: bold;">int</span>(<span style="color: #707e4f;">i</span>*1.5)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax0</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>, 2:4], <span style="color: #783f5a;">title</span>=<span style="color: #784437;">td_n</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax1</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>+1:<span style="color: #707e4f;">i</span>+3, 2], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'tttr2xfcs on arrival times'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #7e544f;">ax0</span>, <span style="color: #784437;">data</span>=<span style="color: #7e544f;">td_v</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">ax0</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'time steps in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'photons'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #43783f;">ax1</span>, <span style="color: #3f7178;">x</span>=<span style="color: #4f5c7e;">cdt</span>.<span style="color: #43783f;">index</span>, <span style="color: #513f78;">y</span>=<span style="color: #4f5c7e;">cdt</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #43783f;">ax1</span>, <span style="color: #3f7178;">x</span>=<span style="color: #784437;">fdt</span>.<span style="color: #43783f;">index</span>, <span style="color: #513f78;">y</span>=<span style="color: #784437;">fdt</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">xmin</span> = <span style="color: #784437;">fdt</span>.<span style="color: #513f78;">dropna</span>().<span style="color: #43783f;">index</span>[0]
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">xmax</span> = <span style="color: #784437;">fdt</span>.<span style="color: #513f78;">dropna</span>().<span style="color: #43783f;">index</span>[-1]
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ymin</span> = <span style="color: #707e4f;">np</span>.<span style="color: #5e7837;">min</span>(<span style="color: #784437;">fdt</span>.<span style="color: #513f78;">dropna</span>())
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ymax</span> = <span style="color: #707e4f;">np</span>.<span style="color: #4f7e67;">max</span>(<span style="color: #784437;">fdt</span>.<span style="color: #513f78;">dropna</span>())
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #43783f;">ax1</span>, <span style="color: #4f5c7e;">xlim</span>=[<span style="color: #7a4f7e;">xmin</span> - 0.5*<span style="color: #7a4f7e;">xmin</span>, <span style="color: #783778;">xmax</span> + 0.5*<span style="color: #783778;">xmax</span>], <span style="color: #43783f;">ylim</span>=[<span style="color: #4f7e67;">ymin</span> - 0.5*<span style="color: #4f7e67;">ymin</span>, <span style="color: #5e7837;">ymax</span> + 0.5 * <span style="color: #5e7837;">ymax</span>],
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'$\tau$ (ms)'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'Correlation G($\tau$)'</span>)
<span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">suptitle</span>(<span style="color: #2aa198;">'E24-HeLa-GFP-SNAP - detectordropout - 13.11.2019'</span>, <span style="color: #43783f;">size</span>=20)
<span style="color: #43783f;">gs</span>.<span style="color: #513f78;">tight_layout</span>(<span style="color: #4f7e67;">fig</span>, <span style="color: #7a4f7e;">rect</span>=[0, 0, 1, 0.99])

</pre>
</div>
</details>
</li>
<li>results:
<img src="./jupyter/analysis4-190327-detectordropout.png" class="img-responsive" alt="analysis4-190327-detectordropout.png">
</li>

<li>since each measurement is around 1 GB in size (and loading and processing
this file as seen above needs around 100GB of RAM), the experimentors
took more traces and saved out only the correlations.
</li>
<li>in total we have 11 experiments with 3 repetitions each
<ul class="org-ul">
<li>so in <code>chopIn01</code> we have 33 traces with a length of about 16 seconds
</li>
<li>and in <code>chopIn03</code> each trace is cut in <b>3 parts</b> so we have 99 traces
with a length of around 5 seconds
</li>
</ul>
</li>
<li>Let's load and plot them (see <code>Details</code> block):
<details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">chop01_cf</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'190327_detectordropout_onlydirty/E24 HeLa GFP_chopIn01_FCS_CurvesAndFits.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">header</span>=[0, 1])
<span style="color: #268bd2;">chop01_ts</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'190327_detectordropout_onlydirty/E24 HeLa GFP_chopIn01_timetraces.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">header</span>=[0, 1])

<span style="color: #268bd2;">corr_tau_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #784437;">chop01_cf</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Correlation'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[0]]
<span style="color: #268bd2;">corr_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #784437;">chop01_cf</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Correlation'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[1]]
<span style="color: #268bd2;">corr_sd_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #784437;">chop01_cf</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Deviation'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[0]]
<span style="color: #268bd2;">fit_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #784437;">chop01_cf</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Fit'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[1]]
<span style="color: #268bd2;">fit_tau_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #784437;">chop01_cf</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Fit'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[0]]
<span style="color: #268bd2;">res_tau_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #784437;">chop01_cf</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Residuals'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[0]]
<span style="color: #268bd2;">res_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #784437;">chop01_cf</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Residuals'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[1]]
<span style="color: #268bd2;">trace_tau_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #4f5c7e;">chop01_ts</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Count Rate'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[0]]
<span style="color: #268bd2;">trace_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #4f5c7e;">chop01_ts</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Count Rate'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[1]]

<span style="color: #268bd2;">fig</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #78683f;">figure</span>(<span style="color: #784437;">figsize</span>=(16, 66))
<span style="color: #268bd2;">gs</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">add_gridspec</span>(33, 4)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span>, <span style="color: #657b83; font-weight: bold;">_</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">enumerate</span>(<span style="color: #4f5c7e;">corr_tau_ind</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ct</span> = <span style="color: #784437;">chop01_cf</span>[<span style="color: #4f5c7e;">corr_tau_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #707e4f;">i</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">corr</span> = <span style="color: #784437;">chop01_cf</span>[<span style="color: #37785e;">corr_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #707e4f;">i</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">csd</span> = <span style="color: #784437;">chop01_cf</span>[<span style="color: #374478;">corr_sd_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #707e4f;">i</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">fit</span> = <span style="color: #784437;">chop01_cf</span>[<span style="color: #5e7837;">fit_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #707e4f;">i</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ft</span> = <span style="color: #784437;">chop01_cf</span>[<span style="color: #783f5a;">fit_tau_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #707e4f;">i</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">res</span> = <span style="color: #784437;">chop01_cf</span>[<span style="color: #5e7837;">res_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #707e4f;">i</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">rt</span> = <span style="color: #784437;">chop01_cf</span>[<span style="color: #78683f;">res_tau_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #707e4f;">i</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">trace</span> = <span style="color: #4f5c7e;">chop01_ts</span>[<span style="color: #7e544f;">trace_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #707e4f;">i</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">tt</span> = <span style="color: #4f5c7e;">chop01_ts</span>[<span style="color: #7e544f;">trace_tau_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #707e4f;">i</span>]

<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax0</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>, 0:2], <span style="color: #783f5a;">title</span>=<span style="color: #4f5c7e;">ct</span>.<span style="color: #374478;">name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax1</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>, 2])
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax2</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>, 3])

<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #7e544f;">ax0</span>, <span style="color: #3f7178;">x</span>=<span style="color: #783f5a;">tt</span>, <span style="color: #513f78;">y</span>=<span style="color: #3f7178;">trace</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #43783f;">ax1</span>, <span style="color: #3f7178;">x</span>=<span style="color: #4f5c7e;">ct</span>, <span style="color: #513f78;">y</span>=<span style="color: #784437;">corr</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #783f5a;">label</span>=<span style="color: #2aa198;">'Correlation'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #43783f;">ax1</span>, <span style="color: #3f7178;">x</span>=<span style="color: #78683f;">ft</span>, <span style="color: #513f78;">y</span>=<span style="color: #7a4f7e;">fit</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #783f5a;">label</span>=<span style="color: #2aa198;">'Fit'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #37785e;">ax2</span>, <span style="color: #3f7178;">x</span>=<span style="color: #7a4f7e;">rt</span>, <span style="color: #513f78;">y</span>=<span style="color: #78683f;">res</span>)

<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #7e544f;">ax0</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'[kCounts/s]'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'Time [s]'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #43783f;">ax1</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'Correlation G($\tau$)'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'$\tau$ [ms]'</span>, <span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #37785e;">ax2</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'Residuals'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'$\tau$ [ms]'</span>, <span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>)
<span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">suptitle</span>(<span style="color: #2aa198;">'E24-HeLa-GFP-SNAP - detector dropout - 11 traces, 3 repetitions, 1 part - 13.11.2019'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #43783f;">size</span>=20, <span style="color: #513f78;">y</span>=1.005)
<span style="color: #4f7e67;">plt</span>.<span style="color: #513f78;">tight_layout</span>()

</pre>
</div>
</details>
<ul class="org-ul">
<li>these are examples of traces cut in 3 parts:
<img src="./jupyter/analysis4-190327-chopin01.png" class="img-responsive" alt="analysis4-190327-chopin01.png">
</li>
</ul>
<details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">chop03_cf</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'190327_detectordropout_onlydirty/E24 HeLa GFP_chopIn03_FCS_CurvesAndFits.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">header</span>=[0, 1])
<span style="color: #268bd2;">chop03_ts</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'190327_detectordropout_onlydirty/E24 HeLa GFP_chopIn03_timetraces.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">header</span>=[0, 1])

<span style="color: #268bd2;">corr_tau_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #4f5c7e;">chop03_cf</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Correlation'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[0]]
<span style="color: #268bd2;">corr_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #4f5c7e;">chop03_cf</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Correlation'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[1]]
<span style="color: #268bd2;">corr_sd_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #4f5c7e;">chop03_cf</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Deviation'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[0]]
<span style="color: #268bd2;">fit_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #4f5c7e;">chop03_cf</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Fit'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[1]]
<span style="color: #268bd2;">fit_tau_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #4f5c7e;">chop03_cf</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Fit'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[0]]
<span style="color: #268bd2;">res_tau_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #4f5c7e;">chop03_cf</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Residuals'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[0]]
<span style="color: #268bd2;">res_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #4f5c7e;">chop03_cf</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Residuals'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[1]]
<span style="color: #268bd2;">trace_tau_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #37785e;">chop03_ts</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Count Rate'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[0]]
<span style="color: #268bd2;">trace_ind</span> = [<span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #37785e;">chop03_ts</span>.<span style="color: #784437;">columns</span> <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">'Count Rate'</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #707e4f;">i</span>[1]]

<span style="color: #268bd2;">fig</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #78683f;">figure</span>(<span style="color: #784437;">figsize</span>=(16, 24))
<span style="color: #268bd2;">gs</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">add_gridspec</span>(8, 4)
<span style="color: #268bd2;">i</span> = 0
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #783f5a;">j</span>, <span style="color: #657b83; font-weight: bold;">_</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">enumerate</span>(<span style="color: #4f5c7e;">corr_tau_ind</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #783f5a;">j</span> <span style="color: #859900; font-weight: bold;">in</span> [9, 10, 18, 19, 20, 46, 47, 48]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ct</span> = <span style="color: #4f5c7e;">chop03_cf</span>[<span style="color: #4f5c7e;">corr_tau_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #783f5a;">j</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">corr</span> = <span style="color: #4f5c7e;">chop03_cf</span>[<span style="color: #37785e;">corr_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #783f5a;">j</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">csd</span> = <span style="color: #4f5c7e;">chop03_cf</span>[<span style="color: #374478;">corr_sd_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #783f5a;">j</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">fit</span> = <span style="color: #4f5c7e;">chop03_cf</span>[<span style="color: #5e7837;">fit_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #783f5a;">j</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ft</span> = <span style="color: #4f5c7e;">chop03_cf</span>[<span style="color: #783f5a;">fit_tau_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #783f5a;">j</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">res</span> = <span style="color: #4f5c7e;">chop03_cf</span>[<span style="color: #5e7837;">res_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #783f5a;">j</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">rt</span> = <span style="color: #4f5c7e;">chop03_cf</span>[<span style="color: #78683f;">res_tau_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #783f5a;">j</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">trace</span> = <span style="color: #37785e;">chop03_ts</span>[<span style="color: #7e544f;">trace_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #783f5a;">j</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">tt</span> = <span style="color: #37785e;">chop03_ts</span>[<span style="color: #7e544f;">trace_tau_ind</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #783f5a;">j</span>]

<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax0</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>, 0:2], <span style="color: #783f5a;">title</span>=<span style="color: #4f5c7e;">ct</span>.<span style="color: #374478;">name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax1</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>, 2])
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax2</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>, 3])

<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #7e544f;">ax0</span>, <span style="color: #3f7178;">x</span>=<span style="color: #783f5a;">tt</span>, <span style="color: #513f78;">y</span>=<span style="color: #3f7178;">trace</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #43783f;">ax1</span>, <span style="color: #3f7178;">x</span>=<span style="color: #4f5c7e;">ct</span>, <span style="color: #513f78;">y</span>=<span style="color: #784437;">corr</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #783f5a;">label</span>=<span style="color: #2aa198;">'Correlation'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #43783f;">ax1</span>, <span style="color: #3f7178;">x</span>=<span style="color: #78683f;">ft</span>, <span style="color: #513f78;">y</span>=<span style="color: #7a4f7e;">fit</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #783f5a;">label</span>=<span style="color: #2aa198;">'Fit'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #37785e;">ax2</span>, <span style="color: #3f7178;">x</span>=<span style="color: #7a4f7e;">rt</span>, <span style="color: #513f78;">y</span>=<span style="color: #78683f;">res</span>)

<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #7e544f;">ax0</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'[kCounts/s]'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'Time [s]'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #43783f;">ax1</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'Correlation G($\tau$)'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'$\tau$ [ms]'</span>, <span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #37785e;">ax2</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'Residuals'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'$\tau$ [ms]'</span>, <span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">i</span> += 1
<span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">suptitle</span>(<span style="color: #2aa198;">'E24-HeLa-GFP-SNAP - detector dropout - 11 traces, 3 repetitions, 3 parts (example) - 13.11.2019'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #43783f;">size</span>=20, <span style="color: #513f78;">y</span>=1.005)
<span style="color: #4f7e67;">plt</span>.<span style="color: #513f78;">tight_layout</span>()

</pre>
</div>
</details>
<ul class="org-ul">
<li>these are examples of traces cut in 9 parts:
<img src="./jupyter/analysis4-190327-chopin03.png" class="img-responsive" alt="analysis4-190327-chopin03.png">
</li>
</ul>
</li>

<li>now let's load and plot the transit times (see <code>Details</code> block):
<details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">chop01</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'190327_detectordropout_onlydirty/E24 HeLa GFP_chopIn01_FitParameters.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">header</span>=[0], <span style="color: #784437;">index_col</span>=1)
<span style="color: #268bd2;">chop03</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'190327_detectordropout_onlydirty/E24 HeLa GFP_chopIn03_FitParameters.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">header</span>=[0], <span style="color: #784437;">index_col</span>=1)
<span style="color: #268bd2;">chop10</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'190327_detectordropout_onlydirty/E24 HeLa GFP_chopIn10_FitParameters.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">header</span>=[0], <span style="color: #784437;">index_col</span>=1)
<span style="color: #268bd2;">taudiff01</span> = <span style="color: #783f5a;">chop01</span>.<span style="color: #783778;">loc</span>[:, <span style="color: #2aa198;">'Diffusion Time 1 &#181;s'</span>]
<span style="color: #268bd2;">taudiff03</span> = <span style="color: #7a4f7e;">chop03</span>.<span style="color: #783778;">loc</span>[:, <span style="color: #2aa198;">'Diffusion Time 1 &#181;s'</span>]
<span style="color: #268bd2;">taudiff10</span> = <span style="color: #43783f;">chop10</span>.<span style="color: #783778;">loc</span>[:, <span style="color: #2aa198;">'Diffusion Time 1 &#181;s'</span>]
<span style="color: #268bd2;">taudiff_dirty01</span> = <span style="color: #4f5c7e;">taudiff01</span>.<span style="color: #783778;">loc</span>[[4, 7, 16, 17]].<span style="color: #707e4f;">rename</span>(<span style="color: #2aa198;">'dirty\n(16s, n=4)'</span>)
<span style="color: #268bd2;">taudiff_clean01</span> = <span style="color: #4f5c7e;">taudiff01</span>.<span style="color: #5e7837;">drop</span>([4, 7, 16, 17]).<span style="color: #707e4f;">rename</span>(<span style="color: #2aa198;">'clean\n(16s, n=29)'</span>)
<span style="color: #268bd2;">taudiff_dirty03</span> = <span style="color: #783778;">taudiff03</span>.<span style="color: #783778;">loc</span>[[11, 19, 21, 47, 49]].<span style="color: #707e4f;">rename</span>(<span style="color: #2aa198;">'dirty\n(5s, n=5)'</span>)
<span style="color: #268bd2;">taudiff_clean03</span> = <span style="color: #783778;">taudiff03</span>.<span style="color: #5e7837;">drop</span>([11, 19, 21, 47, 49]).<span style="color: #707e4f;">rename</span>(<span style="color: #2aa198;">'clean\n(5s, n=94)'</span>)
<span style="color: #268bd2;">taudiff_dirty10</span> = <span style="color: #513f78;">taudiff10</span>.<span style="color: #783778;">loc</span>[[34, 62, 67, 157]].<span style="color: #707e4f;">rename</span>(<span style="color: #2aa198;">'dirty\n(1.6s, n=4)'</span>)
<span style="color: #268bd2;">taudiff_clean10</span> = <span style="color: #513f78;">taudiff10</span>.<span style="color: #5e7837;">drop</span>([34, 62, 67, 157]).<span style="color: #707e4f;">rename</span>(<span style="color: #2aa198;">'clean\n(1.6s, n=326)'</span>)
<span style="color: #268bd2;">taudiff_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #7e544f;">concat</span>([<span style="color: #783778;">taudiff_clean01</span>, <span style="color: #43783f;">taudiff_clean03</span>, <span style="color: #784437;">taudiff_clean10</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #3f7178;">taudiff_dirty01</span>, <span style="color: #4f7e67;">taudiff_dirty03</span>, <span style="color: #37785e;">taudiff_dirty10</span>],
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #784437;">axis</span>=1)

<span style="color: #268bd2;">ax</span> = <span style="color: #4f5c7e;">sns</span>.<span style="color: #707e4f;">boxplot</span>(<span style="color: #784437;">data</span>=<span style="color: #783f5a;">taudiff_plot</span>)
<span style="color: #4f5c7e;">sns</span>.<span style="color: #78683f;">stripplot</span>(<span style="color: #784437;">data</span>=<span style="color: #783f5a;">taudiff_plot</span>, <span style="color: #513f78;">dodge</span>=<span style="color: #859900; font-weight: bold;">True</span>, <span style="color: #5e7837;">palette</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>([<span style="color: #2aa198;">'0.3'</span>]))
<span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #7e544f;">ax</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'transit time [$\mu s$]'</span>, <span style="color: #37785e;">yscale</span>=<span style="color: #2aa198;">'log'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'E24-HeLa-GFP-SNAP - with (dirty) vs without (clean) detector dropout\n11 traces, 3 repetitions - 13.11.2019'</span>)
<span style="color: #7e544f;">ax</span>.<span style="color: #37785e;">set_xticklabels</span>(<span style="color: #7e544f;">ax</span>.<span style="color: #5e7837;">get_xticklabels</span>(), <span style="color: #374478;">rotation</span>=45)
</pre>
</div>
</details>
<ul class="org-ul">
<li>the results:
<img src="./jupyter/analysis4-190327-all-param.png" class="img-responsive" alt="analysis4-190327-all-param.png">
</li>
</ul>
</li>
<li>it would be possible to train an UNET on simulated data with such
detector dropout artifacts and test it on the above 4 traces with
artifacts I have as <code>.ptu</code> files. Unfortunately, I only have 1 "clean"
<code>.ptu</code> file as a negative control.
</li>
</ul>
</li>
<li>look at <b>photobleaching</b> files
<ul class="org-ul">
<li>we have eGFP 0.5 ug/ml in solution
<ul class="org-ul">
<li>clean = laser power 5 uW, 5 traces
</li>
<li>dirty = laser power 10 uW,
</li>
</ul>
</li>
<li>let's see if we can load them
<ul class="org-ul">
<li>look at <b>detector dropout</b> files
</li>
</ul>
</li>
<li>from the file Name we have e24 ? HeLa cells with GFP-SNAP
</li>
<li>let's see if we can load them (see <code>Details</code> block)
<details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">path_clean</span> = <span style="color: #513f78;">data_path</span> / <span style="color: #2aa198;">"191107_EGFP_photobleaching/eGFP 5 uW 0.5ugml1"</span>
<span style="color: #268bd2;">path_dirty</span> = <span style="color: #513f78;">data_path</span> / <span style="color: #2aa198;">"191107_EGFP_photobleaching/eGFP 10 uW 0.5ugml2"</span>
<span style="color: #268bd2;">files_clean</span> = [<span style="color: #5e7837;">path_clean</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #5e7837;">path_clean</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]
<span style="color: #268bd2;">files_dirty</span> = [<span style="color: #783778;">path_dirty</span> / <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">f</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #7e544f;">os</span>.<span style="color: #783778;">listdir</span>(<span style="color: #783778;">path_dirty</span>) <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #43783f;">f</span>.<span style="color: #783778;">endswith</span>(<span style="color: #2aa198;">'.ptu'</span>)]
<span style="color: #268bd2;">traces</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">predtraces</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">preds</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">corrs</span> = <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>()
<span style="color: #268bd2;">mt_bin</span> = <span style="color: #3f7178;">1e</span>-3

<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #784437;">myfile</span> <span style="color: #859900; font-weight: bold;">in</span> (<span style="color: #37785e;">files_dirty</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ptufile</span> = <span style="color: #78683f;">cfo</span>.<span style="color: #5e7837;">PicoObject</span>(<span style="color: #784437;">myfile</span>, <span style="color: #37785e;">par_obj</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ptufile.predictTimeSeries(model=loaded_model,</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                           scaler='minmax')</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">mt_name</span> = <span style="color: #43783f;">f</span><span style="color: #2aa198;">'us_</span><span style="color: #268bd2;">{ptufile.name}</span><span style="color: #2aa198;">'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f7e67;">getTimeSeries</span>(<span style="color: #707e4f;">timeseries_name</span>=<span style="color: #4f7e67;">mt_name</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">photonCountBin</span>=<span style="color: #37785e;">mt_bin</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #783778;">getPhotonCountingStats</span>(<span style="color: #374478;">name</span>=<span style="color: #4f7e67;">mt_name</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ptufile.predictTimeSeries(model=loaded_model,</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                           scaler='minmax',</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                           name=mt_name)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">trueTimeArr</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #374478;">k</span>, <span style="color: #707e4f;">i</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #3f7178;">ptufile</span>.<span style="color: #784437;">timeSeries</span>[<span style="color: #3f7178;">key</span>].<span style="color: #374478;">items</span>():
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"PREPRO"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #2aa198;">"1.0"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># predtraces = pd.concat([predtraces, pd.DataFrame(i, columns=[f'</span><span style="color: #268bd2;">{key}</span><span style="color: #93a1a1;">_</span><span style="color: #268bd2;">{k}</span><span style="color: #93a1a1;">'])],</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                        axis=1)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">pass</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">elif</span> <span style="color: #2aa198;">"1.0"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">traces</span> = <span style="color: #783778;">pd</span>.<span style="color: #7e544f;">concat</span>([<span style="color: #513f78;">traces</span>, <span style="color: #783778;">pd</span>.<span style="color: #784437;">DataFrame</span>(<span style="color: #707e4f;">i</span>, <span style="color: #784437;">columns</span>=[<span style="color: #43783f;">f</span><span style="color: #2aa198;">'</span><span style="color: #268bd2;">{key}</span><span style="color: #2aa198;">_</span><span style="color: #268bd2;">{k}</span><span style="color: #2aa198;">'</span>])],
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">axis</span>=1)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># preds = pd.concat([preds, pd.DataFrame(data=ptufile.predictions[key][k],</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;">#                                        columns=[f'</span><span style="color: #268bd2;">{key}</span><span style="color: #93a1a1;">_</span><span style="color: #268bd2;">{k}</span><span style="color: #93a1a1;">'])], axis=1)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">elif</span> <span style="color: #2aa198;">"0.001"</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">k</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #4f5c7e;">get_autocorrelation</span>(<span style="color: #783778;">method</span>=<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #374478;">name</span>=(<span style="color: #3f7178;">key</span>, <span style="color: #374478;">k</span>))

<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> [<span style="color: #2aa198;">'multipletau'</span>, <span style="color: #2aa198;">'tttr2xfcs'</span>, <span style="color: #2aa198;">'tttr2xfcs_with_weights'</span>]:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #5e7837;">m</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>.<span style="color: #78683f;">keys</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">key</span>, <span style="color: #43783f;">item</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">list</span>(<span style="color: #3f7178;">ptufile</span>.<span style="color: #5e7837;">autoNorm</span>[<span style="color: #5e7837;">m</span>].<span style="color: #374478;">items</span>()):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">ptufile</span>.<span style="color: #7a4f7e;">save_autocorrelation</span>(<span style="color: #374478;">name</span>=<span style="color: #3f7178;">key</span>, <span style="color: #783778;">method</span>=<span style="color: #5e7837;">m</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #37785e;">output_path</span>=<span style="color: #37785e;">output_path</span>)
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">predtraces.to_csv(Path(output_path) / 'detectordropout_predtraces.csv')</span>
<span style="color: #513f78;">traces</span>.<span style="color: #513f78;">to_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'photobleaching_traces_dirty.csv'</span>)
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">preds.to_csv(Path(output_path) / 'detectordropout_preds.csv')</span>
</pre>
</div>

<pre class="example">
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
/home/ye53nis/.conda/envs/tf/lib/python3.9/site-packages/multipletau/core.py:175: DtypeWarning: Input dtype is not float; casting to np.float_!
  warnings.warn("Input dtype is not float; casting to np.float_!",
</pre>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">fit_dirty_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191107_photobleaching/dirty/10uW_CH2_multipletau_plot.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6, 8, 10], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">fit_dirty_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191107_photobleaching/dirty/10uW_CH2_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6, 8, 10], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">fit_clean_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191107_photobleaching/clean/5uW_CH2_multipletau_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6, 8, 10], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">fit_clean_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191107_photobleaching/clean/5uW_CH2_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6, 8, 10], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_dirty_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191107_photobleaching/dirty/10uW_CH2_multipletau_plot.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5, 7, 9], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_dirty_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191107_photobleaching/dirty/10uW_CH2_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5, 7, 9], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_clean_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191107_photobleaching/clean/5uW_CH2_multipletau_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5, 7, 9], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)
<span style="color: #268bd2;">corr_clean_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191107_photobleaching/clean/5uW_CH2_tttr2xfcs_plot.csv'</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  , <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 1, 3, 5, 7, 9], <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">preds_dirty = pd.read_csv(Path(output_path) / '191107_photobleaching/dirty/pex1dirty_preds.csv', index_col=0)</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">predtraces_dirty = pd.read_csv(Path(output_path) / '191107_photobleaching/dirty/pex1dirty_predtraces.csv', index_col=0)</span>
<span style="color: #268bd2;">traces_dirty</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191107_photobleaching/dirty/photobleaching_traces_dirty.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6, 8, 10])
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">preds_clean = pd.read_csv(Path(output_path) / '191107_photobleaching/clean/pex1clean_preds.csv', index_col=0)</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">predtraces_clean = pd.read_csv(Path(output_path) / '191107_photobleaching/clean/pex1clean_predtraces.csv', index_col=0)</span>
<span style="color: #268bd2;">traces_clean</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191107_photobleaching/clean/photobleaching_traces_clean.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">index_col</span>=0, <span style="color: #4f7e67;">usecols</span>=[0, 2, 4, 6, 8, 10])
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #7a4f7e;">fit_clean_mt</span>.<span style="color: #784437;">columns</span>)
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #374478;">traces_clean</span>.<span style="color: #784437;">columns</span>)
</pre>
</div>

<pre class="example">
Index(['2022-02-19_multipletau_CH2_BIN0dot001_us_eGFP1-5uW_T0s_1_correlation-CH2_2 fitted model: ',
       '2022-02-19_multipletau_CH2_BIN0dot001_us_eGFP2-5uW_T25s_1_correlation-CH2_2 fitted model: ',
       '2022-02-19_multipletau_CH2_BIN0dot001_us_eGFP3-5uW_T48s_1_correlation-CH2_2 fitted model: ',
       '2022-02-19_multipletau_CH2_BIN0dot001_us_eGFP4-5uW_T69s_1_correlation-CH2_2 fitted model: ',
       '2022-02-19_multipletau_CH2_BIN0dot001_us_eGFP5-5uW_T91s_1_correlation-CH2_2 fitted model: '],
      dtype='object')
Index(['eGFP1-5uW_T0s_1_CH2_BIN1.0', 'eGFP4-5uW_T69s_1_CH2_BIN1.0',
       'eGFP2-5uW_T25s_1_CH2_BIN1.0', 'eGFP3-5uW_T48s_1_CH2_BIN1.0',
       'eGFP5-5uW_T91s_1_CH2_BIN1.0'],
      dtype='object')
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">plotdata</span> = <span style="color: #657b83; font-weight: bold;">zip</span>(<span style="color: #37785e;">traces_dirty</span>.<span style="color: #374478;">items</span>(), <span style="color: #374478;">traces_clean</span>.<span style="color: #374478;">items</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #4f5c7e;">corr_dirty_mt</span>.<span style="color: #374478;">items</span>(), <span style="color: #37785e;">corr_clean_mt</span>.<span style="color: #374478;">items</span>(), <span style="color: #7a4f7e;">corr_dirty_tt</span>.<span style="color: #374478;">items</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #707e4f;">corr_clean_tt</span>.<span style="color: #374478;">items</span>(), <span style="color: #43783f;">fit_dirty_mt</span>.<span style="color: #374478;">items</span>(), <span style="color: #7a4f7e;">fit_clean_mt</span>.<span style="color: #374478;">items</span>(),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #374478;">fit_dirty_tt</span>.<span style="color: #374478;">items</span>(), <span style="color: #37785e;">fit_clean_tt</span>.<span style="color: #374478;">items</span>())
<span style="color: #268bd2;">fig</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #78683f;">figure</span>(<span style="color: #784437;">figsize</span>=(16, 30))
<span style="color: #268bd2;">gs</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">add_gridspec</span>(15, 4)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #707e4f;">i</span>, ((<span style="color: #784437;">td_n</span>, <span style="color: #7e544f;">td_v</span>), (<span style="color: #3f7178;">tc_n</span>, <span style="color: #5e7837;">tc_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #5e7837;">cdm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #7e544f;">ccm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #4f5c7e;">cdt_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #4f7e67;">cct_v</span>),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #4f7e67;">fdm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #783778;">fcm_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #37785e;">fdt_v</span>), (<span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #78683f;">fct_v</span>)) <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">enumerate</span>(<span style="color: #513f78;">plotdata</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #707e4f;">i</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax0</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*3, 0:2], <span style="color: #783f5a;">title</span>=<span style="color: #3f7178;">tc_n</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #7e544f;">ax0</span>, <span style="color: #784437;">data</span>=<span style="color: #5e7837;">tc_v</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #2aa198;">'auto'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax1</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*3, 2:4], <span style="color: #783f5a;">title</span>=<span style="color: #784437;">td_n</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #43783f;">ax1</span>, <span style="color: #784437;">data</span>=<span style="color: #7e544f;">td_v</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #2aa198;">'auto'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">ax0</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'time steps in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'photons'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #43783f;">ax1</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'time steps in ms'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'photons'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ax2 = fig.add_subplot(gs[i*4+1, 0:2], sharex=ax0)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># sns.lineplot(ax=ax2, data=ptc_v, color=sns.color_palette()[0], legend=False)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># sns.lineplot(ax=ax2, data=pc_v, color=sns.color_palette()[1], alpha=0.8, legend=False)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ax3 = fig.add_subplot(gs[i*4+1, 2:4], sharex=ax1)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># sns.lineplot(ax=ax3, data=ptd_v, legend=False)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># sns.lineplot(ax=ax3, data=pd_v, color=sns.color_palette()[1], alpha=0.8, legend=False)</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ax2.set(xlabel='time steps in ms', ylabel='probability of artifact')</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># ax3.set(xlabel='time steps in ms', ylabel='probability of artifact')</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax4</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*3+1:<span style="color: #707e4f;">i</span>*3+3, 0], <span style="color: #783f5a;">title</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'multipletau w/ $\mu s$ bin'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #513f78;">ax4</span>, <span style="color: #784437;">data</span>=<span style="color: #7e544f;">ccm_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #513f78;">ax4</span>, <span style="color: #784437;">data</span>=<span style="color: #783778;">fcm_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax5</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*3+1:<span style="color: #707e4f;">i</span>*3+3, 1], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'tttr2xfcs on arrival times'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #5e7837;">ax5</span>, <span style="color: #784437;">data</span>=<span style="color: #4f7e67;">cct_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #5e7837;">ax5</span>, <span style="color: #784437;">data</span>=<span style="color: #78683f;">fct_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">ax4</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'$\tau$ [ms]'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'Correlation G($\tau$)'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #5e7837;">ax5</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'$\tau$ [ms]'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'Correlation G($\tau$)'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax6</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*3+1:<span style="color: #707e4f;">i</span>*3+3, 2], <span style="color: #783f5a;">title</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'multipletau w/ $\mu s$ bin'</span>, <span style="color: #783778;">sharey</span>=<span style="color: #513f78;">ax4</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #374478;">ax6</span>, <span style="color: #784437;">data</span>=<span style="color: #5e7837;">cdm_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #374478;">ax6</span>, <span style="color: #784437;">data</span>=<span style="color: #4f7e67;">fdm_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">ax7</span> = <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(<span style="color: #43783f;">gs</span>[<span style="color: #707e4f;">i</span>*3+1:<span style="color: #707e4f;">i</span>*3+3, 3], <span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'tttr2xfcs on arrival times'</span>, <span style="color: #783778;">sharey</span>=<span style="color: #5e7837;">ax5</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #783778;">ax7</span>, <span style="color: #784437;">data</span>=<span style="color: #4f5c7e;">cdt_v</span>, <span style="color: #4f5c7e;">marker</span>=<span style="color: #2aa198;">'.'</span>, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">sns</span>.<span style="color: #4f7e67;">lineplot</span>(<span style="color: #7e544f;">ax</span>=<span style="color: #783778;">ax7</span>, <span style="color: #784437;">data</span>=<span style="color: #37785e;">fdt_v</span>, <span style="color: #78683f;">color</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>()[1], <span style="color: #7a4f7e;">alpha</span>=0.8, <span style="color: #707e4f;">legend</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">ax6</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'$\tau$ [ms]'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'Correlation G($\tau$)'</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">ax7</span>.<span style="color: #783778;">set</span>(<span style="color: #783f5a;">xscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'$\tau$ [ms]'</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'Correlation G($\tau$)'</span>)
<span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">suptitle</span>(<span style="color: #2aa198;">'eGFP and 5uW (left, clean) vs eGFP and 10uW (right, dirty) - 07.11.2019'</span>, <span style="color: #43783f;">size</span>=20)
<span style="color: #43783f;">gs</span>.<span style="color: #513f78;">tight_layout</span>(<span style="color: #4f7e67;">fig</span>, <span style="color: #7a4f7e;">rect</span>=[0, 0, 1, 0.99])

</pre>
</div>
</details>
</li>
<li>results:
</li>
</ul>

<figure>
<p><img src="./jupyter/analysis4-191107-photobleaching.png" class="img-responsive" alt="analysis4-191107-photobleaching.png">
</p>
</figure>
<ul class="org-ul">
<li>seems like this this data does not contain so much of an artifact. Have
to ask Pablo if there was other data he took.
</li>

<li>let's see if the transit times are different (see <code>Details</code> block):
<details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">taudiff_dirty_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191107_photobleaching/dirty/10uW_CH2_multipletau_param.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #783778;">loc</span>[:, <span style="color: #2aa198;">'txy1'</span>].<span style="color: #707e4f;">rename</span>(<span style="color: #2aa198;">'dirty (n=5\nmultipletau)'</span>)
<span style="color: #268bd2;">taudiff_dirty_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191107_photobleaching/dirty/10uW_CH2_tttr2xfcs_param.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #783778;">loc</span>[:, <span style="color: #2aa198;">'txy1'</span>].<span style="color: #707e4f;">rename</span>(<span style="color: #2aa198;">'dirty (n=5\ntttr2xfcs)'</span>)
<span style="color: #268bd2;">taudiff_clean_mt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191107_photobleaching/clean/5uW_CH2_multipletau_param.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #783778;">loc</span>[:, <span style="color: #2aa198;">'txy1'</span>].<span style="color: #707e4f;">rename</span>(<span style="color: #2aa198;">'clean (n=5\nmultipletau)'</span>)
<span style="color: #268bd2;">taudiff_clean_tt</span> = <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #78683f;">Path</span>(<span style="color: #37785e;">output_path</span>) / <span style="color: #2aa198;">'191107_photobleaching/clean/5uW_CH2_tttr2xfcs_param.csv'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #3f7178;">na_values</span>=<span style="color: #2aa198;">' '</span>).<span style="color: #783778;">loc</span>[:, <span style="color: #2aa198;">'txy1'</span>].<span style="color: #707e4f;">rename</span>(<span style="color: #2aa198;">'clean (n=5\ntttr2xfcs)'</span>)

<span style="color: #268bd2;">taudiff_plot</span> = <span style="color: #783778;">pd</span>.<span style="color: #7e544f;">concat</span>([<span style="color: #784437;">taudiff_clean_mt</span>, <span style="color: #783778;">taudiff_clean_tt</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">taudiff_dirty_mt</span>, <span style="color: #5e7837;">taudiff_dirty_tt</span>], <span style="color: #784437;">axis</span>=1)

<span style="color: #268bd2;">ax</span> = <span style="color: #4f5c7e;">sns</span>.<span style="color: #707e4f;">boxplot</span>(<span style="color: #784437;">data</span>=<span style="color: #783f5a;">taudiff_plot</span>)
<span style="color: #4f5c7e;">sns</span>.<span style="color: #78683f;">stripplot</span>(<span style="color: #784437;">data</span>=<span style="color: #783f5a;">taudiff_plot</span>, <span style="color: #513f78;">dodge</span>=<span style="color: #859900; font-weight: bold;">True</span>, <span style="color: #5e7837;">palette</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>([<span style="color: #2aa198;">'0.3'</span>]))
<span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #7e544f;">ax</span>, <span style="color: #707e4f;">ylabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'transit time [$\mu s$]'</span>, <span style="color: #37785e;">yscale</span>=<span style="color: #2aa198;">'log'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #783f5a;">title</span>=<span style="color: #2aa198;">'eGFP - 10uW (dirty) vs 5uW (clean) photobleaching - 07.11.2019'</span>)
<span style="color: #7e544f;">ax</span>.<span style="color: #37785e;">set_xticklabels</span>(<span style="color: #7e544f;">ax</span>.<span style="color: #5e7837;">get_xticklabels</span>(), <span style="color: #374478;">rotation</span>=45)

</pre>
</div>
</details>
</li>
<li>results:
<img src="./jupyter/analysis4-191107-all-param.png" class="img-responsive" alt="analysis4-191107-all-param.png">
</li>

<li>here too we don't see big differences in transit times.
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-1-12" class="outline-4">
<h4 id="sec-2-1-12"><span class="section-number-4">2.1.12</span> learnings from exp-220120-correlate-ptu</h4>
<div class="outline-text-4" id="text-2-1-12">
<ul class="org-ul">
<li>in terms of biological experiments:
<ul class="org-ul">
<li>always double-check your data - in the process I mixed up the
Alexa-LUV-experiment and the pex5 experiment - which made finding
explanations harder when the correction didn't work out
</li>
<li>it seems like I don't have photobleaching data yet → have to ask Pablo if
there are other experimental data he took
</li>
</ul>
</li>
<li>in terms of machine learning and neural networks:
<ul class="org-ul">
<li>while plotting the alexa-luv data, I noticed that my network still has a
bug - it learned on data with a fixed size of 2**14. When I use longer
traces, I have to pad the data - here with the median value of the trace.
BUT: the network wasn't trained on data like this. In this case, this leads
to more false positives (predicted artifactual, even though clean).
Re-training the model with such data helps.
</li>
<li>while plotting the pex5 data, I noticed that prediction doesn't work with
trace lengths of 2**15 → this can also be handled by re-training the
network and adjusting the parameters so that it works with different input
sizes (this works because it is a fully convolutional model)
</li>
<li>from exp-210807-hparams I know that there are still more different network
architectures that worked → I should train them as well, just to show that
a wide range of architectures can solve this problem.
</li>
</ul>
</li>
<li>in terms of FCS autocorrelation and fitting:
<ul class="org-ul">
<li>there is still an open question if 2 component fitting is a way to
improve the outcome of the correction. Dominic did a test which yielded
some promising data - BUT he used a 2D fitting algorithm, and if I tried
to play around with 3D fitting as described above, 1 component fitted
nicely, but the second component always stayed at <code>txy=0.01, alpha=1,
       A=1</code>
</li>
<li>also regarding fitting, even though <code>delete_and_shift</code> seems to be a
promising method to correct bright cluster-artifacts in FCS, there is a
shoulder in the correlation curve which is not fitted - this is probably
expected since the LUVs have an expected speed at that area (~2-3ms), but
still it should be further investigated
</li>
<li>regarding the <code>weights</code> correction → it is not clear yet, why it doesn't
work. The random correlation results show, that the bad results are
probably not the result of an artifactual correlation of the weighted
photons.
<ul class="org-ul">
<li>a possible explanation is, that with <code>weight=0</code> or other low weights
the gaps themselves get correlated → this happens also in the "detector
dropout" artifact.
</li>
<li>a possible follow-up experiment would be to distribute the photons in
an artifactual bin randomly to remove any correlation in them.
</li>
</ul>
</li>
<li>regarding the <code>weights=1-pred</code> correction → it is also not clear, why it
performs so badly.
</li>
<li>regarding the <code>delete</code> and <code>weights=0</code> corrections it is not clear, why
they are not equal → have to re-do them in the same experiment.
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-1-13" class="outline-4">
<h4 id="sec-2-1-13"><span class="section-number-4">2.1.13</span> Analysis 5: fitting with Focuspoint instead of focus-fit-js</h4>
<div class="outline-text-4" id="text-2-1-13">
<ul class="org-ul">
<li><b>Attention: this section was added after the branch
<code>exp-220120-correlate-ptu</code> was merged into <code>data</code>.</b>
</li>
<li>it turns out, that there is a software error in <code>focus-fit-js</code> which makes
3D plots unreliable. Together with Pablo, we double-checked the data
acquired with the standalone software <code>FoCuS-point-correlator</code>, written by
Dominic as well, and tested for years.
</li>
<li>With a 3D fit now working, we tried to do a 2 component fit on the data and
see if we can regain the underlying transit times of the fast and slow
components
</li>

<li>now let's look at the results:
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #707e4f;">cd</span> /<span style="color: #3f7178;">home</span>/<span style="color: #783f5a;">lex</span>/<span style="color: #784437;">Programme</span>/<span style="color: #784437;">drmed</span>-<span style="color: #784437;">git</span>
</pre>
</div>

<pre class="example">
/home/lex/Programme/drmed-git
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f5c7e;">numpy</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #707e4f;">np</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #37785e;">matplotlib</span>.<span style="color: #4f7e67;">pyplot</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f7e67;">plt</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #5e7837;">pandas</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #783778;">pd</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #78683f;">seaborn</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f5c7e;">sns</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #43783f;">pathlib</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #78683f;">Path</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #4f7e67;">pprint</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f7e67;">pprint</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">use seaborn style as default even if I just use matplotlib</span>
<span style="color: #4f5c7e;">sns</span>.<span style="color: #783778;">set</span>()
<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">set_palette</span>(<span style="color: #2aa198;">'colorblind'</span>)
</pre>
</div>
</li>

<li>load in all the data (see <code>Details</code> block)
<details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">path</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-03-25_FoCuS-point-analysis'</span>)

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean params</span>
<span style="color: #268bd2;">clean_nocorr_notrip_1spec_param_path</span> = <span style="color: #513f78;">path</span> / <span style="color: #2aa198;">'clean-nocorrection-notriplet-1species-5AR_outputParam.csv'</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean_nocorr_tripfixed_1spec_param_path = path / 'clean-nocorrection-triplet2a-0dot25-B1-0dot01-tauT1_outputParam.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty params</span>
<span style="color: #268bd2;">dirty_nocorr_notrip_2spec_param_path</span> = <span style="color: #513f78;">path</span> / <span style="color: #2aa198;">'dirty-nocorrection-notriplet-2species-5AR_outputParam.csv'</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty_nocorr_tripsemifixed_2spec_param_path = path / 'dirty-nocorrection-triplet2a-float-B1-0dot01-tauT1-2species-5AR_outputParam.csv'</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty_nocorr_tripfixed_2spec_param_path = path / 'dirty-nocorrection-triplet2a-0dot25-B1-0dot01-tauT1-2species-5AR_outputParam.csv'</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty params</span>
<span style="color: #268bd2;">dirty_cutshift_notrip_2spec_param_path</span> = <span style="color: #513f78;">path</span> / <span style="color: #2aa198;">'dirty-cutandshift-notriplet-2species-5AR_outputParam.csv'</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty_cutshift_tripsemifixed_2spec_param_path = path / 'dirty-cutandshift-triplet2a-float-B1-0dot01-tauT1-2species-5AR_outputParam.csv'</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty_cutshift_tripfixed_2spec_param_path = path / 'dirty-cutandshift-triplet2a-0dot25-B1-0dot01-tauT1-2species-5AR_outputParam.csv'</span>
<span style="color: #268bd2;">dirty_delete_notrip_2spec_param_path</span> = <span style="color: #513f78;">path</span> / <span style="color: #2aa198;">'dirty-delete-notriplet-2species-5AR_outputParam.csv'</span>
<span style="color: #268bd2;">dirty_weight0_notrip_2spec_param_path</span> = <span style="color: #513f78;">path</span> / <span style="color: #2aa198;">'dirty-weight0-notriplet-2species-5AR_outputParam.csv'</span>
<span style="color: #268bd2;">dirty_1pred_notrip_2spec_param_path</span> = <span style="color: #513f78;">path</span> / <span style="color: #2aa198;">'dirty-1-pred-notriplet-2species-5AR_outputParam.csv'</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean params</span>
<span style="color: #268bd2;">clean_param</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #43783f;">clean_nocorr_notrip_1spec_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #784437;">triplet</span>=229*[<span style="color: #2aa198;">'None'</span>,], <span style="color: #707e4f;">species</span>=229*[<span style="color: #2aa198;">'1'</span>,], <span style="color: #7a4f7e;">dimension</span>=229*[<span style="color: #2aa198;">'3D eq 1B, AR=5'</span>,], <span style="color: #3f7178;">fraction</span>=229*[<span style="color: #2aa198;">'small'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #5e7837;">correlator</span>=229*[<span style="color: #2aa198;">'tttr2xfcs'</span>,], <span style="color: #78683f;">artifact</span>=229*[<span style="color: #2aa198;">'clean'</span>,], <span style="color: #3f7178;">correction</span>=229*[<span style="color: #2aa198;">'No correction'</span>,])
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean_param =  pd.read_csv(clean_nocorr_tripfixed_1spec_param_path, sep=',').assign(</span>
<span style="color: #93a1a1;">#     </span><span style="color: #93a1a1;">triplet=229*['B1=0.25, tauT1=0.01',], species=229*['1',], dimension=229*['3D eq 1B, AR=5',],</span>
<span style="color: #93a1a1;">#     </span><span style="color: #93a1a1;">correlator=229*['tttr2xfcs',], artifact=229*['clean',], correction=229*['No correction',])</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean_param['txy2'] = clean_param['txy1']  # for plotting purposes</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">clean_param['A2'] = clean_param['A1']  # for plotting purposes</span>

<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty params</span>
<span style="color: #268bd2;">dirty_nocorr</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f5c7e;">dirty_nocorr_notrip_2spec_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #784437;">triplet</span>=173*[<span style="color: #2aa198;">'None'</span>,], <span style="color: #707e4f;">species</span>=173*[<span style="color: #2aa198;">'2'</span>,], <span style="color: #7a4f7e;">dimension</span>=173*[<span style="color: #2aa198;">'3D eq 1B, AR=5'</span>,], <span style="color: #3f7178;">fraction</span>=173*[<span style="color: #2aa198;">'small'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #5e7837;">correlator</span>=173*[<span style="color: #2aa198;">'tttr2xfcs'</span>,], <span style="color: #78683f;">artifact</span>=173*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=173*[<span style="color: #2aa198;">'No correction'</span>,])
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty_nocorr_tripsemi =  pd.read_csv(dirty_nocorr_tripsemifixed_2spec_param_path, sep=',').assign(</span>
<span style="color: #93a1a1;">#     </span><span style="color: #93a1a1;">triplet=173*['B1=float, tauT1=0.01',], species=173*['2, AR=5',],</span>
<span style="color: #93a1a1;">#     </span><span style="color: #93a1a1;">correlator=173*['tttr2xfcs',], artifact=173*['dirty',], correction=173*['None',])</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty_nocorr_tripfix =  pd.read_csv(dirty_nocorr_tripfixed_2spec_param_path, sep=',').assign(</span>
<span style="color: #93a1a1;">#     </span><span style="color: #93a1a1;">triplet=173*['B1=0.25, tauT1=0.01',], species=173*['2, AR=5',],</span>
<span style="color: #93a1a1;">#     </span><span style="color: #93a1a1;">correlator=173*['tttr2xfcs',], artifact=173*['dirty',], correction=173*['None',])</span>
<span style="color: #268bd2;">dirty_weight0</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #707e4f;">dirty_weight0_notrip_2spec_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #784437;">triplet</span>=173*[<span style="color: #2aa198;">'None'</span>,], <span style="color: #707e4f;">species</span>=173*[<span style="color: #2aa198;">'2'</span>,], <span style="color: #7a4f7e;">dimension</span>=173*[<span style="color: #2aa198;">'3D eq 1B, AR=5'</span>,], <span style="color: #3f7178;">fraction</span>=173*[<span style="color: #2aa198;">'small'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #5e7837;">correlator</span>=173*[<span style="color: #2aa198;">'tttr2xfcs'</span>,], <span style="color: #78683f;">artifact</span>=173*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=173*[<span style="color: #2aa198;">'weight=0'</span>,])


<span style="color: #268bd2;">dirty_cutshift</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #513f78;">dirty_cutshift_notrip_2spec_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #784437;">triplet</span>=53*[<span style="color: #2aa198;">'None'</span>,], <span style="color: #707e4f;">species</span>=53*[<span style="color: #2aa198;">'2'</span>,], <span style="color: #7a4f7e;">dimension</span>=53*[<span style="color: #2aa198;">'3D eq 1B, AR=5'</span>,], <span style="color: #3f7178;">fraction</span>=53*[<span style="color: #2aa198;">'small'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'tttr2xfcs'</span>,], <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'cut and shift'</span>,])
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty_cutshift_tripsemi =  pd.read_csv(dirty_cutshift_tripsemifixed_2spec_param_path, sep=',').assign(</span>
<span style="color: #93a1a1;">#     </span><span style="color: #93a1a1;">triplet=53*['B1=float, tauT1=0.01',], species=53*['2, AR=5',],</span>
<span style="color: #93a1a1;">#     </span><span style="color: #93a1a1;">correlator=53*['tttr2xfcs',], artifact=53*['dirty',], correction=53*['cut and shift',])</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">dirty_cutshift_tripfix =  pd.read_csv(dirty_cutshift_tripfixed_2spec_param_path, sep=',').assign(</span>
<span style="color: #93a1a1;">#     </span><span style="color: #93a1a1;">triplet=53*['B1=0.25, tauT1=0.01',], species=53*['2, AR=5',],</span>
<span style="color: #93a1a1;">#     </span><span style="color: #93a1a1;">correlator=53*['tttr2xfcs',], artifact=53*['dirty',], correction=53*['cut and shift',])</span>
<span style="color: #268bd2;">dirty_delete</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #4f7e67;">dirty_delete_notrip_2spec_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #784437;">triplet</span>=53*[<span style="color: #2aa198;">'None'</span>,], <span style="color: #707e4f;">species</span>=53*[<span style="color: #2aa198;">'2'</span>,], <span style="color: #7a4f7e;">dimension</span>=53*[<span style="color: #2aa198;">'3D eq 1B, AR=5'</span>,], <span style="color: #3f7178;">fraction</span>=53*[<span style="color: #2aa198;">'small'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'tttr2xfcs'</span>,], <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'delete'</span>,])
<span style="color: #268bd2;">dirty_1pred</span> =  <span style="color: #783778;">pd</span>.<span style="color: #78683f;">read_csv</span>(<span style="color: #37785e;">dirty_1pred_notrip_2spec_param_path</span>, <span style="color: #707e4f;">sep</span>=<span style="color: #2aa198;">','</span>).<span style="color: #707e4f;">assign</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #784437;">triplet</span>=53*[<span style="color: #2aa198;">'None'</span>,], <span style="color: #707e4f;">species</span>=53*[<span style="color: #2aa198;">'2'</span>,], <span style="color: #7a4f7e;">dimension</span>=53*[<span style="color: #2aa198;">'3D eq 1B, AR=5'</span>,], <span style="color: #3f7178;">fraction</span>=53*[<span style="color: #2aa198;">'small'</span>,],
<span style="background-color: #eee8d5;"> </span>   <span style="color: #5e7837;">correlator</span>=53*[<span style="color: #2aa198;">'tttr2xfcs'</span>,], <span style="color: #78683f;">artifact</span>=53*[<span style="color: #2aa198;">'dirty'</span>,], <span style="color: #3f7178;">correction</span>=53*[<span style="color: #2aa198;">'weight=1-prediction'</span>,])

<span style="color: #268bd2;">all_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #7e544f;">concat</span>([<span style="color: #7a4f7e;">clean_param</span>, <span style="color: #7a4f7e;">dirty_nocorr</span>, <span style="color: #4f7e67;">dirty_weight0</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #3f7178;">dirty_cutshift</span>, <span style="color: #783f5a;">dirty_delete</span>, <span style="color: #4f7e67;">dirty_1pred</span>],
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #78683f;">ignore_index</span>=<span style="color: #859900; font-weight: bold;">True</span>)

<span style="color: #37785e;">all_param</span>[<span style="color: #2aa198;">"artifact-correction"</span>] = <span style="color: #37785e;">all_param</span>[[<span style="color: #2aa198;">"artifact"</span>, <span style="color: #2aa198;">"correction"</span>]].<span style="color: #78683f;">agg</span>(<span style="color: #2aa198;">' - '</span>.<span style="color: #784437;">join</span>, <span style="color: #784437;">axis</span>=1)
<span style="color: #268bd2;">all_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #4f7e67;">wide_to_long</span>(<span style="color: #37785e;">all_param</span>, <span style="color: #784437;">stubnames</span>=<span style="color: #2aa198;">'txy'</span>, <span style="color: #707e4f;">i</span>=[<span style="color: #2aa198;">'name_of_plot'</span>], <span style="color: #783f5a;">j</span>=<span style="color: #2aa198;">'fitted species (txy)'</span>)

<span style="color: #268bd2;">all_param</span> = <span style="color: #37785e;">all_param</span>.<span style="color: #78683f;">reset_index</span>()
<span style="color: #268bd2;">all_param</span> = <span style="color: #783778;">pd</span>.<span style="color: #4f7e67;">wide_to_long</span>(<span style="color: #37785e;">all_param</span>, <span style="color: #784437;">stubnames</span>=<span style="color: #2aa198;">'A'</span>, <span style="color: #707e4f;">i</span>=[<span style="color: #2aa198;">'name_of_plot'</span>, <span style="color: #2aa198;">'fitted species (txy)'</span>], <span style="color: #783f5a;">j</span>=<span style="color: #2aa198;">'fitted species (A)'</span>)
<span style="color: #268bd2;">all_param</span> = <span style="color: #37785e;">all_param</span>.<span style="color: #78683f;">reset_index</span>()

</pre>
</div>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">g</span> = <span style="color: #4f5c7e;">sns</span>.<span style="color: #78683f;">catplot</span>(<span style="color: #784437;">data</span>=<span style="color: #37785e;">all_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">y</span>=<span style="color: #2aa198;">'txy'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">x</span>=<span style="color: #2aa198;">'artifact-correction'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">hue</span>=<span style="color: #2aa198;">'fitted species (txy)'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">sharey</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">height</span>=5,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">aspect</span>=2,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">legend_out</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">kind</span>=<span style="color: #2aa198;">'boxen'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #43783f;">showfliers</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="color: #7a4f7e;">g</span>.<span style="color: #78683f;">map_dataframe</span>(<span style="color: #4f5c7e;">sns</span>.<span style="color: #78683f;">stripplot</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">y</span>=<span style="color: #2aa198;">'txy'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #3f7178;">x</span>=<span style="color: #2aa198;">'artifact-correction'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #78683f;">hue</span>=<span style="color: #2aa198;">'fitted species (txy)'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">dodge</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #5e7837;">palette</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>([<span style="color: #2aa198;">'0.3'</span>]),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #43783f;">size</span>=4,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #783778;">jitter</span>=0.2)
<span style="color: #7a4f7e;">g</span>.<span style="color: #513f78;">tight_layout</span>()
<span style="color: #7a4f7e;">g</span>.<span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">suptitle</span>(<span style="color: #2aa198;">'Transit times of AlexaFluor488 (clean) vs \nAlexaFluor488 + Dio LUVs (dirty) with different correction methods'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #513f78;">y</span>=1.08, <span style="color: #43783f;">size</span>=20)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">axes</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">g.axes.flat</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #657b83; font-weight: bold;">_</span> = <span style="color: #43783f;">axes</span>.<span style="color: #37785e;">set_xticklabels</span>(<span style="color: #43783f;">axes</span>.<span style="color: #5e7837;">get_xticklabels</span>(), <span style="color: #374478;">rotation</span>=45)
<span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #7a4f7e;">g</span>.<span style="color: #43783f;">axes</span>, <span style="color: #37785e;">yscale</span>=<span style="color: #2aa198;">'log'</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'biological sample - correction method'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">ylabel</span>=<span style="color: #5e7837;">r</span><span style="color: #2aa198;">'transit time $\tau_{D}$ (log)'</span>)
<span style="color: #4f7e67;">plt</span>.<span style="color: #374478;">show</span>()
</pre>
</div>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">g</span> = <span style="color: #4f5c7e;">sns</span>.<span style="color: #78683f;">catplot</span>(<span style="color: #784437;">data</span>=<span style="color: #37785e;">all_param</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">y</span>=<span style="color: #2aa198;">'A'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #3f7178;">x</span>=<span style="color: #2aa198;">'artifact-correction'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">hue</span>=<span style="color: #2aa198;">'fitted species (A)'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">sharey</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">height</span>=5,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">aspect</span>=2,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">legend_out</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783778;">kind</span>=<span style="color: #2aa198;">'boxen'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #43783f;">showfliers</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="color: #7a4f7e;">g</span>.<span style="color: #78683f;">map_dataframe</span>(<span style="color: #4f5c7e;">sns</span>.<span style="color: #78683f;">stripplot</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">y</span>=<span style="color: #2aa198;">'A'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #3f7178;">x</span>=<span style="color: #2aa198;">'artifact-correction'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #78683f;">hue</span>=<span style="color: #2aa198;">'fitted species (A)'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #513f78;">dodge</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #5e7837;">palette</span>=<span style="color: #4f5c7e;">sns</span>.<span style="color: #7e544f;">color_palette</span>([<span style="color: #2aa198;">'0.3'</span>]),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #43783f;">size</span>=4,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #783778;">jitter</span>=0.2)
<span style="color: #7a4f7e;">g</span>.<span style="color: #513f78;">tight_layout</span>()
<span style="color: #7a4f7e;">g</span>.<span style="color: #4f7e67;">fig</span>.<span style="color: #4f5c7e;">suptitle</span>(<span style="color: #2aa198;">'Fraction sizes of AlexaFluor488 (clean) vs\nAlexaFluor488 + Dio LUVs (dirty) with different correction methods'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #513f78;">y</span>=1.08, <span style="color: #43783f;">size</span>=20)
<span style="color: #859900; font-weight: bold;">for</span> <span style="color: #43783f;">axes</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">g.axes.flat</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #657b83; font-weight: bold;">_</span> = <span style="color: #43783f;">axes</span>.<span style="color: #37785e;">set_xticklabels</span>(<span style="color: #43783f;">axes</span>.<span style="color: #5e7837;">get_xticklabels</span>(), <span style="color: #374478;">rotation</span>=45)
<span style="color: #4f7e67;">plt</span>.<span style="color: #3f7178;">setp</span>(<span style="color: #7a4f7e;">g</span>.<span style="color: #43783f;">axes</span>, <span style="color: #783f5a;">xlabel</span>=<span style="color: #2aa198;">'biological sample - correction method'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">ylabel</span>=<span style="color: #2aa198;">'relative fraction size'</span>)
<span style="color: #4f7e67;">plt</span>.<span style="color: #374478;">show</span>()
</pre>
</div>
</details>
</li>

<li>let's have a look at transit times and fraction sizes of AF488 vs
AF488 + DioLUVs + different correction methods
<img src="./jupyter/analysis5-all-param-transit-times.png" class="img-responsive" alt="analysis5-all-param-transit-times.png">
<img src="./jupyter/analysis5-all-param-fraction-sizes.png" class="img-responsive" alt="analysis5-all-param-fraction-sizes.png">
</li>

<li>I also had a look at different triplet parameters, we decided in the end
against using them for the sake of simplicity:
<img src="./jupyter/analysis5-2spec-triplet-3D-transit-times.png" class="img-responsive" alt="analysis5-2spec-triplet-3D-transit-times.png">
<img src="./jupyter/analysis5-2spec-triplet-3D-fraction-size.png" class="img-responsive" alt="analysis5-2spec-triplet-3D-fraction-size.png">
</li>

<li>let's save the DataFrame used for plotting so that re-using it is simpler:
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #37785e;">all_param</span>.<span style="color: #513f78;">to_csv</span>(<span style="color: #2aa198;">'data/exp-220120-correlate-ptu/2022-04-05_all-params.csv'</span>)
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div></div></div>
<footer id="postamble" class="">
<div><p class="author">Author: Alexander Seltmann</p>
<p class="date">Created: 2022-04-05 Di 13:13</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 27.2 (<a href="http://orgmode.org">Org-mode</a> 9.5.2)</p>
</div>
</footer>
</body>
</html>
