<!doctype html>
<html lang="en">
<head>
<title>Lab book Fluotracify</title>
<!-- 2022-08-22 Mo 16:17 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Org-mode">
<meta name="author" content="Alexander Seltmann">

<link  href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
<style>
/* org mode styles on top of twbs */

html {
    position: relative;
    min-height: 100%;
}

body {
    font-size: 18px;
    margin-bottom: 105px;
}

footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 101px;
    background-color: #f5f5f5;
}

footer > div {
    padding: 10px;
}

footer p {
    margin: 0 0 5px;
    text-align: center;
    font-size: 16px;
}

#table-of-contents {
    margin-top: 20px;
    margin-bottom: 20px;
}

blockquote p {
    font-size: 18px;
}

pre {
    font-size: 16px;
}

.footpara {
    display: inline-block;
}

figcaption {
  font-size: 16px;
  color: #666;
  font-style: italic;
  padding-bottom: 15px;
}

/* from twbs docs */

.bs-docs-sidebar.affix {
    position: static;
}
@media (min-width: 768px) {
    .bs-docs-sidebar {
        padding-left: 20px;
    }
}

/* All levels of nav */
.bs-docs-sidebar .nav > li > a {
    display: block;
    padding: 4px 20px;
    font-size: 14px;
    font-weight: 500;
    color: #999;
}
.bs-docs-sidebar .nav > li > a:hover,
.bs-docs-sidebar .nav > li > a:focus {
    padding-left: 19px;
    color: #A1283B;
    text-decoration: none;
    background-color: transparent;
    border-left: 1px solid #A1283B;
}
.bs-docs-sidebar .nav > .active > a,
.bs-docs-sidebar .nav > .active:hover > a,
.bs-docs-sidebar .nav > .active:focus > a {
    padding-left: 18px;
    font-weight: bold;
    color: #A1283B;
    background-color: transparent;
    border-left: 2px solid #A1283B;
}

/* Nav: second level (shown on .active) */
.bs-docs-sidebar .nav .nav {
    display: none; /* Hide by default, but at >768px, show it */
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 30px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav > li > a:focus {
    padding-left: 29px;
}
.bs-docs-sidebar .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav > .active:focus > a {
    padding-left: 28px;
    font-weight: 500;
}

/* Nav: third level (shown on .active) */
.bs-docs-sidebar .nav .nav .nav {
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 40px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav .nav > li > a:focus {
    padding-left: 39px;
}
.bs-docs-sidebar .nav .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav .nav > .active:focus > a {
    padding-left: 38px;
    font-weight: 500;
}

/* Show and affix the side nav when space allows it */
@media (min-width: 992px) {
    .bs-docs-sidebar .nav > .active > ul {
        display: block;
    }
    /* Widen the fixed sidebar */
    .bs-docs-sidebar.affix,
    .bs-docs-sidebar.affix-bottom {
        width: 213px;
    }
    .bs-docs-sidebar.affix {
        position: fixed; /* Undo the static from mobile first approach */
        top: 20px;
    }
    .bs-docs-sidebar.affix-bottom {
        position: absolute; /* Undo the static from mobile first approach */
    }
    .bs-docs-sidebar.affix .bs-docs-sidenav,.bs-docs-sidebar.affix-bottom .bs-docs-sidenav {
        margin-top: 0;
        margin-bottom: 0
    }
}
@media (min-width: 1200px) {
    /* Widen the fixed sidebar again */
    .bs-docs-sidebar.affix-bottom,
    .bs-docs-sidebar.affix {
        width: 263px;
    }
}
</style>
<script>
$(function() {
    'use strict';

    $('.bs-docs-sidebar li').first().addClass('active');

    $(document.body).scrollspy({target: '.bs-docs-sidebar'});

    $('.bs-docs-sidebar').affix();
});
</script><style type="text/css">.example {background-color: #FBFBBF;}</style>
<style type="text/css">pre.src-emacs-lisp {background-color: #F7ECFB;}</style>
<style type="text/css">pre.src-sh {background-color: #F0FBE9;}</style>
<style type="text/css">pre.src-tmux {background-color: #E1EED8;}</style>
<style type="text/css">pre.src-python {background-color: #E6EDF4;}</style>
<style type="text/css">pre.src-jupyter-python {background-color: #FAEAE1;}</style>
<style type="text/css">details {padding: 1em; background-color: #f0f0f0; border-radius: 15px; color: hsl(157 75% 20%); font-size: 0.9em; box-shadow: 0.05em 0.1em 5px 0.01em  #00000057;}</style>
<style type="text/css">details:hover {background:pink;}</style>
<style type="text/css">table {display: block; overflow-x: auto; white-space: nowrap;}</style>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "center",
  displayIndent: "2em",
  messageStyle: "none",
  "HTML-CSS": {
    scale: 100,
    styles: {
      ".MathJax_Display": {
        "font-size": "100%"
      }
    }
  },
  "SVG": {
    scale: 100,
    styles: {
      ".MathJax_SVG_Display": {
        "font-size": "100%",
        "margin-left": "-2.281em"
      }
    }
  }
});
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"></script>
</head>
<body>
<div id="content" class="container">
<div class="row"><div class="col-md-3 col-md-push-9"><nav id="table-of-contents">
<div id="text-table-of-contents" class="bs-docs-sidebar">
<ul class="nav">
<li><a href="#sec-1">1. Technical Notes</a>
<ul class="nav">
<li><a href="#sec-1-1">1.1. README</a>
<ul class="nav">
<li><a href="#sec-1-1-1">1.1.1. General:</a></li>
<li><a href="#sec-1-1-2">1.1.2. Code block languages used in this document</a></li>
<li><a href="#sec-1-1-3">1.1.3. Experiments workflow:</a></li>
<li><a href="#sec-1-1-4">1.1.4. Example for experimental setup procedure</a>
<ul class="nav">
<li><a href="#sec-jupyter-setup">1.1.4.1. Setting starting a jupyter kernel from a remote jupyter session using <code>emacs-jupyter</code> in <code>org babel</code></a></li>
</ul>
</li>
<li><a href="#sec-1-1-5">1.1.5. tools used (notes)</a>
<ul class="nav">
<li><a href="#sec-1-1-5-1">1.1.5.1. Emacs <code>magit</code></a></li>
<li><a href="#sec-1-1-5-2">1.1.5.2. jupyter</a></li>
<li><a href="#sec-1-1-5-3">1.1.5.3. mlflow</a></li>
<li><a href="#sec-1-1-5-4">1.1.5.4. tensorflow</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-2">1.2. Template for data entry and setup notes:</a>
<ul class="nav">
<li><a href="#sec-1-2-1">1.2.1. exp-#date-#title</a>
<ul class="nav">
<li><a href="#sec-1-2-1-1">1.2.1.1. git:</a></li>
<li><a href="#sec-1-2-1-2">1.2.1.2. System Metadata:</a></li>
<li><a href="#scripts-tmux">1.2.1.3. Tmux setup and scripts</a></li>
<li><a href="#ssh-tunneling">1.2.1.4. SSH tunneling</a></li>
<li><a href="#scripts-jp">1.2.1.5. jupyter scripts</a></li>
</ul>
</li>
<li><a href="#sec-1-2-2">1.2.2. Setup notes</a>
<ul class="nav">
<li><a href="#sec-tmux-setup">1.2.2.1. Setting up a tmux connection from using <code>ob-tmux</code> in <code>org-babel</code></a></li>
<li><a href="#sec-1-2-2-2">1.2.2.2. <code>emacs-jupyter</code> Setup</a></li>
</ul>
</li>
<li><a href="#sec-1-2-3">1.2.3. Notes on archiving</a>
<ul class="nav">
<li><a href="#sec-1-2-3-1">1.2.3.1. Exporting the LabBook.org to html in a twbs style</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-3">1.3. Organization of git</a>
<ul class="nav">
<li><a href="#sec-1-3-1">1.3.1. remote/origin/main branch:</a></li>
<li><a href="#sec-1-3-2">1.3.2. remote/origin/exp### branches:</a></li>
<li><a href="#sec-1-3-3">1.3.3. remote/origin/develop branch:</a></li>
<li><a href="#sec-1-3-4">1.3.4. remote/origin/data branch:</a></li>
<li><a href="#sec-1-3-5">1.3.5. Git TAGs</a>
<ul class="nav">
<li><a href="#sec-1-3-5-1">1.3.5.1. Stable versions:</a></li>
<li><a href="#sec-1-3-5-2">1.3.5.2. All tags from git:</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-4">1.4. Organization of code</a>
<ul class="nav">
<li><a href="#sec-1-4-1">1.4.1. scripts:</a></li>
<li><a href="#sec-1-4-2">1.4.2. src/</a>
<ul class="nav">
<li><a href="#sec-1-4-2-1">1.4.2.1. fluotracify/</a></li>
<li><a href="#sec-1-4-2-2">1.4.2.2. nanosimpy/</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-5">1.5. Changes in this repository (without "* Data" in this file)</a>
<ul class="nav">
<li><a href="#sec-1-5-1">1.5.1. Changes in LabBook.org (without "* Data")</a>
<ul class="nav">
<li><a href="#sec-1-5-1-1">1.5.1.1. 2022-02-19</a></li>
<li><a href="#sec-1-5-1-2">1.5.1.2. 2021-12-16</a></li>
<li><a href="#sec-1-5-1-3">1.5.1.3. 2021-08-05</a></li>
<li><a href="#sec-1-5-1-4">1.5.1.4. 2021-04-04</a></li>
<li><a href="#sec-1-5-1-5">1.5.1.5. 2020-11-04</a></li>
<li><a href="#sec-1-5-1-6">1.5.1.6. 2020-05-31</a></li>
<li><a href="#sec-1-5-1-7">1.5.1.7. 2020-05-07</a></li>
<li><a href="#sec-1-5-1-8">1.5.1.8. 2020-04-22</a></li>
<li><a href="#sec-1-5-1-9">1.5.1.9. 2020-03-30</a></li>
</ul>
</li>
<li><a href="#sec-1-5-2">1.5.2. Changes in src/fluotracify</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-2">2. Data</a>
<ul class="nav">
<li><a href="#sec-2-1">2.1. exp-201231-clustersim</a>
<ul class="nav">
<li><a href="#sec-2-1-1">2.1.1. connect to jupyter notebook</a></li>
<li><a href="#sec-2-1-2">2.1.2. record metadata</a></li>
<li><a href="#sec-2-1-3">2.1.3. set variables</a></li>
<li><a href="#sec-2-1-4">2.1.4. Do the simulation</a></li>
<li><a href="#sec-2-1-5">2.1.5. preparing examplary plots of the results (new kernel, new code)</a></li>
<li><a href="#sec-2-1-6">2.1.6. plots of the simulated traces by diffusion rate</a></li>
<li><a href="#sec-2-1-7">2.1.7. Learnings</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</nav>
</div><div class="col-md-9 col-md-pull-3"><h1 class="title">Lab book Fluotracify</h1>


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Technical Notes</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> README</h3>
<div class="outline-text-3" id="text-1-1">
</div><div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1"><span class="section-number-4">1.1.1</span> General:</h4>
<div class="outline-text-4" id="text-1-1-1">
<ul class="org-ul">
<li>This file corresponds to my lab book for my doctoral thesis tackling
artifact correction in Fluorescence Correlation Spectroscopy (FCS)
measurements using Deep Neural Networks. It also contains notes taken
during the process of setting up this workflow for reproducible research.
</li>
<li>This file contains explanations of how things are organized, of the
workflow for doing experiments, changes made to the code, and the observed
behavior in the "* Data" section.
</li>
<li>The branching model used is described in <a href="http://starpu-simgrid.gforge.inria.fr/misc/SIGOPS_paper.pdf">this paper</a>. Therefore: if you
are interested in the "* Data" section, you have to <code>git clone</code> the <i>data</i>
branch of the repository. The <i>main</i> branch is clean from any results, it
contains only source code and the analysis.
</li>
<li>This project is my take on <a href="https://en.wikipedia.org/wiki/Open-notebook_science">Open-notebook science</a>. The idea was postulated in
a blog post in 2006:
<blockquote>
<p>
&#x2026; there is a URL to a laboratory notebook that is freely available and
indexed on common search engines. It does not necessarily have to look like
a paper notebook but it is essential that all of the information available
to the researchers to make their conclusions is equally available to the
rest of the world &#x2014;Jean-Claude Bradley
</p>
</blockquote>
</li>
<li>Proposal on how to deal with truly private data (e.g. notes from a
confidential meeting with a colleague), which might otherwise be noted in a
normal Lab notebook: do not include them here. Only notes relevant to the
current project should be taken
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-1-2" class="outline-4">
<h4 id="sec-1-1-2"><span class="section-number-4">1.1.2</span> Code block languages used in this document</h4>
<div class="outline-text-4" id="text-1-1-2">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">This is a sh block for shell / bash scripting. In the context of this file,</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">these blocks are mainly used for operations on my local computer.</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">In the LabBook.html rendering of this document, these blocks will have a</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">light green colour (#F0FBE9)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-tmux"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">This block can open and access tmux sessions, used for shell scripting on</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">remote computing clusters.</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">In the LabBook.html rendering of this document, these blocks will have a</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">distinct light green colour (#E1EED8)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">This is a python block. In the context of this file, it is seldomly used</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">(only for examplary scripts.)</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">In the LabBook.html rendering of this document, these blocks will have a</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">light blue colour (#E6EDF4)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">This is a jupyter-python block. The code is sent to a jupyter kernel running</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">on a remote high performance computing cluster. Most of my jupyter code is</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">executed this way.</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">In the LabBook.html rendering of this document, these blocks will have a</span>
<span style="color: #93a1a1;"># </span><span style="color: #93a1a1;">light orange colour (#FAEAE1)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #93a1a1;">;; </span><span style="color: #93a1a1;">This is a emacs-lisp block, the language used to customize Emacs, which is</span>
<span style="color: #93a1a1;">;; </span><span style="color: #93a1a1;">sometimes necessary, since the reproducible workflow of this LabBook is</span>
<span style="color: #93a1a1;">;; </span><span style="color: #93a1a1;">tightly integrated with Emacs and org-mode.</span>
<span style="color: #93a1a1;">;; </span><span style="color: #93a1a1;">In the LabBook.html rendering of this document, these blocks will have a</span>
<span style="color: #93a1a1;">;; </span><span style="color: #93a1a1;">light violet colour (#F7ECFB)</span>
</pre>
</div>

<pre class="example">
This is a literal example block. It can be used very flexibly - in the context
of this document the output of most code blocks is displayed this way.
In the LabBook.html rendering of this document, these blocks will have a light
yellow colour (#FBFBBF)
</pre>

<details>
<pre class="example">
This is a literal example block enclosed in a details block. This is useful to
make the page more readable by collapsing large amounts of output.
In the Labbook.html rendering of this document, the details block will have a
light grey colour (#f0f0f0) and a pink color when hovering above it.
</pre>
</details>
</div>
</div>

<div id="outline-container-sec-1-1-3" class="outline-4">
<h4 id="sec-1-1-3"><span class="section-number-4">1.1.3</span> Experiments workflow:</h4>
<div class="outline-text-4" id="text-1-1-3">
<ol class="org-ol">
<li>Create a new branch from <code>main</code>
</li>
<li>Print out the git log from the latest commit and the metadata
</li>
<li>Call the analysis scripts, follow the principles outlined in
<a href="#sec-1-4">Organization of code</a>
</li>
<li>All machine learning runs are saved in <code>data/mlruns</code>, all other data in
<code>data/#experiment-name</code>
</li>
<li>Add a <code>** exp-&lt;date&gt;-&lt;name&gt;</code>" section to this file under <a href="#sec-2">Data</a>
</li>
<li>Commit/push the results of this separate branch
</li>
<li>Merge this new branch with the remote <code>data</code> branch
</li>
</ol>
</div>
</div>
<div id="outline-container-sec-1-1-4" class="outline-4">
<h4 id="sec-1-1-4"><span class="section-number-4">1.1.4</span> Example for experimental setup procedure</h4>
<div class="outline-text-4" id="text-1-1-4">
</div><div id="outline-container-sec-jupyter-setup" class="outline-5">
<h5 id="sec-jupyter-setup"><a id="sec-1-1-4-1" name="sec-1-1-4-1"></a><span class="section-number-5">1.1.4.1</span> Setting starting a jupyter kernel from a remote jupyter session using <code>emacs-jupyter</code> in <code>org babel</code></h5>
<div class="outline-text-5" id="text-sec-jupyter-setup">
</div>
</div>
</div>

<div id="outline-container-sec-1-1-5" class="outline-4">
<h4 id="sec-1-1-5"><span class="section-number-4">1.1.5</span> tools used (notes)</h4>
<div class="outline-text-4" id="text-1-1-5">
</div><div id="outline-container-sec-1-1-5-1" class="outline-5">
<h5 id="sec-1-1-5-1"><span class="section-number-5">1.1.5.1</span> Emacs <code>magit</code></h5>
<div class="outline-text-5" id="text-1-1-5-1">
<ul class="org-ul">
<li><code>gitflow-avh</code> (<code>magit-flow</code>) to follow the flow
</li>
<li>possibly <a href="https://github.com/magit/magit-annex">https://github.com/magit/magit-annex</a> for large files. Follow this:
<a href="https://git-annex.branchable.com/walkthrough/">https://git-annex.branchable.com/walkthrough/</a>
</li>
<li>maybe check out git-toolbelt at some point
<a href="https://github.com/nvie/git-toolbelt#readme">https://github.com/nvie/git-toolbelt#readme</a> with
<a href="https://nvie.com/posts/git-power-tools/">https://nvie.com/posts/git-power-tools/</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-1-5-2" class="outline-5">
<h5 id="sec-1-1-5-2"><span class="section-number-5">1.1.5.2</span> jupyter</h5>
<div class="outline-text-5" id="text-1-1-5-2">
<ul class="org-ul">
<li>emacs jupyter for running and connecting to kernel on server:
<a href="https://github.com/dzop/emacs-jupyter">https://github.com/dzop/emacs-jupyter</a>
</li>
<li>if I actually still would use .ipynb files, these might come handy:
<ul class="org-ul">
<li>jupytext: <a href="https://github.com/mwouts/jupytext">https://github.com/mwouts/jupytext</a>
</li>
<li>nbstripout: <a href="https://github.com/kynan/nbstripout">https://github.com/kynan/nbstripout</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-1-5-3" class="outline-5">
<h5 id="sec-1-1-5-3"><span class="section-number-5">1.1.5.3</span> mlflow</h5>
<div class="outline-text-5" id="text-1-1-5-3">
<ul class="org-ul">
<li><a href="https://docs.faculty.ai/user-guide/experiments/index.html">https://docs.faculty.ai/user-guide/experiments/index.html</a> and
<a href="https://docs.microsoft.com/en-us/azure/databricks/_static/notebooks/hls-image-processing/02-image-segmentation-dl.html">https://docs.microsoft.com/en-us/azure/databricks/_static/notebooks/hls-image-processing/02-image-segmentation-dl.html</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-1-5-4" class="outline-5">
<h5 id="sec-1-1-5-4"><span class="section-number-5">1.1.5.4</span> tensorflow</h5>
<div class="outline-text-5" id="text-1-1-5-4">
<ul class="org-ul">
<li><a href="https://www.tensorflow.org/tensorboard/image_summaries">https://www.tensorflow.org/tensorboard/image_summaries</a>
</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Template for data entry and setup notes:</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> exp-#date-#title</h4>
<div class="outline-text-4" id="text-1-2-1">
</div><div id="outline-container-sec-1-2-1-1" class="outline-5">
<h5 id="sec-1-2-1-1"><span class="section-number-5">1.2.1.1</span> git:</h5>
<div class="outline-text-5" id="text-1-2-1-1">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #784437;">git</span> <span style="color: #78683f;">log</span> <span style="color: #3f7178;">-1</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-1-2" class="outline-5">
<h5 id="sec-1-2-1-2"><span class="section-number-5">1.2.1.2</span> System Metadata:</h5>
<div class="outline-text-5" id="text-1-2-1-2">
<div class="org-src-container">

<pre class="src src-jupyter-python" id="jp-metadata"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #7e544f;">os</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f7e67;">pprint</span>

<span style="color: #268bd2;">ramlist</span> = <span style="color: #7e544f;">os</span>.<span style="color: #37785e;">popen</span>(<span style="color: #2aa198;">'free -th'</span>).<span style="color: #7e544f;">readlines</span>()[-1].<span style="color: #7a4f7e;">split</span>()[1:]

<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'No of CPUs in system:'</span>, <span style="color: #7e544f;">os</span>.<span style="color: #37785e;">cpu_count</span>())
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'No of CPUs the current process can use:'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span> <span style="color: #657b83; font-weight: bold;">len</span>(<span style="color: #7e544f;">os</span>.<span style="color: #707e4f;">sched_getaffinity</span>(0)))
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'load average:'</span>, <span style="color: #7e544f;">os</span>.<span style="color: #783778;">getloadavg</span>())
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'os.uname(): '</span>, <span style="color: #7e544f;">os</span>.<span style="color: #3f7178;">uname</span>())
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'PID of process:'</span>, <span style="color: #7e544f;">os</span>.<span style="color: #4f7e67;">getpid</span>())
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'RAM total: {}, RAM used: {}, RAM free: {}'</span>.<span style="color: #78683f;">format</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">ramlist</span>[0], <span style="color: #4f5c7e;">ramlist</span>[1], <span style="color: #4f5c7e;">ramlist</span>[2]))

!<span style="color: #37785e;">echo</span> <span style="color: #783f5a;">the</span> <span style="color: #43783f;">current</span> <span style="color: #268bd2;">directory</span>: $<span style="color: #4f7e67;">PWD</span>
!<span style="color: #37785e;">echo</span> <span style="color: #707e4f;">My</span> <span style="color: #784437;">disk</span> <span style="color: #268bd2;">usage</span>:
!<span style="color: #4f7e67;">df</span> -<span style="color: #7e544f;">h</span>
<span style="color: #859900; font-weight: bold;">if</span> <span style="color: #268bd2;">_long</span>:
<span style="background-color: #eee8d5;"> </span>   %<span style="color: #4f5c7e;">conda</span> <span style="color: #657b83; font-weight: bold;">list</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">pprint</span>.<span style="color: #4f7e67;">pprint</span>(<span style="color: #657b83; font-weight: bold;">dict</span>(<span style="color: #7e544f;">os</span>.<span style="color: #707e4f;">environ</span>), <span style="color: #707e4f;">sort_dicts</span>=<span style="color: #859900; font-weight: bold;">False</span>)

</pre>
</div>
</div>
</div>

<div id="outline-container-scripts-tmux" class="outline-5">
<h5 id="scripts-tmux"><a id="sec-1-2-1-3" name="sec-1-2-1-3"></a><span class="section-number-5">1.2.1.3</span> Tmux setup and scripts</h5>
<div class="outline-text-5" id="text-scripts-tmux">
<div class="org-src-container">

<pre class="src src-sh" id="setup-tmux"><span style="color: #513f78;">rm</span> <span style="color: #7e544f;">~/.tmux-local-socket-remote-machine</span>
<span style="color: #268bd2;">REMOTE_SOCKET</span>=$(<span style="color: #6c71c4; font-weight: bold;">ssh ara 'tmux ls -F "#{socket_path}"' | head -1</span>)
<span style="color: #657b83; font-weight: bold;">echo</span> $<span style="color: #268bd2;">REMOTE_SOCKET</span>
<span style="color: #7a4f7e;">ssh</span> <span style="color: #783778;">ara</span> <span style="color: #7a4f7e;">-tfN</span> <span style="color: #b58900; font-weight: bold;">\</span>
    <span style="color: #784437;">-L</span> <span style="color: #513f78;">~/.tmux-local-socket-remote-machine:</span>$<span style="color: #268bd2;">REMOTE_SOCKET</span>
</pre>
</div>

<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">
</colgroup>
<tbody>
<tr>
<td class="text-left">rm:</td>
<td class="text-left">cannot</td>
<td class="text-left">remove</td>
<td class="text-left">'<i>home/lex</i>.tmux-local-socket-remote-machine':</td>
<td class="text-left">No</td>
<td class="text-left">such</td>
<td class="text-left">file</td>
<td class="text-left">or</td>
<td class="text-left">directory</td>
</tr>

<tr>
<td class="text-left">ye53nis@ara-login01.rz.uni-jena.de's</td>
<td class="text-left">password:</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">/tmp/tmux-67339/default</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">&gt;</td>
<td class="text-left">ye53nis@ara-login01.rz.uni-jena.de's</td>
<td class="text-left">password:</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-ssh-tunneling" class="outline-5">
<h5 id="ssh-tunneling"><a id="sec-1-2-1-4" name="sec-1-2-1-4"></a><span class="section-number-5">1.2.1.4</span> SSH tunneling</h5>
<div class="outline-text-5" id="text-ssh-tunneling">
<p>
Different applications can be run on the remote compute node. If I want to
access them at the local machine, and open them with the browser, I use this
tunneling script.
</p>

<div class="org-src-container">

<pre class="src src-sh" id="ssh-tunnel"><span style="color: #7a4f7e;">ssh</span> <span style="color: #7e544f;">-t</span> <span style="color: #7e544f;">-t</span> <span style="color: #783778;">ara</span> <span style="color: #784437;">-L</span> $<span style="color: #268bd2;">port</span>:localhost:$<span style="color: #268bd2;">port</span> <span style="color: #7a4f7e;">ssh</span> $<span style="color: #268bd2;">node</span> <span style="color: #784437;">-L</span> $<span style="color: #268bd2;">port</span>:Localhost:$<span style="color: #268bd2;">port</span>
</pre>
</div>

<p>
Apps I use that way:
</p>
<ul class="org-ul">
<li>Jupyter lab for running Python 3-Kernels
</li>
<li>TensorBoard
</li>
<li>Mlflow ui
</li>
</ul>
</div>
</div>

<div id="outline-container-scripts-jp" class="outline-5">
<h5 id="scripts-jp"><a id="sec-1-2-1-5" name="sec-1-2-1-5"></a><span class="section-number-5">1.2.1.5</span> jupyter scripts</h5>
<div class="outline-text-5" id="text-scripts-jp">
<p>
Starting a jupyter instance on a server where the necessary libraries are
installed is easy using this script:
</p>

<div class="org-src-container">

<pre class="src src-tmux" id="jpt-tmux"><span style="color: #4f5c7e;">conda</span> <span style="color: #4f7e67;">activate</span> <span style="color: #37785e;">tf</span>
<span style="color: #657b83; font-weight: bold;">export</span> <span style="color: #268bd2;">PORT</span>=<span style="color: #3f7178;">9999</span>
<span style="color: #657b83; font-weight: bold;">export</span> <span style="color: #268bd2;">XDG_RUNTIME_DIR</span>=<span style="color: #2aa198;">''</span>
<span style="color: #657b83; font-weight: bold;">export</span> <span style="color: #268bd2;">XDG_RUNTIME_DIR</span>=<span style="color: #2aa198;">""</span>
<span style="color: #37785e;">jupyter</span> <span style="color: #4f5c7e;">lab</span> <span style="color: #783778;">--no-browser</span> <span style="color: #5e7837;">--port</span>=$<span style="color: #268bd2;">PORT</span>
</pre>
</div>

<p>
On the compute node of the HPC, the users' environment is managed through
module files using the system <a href="https://lmod.readthedocs.io">Lmod</a>. The <code>export XDG_RUNTIME_DIR</code> statements
are needed because of a jupyter bug which did not let it start. Right now,
<code>ob-tmux</code> does not support a <code>:var</code> header like normal <code>org-babel</code> does. So
the <code>$port</code> variable has to be set here in the template.
</p>

<p>
Now this port has to be tunnelled on our local computer (See
<a href="#ssh-tunneling">SSH tunneling</a>). While the tmux session above keeps running, no matter if
Emacs is running or not, this following ssh tunnel needs to be active
locally to connect to the notebook. If you close Emacs, it would need to be
reestablished
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2"><span class="section-number-4">1.2.2</span> Setup notes</h4>
<div class="outline-text-4" id="text-1-2-2">
</div><div id="outline-container-sec-tmux-setup" class="outline-5">
<h5 id="sec-tmux-setup"><a id="sec-1-2-2-1" name="sec-1-2-2-1"></a><span class="section-number-5">1.2.2.1</span> Setting up a tmux connection from using <code>ob-tmux</code> in <code>org-babel</code></h5>
<div class="outline-text-5" id="text-sec-tmux-setup">
<ul class="org-ul">
<li>prerequisite: tmux versions need to be the same locally and on the server.
Let's verify that now.
<ul class="org-ul">
<li>the local tmux version:

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #4f5c7e;">tmux</span> <span style="color: #3f7178;">-V</span>
</pre>
</div>

<pre class="example">
tmux 3.0a
</pre>
</li>

<li>the remote tmux version:

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #7a4f7e;">ssh</span> <span style="color: #783778;">ara</span> <span style="color: #4f5c7e;">tmux</span> <span style="color: #3f7178;">-V</span>
</pre>
</div>

<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="left">

<col  class="left">
</colgroup>
<tbody>
<tr>
<td class="text-left">ye53nis@ara-login01.rz.uni-jena.de's</td>
<td class="text-left">password:</td>
</tr>

<tr>
<td class="text-left">tmux</td>
<td class="text-left">3.0a</td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>

<li>as is described in <a href="https://github.com/ahendriksen/ob-tmux">the ob-tmux readme</a>, the following code snippet creates
a socket on the remote machine and forwards this socket to the local
machine (note that <code>socket_path</code> was introduced in tmux version 2.2)

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #268bd2;">REMOTE_SOCKET</span>=$(<span style="color: #6c71c4; font-weight: bold;">ssh ara 'tmux ls -F "#{socket_path}"' | head -1</span>)
<span style="color: #657b83; font-weight: bold;">echo</span> $<span style="color: #268bd2;">REMOTE_SOCKET</span>
<span style="color: #7a4f7e;">ssh</span> <span style="color: #783778;">ara</span> <span style="color: #7a4f7e;">-tfN</span> <span style="color: #b58900; font-weight: bold;">\</span>
    <span style="color: #784437;">-L</span> <span style="color: #513f78;">~/.tmux-local-socket-remote-machine:</span>$<span style="color: #268bd2;">REMOTE_SOCKET</span>
</pre>
</div>

<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="left">

<col  class="left">

<col  class="left">
</colgroup>
<tbody>
<tr>
<td class="text-left">ye53nis@ara-login01.rz.uni-jena.de's</td>
<td class="text-left">password:</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">/tmp/tmux-67339/default</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">&gt;</td>
<td class="text-left">ye53nis@ara-login01.rz.uni-jena.de's</td>
<td class="text-left">password:</td>
</tr>
</tbody>
</table>
</li>

<li>now a new tmux session with name <code>ob-NAME</code> is created when using a code
block which looks like this: <code>#+BEGIN_SRC tmux :socket
      ~/.tmux-local-socket-remote-machine :session NAME</code>
</li>
<li>Commands can be sent now to the remote tmux session, BUT note that the
output is not printed yet
</li>
<li>there is a workaround for getting output back to our LabBook.org: A <a href="#scripts-tmux">script</a>
which allows to print the output from the tmux session in an
<code>#+begin_example</code>-Block below the tmux block by pressing <code>C-c C-o</code> or <code>C-c
      C-v C-o</code> when the pointer is inside the tmux block.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-2-2" class="outline-5">
<h5 id="sec-1-2-2-2"><span class="section-number-5">1.2.2.2</span> <code>emacs-jupyter</code> Setup</h5>
<div class="outline-text-5" id="text-1-2-2-2">
<p>
<code>Emacs-jupyter</code> aims to be an API for a lot of functionalities of the
<code>jupyter</code> project. The documentation can be found on <a href="https://github.com/dzop/emacs-jupyter">GitHub</a>.
</p>

<ol class="org-ol">
<li>For the <b>whole document</b>: connect to a running jupyter instance
<ol class="org-ol">
<li><code>M-x jupyter-server-list-kernels</code>
<ol class="org-ol">
<li>set server URL, e.g. <code>http://localhost:8889</code>
</li>
<li>set websocket URL, e.g. <code>http://localhost:8889</code>
</li>
</ol>
</li>
<li>two possibilities
<ol class="org-ol">
<li>kernel already exists \(\to\) list of kernels and <code>kernel-ID</code> is displayed
</li>
<li>kernel does not exist \(\to\) prompt asks if you want to start one \(\to\)
<b>yes</b> \(\to\) type kernel you want to start, e.g. <code>Python 3</code>
</li>
</ol>
</li>
</ol>
</li>
<li>In the <b>subtree</b> where you want to use <code>jupyter-python</code> blocks with <code>org
       babel</code>
<ol class="org-ol">
<li>set the <code>:header-args:jupyter-python :session
          /jpy:localhost#kernel:8889-ID</code>
</li>
<li>customize the output folder using the following org-mode variable:
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #859900; font-weight: bold;">setq</span> <span style="color: #783f5a;">org-babel-jupyter-resource-directory</span> <span style="color: #2aa198;">"./data/exp-test/plots"</span>)
</pre>
</div>

<pre class="example">
./data/exp-test/plots
</pre>
</li>
</ol>
</li>
<li>For each <b>individual block</b>, the following customizations might be useful
<ol class="org-ol">
<li>jupyter kernels can return multiple kinds of rich output (images,
html, &#x2026;) or scalar data (plain text, numbers, lists, &#x2026;). To force
a plain output, use <code>:results scalar</code>. To show the output in the
minibuffer only, use <code>:results silent</code>
</li>
<li>to change the priority of different rich outputs, use <code>:display</code>
header argument, e.g. <code>:display text/plain text/html</code> prioritizes
plain text over html. All supported mimetypes in default order:
<ol class="org-ol">
<li>text/org
</li>
<li>image/svg+xml, image/jpeg, image/png
</li>
<li>text/html
</li>
<li>text/markdown
</li>
<li>text/latex
</li>
<li>text/plain
</li>
</ol>
</li>
<li>We can set jupyter to output pandas DataFrames as org tables
automatically using the source block header argument <code>:pandoc t</code>
</li>
<li>useful keybindings
<ul class="org-ul">
<li><code>M-i</code> to open the documentation for wherever your pointer is (like
pressing <code>Shift-TAB</code> in Jupyter notebooks)
</li>
<li><code>C-c C-i</code> to interrupt the kernel, <code>C-c C-r</code> to restart the kernel
</li>
</ul>
</li>
</ol>
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-3" class="outline-4">
<h4 id="sec-1-2-3"><span class="section-number-4">1.2.3</span> Notes on archiving</h4>
<div class="outline-text-4" id="text-1-2-3">
</div><div id="outline-container-sec-1-2-3-1" class="outline-5">
<h5 id="sec-1-2-3-1"><span class="section-number-5">1.2.3.1</span> Exporting the LabBook.org to html in a twbs style</h5>
<div class="outline-text-5" id="text-1-2-3-1">
<ul class="org-ul">
<li>I am partial to the twitter bootstrap theme of html, since I like it's
simple design, but clear structure with a nice table of contents at the
side → the following org mode extension supports a seemless export to
twitter bootstrap html: <a href="https://github.com/marsmining/ox-twbs">https://github.com/marsmining/ox-twbs</a>
</li>
<li>when installed, the export can be triggered via the command
<code>(org-twbs-export-as-html)</code> or via the keyboard shortcut for export <code>C-c
       C-e</code> followed by <code>w</code> for Twitter bootstrap and <code>h</code> for saving the .html
</li>
<li><span class="underline">Things to configure:</span>
<ul class="org-ul">
<li>in general, there are multiple export options:
<a href="https://orgmode.org/manual/Export-Settings.html">https://orgmode.org/manual/Export-Settings.html</a>
</li>
<li>E.g. I set 2 <code>#+OPTIONS</code> keywords at the begin of the file: <code>toc:4</code> and
<code>H:4</code> which make sure that in my export my sidebar table of contents
will show numbered headings till a depth of 4.
</li>
<li>I configured my code blocks so that they will not be evaluated when
exporting (I would recommend this especially if you only export for
archiving) and that both the code block and the output will be exported
with the keyword: <code>#+PROPERTY: header-args :eval never-export :exports
         both</code>
</li>
<li>To discriminate between code blocks for different languages I gave each
of them a distinct colour using <code>#+HTML_HEAD_EXTRA: &lt;style...</code> (see
above)
</li>
<li>I had to configure a style for <code>table</code>, so that the
<ul class="org-ul">
<li><code>display: block; overflow-x: auto;</code> gets the table to be restricted
to the width of the text and if it is larger, activates scrolling
</li>
<li><code>white-space: nowrap;</code> makes it that there is no wrap in a column, so
it might be broader, but better readable if you have scrolling anyway
</li>
</ul>
</li>
</ul>
</li>
<li><span class="underline">Things to do before exporting / Troubleshooting while exporting:</span>
<ul class="org-ul">
<li>when using a dark theme for you emacs, the export of the code blocks
might show some ugly dark backgrounds from the theme. If this becomes
an issue, change to a light theme for the export with <code>M-x
         (load-theme)</code> and choose <code>solarized-light</code>
</li>
<li>only in the <code>data</code> branch you set the git tags after merging. If you
want to show them here, execute the corresponding function in <a href="#sec-1-3-5">Git TAGs</a>
</li>
<li>make sure your file links work properly! I recommend referencing your
files relatively (e.g. [ [ f ile:./data/exp-XXXXXX-test/test.png]]
without spaces). Otherwise there will be errors in your <i><b>Messages</b></i>
buffer
</li>
<li>There might be errors with your code blocks
<ul class="org-ul">
<li>e.g. the export function expects you to assign a default variable to
your functions
</li>
<li>if you call a function via the <code>#+CALL</code> mechanism, it wants you to
include two parentheses for the function, e.g. <code>#+CALL: test()</code>
</li>
</ul>
</li>
<li>check indentation of code blocks inside lists
</li>
<li>add a <code>details</code> block around large output cells. This makes them
expandable. I added some <code>#+HTML_HEAD_EXTRA: &lt;style...</code> inspired by
<a href="https://alhassy.github.io/org-special-block-extras/#Folded-Details">alhassy</a>. That's how the <code>details</code> block looks like:
<pre class="example">
#+begin_details

#+end_details
</pre>
</li>
<li>If you reference a parameter with an underscore in the name, use the
org markdown tricks to style them like code (<code>==</code> or <code>~~</code>), otherwise
the part after the underscore will be rendered like a subscript:
<code>under_score</code> vs under<sub>score</sub>
</li>
</ul>
</li>
<li><span class="underline">Things to do after exporting:</span>
<ul class="org-ul">
<li>In my workflow, the exported <code>LabBook.html</code> with the overview of all
experiments is in the <code>data</code> folder. If you move the file, you will
have to fix the file links for the new location, e.g. via "Find and
replace" <code>M-%</code>:
<ul class="org-ul">
<li>if you move the org file → in the org file find <code>[[file:./data/</code> and
replace with <code>[[file:./</code> → then export with <code>C-c C-e w h</code>
</li>
<li>if you export first with <code>C-c C-e w h</code> and move the html file to
<code>data</code> → in the html file find <code>./data</code> and replace with <code>.</code>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Organization of git</h3>
<div class="outline-text-3" id="text-1-3">
</div><div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> remote/origin/main branch:</h4>
<div class="outline-text-4" id="text-1-3-1">
<ul class="org-ul">
<li>contains all the source code in folder <b><b>src/</b></b> which is used for experiments.
</li>
<li>contains the <b><b>LabBook.org</b></b> template
</li>
<li>contains setup- and metadata files such as <b><b>MLproject</b></b> or <b><b>conda.yaml</b></b>
</li>
<li>the log contains only lasting alterations on the folders and files mentioned
above, which are e.g. used for conducting experiments or which introduce new
features. Day-to-day changes in code
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3-2" class="outline-4">
<h4 id="sec-1-3-2"><span class="section-number-4">1.3.2</span> remote/origin/exp### branches:</h4>
<div class="outline-text-4" id="text-1-3-2">
<ul class="org-ul">
<li>if an experiment is done, the code and templates will be branched out from
<b>main</b> in an <b>#experiment-name</b> branch, ### meaning some meaningful
descriptor.
</li>
<li>all data generated during the experiment (e.g. .csv files, plots, images,
etc), is stored in a folder with the name <b><b>data/#experiment-name</b></b>, except
machine learning-specific data and metadata from `mlflow` runs, which are
saved under <b><b>data/mlruns</b></b> (this allows easily comparing machine learning
runs with different experimental settings)
</li>
<li>The <b><b>LabBook.org</b></b> file is essential
<ul class="org-ul">
<li>If possible, all code is executed from inside this file (meaning analysis
scripts or calling the code from the <b><b>scr/</b></b> directory).
</li>
<li>All other steps taken during an experiment are noted down, as well as
conclusions or my thought process while conducting the experiment
</li>
<li>Provenance data, such as metadata about the environment the code was
executed in, the command line output of the code, and some plots
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3-3" class="outline-4">
<h4 id="sec-1-3-3"><span class="section-number-4">1.3.3</span> remote/origin/develop branch:</h4>
<div class="outline-text-4" id="text-1-3-3">
<ul class="org-ul">
<li>this is the branch I use for day to day work on features and exploration.
All of my current activity can be followed here.
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3-4" class="outline-4">
<h4 id="sec-1-3-4"><span class="section-number-4">1.3.4</span> remote/origin/data branch:</h4>
<div class="outline-text-4" id="text-1-3-4">
<ul class="org-ul">
<li>contains a full cronicle of the whole research process
</li>
<li>all <b>#experiment-name</b> branches are merged here. Afterwards the original
branch is deleted and on the data branch there is a <b>Git tag</b> which shows
the merge commit to make accessing single experiments easy.
</li>
<li>the <b>develop</b> branch is merged here as well.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-3-5" class="outline-4">
<h4 id="sec-1-3-5"><span class="section-number-4">1.3.5</span> Git TAGs</h4>
<div class="outline-text-4" id="text-1-3-5">
</div><div id="outline-container-sec-1-3-5-1" class="outline-5">
<h5 id="sec-1-3-5-1"><span class="section-number-5">1.3.5.1</span> Stable versions:</h5>
</div>
<div id="outline-container-sec-1-3-5-2" class="outline-5">
<h5 id="sec-1-3-5-2"><span class="section-number-5">1.3.5.2</span> All tags from git:</h5>
<div class="outline-text-5" id="text-1-3-5-2">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #784437;">git</span> <span style="color: #78683f;">push</span> <span style="color: #783f5a;">origin</span> <span style="color: #7a4f7e;">--tags</span>
<span style="color: #784437;">git</span> <span style="color: #374478;">tag</span> <span style="color: #707e4f;">-n1</span>
</pre>
</div>

<pre class="example">
exp-200402-test Merge branch 'exp-200402-test' into data
exp-200520-unet Merge branch 'exp-310520-unet' into data
exp-200531-unet Merge branch 'heads/exp-310520-unet' into data
exp-201231-clustsim exp-201231-clustsim
exp-210204-unet Add exp-210204-unet LabBook part 3
exp-310520-unet move exp-310520-unet to data branch manually
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Organization of code</h3>
<div class="outline-text-3" id="text-1-4">
</div><div id="outline-container-sec-1-4-1" class="outline-4">
<h4 id="sec-1-4-1"><span class="section-number-4">1.4.1</span> scripts:</h4>
</div>
<div id="outline-container-sec-1-4-2" class="outline-4">
<h4 id="sec-1-4-2"><span class="section-number-4">1.4.2</span> src/</h4>
<div class="outline-text-4" id="text-1-4-2">
</div><div id="outline-container-sec-1-4-2-1" class="outline-5">
<h5 id="sec-1-4-2-1"><span class="section-number-5">1.4.2.1</span> fluotracify/</h5>
<div class="outline-text-5" id="text-1-4-2-1">
</div><ol class="org-ol"><li><a id="sec-1-4-2-1-1" name="sec-1-4-2-1-1"></a>imports/<br ></li>
<li><a id="sec-1-4-2-1-2" name="sec-1-4-2-1-2"></a>simulations/<br ></li>
<li><a id="sec-1-4-2-1-3" name="sec-1-4-2-1-3"></a>training/<br ></li>
<li><a id="sec-1-4-2-1-4" name="sec-1-4-2-1-4"></a>applications/<br ></li>
<li><a id="sec-1-4-2-1-5" name="sec-1-4-2-1-5"></a>doc/<br ><div class="outline-text-6" id="text-1-4-2-1-5">
<ul class="org-ul">
<li>use Sphinx
<ul class="org-ul">
<li>follow this: <a href="https://daler.github.io/sphinxdoc-test/includeme.html">https://daler.github.io/sphinxdoc-test/includeme.html</a>
</li>
<li>evtl export org-mode Readme to rst via <a href="https://github.com/msnoigrs/ox-rst">https://github.com/msnoigrs/ox-rst</a>
</li>
<li>possibly heavily use
<a href="http://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html">http://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html</a>
</li>
</ul>
</li>
<li>for examples sphinx-galleries could be useful
<a href="https://sphinx-gallery.github.io/stable/getting_started.html">https://sphinx-gallery.github.io/stable/getting_started.html</a>
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-1-4-2-2" class="outline-5">
<h5 id="sec-1-4-2-2"><span class="section-number-5">1.4.2.2</span> nanosimpy/</h5>
<div class="outline-text-5" id="text-1-4-2-2">
<ul class="org-ul">
<li>cloned from dwaithe with refactoring for Python 3-compatibility
</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Changes in this repository (without "* Data" in this file)</h3>
<div class="outline-text-3" id="text-1-5">
</div><div id="outline-container-sec-1-5-1" class="outline-4">
<h4 id="sec-1-5-1"><span class="section-number-4">1.5.1</span> Changes in LabBook.org (without "* Data")</h4>
<div class="outline-text-4" id="text-1-5-1">
</div><div id="outline-container-sec-1-5-1-1" class="outline-5">
<h5 id="sec-1-5-1-1"><span class="section-number-5">1.5.1.1</span> 2022-02-19</h5>
<div class="outline-text-5" id="text-1-5-1-1">
<ul class="org-ul">
<li>Add <code>#+HTML_HEAD_EXTRA: &lt;style...</code> for <code>table</code> to enable scrolling if the
table overflows
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-2" class="outline-5">
<h5 id="sec-1-5-1-2"><span class="section-number-5">1.5.1.2</span> 2021-12-16</h5>
<div class="outline-text-5" id="text-1-5-1-2">
<ul class="org-ul">
<li>Add <code>details</code> blocks, corresponding <code>#+HTML_HEAD_EXTRA: &lt;style...</code> and
documentation in  <a href="#sec-1-2-3">Notes on archiving</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-3" class="outline-5">
<h5 id="sec-1-5-1-3"><span class="section-number-5">1.5.1.3</span> 2021-08-05</h5>
<div class="outline-text-5" id="text-1-5-1-3">
<ul class="org-ul">
<li>Rename <code>master</code> branch to <code>main</code> branch
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-4" class="outline-5">
<h5 id="sec-1-5-1-4"><span class="section-number-5">1.5.1.4</span> 2021-04-04</h5>
<div class="outline-text-5" id="text-1-5-1-4">
<ul class="org-ul">
<li>Add <code>#+OPTIONS: H:4</code> and <code>#+OPTIONS: toc:4</code> to show up to 4 levels of
depth in the html (twbs) export of this LabBook in the table of contents
at the side
</li>
<li>I added <a href="#sec-1-2-3">Notes on archiving</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-5" class="outline-5">
<h5 id="sec-1-5-1-5"><span class="section-number-5">1.5.1.5</span> 2020-11-04</h5>
<div class="outline-text-5" id="text-1-5-1-5">
<ul class="org-ul">
<li>update "jupyter scripts" in <a href="#sec-1-2">Template for data entry and setup notes:</a>
for new conda environment on server (now <code>conda activate tf-nightly</code>)
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-6" class="outline-5">
<h5 id="sec-1-5-1-6"><span class="section-number-5">1.5.1.6</span> 2020-05-31</h5>
<div class="outline-text-5" id="text-1-5-1-6">
<ul class="org-ul">
<li>extend general documentation in README
</li>
<li>Add code block examples
</li>
<li>extend documentation on experiment workflow
</li>
<li>move setup notes from README to "Template for data entry and setup notes"
</li>
<li>remove emacs-lisp code for custom tmux block functions (not relevant
enough)
</li>
<li>change named "jpt-tmux" from starting a jupyter notebook to starting
jupyter lab. Load a conda environment instead of using Lmod's <code>module
      load</code>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-7" class="outline-5">
<h5 id="sec-1-5-1-7"><span class="section-number-5">1.5.1.7</span> 2020-05-07</h5>
<div class="outline-text-5" id="text-1-5-1-7">
<ul class="org-ul">
<li>extend documentation on git model
</li>
<li>extend documentation on jupyter setup
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-8" class="outline-5">
<h5 id="sec-1-5-1-8"><span class="section-number-5">1.5.1.8</span> 2020-04-22</h5>
<div class="outline-text-5" id="text-1-5-1-8">
<ul class="org-ul">
<li>added parts of README which describe the experimental process
</li>
<li>added templates for system metadata, tmux, jupyter setup
</li>
<li>added organization of code
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-5-1-9" class="outline-5">
<h5 id="sec-1-5-1-9"><span class="section-number-5">1.5.1.9</span> 2020-03-30</h5>
<div class="outline-text-5" id="text-1-5-1-9">
<ul class="org-ul">
<li>set up lab book and form git repo accoring to setup by Luka Stanisic et al
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-1-5-2" class="outline-4">
<h4 id="sec-1-5-2"><span class="section-number-4">1.5.2</span> Changes in src/fluotracify</h4>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Data</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> exp-201231-clustersim</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>this experiment is to document the simulation of fluorescence timetraces
with "bright cluster" artifacts
</li>
</ul>
</div>
<div id="outline-container-sec-2-1-1" class="outline-4">
<h4 id="sec-2-1-1"><span class="section-number-4">2.1.1</span> connect to jupyter notebook</h4>
<div class="outline-text-4" id="text-2-1-1">
<ol class="org-ol">
<li>Request compute node via tmux
</li>
</ol>
<div class="org-src-container">

<pre class="src src-tmux"><span style="color: #657b83; font-weight: bold;">cd</span> <span style="color: #513f78;">/</span>
<span style="color: #78683f;">srun</span> <span style="color: #707e4f;">-p</span> <span style="color: #78683f;">s_standard</span> <span style="color: #374478;">--time</span>=<span style="color: #3f7178;">7-10:00:00</span> <span style="color: #7e544f;">--ntasks-per-node</span>=<span style="color: #783f5a;">24</span> <span style="color: #783f5a;">--mem-per-cpu</span>=<span style="color: #3f7178;">2000</span> <span style="color: #7e544f;">--pty</span> <span style="color: #374478;">bash</span>
</pre>
</div>
<ol class="org-ol">
<li></li>
</ol>
<pre class="example">
(tf-nightly) [ye53nis@node146 /]$ jupyter lab --no-browser --port=$PORT
[I 00:02:39.372 LabApp] JupyterLab extension loaded from /home/ye53nis/.conda/envs/tf-nightly/lib/python3.8/site-packages/jupyterlab
[I 00:02:39.372 LabApp] JupyterLab application directory is /home/ye53nis/.conda/envs/tf-nightly/share/jupyter/lab
[I 00:02:39.375 LabApp] Serving notebooks from local directory: /
[I 00:02:39.375 LabApp] Jupyter Notebook 6.1.4 is running at:
[I 00:02:39.375 LabApp] http://localhost:9999/?token=93791464f12bacd92a8343c1a3be84117c0674d5703fd278
[I 00:02:39.375 LabApp]  or http://127.0.0.1:9999/?token=93791464f12bacd92a8343c1a3be84117c0674d5703fd278
[I 00:02:39.375 LabApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
[C 00:02:39.380 LabApp]

    To access the notebook, open this file in a browser:
        file:///home/ye53nis/.local/share/jupyter/runtime/nbserver-54410-open.html
    Or copy and paste one of these URLs:
        http://localhost:9999/?token=93791464f12bacd92a8343c1a3be84117c0674d5703fd278
     or http://127.0.0.1:9999/?token=93791464f12bacd92a8343c1a3be84117c0674d5703fd278
</pre>
<ol class="org-ol">
<li>Create SSH tunnel
</li>
</ol>

<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">

<col  class="left">
</colgroup>
<tbody>
<tr>
<td class="text-left">sh-5.0$</td>
<td class="text-left">sh-5.0$</td>
<td class="text-left">ye53nis@ara-login01.rz.uni-jena.de's</td>
<td class="text-left">password:</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">ye53nis@node146's</td>
<td class="text-left">password:</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
<td class="text-left">&#xa0;</td>
</tr>

<tr>
<td class="text-left">Last</td>
<td class="text-left">login:</td>
<td class="text-left">Mon</td>
<td class="text-left">Jan</td>
<td class="text-left">4</td>
<td class="text-left">12:09:39</td>
<td class="text-left">2021</td>
<td class="text-left">from</td>
<td class="text-left">login01.ara</td>
</tr>
</tbody>
</table>
<ol class="org-ol">
<li>connect to Python 3 kernel using <code>jupyter-server-list-kernels</code>
<pre class="example">
python3           f6f8ea4a-c473-459c-93b6-4984b0987ff8   a few seconds ago    starting   0
</pre>
</li>
</ol>
</div>
</div>
<div id="outline-container-sec-2-1-2" class="outline-4">
<h4 id="sec-2-1-2"><span class="section-number-4">2.1.2</span> record metadata</h4>
<div class="outline-text-4" id="text-2-1-2">
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #707e4f;">cd</span> /<span style="color: #5e7837;">beegfs</span>/<span style="color: #7a4f7e;">ye53nis</span>/<span style="color: #784437;">drmed</span>-<span style="color: #784437;">git</span>/
</pre>
</div>

<pre class="example">
/beegfs/ye53nis/drmed-git
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python">!<span style="color: #784437;">git</span> <span style="color: #78683f;">log</span> -1
!<span style="color: #784437;">git</span> <span style="color: #374478;">status</span>
</pre>
</div>

<pre class="example">
commit 90315560e472cfec38b0f927e905da1635d25240
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Thu Dec 31 01:32:25 2020 +0100

    change metadata gathering and add docs
# On branch exp-201231-clustersim
# Changes not staged for commit:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#	modified:   src/nanosimpy (untracked content)
#
# Untracked files:
#   (use "git add &lt;file&gt;..." to include in what will be committed)
#
#	data/
#	experiment_params.csv
#	mlruns/
#	tramp.YDPCnB
no changes added to commit (use "git add" and/or "git commit -a")
</pre>

<p>
<code>#+CALL: jp-metadata(_long='True)</code>
</p>

<details>
<pre class="example">
No of CPUs in system: 72
No of CPUs the current process can use: 24
load average: (16.0, 16.04, 16.01)
os.uname():  posix.uname_result(sysname='Linux', nodename='node146', release='3.10.0-957.1.3.el7.x86_64', version='#1 SMP Thu Nov 29 14:49:43 UTC 2018', machine='x86_64')
PID of process: 173820
RAM total: 199G, RAM used: 70G, RAM free: 99G
the current directory: /beegfs/ye53nis/drmed-git
My disk usage:
Filesystem           Size  Used Avail Use% Mounted on
/dev/sda1             50G  3.2G   47G   7% /
devtmpfs              94G     0   94G   0% /dev
tmpfs                 94G  297M   94G   1% /dev/shm
tmpfs                 94G  195M   94G   1% /run
tmpfs                 94G     0   94G   0% /sys/fs/cgroup
nfs01-ib:/cluster    2.0T  473G  1.6T  24% /cluster
nfs03-ib:/pool/work  100T   70T   31T  70% /nfsdata
nfs02-ib:/data01      88T   71T   17T  81% /data01
nfs01-ib:/home        80T   71T  9.8T  88% /home
/dev/sda3            6.0G  435M  5.6G   8% /var
/dev/sda5            2.0G   34M  2.0G   2% /tmp
/dev/sda6            169G   18G  152G  11% /local
beegfs_nodev         524T  437T   88T  84% /beegfs
tmpfs                 19G     0   19G   0% /run/user/67339
# packages in environment at /home/ye53nis/.conda/envs/tf-nightly:
#
# Name                    Version                   Build  Channel
_libgcc_mutex             0.1                        main
absl-py                   0.11.0                   pypi_0    pypi
alembic                   1.4.1                      py_0    conda-forge
appdirs                   1.4.4              pyh9f0ad1d_0    conda-forge
argon2-cffi               20.1.0           py38h7b6447c_1
asn1crypto                1.4.0              pyh9f0ad1d_0    conda-forge
asteval                   0.9.16             pyh5ca1d4c_0    conda-forge
astunparse                1.6.3                    pypi_0    pypi
async_generator           1.10                       py_0
attrs                     20.2.0                     py_0
azure-core                1.8.2              pyh9f0ad1d_0    conda-forge
azure-storage-blob        12.5.0             pyh9f0ad1d_0    conda-forge
backcall                  0.2.0                      py_0
blas                      1.0                         mkl
bleach                    3.2.1                      py_0
blinker                   1.4                        py_1    conda-forge
brotlipy                  0.7.0           py38h7b6447c_1000
ca-certificates           2020.12.5            ha878542_0    conda-forge
cachetools                4.1.1                    pypi_0    pypi
certifi                   2020.12.5        py38h578d9bd_0    conda-forge
cffi                      1.14.3           py38he30daa8_0
chardet                   3.0.4                 py38_1003
click                     7.1.2              pyh9f0ad1d_0    conda-forge
cloudpickle               1.6.0                      py_0    conda-forge
configparser              5.0.1                      py_0    conda-forge
cryptography              3.1.1            py38h1ba5d50_0
cycler                    0.10.0                   py38_0
databricks-cli            0.9.1                      py_0    conda-forge
dbus                      1.13.18              hb2f20db_0
decorator                 4.4.2                      py_0
defusedxml                0.6.0                      py_0
docker-py                 4.3.1            py38h32f6830_1    conda-forge
docker-pycreds            0.4.0                      py_0    conda-forge
entrypoints               0.3                      py38_0
expat                     2.2.10               he6710b0_2
fcsfiles                  2020.9.18                pypi_0    pypi
flask                     1.1.2              pyh9f0ad1d_0    conda-forge
flatbuffers               1.12                     pypi_0    pypi
fontconfig                2.13.0               h9420a91_0
freetype                  2.10.4               h5ab3b9f_0
future                    0.18.2           py38h578d9bd_2    conda-forge
gast                      0.3.3                    pypi_0    pypi
gitdb                     4.0.5                      py_0    conda-forge
gitpython                 3.1.11                     py_0    conda-forge
glib                      2.66.1               h92f7085_0
google-auth               1.23.0                   pypi_0    pypi
google-auth-oauthlib      0.4.2                    pypi_0    pypi
google-pasta              0.2.0                    pypi_0    pypi
gorilla                   0.3.0                      py_0    conda-forge
grpcio                    1.32.0                   pypi_0    pypi
gst-plugins-base          1.14.0               hbbd80ab_1
gstreamer                 1.14.0               hb31296c_0
gunicorn                  20.0.4           py38h32f6830_2    conda-forge
h5py                      2.10.0                   pypi_0    pypi
icu                       58.2                 he6710b0_3
idna                      2.10                       py_0
importlib-metadata        2.0.0                      py_1
importlib_metadata        2.0.0                         1
intel-openmp              2020.2                      254
ipykernel                 5.3.4            py38h5ca1d4c_0
ipython                   7.18.1           py38h5ca1d4c_0
ipython_genutils          0.2.0                    py38_0
isodate                   0.6.0                      py_1    conda-forge
itsdangerous              1.1.0                      py_0    conda-forge
jedi                      0.17.2                   py38_0
jinja2                    2.11.2                     py_0
jpeg                      9b                   h024ee3a_2
json5                     0.9.5                      py_0
jsonschema                3.2.0                      py_2
jupyter_client            6.1.7                      py_0
jupyter_core              4.6.3                    py38_0
jupyterlab                2.2.6                      py_0
jupyterlab_pygments       0.1.2                      py_0
jupyterlab_server         1.2.0                      py_0
keras-preprocessing       1.1.2                    pypi_0    pypi
kiwisolver                1.3.0            py38h2531618_0
lcms2                     2.11                 h396b838_0
ld_impl_linux-64          2.33.1               h53a641e_7
libedit                   3.1.20191231         h14c3975_1
libffi                    3.3                  he6710b0_2
libgcc-ng                 9.1.0                hdf63c60_0
libgfortran-ng            7.3.0                hdf63c60_0
libpng                    1.6.37               hbc83047_0
libprotobuf               3.13.0.1             h8b12597_0    conda-forge
libsodium                 1.0.18               h7b6447c_0
libstdcxx-ng              9.1.0                hdf63c60_0
libtiff                   4.1.0                h2733197_1
libuuid                   1.0.3                h1bed415_2
libxcb                    1.14                 h7b6447c_0
libxml2                   2.9.10               hb55368b_3
lmfit                     1.0.1                      py_1    conda-forge
lz4-c                     1.9.2                heb0550a_3
mako                      1.1.3              pyh9f0ad1d_0    conda-forge
markdown                  3.3.3                    pypi_0    pypi
markupsafe                1.1.1            py38h7b6447c_0
matplotlib                3.3.2                         0
matplotlib-base           3.3.2            py38h817c723_0
mistune                   0.8.4           py38h7b6447c_1000
mkl                       2020.2                      256
mkl-service               2.3.0            py38he904b0f_0
mkl_fft                   1.2.0            py38h23d657b_0
mkl_random                1.1.1            py38h0573a6f_0
mlflow                    1.11.0           py38h32f6830_1    conda-forge
msrest                    0.6.19             pyh9f0ad1d_0    conda-forge
multipletau               0.3.3                    pypi_0    pypi
nbclient                  0.5.1                      py_0
nbconvert                 6.0.7                    py38_0
nbformat                  5.0.8                      py_0
ncurses                   6.2                  he6710b0_1
nest-asyncio              1.4.1                      py_0
notebook                  6.1.4                    py38_0
numpy                     1.19.2           py38h54aff64_0
numpy-base                1.19.2           py38hfa32c7d_0
oauthlib                  3.0.1                      py_0    conda-forge
olefile                   0.46                       py_0
openssl                   1.1.1h               h516909a_0    conda-forge
opt-einsum                3.3.0                    pypi_0    pypi
packaging                 20.4                       py_0
pandas                    1.1.3            py38he6710b0_0
pandoc                    2.11                 hb0f4dca_0
pandocfilters             1.4.2                    py38_1
parso                     0.7.0                      py_0
pcre                      8.44                 he6710b0_0
pexpect                   4.8.0                    py38_0
pickleshare               0.7.5                 py38_1000
pillow                    8.0.1            py38he98fc37_0
pip                       20.2.4                   py38_0
prometheus_client         0.8.0                      py_0
prometheus_flask_exporter 0.18.1             pyh9f0ad1d_0    conda-forge
prompt-toolkit            3.0.8                      py_0
protobuf                  3.13.0.1         py38h950e882_1    conda-forge
ptyprocess                0.6.0                    py38_0
pyasn1                    0.4.8                    pypi_0    pypi
pyasn1-modules            0.2.8                    pypi_0    pypi
pycparser                 2.20                       py_2
pygments                  2.7.2              pyhd3eb1b0_0
pyjwt                     1.7.1                      py_0    conda-forge
pyopenssl                 19.1.0                     py_1
pyparsing                 2.4.7                      py_0
pyqt                      5.9.2            py38h05f1152_4
pyrsistent                0.17.3           py38h7b6447c_0
pysocks                   1.7.1                    py38_0
python                    3.8.5                h7579374_1
python-dateutil           2.8.1                      py_0
python-editor             1.0.4                      py_0    conda-forge
python_abi                3.8                      1_cp38    conda-forge
pytz                      2020.1                     py_0
pyyaml                    5.3.1            py38h8df0ef7_1    conda-forge
pyzmq                     19.0.2           py38he6710b0_1
qt                        5.9.7                h5867ecd_1
querystring_parser        1.2.4                      py_0    conda-forge
readline                  8.0                  h7b6447c_0
requests                  2.24.0                     py_0
requests-oauthlib         1.3.0              pyh9f0ad1d_0    conda-forge
rsa                       4.6                      pypi_0    pypi
scipy                     1.5.2            py38h0b6359f_0
seaborn                   0.11.0                     py_0
send2trash                1.5.0                    py38_0
setuptools                50.3.0           py38hb0f4dca_1
sip                       4.19.13          py38he6710b0_0
six                       1.15.0                     py_0
smmap                     3.0.4              pyh9f0ad1d_0    conda-forge
sqlalchemy                1.3.13           py38h516909a_0    conda-forge
sqlite                    3.33.0               h62c20be_0
sqlparse                  0.4.1              pyh9f0ad1d_0    conda-forge
tabulate                  0.8.7              pyh9f0ad1d_0    conda-forge
tb-nightly                2.4.0a20201102           pypi_0    pypi
tensorboard-plugin-wit    1.7.0                    pypi_0    pypi
termcolor                 1.1.0                    pypi_0    pypi
terminado                 0.9.1                    py38_0
testpath                  0.4.4                      py_0
tf-estimator-nightly      2.4.0.dev2020102301          pypi_0    pypi
tf-nightly                2.5.0.dev20201029          pypi_0    pypi
tifffile                  2020.10.1        py38hdd07704_2
tk                        8.6.10               hbc83047_0
tornado                   6.0.4            py38h7b6447c_1
traitlets                 5.0.5                      py_0
typing-extensions         3.7.4.3                  pypi_0    pypi
uncertainties             3.1.5              pyhd8ed1ab_0    conda-forge
urllib3                   1.25.11                    py_0
wcwidth                   0.2.5                      py_0
webencodings              0.5.1                    py38_1
websocket-client          0.57.0           py38h32f6830_3    conda-forge
werkzeug                  1.0.1              pyh9f0ad1d_0    conda-forge
wheel                     0.35.1                     py_0
wrapt                     1.12.1                   pypi_0    pypi
xz                        5.2.5                h7b6447c_0
yaml                      0.2.5                h516909a_0    conda-forge
zeromq                    4.3.3                he6710b0_3
zipp                      3.4.0              pyhd3eb1b0_0
zlib                      1.2.11               h7b6447c_3
zstd                      1.4.5                h9ceee32_0

Note: you may need to restart the kernel to use updated packages.
{'SLURM_CHECKPOINT_IMAGE_DIR': '/var/slurm/checkpoint',
 'SLURM_NODELIST': 'node146',
 'SLURM_JOB_NAME': 'bash',
 'XDG_SESSION_ID': '9639',
 'SLURMD_NODENAME': 'node146',
 'SLURM_TOPOLOGY_ADDR': 'node146',
 'SLURM_NTASKS_PER_NODE': '24',
 'HOSTNAME': 'login01',
 'SLURM_PRIO_PROCESS': '0',
 'SLURM_SRUN_COMM_PORT': '43120',
 'SHELL': '/bin/bash',
 'TERM': 'xterm-color',
 'SLURM_JOB_QOS': 'qstand',
 'SLURM_PTY_WIN_ROW': '24',
 'HISTSIZE': '1000',
 'TMPDIR': '/tmp',
 'SLURM_TOPOLOGY_ADDR_PATTERN': 'node',
 'SSH_CLIENT': '10.231.210.198 43508 22',
 'CONDA_SHLVL': '2',
 'CONDA_PROMPT_MODIFIER': '(tf-nightly) ',
 'WINDOWID': '0',
 'QTDIR': '/usr/lib64/qt-3.3',
 'QTINC': '/usr/lib64/qt-3.3/include',
 'SSH_TTY': '/dev/pts/5',
 'QT_GRAPHICSSYSTEM_CHECKED': '1',
 'SLURM_NNODES': '1',
 'USER': 'ye53nis',
 'http_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'LS_COLORS': 'rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.axa=01;36:*.oga=01;36:*.spx=01;36:*.xspf=01;36:',
 'CONDA_EXE': '/cluster/miniconda3/bin/conda',
 'SLURM_STEP_NUM_NODES': '1',
 'SLURM_JOBID': '534856',
 'SRUN_DEBUG': '3',
 'SLURM_NTASKS': '24',
 'SLURM_LAUNCH_NODE_IPADDR': '192.168.192.5',
 'SLURM_STEP_ID': '0',
 'TMUX': '/tmp/tmux-67339/default,27827,6',
 '_CE_CONDA': '',
 'CONDA_PREFIX_1': '/cluster/miniconda3',
 'SLURM_STEP_LAUNCHER_PORT': '43120',
 'SLURM_TASKS_PER_NODE': '24',
 'MAIL': '/var/spool/mail/ye53nis',
 'PATH': '/home/ye53nis/.conda/envs/tf-nightly/bin:/home/lex/Programme/miniconda3/envs/tf-nightly-lab/bin:/home/lex/Programme/miniconda3/condabin:/home/lex/.local/bin:/bin:/usr/bin:/usr/local/bin:/usr/local/sbin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/var/lib/snapd/snap/bin:/home/lex/Programme/miniconda3/bin:/usr/sbin:/home/ye53nis/.local/bin:/home/ye53nis/bin',
 'SLURM_WORKING_CLUSTER': 'hpc:192.168.192.1:6817:8448',
 'SLURM_JOB_ID': '534856',
 'CONDA_PREFIX': '/home/ye53nis/.conda/envs/tf-nightly',
 'SLURM_JOB_USER': 'ye53nis',
 'SLURM_STEPID': '0',
 'PWD': '/',
 'SLURM_SRUN_COMM_HOST': '192.168.192.5',
 'LANG': 'en_US.UTF-8',
 'SLURM_PTY_WIN_COL': '80',
 'SLURM_UMASK': '0022',
 'MODULEPATH': '/usr/share/Modules/modulefiles:/etc/modulefiles:/cluster/modulefiles',
 'SLURM_JOB_UID': '67339',
 'LOADEDMODULES': '',
 'SLURM_NODEID': '0',
 'TMUX_PANE': '%6',
 'SLURM_SUBMIT_DIR': '/',
 'SLURM_TASK_PID': '53476',
 'SLURM_NPROCS': '24',
 'SLURM_CPUS_ON_NODE': '24',
 'SLURM_DISTRIBUTION': 'block',
 'https_proxy': 'http://internet4nzm.rz.uni-jena.de:3128',
 'SLURM_PROCID': '0',
 'HISTCONTROL': 'ignoredups',
 '_CE_M': '',
 'SLURM_JOB_NODELIST': 'node146',
 'SLURM_PTY_PORT': '46638',
 'HOME': '/home/ye53nis',
 'SHLVL': '3',
 'SLURM_LOCALID': '0',
 'SLURM_JOB_GID': '13280',
 'SLURM_JOB_CPUS_PER_NODE': '24',
 'SLURM_CLUSTER_NAME': 'hpc',
 'SLURM_GTIDS': '0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23',
 'SLURM_SUBMIT_HOST': 'login01',
 'SLURM_JOB_PARTITION': 's_standard',
 'MATHEMATICA_HOME': '/cluster/apps/mathematica/11.3',
 'CONDA_PYTHON_EXE': '/cluster/miniconda3/bin/python',
 'LOGNAME': 'ye53nis',
 'SLURM_STEP_NUM_TASKS': '24',
 'QTLIB': '/usr/lib64/qt-3.3/lib',
 'SLURM_JOB_ACCOUNT': 'iaob',
 'SLURM_JOB_NUM_NODES': '1',
 'MODULESHOME': '/usr/share/Modules',
 'CONDA_DEFAULT_ENV': 'tf-nightly',
 'LESSOPEN': '||/usr/bin/lesspipe.sh %s',
 'SLURM_STEP_TASKS_PER_NODE': '24',
 'PORT': '9999',
 'SLURM_STEP_NODELIST': 'node146',
 'DISPLAY': ':0',
 'XDG_RUNTIME_DIR': '',
 'XAUTHORITY': '/home/lex/.Xauthority',
 'BASH_FUNC_module()': '() {  eval `/usr/bin/modulecmd bash $*`\n}',
 '_': '/home/ye53nis/.conda/envs/tf-nightly/bin/jupyter',
 'JPY_PARENT_PID': '54410',
 'CLICOLOR': '1',
 'PAGER': 'cat',
 'GIT_PAGER': 'cat',
 'MPLBACKEND': 'module://ipykernel.pylab.backend_inline'}
</pre>
</details>
</div>
</div>
<div id="outline-container-sec-2-1-3" class="outline-4">
<h4 id="sec-2-1-3"><span class="section-number-4">2.1.3</span> set variables</h4>
<div class="outline-text-4" id="text-2-1-3">
<ul class="org-ul">
<li>any files generated using the <code>:file</code> header of org-mode source blocks
will be saved here (Note: the destination of the simulations is different,
see the variables below)
</li>
</ul>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #859900; font-weight: bold;">setq</span> <span style="color: #783f5a;">org-babel-jupyter-resource-directory</span> <span style="color: #2aa198;">"./data/exp-201231-clustsim"</span>)
</pre>
</div>

<pre class="example">
./data/exp-201231-clustsim
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #513f78;">sys</span>
<span style="color: #513f78;">sys</span>.<span style="color: #513f78;">path</span>.<span style="color: #5e7837;">append</span>(<span style="color: #2aa198;">'/beegfs/ye53nis/drmed-git/src/'</span>)
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #783778;">fluotracify</span>.<span style="color: #5e7837;">simulations</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #784437;">simulate_trace_with_artifact</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f7e67;">stwa</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">folder</span> = <span style="color: #2aa198;">'/beegfs/ye53nis/saves/firstartifact_Nov2020/'</span>
<span style="color: #268bd2;">file_name</span> = <span style="color: #2aa198;">'traces_brightclust_Nov2020'</span>
<span style="color: #268bd2;">total_sim_time</span> = 16384
<span style="color: #268bd2;">d_mol_arr</span> = [0.069, 0.08, 0.1, 0.2, 0.4, 0.6, 1.0, 3.0, 10, 50]
<span style="color: #268bd2;">col_per_example</span> = 3
<span style="color: #268bd2;">label_for</span> = <span style="color: #2aa198;">'both'</span>
<span style="color: #268bd2;">number_of_sets</span> = 10
<span style="color: #268bd2;">traces_per_set</span> = 100
<span style="color: #268bd2;">artifact</span> = 1
</pre>
</div>

<ul class="org-ul">
<li>for each diffusion constant given in <code>d_mol_arr</code>, 10 .csv files will be
generated (<code>number_of_sets</code>) which each comprise of 100 fluorescence
traces (<code>traces_per_set</code>)
</li>
<li>The output of the function will be written to stdout (the terminal inside
a tmux session on the machine where the notebook is running). Thus, Emacs
can be closed. After the simulations are done, the printed output can
be copied from the terminal, because tmux is making it possible to attach
and detach to a running terminal session.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">sys.stdout</span> = <span style="color: #657b83; font-weight: bold;">open</span>(<span style="color: #2aa198;">'/dev/stdout'</span>, <span style="color: #2aa198;">'w'</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-1-4" class="outline-4">
<h4 id="sec-2-1-4"><span class="section-number-4">2.1.4</span> Do the simulation</h4>
<div class="outline-text-4" id="text-2-1-4">
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #4f7e67;">stwa</span>.<span style="color: #374478;">produce_training_data</span>(<span style="color: #783f5a;">folder</span>=<span style="color: #783f5a;">folder</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #78683f;">file_name</span>=<span style="color: #78683f;">file_name</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #78683f;">col_per_example</span>=<span style="color: #78683f;">col_per_example</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #37785e;">number_of_sets</span>=<span style="color: #37785e;">number_of_sets</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #707e4f;">traces_per_set</span>=<span style="color: #707e4f;">traces_per_set</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #4f5c7e;">total_sim_time</span>=<span style="color: #4f5c7e;">total_sim_time</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #78683f;">artifact</span>=1,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #78683f;">d_mol_arr</span>=<span style="color: #78683f;">d_mol_arr</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #783f5a;">label_for</span>=<span style="color: #783f5a;">label_for</span>)
</pre>
</div>

<pre class="example">
354a0d72-5d50-4e51-b971-a52c0cf8f572
</pre>
<ul class="org-ul">
<li>Note: the results were printed to the terminal, but I didn't think of the
terminal history limit of tmux, which is at around 1800 lines. This
means, most of the history couldn't be saved. Here is an example of the
output:
<details>
<pre class="example">
Set 10 ------------------------
num_of_steps 16384
Processing tracks: [=================== ] 99% complete
Processing FWHM 250, num_of_steps 16384
Processing tracks: [=================   ] 85% complete
Processing FWHM 250,
Trace 1: Nmol: 2621 d_mol: 50 Cluster multiplier: 9000
num_of_steps 16384
Processing tracks: [=================== ] 99% complete
Processing FWHM 250, num_of_steps 16384
Processing tracks: [=================   ] 85% complete
Processing FWHM 250,
Trace 2: Nmol: 2621 d_mol: 50 Cluster multiplier: 5000
num_of_steps 16384
Processing tracks: [=================== ] 99% complete
Processing FWHM 250, num_of_steps 16384
Processing tracks: [=================   ] 85% complete
Processing FWHM 250,
Trace 3: Nmol: 2621 d_mol: 50 Cluster multiplier: 5000
num_of_steps 16384
Processing tracks: [=================== ] 99% complete
Processing FWHM 250, num_of_steps 16384
Processing tracks: [=================   ] 85% complete
Processing FWHM 250,
Trace 4: Nmol: 2621 d_mol: 50 Cluster multiplier: 9000
num_of_steps 16384
Processing tracks: [=================== ] 99% complete
Processing FWHM 250, num_of_steps 16384
Processing tracks: [=================   ] 85% complete
Processing FWHM 250,
Trace 5: Nmol: 2621 d_mol: 50 Cluster multiplier: 7000
num_of_steps 16384
Processing tracks: [=================== ] 99% complete
Processing FWHM 250, num_of_steps 16384
Processing tracks: [=================   ] 85% complete
Processing FWHM 250,
Trace 6: Nmol: 2621 d_mol: 50 Cluster multiplier: 8000
num_of_steps 16384
Processing tracks: [=================== ] 99% complete
Processing FWHM 250, num_of_steps 16384
Processing tracks: [=================   ] 85% complete
Processing FWHM 250,
Trace 7: Nmol: 2621 d_mol: 50 Cluster multiplier: 7000
num_of_steps 16384
Processing tracks: [=================== ] 99% complete
Processing FWHM 250, num_of_steps 16384
Processing tracks: [=================   ] 85% complete
Processing FWHM 250,
Trace 8: Nmol: 2621 d_mol: 50 Cluster multiplier: 5000
num_of_steps 16384
Processing tracks: [=================== ] 99% complete
Processing FWHM 250, num_of_steps 16384
Processing tracks: [=================   ] 85% complete
Processing FWHM 250,
Trace 9: Nmol: 2621 d_mol: 50 Cluster multiplier: 9000
num_of_steps 16384
Processing tracks: [=================== ] 99% complete
Processing FWHM 250, num_of_steps 16384
Processing tracks: [=================   ] 85% complete
Processing FWHM 250,
Trace 10: Nmol: 2621 d_mol: 50 Cluster multiplier: 9000
num_of_steps 16384
Processing tracks: [=================== ] 99% complete
Processing FWHM 250, num_of_steps 16384
Processing tracks: [=================   ] 85% complete
Processing FWHM 250,
</pre>
</details>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-1-5" class="outline-4">
<h4 id="sec-2-1-5"><span class="section-number-4">2.1.5</span> preparing examplary plots of the results (new kernel, new code)</h4>
<div class="outline-text-4" id="text-2-1-5">
<ul class="org-ul">
<li>I used a different jupyter kernel for loading (See properties drawer
above), thus libraries have to be imported again and parameters have to be
set again. On the plus side: the sequence of plotting here is independent
of the sequence of simulation above.
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #707e4f;">cd</span> /<span style="color: #5e7837;">beegfs</span>/<span style="color: #7a4f7e;">ye53nis</span>/<span style="color: #784437;">drmed</span>-<span style="color: #784437;">git</span>/
</pre>
</div>

<pre class="example">
/beegfs/ye53nis/drmed-git
</pre>
</li>

<li>I also used some additional code for plotting:
<div class="org-src-container">

<pre class="src src-jupyter-python">!<span style="color: #784437;">git</span> <span style="color: #78683f;">log</span> -1

!<span style="color: #784437;">git</span> <span style="color: #374478;">status</span>
</pre>
</div>

<pre class="example">
commit 47d02edd7313d1b172934a17a0aca0a8e47a8fff
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Tue Jan 5 21:41:11 2021 +0100

    Add docs; rename to drate to diffrate
# On branch exp-201231-clustersim
# Changes not staged for commit:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#	modified:   src/nanosimpy (untracked content)
#
# Untracked files:
#   (use "git add &lt;file&gt;..." to include in what will be committed)
#
#	data/
#	experiment_params.csv
#	mlruns/
#	test.pdf
#	test.svg
#	tramp.YDPCnB
no changes added to commit (use "git add" and/or "git commit -a")
</pre>
</li>
<li>again the file to save plots in - notice that this is on my local machine,
not the remote one, since I open this LabBook.org-file on my local machine.
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #859900; font-weight: bold;">setq</span> <span style="color: #783f5a;">org-babel-jupyter-resource-directory</span> <span style="color: #2aa198;">"./data/exp-201231-clustsim"</span>)
</pre>
</div>

<pre class="example">
./data/exp-201231-clustsim
</pre>
</li>

<li>then the necessary imports and variables
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #513f78;">sys</span>
<span style="color: #513f78;">sys</span>.<span style="color: #513f78;">path</span>.<span style="color: #5e7837;">append</span>(<span style="color: #2aa198;">'/beegfs/ye53nis/drmed-git/src/'</span>)
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #783778;">fluotracify</span>.<span style="color: #5e7837;">simulations</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #707e4f;">import_simulation_from_csv</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f5c7e;">isfc</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #783778;">fluotracify</span>.<span style="color: #5e7837;">simulations</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #37785e;">plot_simulations</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #37785e;">ps</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">folder</span> = <span style="color: #2aa198;">'/beegfs/ye53nis/saves/firstartifact_Nov2020/'</span>
<span style="color: #268bd2;">col_per_example</span> = 3
<span style="color: #268bd2;">d_mol_arr</span> = [0.069, 0.08, 0.1, 0.2, 0.4, 0.6, 1.0, 3.0, 10, 50]
<span style="color: #268bd2;">artifact</span> = 1
</pre>
</div>
</li>

<li>let's load our data
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">dataset</span>, <span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #268bd2;">nsamples</span>, <span style="color: #268bd2;">experiment_params</span> = <span style="color: #4f5c7e;">isfc</span>.<span style="color: #37785e;">import_from_csv</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783f5a;">folder</span>=<span style="color: #783f5a;">folder</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">header</span>=12,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #7a4f7e;">frac_train</span>=1,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">col_per_example</span>=<span style="color: #78683f;">col_per_example</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #707e4f;">dropindex</span>=<span style="color: #859900; font-weight: bold;">None</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #5e7837;">dropcolumns</span>=<span style="color: #859900; font-weight: bold;">None</span>)
</pre>
</div>

<details>
<pre class="example">
train 0 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.1/traces_brightclust_Nov2020_D0.1_set007.csv
train 1 /beegfs/ye53nis/saves/firstartifact_Nov2020/3.0/traces_brightclust_Nov2020_D3.0_set007.csv
train 2 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.069/traces_brightclust_Nov2020_D0.069_set003.csv
train 3 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.6/traces_brightclust_Nov2020_D0.6_set006.csv
train 4 /beegfs/ye53nis/saves/firstartifact_Nov2020/10/traces_brightclust_Nov2020_D10_set006.csv
train 5 /beegfs/ye53nis/saves/firstartifact_Nov2020/50/traces_brightclust_Nov2020_D50_set004.csv
train 6 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.08/traces_brightclust_Nov2020_D0.08_set007.csv
train 7 /beegfs/ye53nis/saves/firstartifact_Nov2020/10/traces_brightclust_Nov2020_D10_set004.csv
train 8 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.6/traces_brightclust_Nov2020_D0.6_set005.csv
train 9 /beegfs/ye53nis/saves/firstartifact_Nov2020/50/traces_brightclust_Nov2020_D50_set006.csvtrain 10 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.6/traces_brightclust_Nov2020_D0.6_set004.csv
train 11 /beegfs/ye53nis/saves/firstartifact_Nov2020/50/traces_brightclust_Nov2020_D50_set003.csv
train 12 /beegfs/ye53nis/saves/firstartifact_Nov2020/10/traces_brightclust_Nov2020_D10_set009.csv
train 13 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.08/traces_brightclust_Nov2020_D0.08_set004.csv
train 14 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.069/traces_brightclust_Nov2020_D0.069_set008.csv
train 15 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.2/traces_brightclust_Nov2020_D0.2_set001.csv
train 16 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.1/traces_brightclust_Nov2020_D0.1_set003.csv
train 17 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.1/traces_brightclust_Nov2020_D0.1_set005.csv
train 18 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.2/traces_brightclust_Nov2020_D0.2_set004.csv
train 19 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.069/traces_brightclust_Nov2020_D0.069_set009.csv
train 20 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.4/traces_brightclust_Nov2020_D0.4_set004.csv
train 21 /beegfs/ye53nis/saves/firstartifact_Nov2020/1.0/traces_brightclust_Nov2020_D1.0_set003.csv
train 22 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.069/traces_brightclust_Nov2020_D0.069_set004.csv
train 23 /beegfs/ye53nis/saves/firstartifact_Nov2020/10/traces_brightclust_Nov2020_D10_set002.csv
train 24 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.4/traces_brightclust_Nov2020_D0.4_set006.csv
train 25 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.4/traces_brightclust_Nov2020_D0.4_set009.csv
train 26 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.069/traces_brightclust_Nov2020_D0.069_set007.csv
train 27 /beegfs/ye53nis/saves/firstartifact_Nov2020/50/traces_brightclust_Nov2020_D50_set010.csv
train 28 /beegfs/ye53nis/saves/firstartifact_Nov2020/3.0/traces_brightclust_Nov2020_D3.0_set003.csv
train 29 /beegfs/ye53nis/saves/firstartifact_Nov2020/10/traces_brightclust_Nov2020_D10_set007.csv
train 30 /beegfs/ye53nis/saves/firstartifact_Nov2020/1.0/traces_brightclust_Nov2020_D1.0_set001.csv
train 31 /beegfs/ye53nis/saves/firstartifact_Nov2020/3.0/traces_brightclust_Nov2020_D3.0_set001.csv
train 32 /beegfs/ye53nis/saves/firstartifact_Nov2020/50/traces_brightclust_Nov2020_D50_set001.csv
train 33 /beegfs/ye53nis/saves/firstartifact_Nov2020/1.0/traces_brightclust_Nov2020_D1.0_set009.csv
train 34 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.6/traces_brightclust_Nov2020_D0.6_set002.csv
train 35 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.1/traces_brightclust_Nov2020_D0.1_set008.csv
train 36 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.08/traces_brightclust_Nov2020_D0.08_set009.csv
train 37 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.6/traces_brightclust_Nov2020_D0.6_set007.csv
train 38 /beegfs/ye53nis/saves/firstartifact_Nov2020/1.0/traces_brightclust_Nov2020_D1.0_set004.csv
train 39 /beegfs/ye53nis/saves/firstartifact_Nov2020/10/traces_brightclust_Nov2020_D10_set005.csv
train 40 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.069/traces_brightclust_Nov2020_D0.069_set002.csv
train 41 /beegfs/ye53nis/saves/firstartifact_Nov2020/1.0/traces_brightclust_Nov2020_D1.0_set002.csv
train 42 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.4/traces_brightclust_Nov2020_D0.4_set003.csv
train 43 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.4/traces_brightclust_Nov2020_D0.4_set002.csv
train 44 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.069/traces_brightclust_Nov2020_D0.069_set005.csv
train 45 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.08/traces_brightclust_Nov2020_D0.08_set006.csv
train 46 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.08/traces_brightclust_Nov2020_D0.08_set008.csv
train 47 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.4/traces_brightclust_Nov2020_D0.4_set001.csv
train 48 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.2/traces_brightclust_Nov2020_D0.2_set009.csv
train 49 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.069/traces_brightclust_Nov2020_D0.069_set006.csv
train 50 /beegfs/ye53nis/saves/firstartifact_Nov2020/50/traces_brightclust_Nov2020_D50_set002.csv
train 51 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.6/traces_brightclust_Nov2020_D0.6_set010.csv
train 52 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.069/traces_brightclust_Nov2020_D0.069_set001.csv
train 53 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.2/traces_brightclust_Nov2020_D0.2_set005.csv
train 54 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.1/traces_brightclust_Nov2020_D0.1_set009.csv
train 55 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.6/traces_brightclust_Nov2020_D0.6_set001.csv
train 56 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.08/traces_brightclust_Nov2020_D0.08_set002.csv
train 57 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.2/traces_brightclust_Nov2020_D0.2_set006.csv
train 58 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.1/traces_brightclust_Nov2020_D0.1_set004.csv
train 59 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.6/traces_brightclust_Nov2020_D0.6_set003.csv
train 60 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.08/traces_brightclust_Nov2020_D0.08_set001.csv
train 61 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.2/traces_brightclust_Nov2020_D0.2_set002.csv
train 62 /beegfs/ye53nis/saves/firstartifact_Nov2020/1.0/traces_brightclust_Nov2020_D1.0_set007.csv
train 63 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.6/traces_brightclust_Nov2020_D0.6_set008.csv
train 64 /beegfs/ye53nis/saves/firstartifact_Nov2020/10/traces_brightclust_Nov2020_D10_set010.csv
train 65 /beegfs/ye53nis/saves/firstartifact_Nov2020/3.0/traces_brightclust_Nov2020_D3.0_set006.csv
train 66 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.2/traces_brightclust_Nov2020_D0.2_set003.csv
train 67 /beegfs/ye53nis/saves/firstartifact_Nov2020/3.0/traces_brightclust_Nov2020_D3.0_set005.csv
train 68 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.08/traces_brightclust_Nov2020_D0.08_set005.csv
train 69 /beegfs/ye53nis/saves/firstartifact_Nov2020/3.0/traces_brightclust_Nov2020_D3.0_set010.csv
train 70 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.08/traces_brightclust_Nov2020_D0.08_set010.csv
train 71 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.1/traces_brightclust_Nov2020_D0.1_set010.csv
train 72 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.4/traces_brightclust_Nov2020_D0.4_set010.csv
train 73 /beegfs/ye53nis/saves/firstartifact_Nov2020/50/traces_brightclust_Nov2020_D50_set008.csv
train 74 /beegfs/ye53nis/saves/firstartifact_Nov2020/50/traces_brightclust_Nov2020_D50_set009.csv
train 75 /beegfs/ye53nis/saves/firstartifact_Nov2020/1.0/traces_brightclust_Nov2020_D1.0_set010.csv
train 76 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.1/traces_brightclust_Nov2020_D0.1_set001.csv
train 77 /beegfs/ye53nis/saves/firstartifact_Nov2020/50/traces_brightclust_Nov2020_D50_set005.csv
train 78 /beegfs/ye53nis/saves/firstartifact_Nov2020/10/traces_brightclust_Nov2020_D10_set003.csv
train 79 /beegfs/ye53nis/saves/firstartifact_Nov2020/10/traces_brightclust_Nov2020_D10_set008.csv
train 80 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.1/traces_brightclust_Nov2020_D0.1_set006.csv
train 81 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.2/traces_brightclust_Nov2020_D0.2_set008.csv
train 82 /beegfs/ye53nis/saves/firstartifact_Nov2020/3.0/traces_brightclust_Nov2020_D3.0_set002.csv
train 83 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.4/traces_brightclust_Nov2020_D0.4_set007.csv
train 84 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.2/traces_brightclust_Nov2020_D0.2_set010.csv
train 85 /beegfs/ye53nis/saves/firstartifact_Nov2020/1.0/traces_brightclust_Nov2020_D1.0_set006.csv
train 86 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.6/traces_brightclust_Nov2020_D0.6_set009.csv
train 87 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.08/traces_brightclust_Nov2020_D0.08_set003.csv
train 88 /beegfs/ye53nis/saves/firstartifact_Nov2020/3.0/traces_brightclust_Nov2020_D3.0_set009.csv
train 89 /beegfs/ye53nis/saves/firstartifact_Nov2020/10/traces_brightclust_Nov2020_D10_set001.csv
train 90 /beegfs/ye53nis/saves/firstartifact_Nov2020/3.0/traces_brightclust_Nov2020_D3.0_set008.csv
train 91 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.2/traces_brightclust_Nov2020_D0.2_set007.csv
train 92 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.1/traces_brightclust_Nov2020_D0.1_set002.csv
train 93 /beegfs/ye53nis/saves/firstartifact_Nov2020/3.0/traces_brightclust_Nov2020_D3.0_set004.csv
train 94 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.069/traces_brightclust_Nov2020_D0.069_set010.csv
train 95 /beegfs/ye53nis/saves/firstartifact_Nov2020/50/traces_brightclust_Nov2020_D50_set007.csv
train 96 /beegfs/ye53nis/saves/firstartifact_Nov2020/1.0/traces_brightclust_Nov2020_D1.0_set008.csv
train 97 /beegfs/ye53nis/saves/firstartifact_Nov2020/1.0/traces_brightclust_Nov2020_D1.0_set005.csv
train 98 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.4/traces_brightclust_Nov2020_D0.4_set008.csv
train 99 /beegfs/ye53nis/saves/firstartifact_Nov2020/0.4/traces_brightclust_Nov2020_D0.4_set005.csv
</pre>
</details>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">out</span> = <span style="color: #4f5c7e;">isfc</span>.<span style="color: #3f7178;">separate_data_and_labels</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">array</span>=<span style="color: #37785e;">dataset</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783f5a;">nsamples</span>=<span style="color: #783f5a;">nsamples</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">col_per_example</span>=<span style="color: #78683f;">col_per_example</span>)
</pre>
</div>

<pre class="example">
The given DataFrame was split into 3 parts with shapes: [(16384, 10000), (16384, 10000), (16384, 10000)]
</pre>
</li>

<li><b>added <span class="timestamp-wrapper"><span class="timestamp">&lt;2022-08-22 Mo&gt;</span></span></b>: For machine learning, we did 3 splits of data: <code>train</code>, <code>validation</code>,
<code>test</code>. Let's load them and characterize them
<details>
<div class="org-src-container">

<pre class="src src-jupyter-python">%<span style="color: #707e4f;">cd</span> /<span style="color: #5e7837;">beegfs</span>/<span style="color: #7a4f7e;">ye53nis</span>/<span style="color: #784437;">drmed</span>-<span style="color: #784437;">git</span>
</pre>
</div>

<pre class="example">
/beegfs/ye53nis/drmed-git
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python">!<span style="color: #784437;">git</span> <span style="color: #78683f;">log</span> -1

!<span style="color: #784437;">git</span> <span style="color: #374478;">status</span>
</pre>
</div>

<pre class="example">
commit 6def0df6b174f2f51efc279d6add74e9f809e1eb
Author: Apoplex &lt;oligolex@vivaldi.net&gt;
Date:   Fri Jul 15 14:36:15 2022 +0200

    fix correlate_timetrace_and_save
# On branch exp-220227-unet
# Changes not staged for commit:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#	modified:   src/nanosimpy (untracked content)
#
# Untracked files:
#   (use "git add &lt;file&gt;..." to include in what will be committed)
#
#	data/0.069.svg
#	data/exp-210204-unet/
#	data/exp-220120-correlate-ptu/
#	data/exp-220227-unet/2022-03-01_experimental/
#	data/exp-220227-unet/2022-04-22_simulations/
#	data/exp-220227-unet/2022-05-17_simulations/
#	data/exp-220227-unet/2022-05-22_experimental/
#	data/exp-220227-unet/2022-06-02_experimental-pex5/
#	data/exp-220316-publication1/
#	data/exp-devtest/
#	data/exp-test/
#	data/mlruns/
#	data/tb/
#	experiment_params.csv
#	src/fluotracify/applications/correlate_cython.c
#	test
#	tramp.YDPCnB
no changes added to commit (use "git add" and/or "git commit -a")
</pre>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #513f78;">sys</span>

<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f5c7e;">numpy</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #707e4f;">np</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #5e7837;">pandas</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #783778;">pd</span>


<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #43783f;">pathlib</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #78683f;">Path</span>
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #4f7e67;">pprint</span> <span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f7e67;">pprint</span>

<span style="color: #268bd2;">FLUOTRACIFY_PATH</span> = <span style="color: #2aa198;">'/beegfs/ye53nis/drmed-git/src/'</span>
<span style="color: #513f78;">sys</span>.<span style="color: #513f78;">path</span>.<span style="color: #5e7837;">append</span>(<span style="color: #784437;">FLUOTRACIFY_PATH</span>)
<span style="color: #859900; font-weight: bold;">from</span> <span style="color: #783778;">fluotracify</span>.<span style="color: #5e7837;">simulations</span> <span style="color: #859900; font-weight: bold;">import</span> (
<span style="background-color: #eee8d5;"> </span>  <span style="color: #707e4f;">import_simulation_from_csv</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f5c7e;">isfc</span>,
<span style="background-color: #eee8d5;"> </span>  <span style="color: #43783f;">analyze_simulations</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #7a4f7e;">ans</span>,
)

</pre>
</div>

<pre class="example">
2022-08-22 14:53:59.575866: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libcudart.so.11.0'; dlerror: libcudart.so.11.0: cannot open shared object file: No such file or directory
2022-08-22 14:53:59.575902: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
</pre>


<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">col_per_example</span> = 3
<span style="color: #268bd2;">lab_thresh</span> = 0.04
<span style="color: #268bd2;">artifact</span> = 0
<span style="color: #268bd2;">model_type</span> = 1
<span style="color: #268bd2;">fwhm</span> = 250

<span style="color: #268bd2;">train_path</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'/beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets'</span>)
<span style="color: #268bd2;">val_path</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'/beegfs/ye53nis/saves/firstartifact_Nov2020_val_max2sets_SORTEDIN'</span>)
<span style="color: #268bd2;">test_path</span> = <span style="color: #78683f;">Path</span>(<span style="color: #2aa198;">'/beegfs/ye53nis/saves/firstartifact_Nov2020_test'</span>)

<span style="color: #268bd2;">train</span>, <span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #268bd2;">nsamples_train</span>, <span style="color: #268bd2;">train_params</span> = <span style="color: #4f5c7e;">isfc</span>.<span style="color: #37785e;">import_from_csv</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783f5a;">folder</span>=<span style="color: #783f5a;">train_path</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">header</span>=12,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #7a4f7e;">frac_train</span>=1,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">col_per_example</span>=<span style="color: #78683f;">col_per_example</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #707e4f;">dropindex</span>=<span style="color: #859900; font-weight: bold;">None</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #5e7837;">dropcolumns</span>=<span style="color: #859900; font-weight: bold;">None</span>)

<span style="color: #268bd2;">val</span>, <span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #268bd2;">nsamples_val</span>, <span style="color: #268bd2;">val_params</span> = <span style="color: #4f5c7e;">isfc</span>.<span style="color: #37785e;">import_from_csv</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783f5a;">folder</span>=<span style="color: #7a4f7e;">val_path</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">header</span>=12,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #7a4f7e;">frac_train</span>=1,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">col_per_example</span>=<span style="color: #78683f;">col_per_example</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #707e4f;">dropindex</span>=<span style="color: #859900; font-weight: bold;">None</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #5e7837;">dropcolumns</span>=<span style="color: #859900; font-weight: bold;">None</span>)

<span style="color: #268bd2;">test</span>, <span style="color: #657b83; font-weight: bold;">_</span>, <span style="color: #268bd2;">nsamples_test</span>, <span style="color: #268bd2;">test_params</span> = <span style="color: #4f5c7e;">isfc</span>.<span style="color: #37785e;">import_from_csv</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="color: #783f5a;">folder</span>=<span style="color: #43783f;">test_path</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #513f78;">header</span>=12,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #7a4f7e;">frac_train</span>=1,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">col_per_example</span>=<span style="color: #78683f;">col_per_example</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #707e4f;">dropindex</span>=<span style="color: #859900; font-weight: bold;">None</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="color: #5e7837;">dropcolumns</span>=<span style="color: #859900; font-weight: bold;">None</span>)

</pre>
</div>

<pre class="example">
2022-08-22 15:01:07,583 - sim import tools - 1/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/1.0/0.1/traces_brightclust_Nov2020_D1.0_set004.csv
2022-08-22 15:01:10,900 - sim import tools - 2/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.08/0.1/traces_brightclust_Nov2020_D0.08_set002.csv
2022-08-22 15:01:14,230 - sim import tools - 3/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.6/1.0/traces_brightclust_Nov2020_D0.6_set001.csv
2022-08-22 15:01:24,427 - sim import tools - 4/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/1.0/0.1/traces_brightclust_Nov2020_D1.0_set007.csv
2022-08-22 15:01:28,527 - sim import tools - 5/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/1.0/1.0/traces_brightclust_Nov2020_D1.0_set002.csv
2022-08-22 15:01:32,186 - sim import tools - 6/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/10/1.0/traces_brightclust_Nov2020_D10_set010.csv
2022-08-22 15:01:36,667 - sim import tools - 7/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/10/0.01/traces_brightclust_Nov2020_D10_set004.csv
2022-08-22 15:01:40,508 - sim import tools - 8/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/3.0/0.1/traces_brightclust_Nov2020_D3.0_set010.csv
2022-08-22 15:01:44,080 - sim import tools - 9/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.08/1.0/traces_brightclust_Nov2020_D0.08_set009.csv
2022-08-22 15:01:49,585 - sim import tools - 10/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.1/1.0/traces_brightclust_Nov2020_D0.1_set003.csv2022-08-22 15:01:53,212 - sim import tools - 11/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.1/1.0/traces_brightclust_Nov2020_D0.1_set007.csv
2022-08-22 15:01:56,689 - sim import tools - 12/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/1.0/1.0/traces_brightclust_Nov2020_D1.0_set001.csv
2022-08-22 15:02:00,568 - sim import tools - 13/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/10/0.01/traces_brightclust_Nov2020_D10_set003.csv
2022-08-22 15:02:04,222 - sim import tools - 14/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.6/1.0/traces_brightclust_Nov2020_D0.6_set002.csv
2022-08-22 15:02:07,872 - sim import tools - 15/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/50/1.0/traces_brightclust_Nov2020_D50_set005.csv
2022-08-22 15:02:11,754 - sim import tools - 16/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.069/1.0/traces_brightclust_Nov2020_D0.069_set009.csv
2022-08-22 15:02:16,110 - sim import tools - 17/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/50/1.0/traces_brightclust_Nov2020_D50_set004.csv
2022-08-22 15:02:19,635 - sim import tools - 18/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.4/0.01/traces_brightclust_Nov2020_D0.4_set010.csv
2022-08-22 15:02:23,317 - sim import tools - 19/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.2/1.0/traces_brightclust_Nov2020_D0.2_set009.csv
2022-08-22 15:02:26,787 - sim import tools - 20/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/1.0/0.01/traces_brightclust_Nov2020_D1.0_set010.csv
2022-08-22 15:02:30,350 - sim import tools - 21/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.4/1.0/traces_brightclust_Nov2020_D0.4_set007.csv
2022-08-22 15:02:38,204 - sim import tools - 22/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.2/1.0/traces_brightclust_Nov2020_D0.2_set010.csv
2022-08-22 15:02:42,002 - sim import tools - 23/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/3.0/1.0/traces_brightclust_Nov2020_D3.0_set001.csv
2022-08-22 15:02:47,861 - sim import tools - 24/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.4/0.1/traces_brightclust_Nov2020_D0.4_set003.csv
2022-08-22 15:02:51,915 - sim import tools - 25/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/3.0/1.0/traces_brightclust_Nov2020_D3.0_set003.csv
2022-08-22 15:02:55,479 - sim import tools - 26/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.1/0.01/traces_brightclust_Nov2020_D0.1_set004.csv
2022-08-22 15:02:59,060 - sim import tools - 27/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.2/0.1/traces_brightclust_Nov2020_D0.2_set001.csv
2022-08-22 15:03:02,729 - sim import tools - 28/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.6/0.1/traces_brightclust_Nov2020_D0.6_set005.csv
2022-08-22 15:03:06,402 - sim import tools - 29/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.08/0.1/traces_brightclust_Nov2020_D0.08_set006.csv
2022-08-22 15:03:10,838 - sim import tools - 30/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.4/0.01/traces_brightclust_Nov2020_D0.4_set004.csv
2022-08-22 15:03:15,520 - sim import tools - 31/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/10/0.1/traces_brightclust_Nov2020_D10_set006.csv
2022-08-22 15:03:19,243 - sim import tools - 32/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.2/0.1/traces_brightclust_Nov2020_D0.2_set004.csv
2022-08-22 15:03:24,959 - sim import tools - 33/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/3.0/0.01/traces_brightclust_Nov2020_D3.0_set005.csv
2022-08-22 15:03:28,685 - sim import tools - 34/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.069/0.1/traces_brightclust_Nov2020_D0.069_set003.csv
2022-08-22 15:03:32,498 - sim import tools - 35/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.2/0.01/traces_brightclust_Nov2020_D0.2_set003.csv
2022-08-22 15:03:36,044 - sim import tools - 36/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/50/0.01/traces_brightclust_Nov2020_D50_set006.csv
2022-08-22 15:03:39,848 - sim import tools - 37/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.6/0.1/traces_brightclust_Nov2020_D0.6_set004.csv
2022-08-22 15:03:43,605 - sim import tools - 38/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.08/1.0/traces_brightclust_Nov2020_D0.08_set004.csv
2022-08-22 15:03:47,474 - sim import tools - 39/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.6/0.01/traces_brightclust_Nov2020_D0.6_set010.csv
2022-08-22 15:03:51,072 - sim import tools - 40/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/10/0.1/traces_brightclust_Nov2020_D10_set007.csv
2022-08-22 15:03:54,988 - sim import tools - 41/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.4/1.0/traces_brightclust_Nov2020_D0.4_set006.csv
2022-08-22 15:04:01,497 - sim import tools - 42/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.4/0.1/traces_brightclust_Nov2020_D0.4_set002.csv
2022-08-22 15:04:05,120 - sim import tools - 43/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.1/0.01/traces_brightclust_Nov2020_D0.1_set006.csv
2022-08-22 15:04:08,664 - sim import tools - 44/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/3.0/0.01/traces_brightclust_Nov2020_D3.0_set006.csv
2022-08-22 15:04:13,252 - sim import tools - 45/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/50/0.1/traces_brightclust_Nov2020_D50_set010.csv
2022-08-22 15:04:16,976 - sim import tools - 46/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.08/0.01/traces_brightclust_Nov2020_D0.08_set007.csv
2022-08-22 15:04:20,744 - sim import tools - 47/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/0.069/0.1/traces_brightclust_Nov2020_D0.069_set002.csv
2022-08-22 15:04:24,635 - sim import tools - 48/48: /beegfs/ye53nis/saves/firstartifact_Nov2020_train_max2sets/50/0.1/traces_brightclust_Nov2020_D50_set009.csv
2022-08-22 15:04:28,258 - sim import tools - 1/12: /beegfs/ye53nis/saves/firstartifact_Nov2020_val_max2sets_SORTEDIN/1.0/0.1/traces_brightclust_Nov2020_D1.0_set009.csv
2022-08-22 15:04:31,883 - sim import tools - 2/12: /beegfs/ye53nis/saves/firstartifact_Nov2020_val_max2sets_SORTEDIN/50/1.0/traces_brightclust_Nov2020_D50_set007.csv
2022-08-22 15:04:36,746 - sim import tools - 3/12: /beegfs/ye53nis/saves/firstartifact_Nov2020_val_max2sets_SORTEDIN/0.4/0.1/traces_brightclust_Nov2020_D0.4_set009.csv
2022-08-22 15:04:40,324 - sim import tools - 4/12: /beegfs/ye53nis/saves/firstartifact_Nov2020_val_max2sets_SORTEDIN/3.0/1.0/traces_brightclust_Nov2020_D3.0_set009.csv
2022-08-22 15:04:44,167 - sim import tools - 5/12: /beegfs/ye53nis/saves/firstartifact_Nov2020_val_max2sets_SORTEDIN/0.1/0.01/traces_brightclust_Nov2020_D0.1_set008.csv
2022-08-22 15:04:47,733 - sim import tools - 6/12: /beegfs/ye53nis/saves/firstartifact_Nov2020_val_max2sets_SORTEDIN/10/0.01/traces_brightclust_Nov2020_D10_set008.csv
2022-08-22 15:04:51,261 - sim import tools - 7/12: /beegfs/ye53nis/saves/firstartifact_Nov2020_val_max2sets_SORTEDIN/0.08/0.1/traces_brightclust_Nov2020_D0.08_set008.csv
2022-08-22 15:04:54,837 - sim import tools - 8/12: /beegfs/ye53nis/saves/firstartifact_Nov2020_val_max2sets_SORTEDIN/1.0/1.0/traces_brightclust_Nov2020_D1.0_set008.csv
2022-08-22 15:04:58,638 - sim import tools - 9/12: /beegfs/ye53nis/saves/firstartifact_Nov2020_val_max2sets_SORTEDIN/3.0/0.01/traces_brightclust_Nov2020_D3.0_set008.csv
2022-08-22 15:05:02,079 - sim import tools - 10/12: /beegfs/ye53nis/saves/firstartifact_Nov2020_val_max2sets_SORTEDIN/0.2/0.1/traces_brightclust_Nov2020_D0.2_set006.csv
2022-08-22 15:05:06,190 - sim import tools - 11/12: /beegfs/ye53nis/saves/firstartifact_Nov2020_val_max2sets_SORTEDIN/0.069/0.1/traces_brightclust_Nov2020_D0.069_set006.csv
2022-08-22 15:05:09,643 - sim import tools - 12/12: /beegfs/ye53nis/saves/firstartifact_Nov2020_val_max2sets_SORTEDIN/0.6/0.1/traces_brightclust_Nov2020_D0.6_set006.csv
2022-08-22 15:05:13,347 - sim import tools - 1/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.069/1.0/traces_brightclust_Nov2020_D0.069_set010.csv
2022-08-22 15:05:17,852 - sim import tools - 2/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/50/0.1/traces_brightclust_Nov2020_D50_set003.csv
2022-08-22 15:05:21,482 - sim import tools - 3/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.4/0.1/traces_brightclust_Nov2020_D0.4_set001.csv
2022-08-22 15:05:25,196 - sim import tools - 4/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.2/0.1/traces_brightclust_Nov2020_D0.2_set007.csv
2022-08-22 15:05:29,300 - sim import tools - 5/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/3.0/1.0/traces_brightclust_Nov2020_D3.0_set002.csv
2022-08-22 15:05:32,904 - sim import tools - 6/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/3.0/0.01/traces_brightclust_Nov2020_D3.0_set004.csv
2022-08-22 15:05:36,427 - sim import tools - 7/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/50/0.01/traces_brightclust_Nov2020_D50_set002.csv
2022-08-22 15:05:42,126 - sim import tools - 8/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.2/1.0/traces_brightclust_Nov2020_D0.2_set005.csv
2022-08-22 15:05:45,767 - sim import tools - 9/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.6/1.0/traces_brightclust_Nov2020_D0.6_set009.csv
2022-08-22 15:05:49,081 - sim import tools - 10/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/10/0.1/traces_brightclust_Nov2020_D10_set001.csv
2022-08-22 15:05:52,579 - sim import tools - 11/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.08/1.0/traces_brightclust_Nov2020_D0.08_set001.csv
2022-08-22 15:05:56,075 - sim import tools - 12/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.6/0.1/traces_brightclust_Nov2020_D0.6_set003.csv
2022-08-22 15:05:59,546 - sim import tools - 13/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.1/1.0/traces_brightclust_Nov2020_D0.1_set001.csv
2022-08-22 15:06:03,365 - sim import tools - 14/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.4/1.0/traces_brightclust_Nov2020_D0.4_set005.csv
2022-08-22 15:06:06,954 - sim import tools - 15/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/10/1.0/traces_brightclust_Nov2020_D10_set005.csv
2022-08-22 15:06:10,482 - sim import tools - 16/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/1.0/1.0/traces_brightclust_Nov2020_D1.0_set005.csv
2022-08-22 15:06:15,475 - sim import tools - 17/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.069/0.1/traces_brightclust_Nov2020_D0.069_set001.csv
2022-08-22 15:06:19,122 - sim import tools - 18/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/50/1.0/traces_brightclust_Nov2020_D50_set001.csv
2022-08-22 15:06:22,559 - sim import tools - 19/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.1/0.01/traces_brightclust_Nov2020_D0.1_set002.csv
2022-08-22 15:06:26,128 - sim import tools - 20/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.08/0.1/traces_brightclust_Nov2020_D0.08_set003.csv
2022-08-22 15:06:29,503 - sim import tools - 21/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/1.0/0.01/traces_brightclust_Nov2020_D1.0_set006.csv
2022-08-22 15:06:32,862 - sim import tools - 22/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/1.0/0.1/traces_brightclust_Nov2020_D1.0_set003.csv
2022-08-22 15:06:36,597 - sim import tools - 23/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.2/0.01/traces_brightclust_Nov2020_D0.2_set002.csv
2022-08-22 15:06:40,322 - sim import tools - 24/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.1/0.1/traces_brightclust_Nov2020_D0.1_set005.csv
2022-08-22 15:06:43,806 - sim import tools - 25/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/3.0/0.1/traces_brightclust_Nov2020_D3.0_set007.csv
2022-08-22 15:06:47,273 - sim import tools - 26/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.08/0.01/traces_brightclust_Nov2020_D0.08_set005.csv
2022-08-22 15:06:51,150 - sim import tools - 27/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.069/0.01/traces_brightclust_Nov2020_D0.069_set005.csv
2022-08-22 15:06:54,884 - sim import tools - 28/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/10/0.01/traces_brightclust_Nov2020_D10_set002.csv
2022-08-22 15:06:58,405 - sim import tools - 29/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.6/0.01/traces_brightclust_Nov2020_D0.6_set008.csv
2022-08-22 15:07:01,776 - sim import tools - 30/30: /beegfs/ye53nis/saves/firstartifact_Nov2020_test/0.4/0.01/traces_brightclust_Nov2020_D0.4_set008.csv
</pre>

<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">train_sep</span> = <span style="color: #4f5c7e;">isfc</span>.<span style="color: #3f7178;">separate_data_and_labels</span>(<span style="color: #78683f;">array</span>=<span style="color: #7e544f;">train</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783f5a;">nsamples</span>=<span style="color: #374478;">nsamples_train</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">col_per_example</span>=<span style="color: #78683f;">col_per_example</span>)

<span style="color: #268bd2;">val_sep</span> = <span style="color: #4f5c7e;">isfc</span>.<span style="color: #3f7178;">separate_data_and_labels</span>(<span style="color: #78683f;">array</span>=<span style="color: #707e4f;">val</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783f5a;">nsamples</span>=<span style="color: #513f78;">nsamples_val</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">col_per_example</span>=<span style="color: #78683f;">col_per_example</span>)

<span style="color: #268bd2;">test_sep</span> = <span style="color: #4f5c7e;">isfc</span>.<span style="color: #3f7178;">separate_data_and_labels</span>(<span style="color: #78683f;">array</span>=<span style="color: #43783f;">test</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783f5a;">nsamples</span>=<span style="color: #7a4f7e;">nsamples_test</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">col_per_example</span>=<span style="color: #78683f;">col_per_example</span>)

<span style="color: #268bd2;">train_dirty</span> = <span style="color: #783778;">train_sep</span>[<span style="color: #2aa198;">'0'</span>]
<span style="color: #268bd2;">train_labels</span> = <span style="color: #783778;">train_sep</span>[<span style="color: #2aa198;">'1'</span>]
<span style="color: #268bd2;">train_labbool</span> = <span style="color: #784437;">train_labels</span> &gt; <span style="color: #37785e;">lab_thresh</span>
<span style="color: #268bd2;">train_clean</span> = <span style="color: #783778;">train_sep</span>[<span style="color: #2aa198;">'2'</span>]

<span style="color: #268bd2;">val_dirty</span> = <span style="color: #43783f;">val_sep</span>[<span style="color: #2aa198;">'0'</span>]
<span style="color: #268bd2;">val_labels</span> = <span style="color: #43783f;">val_sep</span>[<span style="color: #2aa198;">'1'</span>]
<span style="color: #268bd2;">val_labbool</span> = <span style="color: #4f7e67;">val_labels</span> &gt; <span style="color: #37785e;">lab_thresh</span>
<span style="color: #268bd2;">val_clean</span> = <span style="color: #43783f;">val_sep</span>[<span style="color: #2aa198;">'2'</span>]

<span style="color: #268bd2;">test_dirty</span> = <span style="color: #4f5c7e;">test_sep</span>[<span style="color: #2aa198;">'0'</span>]
<span style="color: #268bd2;">test_labels</span> = <span style="color: #4f5c7e;">test_sep</span>[<span style="color: #2aa198;">'1'</span>]
<span style="color: #268bd2;">test_labbool</span> = <span style="color: #784437;">test_labels</span> &gt; <span style="color: #37785e;">lab_thresh</span>
<span style="color: #268bd2;">test_clean</span> = <span style="color: #4f5c7e;">test_sep</span>[<span style="color: #2aa198;">'2'</span>]

<span style="color: #7e544f;">train_dirty</span>
</pre>
</div>

<pre class="example">
2022-08-22 15:09:46,295 - sim import tools - The given DataFrame was split into 3 parts with shapes: [(16384, 4800), (16384, 4800), (16384, 4800)]
2022-08-22 15:09:46,389 - sim import tools - The given DataFrame was split into 3 parts with shapes: [(16384, 1200), (16384, 1200), (16384, 1200)]
2022-08-22 15:09:46,630 - sim import tools - The given DataFrame was split into 3 parts with shapes: [(16384, 3000), (16384, 3000), (16384, 3000)]
</pre>

<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="left">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">

<col  class="right">
</colgroup>
<thead>
<tr>
<th scope="col" class="text-right">&#xa0;</th>
<th scope="col" class="text-right">trace001</th>
<th scope="col" class="text-right">trace002</th>
<th scope="col" class="text-right">trace003</th>
<th scope="col" class="text-right">trace004</th>
<th scope="col" class="text-right">trace005</th>
<th scope="col" class="text-right">trace006</th>
<th scope="col" class="text-right">trace007</th>
<th scope="col" class="text-right">trace008</th>
<th scope="col" class="text-right">trace009</th>
<th scope="col" class="text-right">trace010</th>
<th scope="col" class="text-left">&#x2026;</th>
<th scope="col" class="text-right">trace091</th>
<th scope="col" class="text-right">trace092</th>
<th scope="col" class="text-right">trace093</th>
<th scope="col" class="text-right">trace094</th>
<th scope="col" class="text-right">trace095</th>
<th scope="col" class="text-right">trace096</th>
<th scope="col" class="text-right">trace097</th>
<th scope="col" class="text-right">trace098</th>
<th scope="col" class="text-right">trace099</th>
<th scope="col" class="text-right">trace100</th>
</tr>
</thead>
<tbody>
<tr>
<td class="text-right">0</td>
<td class="text-right">2087.936279</td>
<td class="text-right">1859.954834</td>
<td class="text-right">1258.620728</td>
<td class="text-right">2111.855713</td>
<td class="text-right">1154.932617</td>
<td class="text-right">1681.850952</td>
<td class="text-right">1902.115112</td>
<td class="text-right">1953.226929</td>
<td class="text-right">1493.605713</td>
<td class="text-right">1824.782837</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">2991.938965</td>
<td class="text-right">3056.693848</td>
<td class="text-right">3065.942139</td>
<td class="text-right">3209.311768</td>
<td class="text-right">3072.823975</td>
<td class="text-right">2137.467773</td>
<td class="text-right">2536.288086</td>
<td class="text-right">2596.720459</td>
<td class="text-right">2322.556152</td>
<td class="text-right">3241.336670</td>
</tr>

<tr>
<td class="text-right">1</td>
<td class="text-right">2225.077148</td>
<td class="text-right">1538.099731</td>
<td class="text-right">1234.391113</td>
<td class="text-right">2202.052979</td>
<td class="text-right">1106.553467</td>
<td class="text-right">1599.424927</td>
<td class="text-right">1756.183716</td>
<td class="text-right">2155.242676</td>
<td class="text-right">1453.128052</td>
<td class="text-right">1733.415771</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">2830.736816</td>
<td class="text-right">2632.801514</td>
<td class="text-right">2681.733887</td>
<td class="text-right">3103.006836</td>
<td class="text-right">2852.432373</td>
<td class="text-right">2902.637939</td>
<td class="text-right">2606.319336</td>
<td class="text-right">2728.558350</td>
<td class="text-right">2388.868164</td>
<td class="text-right">2557.717041</td>
</tr>

<tr>
<td class="text-right">2</td>
<td class="text-right">2283.867920</td>
<td class="text-right">1672.847534</td>
<td class="text-right">1297.318359</td>
<td class="text-right">2068.382568</td>
<td class="text-right">1088.629150</td>
<td class="text-right">1539.257568</td>
<td class="text-right">1730.095825</td>
<td class="text-right">1944.324951</td>
<td class="text-right">1615.796753</td>
<td class="text-right">1677.323486</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">3424.374268</td>
<td class="text-right">2697.639648</td>
<td class="text-right">2094.186279</td>
<td class="text-right">2632.571777</td>
<td class="text-right">2324.150879</td>
<td class="text-right">2309.326904</td>
<td class="text-right">2808.739746</td>
<td class="text-right">3119.658447</td>
<td class="text-right">2337.465332</td>
<td class="text-right">2208.561035</td>
</tr>

<tr>
<td class="text-right">3</td>
<td class="text-right">2101.477295</td>
<td class="text-right">1826.694214</td>
<td class="text-right">1343.309448</td>
<td class="text-right">1992.692871</td>
<td class="text-right">1082.352295</td>
<td class="text-right">1493.574097</td>
<td class="text-right">1632.583740</td>
<td class="text-right">2063.340576</td>
<td class="text-right">1768.437134</td>
<td class="text-right">1518.847534</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">3126.366455</td>
<td class="text-right">2493.093018</td>
<td class="text-right">1937.462158</td>
<td class="text-right">2888.637939</td>
<td class="text-right">2180.181396</td>
<td class="text-right">2906.921631</td>
<td class="text-right">2272.959717</td>
<td class="text-right">2823.713379</td>
<td class="text-right">2872.672607</td>
<td class="text-right">3321.868408</td>
</tr>

<tr>
<td class="text-right">4</td>
<td class="text-right">1987.587769</td>
<td class="text-right">1914.085205</td>
<td class="text-right">1294.796875</td>
<td class="text-right">2188.687256</td>
<td class="text-right">1047.618774</td>
<td class="text-right">1740.084961</td>
<td class="text-right">1642.488403</td>
<td class="text-right">1969.975830</td>
<td class="text-right">1540.356079</td>
<td class="text-right">1479.204956</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">4045.698975</td>
<td class="text-right">2669.068115</td>
<td class="text-right">2655.093018</td>
<td class="text-right">2531.362305</td>
<td class="text-right">3005.655273</td>
<td class="text-right">2545.799316</td>
<td class="text-right">2692.775635</td>
<td class="text-right">3238.976562</td>
<td class="text-right">2815.497314</td>
<td class="text-right">2685.596680</td>
</tr>

<tr>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
<td class="text-right">&#x2026;</td>
</tr>

<tr>
<td class="text-right">16379</td>
<td class="text-right">2248.828369</td>
<td class="text-right">1512.159180</td>
<td class="text-right">2574.389893</td>
<td class="text-right">2085.525146</td>
<td class="text-right">5731.513672</td>
<td class="text-right">1902.472778</td>
<td class="text-right">1578.385742</td>
<td class="text-right">1916.452393</td>
<td class="text-right">1320.047119</td>
<td class="text-right">1550.951904</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">2291.134277</td>
<td class="text-right">4845.781250</td>
<td class="text-right">2534.955322</td>
<td class="text-right">2397.597900</td>
<td class="text-right">2810.859375</td>
<td class="text-right">3058.239746</td>
<td class="text-right">3012.957520</td>
<td class="text-right">2055.962646</td>
<td class="text-right">2597.934814</td>
<td class="text-right">2275.868896</td>
</tr>

<tr>
<td class="text-right">16380</td>
<td class="text-right">2194.083984</td>
<td class="text-right">1545.642700</td>
<td class="text-right">2921.095459</td>
<td class="text-right">2010.420410</td>
<td class="text-right">5787.336426</td>
<td class="text-right">1907.732056</td>
<td class="text-right">1580.937744</td>
<td class="text-right">2172.060059</td>
<td class="text-right">1421.129517</td>
<td class="text-right">1479.062744</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">2997.078125</td>
<td class="text-right">5184.318359</td>
<td class="text-right">2522.363281</td>
<td class="text-right">2385.093506</td>
<td class="text-right">2436.397705</td>
<td class="text-right">3615.403076</td>
<td class="text-right">2555.819092</td>
<td class="text-right">1970.641113</td>
<td class="text-right">3601.866455</td>
<td class="text-right">2630.073730</td>
</tr>

<tr>
<td class="text-right">16381</td>
<td class="text-right">2067.856201</td>
<td class="text-right">1610.466431</td>
<td class="text-right">3070.954102</td>
<td class="text-right">2197.771729</td>
<td class="text-right">5789.680664</td>
<td class="text-right">1971.624023</td>
<td class="text-right">1475.542847</td>
<td class="text-right">2084.938232</td>
<td class="text-right">1400.463867</td>
<td class="text-right">1298.757202</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">2942.168457</td>
<td class="text-right">5496.346680</td>
<td class="text-right">3230.807373</td>
<td class="text-right">3597.340332</td>
<td class="text-right">2541.044678</td>
<td class="text-right">2924.228516</td>
<td class="text-right">1627.710083</td>
<td class="text-right">2388.055176</td>
<td class="text-right">2722.604248</td>
<td class="text-right">2373.275879</td>
</tr>

<tr>
<td class="text-right">16382</td>
<td class="text-right">2067.812988</td>
<td class="text-right">1689.094238</td>
<td class="text-right">3292.006836</td>
<td class="text-right">2390.899170</td>
<td class="text-right">6230.407715</td>
<td class="text-right">1930.711670</td>
<td class="text-right">1451.472778</td>
<td class="text-right">2083.847168</td>
<td class="text-right">1289.194824</td>
<td class="text-right">1380.650146</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">2794.364746</td>
<td class="text-right">5706.733887</td>
<td class="text-right">2287.560303</td>
<td class="text-right">3041.490723</td>
<td class="text-right">2482.794189</td>
<td class="text-right">3858.045654</td>
<td class="text-right">2195.243896</td>
<td class="text-right">2333.582764</td>
<td class="text-right">2728.599365</td>
<td class="text-right">2198.640869</td>
</tr>

<tr>
<td class="text-right">16383</td>
<td class="text-right">2240.335205</td>
<td class="text-right">1743.910645</td>
<td class="text-right">3327.093018</td>
<td class="text-right">2357.319092</td>
<td class="text-right">5435.189453</td>
<td class="text-right">1860.456299</td>
<td class="text-right">1333.890869</td>
<td class="text-right">2038.945801</td>
<td class="text-right">1358.094727</td>
<td class="text-right">1312.259766</td>
<td class="text-left">&#x2026;</td>
<td class="text-right">2627.845703</td>
<td class="text-right">5518.034668</td>
<td class="text-right">2491.838867</td>
<td class="text-right">2519.055176</td>
<td class="text-right">3319.664062</td>
<td class="text-right">3653.108398</td>
<td class="text-right">3334.266846</td>
<td class="text-right">2495.438721</td>
<td class="text-right">2713.831055</td>
<td class="text-right">2330.221436</td>
</tr>
</tbody>
</table>

<p>
16384 rows × 4800 columns
</p>
</details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #268bd2;">train_ntot</span> = <span style="color: #7a4f7e;">train_labbool</span>.<span style="color: #43783f;">size</span>
<span style="color: #268bd2;">train_npos</span> = <span style="color: #7a4f7e;">train_labbool</span>.<span style="color: #7a4f7e;">sum</span>().<span style="color: #7a4f7e;">sum</span>()
<span style="color: #268bd2;">train_nneg</span> = <span style="color: #513f78;">train_ntot</span> - <span style="color: #707e4f;">train_npos</span>
<span style="color: #268bd2;">train_perc</span> = <span style="color: #707e4f;">train_npos</span> / <span style="color: #513f78;">train_ntot</span>

<span style="color: #268bd2;">val_ntot</span> = <span style="color: #784437;">val_labbool</span>.<span style="color: #43783f;">size</span>
<span style="color: #268bd2;">val_npos</span> = <span style="color: #784437;">val_labbool</span>.<span style="color: #7a4f7e;">sum</span>().<span style="color: #7a4f7e;">sum</span>()
<span style="color: #268bd2;">val_nneg</span> = <span style="color: #707e4f;">val_ntot</span> - <span style="color: #707e4f;">val_npos</span>
<span style="color: #268bd2;">val_perc</span> = <span style="color: #707e4f;">val_npos</span> / <span style="color: #707e4f;">val_ntot</span>

<span style="color: #268bd2;">test_ntot</span> = <span style="color: #784437;">test_labbool</span>.<span style="color: #43783f;">size</span>
<span style="color: #268bd2;">test_npos</span> = <span style="color: #784437;">test_labbool</span>.<span style="color: #7a4f7e;">sum</span>().<span style="color: #7a4f7e;">sum</span>()
<span style="color: #268bd2;">test_nneg</span> = <span style="color: #7e544f;">test_ntot</span> - <span style="color: #43783f;">test_npos</span>
<span style="color: #268bd2;">test_perc</span> = <span style="color: #43783f;">test_npos</span> / <span style="color: #7e544f;">test_ntot</span>

<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #43783f;">f</span><span style="color: #2aa198;">'Total N train: </span><span style="color: #268bd2;">{train_ntot}</span><span style="color: #2aa198;">, N pos train: </span><span style="color: #268bd2;">{train_npos}</span><span style="color: #2aa198;">, N neg train: </span><span style="color: #268bd2;">{train_nneg}</span><span style="color: #2aa198;">, Percent of pos: </span><span style="color: #268bd2;">{train_perc:.2%}</span><span style="color: #2aa198;">'</span>)
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #43783f;">f</span><span style="color: #2aa198;">'Total N val: </span><span style="color: #268bd2;">{val_ntot}</span><span style="color: #2aa198;">, N pos val: </span><span style="color: #268bd2;">{val_npos}</span><span style="color: #2aa198;">, N neg val: </span><span style="color: #268bd2;">{val_nneg}</span><span style="color: #2aa198;">, Percent of pos: </span><span style="color: #268bd2;">{val_perc:.2%}</span><span style="color: #2aa198;">'</span>)
<span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #43783f;">f</span><span style="color: #2aa198;">'Total N test: </span><span style="color: #268bd2;">{test_ntot}</span><span style="color: #2aa198;">, N pos test: </span><span style="color: #268bd2;">{test_npos}</span><span style="color: #2aa198;">, N neg test: </span><span style="color: #268bd2;">{test_nneg}</span><span style="color: #2aa198;">, Percent of pos: </span><span style="color: #268bd2;">{test_perc:.2%}</span><span style="color: #2aa198;">'</span>)

</pre>
</div>

<pre class="example">
Total N train: 78643200, N pos train: 11969767, N neg train: 66673433, Percent of pos: 15.22%
Total N val: 19660800, N pos val: 3162854, N neg val: 16497946, Percent of pos: 16.09%
Total N test: 49152000, N pos test: 7556233, N neg test: 41595767, Percent of pos: 15.37%
</pre>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-1-6" class="outline-4">
<h4 id="sec-2-1-6"><span class="section-number-4">2.1.6</span> plots of the simulated traces by diffusion rate</h4>
<div class="outline-text-4" id="text-2-1-6">
<ul class="org-ul">
<li>This is the plotting code:
<details>
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">import</span> <span style="color: #37785e;">matplotlib</span>.<span style="color: #4f7e67;">pyplot</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #4f7e67;">plt</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #4f5c7e;">numpy</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #707e4f;">np</span>
<span style="color: #859900; font-weight: bold;">import</span> <span style="color: #5e7837;">pandas</span> <span style="color: #859900; font-weight: bold;">as</span> <span style="color: #783778;">pd</span>

<span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">plot_traces_by_diffrates</span>(<span style="color: #783f5a;">ntraces</span>, <span style="color: #78683f;">col_per_example</span>, <span style="color: #7e544f;">diffrate_of_interest</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #707e4f;">data_label_array</span>, <span style="color: #374478;">experiment_params</span>, <span style="color: #78683f;">artifact</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">"""A plot to examine simulated traces via</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   </span><span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">  fluotracify.simulations.simulate_trace_with_artifacts</span>

<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   Parameters</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   ----------</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   ntraces : int</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   </span><span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   The number of traces you want to plot. It determines the size of the</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   </span><span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   plot as well, where columns are fixed at 6 and depending on ntraces</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   </span><span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   and col_per_example the number of rows is determined.</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   col_per_example : int</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   </span><span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   Number of columns per example, first column being a trace, and then</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   </span><span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   one or multiple labels</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   diffrate_of_interest : float</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   </span><span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   diffusion rate used to simulate the traces of interest</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   data_label_array : dict of pandas DataFrames</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   </span><span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   Contains one key per column in each simulated example. E.g. if the</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   </span><span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   simulated features comes with two labels, the key '0' will be the</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   </span><span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   array with the features, '1' will be the array with label A and</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   </span><span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   '2' will be the array with label B.</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   experiment_params : pandas DataFrame</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   </span><span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   Contains metadata of the files</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   artifact : {0, 1, 2, 3}</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   </span><span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   0 = no artifact, 1 = bright clusters, 2 = detector dropout,</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   </span><span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   3 = photobleaching</span>

<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   Returns</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   -------</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   Plot of fluorescence traces and labels from their simulations</span>
<span style="color: #2aa198; background-color: #eee8d5;"> </span><span style="color: #2aa198;">   """</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">drates</span> = <span style="color: #374478;">experiment_params</span>.<span style="color: #783778;">loc</span>[
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'diffusion rate of molecules in micrometer^2 / s'</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># get indices of diffusion rates of interest</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">dindices</span> = <span style="color: #783778;">drates</span>.<span style="color: #43783f;">index</span>.<span style="color: #707e4f;">where</span>(<span style="color: #783778;">drates</span> == <span style="color: #657b83; font-weight: bold;">str</span>(<span style="color: #7e544f;">diffrate_of_interest</span>))
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">dindices</span> = <span style="color: #5e7837;">dindices</span>.<span style="color: #513f78;">dropna</span>().<span style="color: #374478;">astype</span>(<span style="color: #657b83; font-weight: bold;">int</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># get indices of first of each of the 100 traces per file as an example</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">tindices</span> = <span style="color: #5e7837;">dindices</span> * 100
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #268bd2;">artifact</span> == <span style="color: #268bd2;">1</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">nclusts</span> = <span style="color: #374478;">experiment_params</span>.<span style="color: #783778;">loc</span>[<span style="color: #2aa198;">'number of slow clusters'</span>][<span style="color: #5e7837;">dindices</span>]
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">dclusts</span> = <span style="color: #374478;">experiment_params</span>.<span style="color: #783778;">loc</span>[
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #2aa198;">'diffusion rate of clusters in micrometer^2 / s'</span>][<span style="color: #5e7837;">dindices</span>]

<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">cols</span> = 6
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">rows</span> = <span style="color: #657b83; font-weight: bold;">int</span>(<span style="color: #783f5a;">ntraces</span> // (<span style="color: #707e4f;">cols</span> / <span style="color: #78683f;">col_per_example</span>) +
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  (<span style="color: #783f5a;">ntraces</span> % (<span style="color: #707e4f;">cols</span> / <span style="color: #78683f;">col_per_example</span>) &gt; 0))
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># share y axis only if col_per_example is 1</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">sharey</span> = <span style="color: #268bd2;">col_per_example</span> == 1

<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">fig</span>, <span style="color: #268bd2;">ax</span> = <span style="color: #4f7e67;">plt</span>.<span style="color: #7e544f;">subplots</span>(<span style="color: #43783f;">rows</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #707e4f;">cols</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #784437;">figsize</span>=(<span style="color: #707e4f;">cols</span> * 4, <span style="color: #43783f;">rows</span> * 4),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #3f7178;">sharex</span>=<span style="color: #859900; font-weight: bold;">True</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #783778;">sharey</span>=<span style="color: #783778;">sharey</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">fig</span>.<span style="color: #784437;">add_subplot</span>(111, <span style="color: #707e4f;">frameon</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># hide tick and tick label of the big axes</span>
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #374478;">tick_params</span>(<span style="color: #783778;">labelcolor</span>=<span style="color: #2aa198;">'none'</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783f5a;">top</span>=<span style="color: #859900; font-weight: bold;">False</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783f5a;">bottom</span>=<span style="color: #859900; font-weight: bold;">False</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #43783f;">left</span>=<span style="color: #859900; font-weight: bold;">False</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783f5a;">right</span>=<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #513f78;">grid</span>(<span style="color: #859900; font-weight: bold;">False</span>)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #783f5a;">xlabel</span>(<span style="color: #2aa198;">"time steps in $ms$"</span>, <span style="color: #7a4f7e;">fontsize</span>=20)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #707e4f;">ylabel</span>(<span style="color: #2aa198;">'fluorescence intensity in $a.u.$'</span>, <span style="color: #374478;">labelpad</span>=20, <span style="color: #7a4f7e;">fontsize</span>=20)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">suptitle_height</span> = 1 - (<span style="color: #4f7e67;">fig</span>.<span style="color: #37785e;">get_figheight</span>() * 0.004)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #4f5c7e;">suptitle</span>(<span style="color: #783f5a;">t</span>=<span style="color: #2aa198;">'Simulated Fluorescence Traces With D = {} '</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #2aa198;">'$\\frac{{\mu m^2}}{{s}}$'</span>.<span style="color: #78683f;">format</span>(<span style="color: #7e544f;">diffrate_of_interest</span>),
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #513f78;">y</span>=<span style="color: #707e4f;">suptitle_height</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span><span style="color: #7a4f7e;">fontsize</span>=20)
<span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">traceid</span> = 0
<span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #78683f;">idx</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">range</span>(<span style="color: #43783f;">rows</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #37785e;">jdx</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">range</span>(0, <span style="color: #707e4f;">cols</span>, <span style="color: #78683f;">col_per_example</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># first plot the trace</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">try</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">ax</span>[<span style="color: #78683f;">idx</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #37785e;">jdx</span>].<span style="color: #43783f;">plot</span>(<span style="color: #707e4f;">data_label_array</span>[<span style="color: #2aa198;">'0'</span>].<span style="color: #4f5c7e;">iloc</span>[:, <span style="color: #4f5c7e;">tindices</span>[<span style="color: #783f5a;">traceid</span>]])
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">except</span> <span style="color: #657b83; font-weight: bold;">IndexError</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">break</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #268bd2;">artifact</span> == <span style="color: #268bd2;">1</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">ax</span>[<span style="color: #78683f;">idx</span>, <span style="color: #37785e;">jdx</span>].<span style="color: #783f5a;">set_title</span>(<span style="color: #2aa198;">'trace {} ({} clusters, $D_c$ = '</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #2aa198;">'{} $\\frac{{\mu m^2}}{{s}}$)'</span>.<span style="color: #78683f;">format</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #783f5a;">traceid</span> + 1, <span style="color: #783778;">nclusts</span>.<span style="color: #4f5c7e;">iloc</span>[<span style="color: #783f5a;">traceid</span>],
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>  <span style="color: #3f7178;">dclusts</span>.<span style="color: #4f5c7e;">iloc</span>[<span style="color: #783f5a;">traceid</span>]))
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">else</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">ax</span>[<span style="color: #78683f;">idx</span>, <span style="color: #37785e;">jdx</span>].<span style="color: #783f5a;">set_title</span>(<span style="color: #2aa198;">'trace {}'</span>.<span style="color: #78683f;">format</span>(<span style="color: #783f5a;">traceid</span> + 1))
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">ax</span>[<span style="color: #78683f;">idx</span>, <span style="color: #37785e;">jdx</span>].<span style="color: #783f5a;">set_ylim</span>(0, 12000)
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #859900; font-weight: bold;">for</span> <span style="color: #37785e;">kdx</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #657b83; font-weight: bold;">range</span>(1, <span style="color: #78683f;">col_per_example</span>):
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #93a1a1;"># then plot the labels, if they are given</span>
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">ax</span>[<span style="color: #78683f;">idx</span>, <span style="color: #37785e;">jdx</span> + <span style="color: #37785e;">kdx</span>].<span style="color: #43783f;">plot</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #707e4f;">data_label_array</span>[<span style="color: #2aa198;">'{}'</span>.<span style="color: #78683f;">format</span>(<span style="color: #37785e;">kdx</span>)].<span style="color: #4f5c7e;">iloc</span>[:,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #4f5c7e;">tindices</span>[<span style="color: #783f5a;">traceid</span>]])
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">ax</span>[<span style="color: #78683f;">idx</span>, <span style="color: #37785e;">jdx</span> + <span style="color: #37785e;">kdx</span>].<span style="color: #783f5a;">set_title</span>(<span style="color: #2aa198;">'label {}, type {}'</span>.<span style="color: #78683f;">format</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783f5a;">traceid</span> + 1, <span style="color: #37785e;">kdx</span>))
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #268bd2;">traceid</span> += 1
<span style="background-color: #eee8d5;"> </span>   <span style="color: #4f7e67;">plt</span>.<span style="color: #374478;">show</span>()

</pre>
</div>
</details>
</li>

<li>the actual plotting function:
<div class="org-src-container">

<pre class="src src-jupyter-python"><span style="color: #859900; font-weight: bold;">for</span> <span style="color: #3f7178;">drate</span> <span style="color: #859900; font-weight: bold;">in</span> <span style="color: #268bd2;">d_mol_arr</span>:
<span style="background-color: #eee8d5;"> </span>   <span style="color: #37785e;">ps</span>.<span style="color: #783778;">plot_traces_by_diffrates</span>(
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #783f5a;">ntraces</span>=10,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">col_per_example</span>=<span style="color: #78683f;">col_per_example</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #7e544f;">diffrate_of_interest</span>=<span style="color: #3f7178;">drate</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #707e4f;">data_label_array</span>=<span style="color: #7e544f;">out</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #374478;">experiment_params</span>=<span style="color: #374478;">experiment_params</span>,
<span style="background-color: #eee8d5;"> </span>   <span style="background-color: #eee8d5;"> </span>   <span style="color: #78683f;">artifact</span>=1)
</pre>
</div>

<p>
50:    <img src="./4683d391bdba74b0c9460a5e968d1135995e4a81.png" class="img-responsive" alt="4683d391bdba74b0c9460a5e968d1135995e4a81.png">
10:    <img src="./963615ec0ac613d53e4c4b11d9b6811c6e38a7f1.png" class="img-responsive" alt="963615ec0ac613d53e4c4b11d9b6811c6e38a7f1.png">
3:     <img src="./f2667c8e27f421f2a47c7f307598b32a6cde5c5f.png" class="img-responsive" alt="f2667c8e27f421f2a47c7f307598b32a6cde5c5f.png">
1:     <img src="./6a89c85b30e41cbb67c477d10e7cc2239e02f081.png" class="img-responsive" alt="6a89c85b30e41cbb67c477d10e7cc2239e02f081.png">
0.6:   <img src="./74f0fbc639df415b140d785e8bf3aa23213c31a4.png" class="img-responsive" alt="74f0fbc639df415b140d785e8bf3aa23213c31a4.png">
0.4:   <img src="./c5d18053e9befd64e8bfc71d4e5e260b2f5606e7.png" class="img-responsive" alt="c5d18053e9befd64e8bfc71d4e5e260b2f5606e7.png">
0.2:   <img src="./ea43e8d0a7d8075efe27429c44e0ea99df1221ac.png" class="img-responsive" alt="ea43e8d0a7d8075efe27429c44e0ea99df1221ac.png">
0.1:   <img src="./727100134d52d8d8967e1cbb2efda097171f06f0.png" class="img-responsive" alt="727100134d52d8d8967e1cbb2efda097171f06f0.png">
0.08:  <img src="./89250a71f8711657f2b8138e2323802a1edea8af.png" class="img-responsive" alt="89250a71f8711657f2b8138e2323802a1edea8af.png">
0.069: <img src="./17e9c4bfb65d91e8100cd9131cabbdb1f35e62e1.png" class="img-responsive" alt="17e9c4bfb65d91e8100cd9131cabbdb1f35e62e1.png">
</p>
</li>

<li>open the plots with <code>C-c C-o</code> or toggle inline display with <code>C-c C-x C-v</code>
or view them by themselves in the folder
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-1-7" class="outline-4">
<h4 id="sec-2-1-7"><span class="section-number-4">2.1.7</span> Learnings</h4>
<div class="outline-text-4" id="text-2-1-7">
<ul class="org-ul">
<li>next time: save output of simulation function not to terminal, but to .txt
file.
</li>
</ul>
</div>
</div>
</div>
</div>
</div></div></div>
<footer id="postamble" class="">
<div><p class="author">Author: Alexander Seltmann</p>
<p class="date">Created: 2022-08-22 Mo 16:17</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 28.1 (<a href="http://orgmode.org">Org-mode</a> 9.5.4)</p>
</div>
</footer>
</body>
</html>
